/*! For license information please see pgnviewerext.bundle.js.LICENSE.txt */
var CT=function(e){function t(t){for(var n,r,i=t[0],a=t[1],s=0,c=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&c.push(o[r][0]),o[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(l&&l(t);c.length;)c.shift()()}var n={},r={0:0},o={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var o=e+".css",a=i.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===o||l===a))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var d;if((l=(d=u[c]).getAttribute("data-href"))===o||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[e],h.parentNode.removeChild(h),n(i)},h.href=a,0!==h.href.indexOf(window.location.origin+"/")&&(h.crossOrigin="anonymous"),document.getElementsByTagName("head")[0].appendChild(h)})).then((function(){r[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+({1:"piece-style-alpha-pieces-css",2:"piece-style-blindfold1-pieces-css",3:"piece-style-blindfold2-pieces-css",4:"piece-style-blindfold3-pieces-css",5:"piece-style-blindfold4-pieces-css",6:"piece-style-case-pieces-css",7:"piece-style-celtic-pieces-css",8:"piece-style-eyes-pieces-css",9:"piece-style-fantasy-pieces-css",10:"piece-style-goodcomp-gradient-pieces-css",11:"piece-style-goodcomp-pieces-css",12:"piece-style-kingdom-pieces-css",13:"piece-style-kosal-pieces-css",14:"piece-style-leipzig-pieces-css",15:"piece-style-maya-pieces-css",16:"piece-style-merida-pieces-css",17:"piece-style-skulls-pieces-css",18:"piece-style-spatial-pieces-css",19:"piece-style-wiki-pieces-css"}[e]||e)+".bundle.js"}(e),0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous");var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://c1a.chesstempo.com/pgnviewer/v1/",i.oe=function(e){throw console.error(e),e};var a=window.webpackJsonpCT=window.webpackJsonpCT||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=s;return i(i.s=195)}([function(e,t,n){"use strict";var r=function(){function e(t){if(babelHelpers.classCallCheck(this,e),this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=Object.assign({},this.defaults,t),this.textdomain(this.options.domain),t.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+t.domain+"`");this.pluralCache={}}return babelHelpers.createClass(e,[{key:"getPluralFormFunc",value:function(e){var t=this.pluralCache;if(!t[e]){var n=e||"nplurals=2; plural=(n != 1);";if(new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m").test(n)){/;\s*$/.test(n)||(n=n.concat(";"));var r="var plural; var nplurals; "+n+" return (plural === true ? 1 : plural ? plural : 0);";t[e]=new Function("n",r)}else t[e]=function(){return 0}}return t[e]}},{key:"textdomain",value:function(e){return e?(this._textdomain=e,e):this._textdomain}},{key:"gettext",value:function(e){return this.dcnpgettext.call(this,undef,undef,e)}},{key:"dgettext",value:function(e,t){return this.dcnpgettext.call(this,e,undef,t)}},{key:"dcgettext",value:function(e,t){return this.dcnpgettext.call(this,e,undef,t)}},{key:"ngettext",value:function(e,t,n){return this.dcnpgettext.call(this,undef,undef,e,t,n)}},{key:"dngettext",value:function(e,t,n,r){return this.dcnpgettext.call(this,e,undef,t,n,r)}},{key:"dcngettext",value:function(e,t,n,r){return this.dcnpgettext.call(this,e,undef,t,n,r)}},{key:"pgettext",value:function(e,t){return this.dcnpgettext.call(this,undef,e,t)}},{key:"dpgettext",value:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)}},{key:"dcpgettext",value:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)}},{key:"npgettext",value:function(e,t,n,r){return this.dcnpgettext.call(this,undef,e,t,n,r)}},{key:"dnpgettext",value:function(e,t,n,r,o){return this.dcnpgettext.call(this,e,t,n,r,o)}},{key:"dcnpgettext",value:function(t,n,r,o,i){var a;if(o=o||r,t=t||this._textdomain,!this.options)return(a=new e).dcnpgettext.call(a,void 0,void 0,r,o,i);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[t])throw new Error("Domain `"+t+"` was not found.");if(!this.options.locale_data[t][""])throw new Error("No locale meta information provided.");if(!r)return"";var s,c,l,u=n?n+e.context_delimiter+r:r,d=this.options.locale_data,h=d[t],p=(d.messages||this.defaults.locale_data.messages)[""],f=h[""].plural_forms||h[""]["Plural-Forms"]||h[""]["plural-forms"]||p.plural_forms||p["Plural-Forms"]||p["plural-forms"];if(void 0===i)l=0;else{if("number"!=typeof i&&(i=parseInt(i,10),isNaN(i)))throw new Error("The number that was passed in is not a number.");l=this.getPluralFormFunc(f)(i)}if(!h)throw new Error("No domain named `"+t+"` could be found.");return!(s=h[u])||l>s.length?(this.options.missing_key_callback&&this.options.missing_key_callback(u,t),c=[r,o],!0===this.options.debug&&console.log(c[l]),c[l]):(c=s[l])||(c=[r,o])[l]}}]),e}();r.context_delimiter="";var o=n(70),i=n.n(o),a=n(11);n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return v}));var s=new a.a("i18n"),c=null;"undefined"!=typeof ctJsonLocaleData?(ctJsonLocaleData.locale_data.messages[""].lang,c=ctJsonLocaleData,s.log({ctJsonLocaleData:c.locale_data.messages[""]},"LOCALE ctJsonLocaleData found")):(c={domain:"messages",locale_data:{messages:{"":{domain:"messages",plural_forms:"nplurals=2; plural=(n != 1);",lang:"en_US"}}}},s.log("LOCALE:no locale data found, using dummy us data"));var l=new r(c);function u(e,t){if(t)for(var n=0;n<t.length;n++){var r=new RegExp("{"+t[n][0]+"}","g"),o=t[n][1];o&&(o=f(o+"")),e=e.replace(r,o)}return e}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.subs=r.subs||[["COUNT",n]];var o=l.dcnpgettext("messages",r.context,e,t,n);return o||(o=n>1||0==n?t:e),r.subs?u(o,r.subs):o}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.dcnpgettext("messages",t.context,e);return t.subs?u(n,t.subs):n}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.context=e,h(t,n)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.context;return l.dcnpgettext("messages",n,e)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.context=e,f(t,n)}function m(e){if(null==e)return"";"string"==typeof e&&(e=new Date(e));var t=e.getMinutes();return t<10&&(t="0"+t),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+t}i.a.registerHelper("tr",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(e,t=t.hash)})),i.a.registerHelper("trhtml",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=t.hash,new i.a.SafeString(f(e,t))})),i.a.registerHelper("trplural",(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return d(e,t,n,r=r.hash)})),i.a.registerHelper("trsub",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(n=n.hash).subs=t,h(e,n)})),i.a.registerHelper("formatDate",m)},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}},function(e,t,n){"use strict";function r(e){this.content=e}n.r(t),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,i=o.find(e),a=o.content.slice();return-1==i?a.push(n||e,t):(a[i+1]=t,n&&(a[i]=n)),new r(a)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var o=this.remove(t),i=o.content.slice(),a=o.find(e);return i.splice(-1==a?i.length:a,0,t,n),new r(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var o=r;n.d(t,"ContentMatch",(function(){return N})),n.d(t,"DOMParser",(function(){return ee})),n.d(t,"DOMSerializer",(function(){return he})),n.d(t,"Fragment",(function(){return i})),n.d(t,"Mark",(function(){return u})),n.d(t,"MarkType",(function(){return J})),n.d(t,"Node",(function(){return x})),n.d(t,"NodeRange",(function(){return E})),n.d(t,"NodeType",(function(){return K})),n.d(t,"ReplaceError",(function(){return d})),n.d(t,"ResolvedPos",(function(){return C})),n.d(t,"Schema",(function(){return Z})),n.d(t,"Slice",(function(){return h}));var i=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},a={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};i.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<t;i++){var s=this.content[i],c=a+s.nodeSize;if(c>e&&!1!==n(s,r+a,o,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=c}},i.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},i.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){a.isText?(o+=a.text.slice(Math.max(e,s)-s,t-s),i=!n):a.isLeaf&&r?(o+=r,i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o},i.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)},i.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,a=0;a<t;o++){var s=this.content[o],c=a+s.nodeSize;c>e&&((a<e||c>t)&&(s=s.isText?s.cut(Math.max(0,e-a),Math.min(s.text.length,t-a)):s.cut(Math.max(0,e-a-1),Math.min(s.content.size,t-a-1))),n.push(s),r+=s.nodeSize),a=c}return new i(n,r)},i.prototype.cutByIndex=function(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))},i.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)},i.prototype.addToStart=function(e){return new i([e].concat(this.content),this.size+e.nodeSize)},i.prototype.addToEnd=function(e){return new i(this.content.concat(e),this.size+e.nodeSize)},i.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},a.firstChild.get=function(){return this.content.length?this.content[0]:null},a.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},a.childCount.get=function(){return this.content.length},i.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},i.prototype.maybeChild=function(e){return this.content[e]},i.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},i.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),a=n.child(o);if(i!=a){if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(var s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){var c=e(i.content,a.content,r+1);if(null!=c)return c}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},i.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,a=n.childCount;;){if(0==i||0==a)return i==a?null:{a:r,b:o};var s=t.child(--i),c=n.child(--a),l=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:r,b:o};if(s.isText&&s.text!=c.text){for(var u=0,d=Math.min(s.text.length,c.text.length);u<d&&s.text[s.text.length-u-1]==c.text[c.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(s.content.size||c.content.size){var h=e(s.content,c.content,r-1,o-1);if(h)return h}r-=l,o-=l}else r-=l,o-=l}}(this,e,t,n)},i.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},i.fromJSON=function(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))},i.fromArray=function(e){if(!e.length)return i.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new i(t||e,n)},i.from=function(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(i.prototype,a);var s={index:0,offset:0};function c(e,t){return s.index=e,s.offset=t,s}function l(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!l(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t&&l(e[o],t[o])))return!1;for(var i in t)if(!(i in e))return!1}return!0}i.empty=new i([],0);var u=function(e,t){this.type=e,this.attrs=t};function d(e){var t=Error.call(this,e);return t.__proto__=d.prototype,t}u.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},u.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},u.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},u.prototype.eq=function(e){return this==e||this.type==e.type&&l(this.attrs,e.attrs)},u.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},u.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},u.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},u.setFrom=function(e){if(!e||0==e.length)return u.none;if(e instanceof u)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},u.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var h=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},p={size:{configurable:!0}};function f(e,t,n){if(n.openStart>e.depth)throw new d("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new d("Inconsistent open depths");return function e(t,n,r,o){var a=t.index(o),s=t.node(o);if(a==n.index(o)&&o<t.depth-r.openStart){var c=e(t,n,r,o+1);return s.copy(s.content.replaceChild(a,c))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var l=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(i.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),u=l.start,d=l.end;return _(s,function e(t,n,r,o,a){var s=t.depth>a&&m(t,n,a+1),c=o.depth>a&&m(r,o,a+1),l=[];y(null,t,a,l),s&&c&&n.index(a)==r.index(a)?(v(s,c),g(_(s,e(t,n,r,o,a+1)),l)):(s&&g(_(s,b(t,n,a+1)),l),y(n,r,a,l),c&&g(_(c,b(r,o,a+1)),l));return y(o,null,a,l),new i(l)}(t,u,d,n,o))}var h=t.parent,p=h.content;return _(h,p.cut(0,t.parentOffset).append(r.content).append(p.cut(n.parentOffset)))}return _(s,b(t,n,o))}(e,t,n,0)}function v(e,t){if(!t.type.compatibleContent(e.type))throw new d("Cannot join "+t.type.name+" onto "+e.type.name)}function m(e,t,n){var r=e.node(n);return v(r,t.node(n)),r}function g(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function y(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(g(e.nodeAfter,r),i++));for(var s=i;s<a;s++)g(o.child(s),r);t&&t.depth==n&&t.textOffset&&g(t.nodeBefore,r)}function _(e,t){if(!e.type.validContent(t))throw new d("Invalid content for node "+e.type.name);return e.copy(t)}function b(e,t,n){var r=[];(y(null,e,n,r),e.depth>n)&&g(_(m(e,t,n+1),b(e,t,n+1)),r);return y(t,null,n,r),new i(r)}p.size.get=function(){return this.content.size-this.openStart-this.openEnd},h.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n),a=i.index,s=i.offset,c=t.maybeChild(a);if(s==n||c.isText)return o&&!o.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var l=e(c.content,n-s-1,r);return l&&t.replaceChild(a,c.copy(l))}(this.content,e+this.openStart,t,null);return n&&new h(n,this.openStart,this.openEnd)},h.prototype.removeBetween=function(e,t){return new h(function e(t,n,r){var o=t.findIndex(n),i=o.index,a=o.offset,s=t.maybeChild(i),c=t.findIndex(r),l=c.index,u=c.offset;if(a==n||s.isText){if(u!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},h.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},h.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},h.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},h.fromJSON=function(e,t){if(!t)return h.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new h(i.fromJSON(e,t.content),n,r)},h.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new h(e,n,r)},Object.defineProperties(h.prototype,p),h.empty=new h(i.empty,0,0);var C=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},w={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};C.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},w.parent.get=function(){return this.node(this.depth)},w.doc.get=function(){return this.node(0)},C.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},C.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},C.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},C.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},C.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},C.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},C.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},w.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},w.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},w.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},C.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r},C.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return u.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},C.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},C.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},C.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new E(this,e,n)},C.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},C.prototype.max=function(e){return e.pos>this.pos?e:this},C.prototype.min=function(e){return e.pos<this.pos?e:this},C.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},C.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var a=i.content.findIndex(o),s=a.index,c=a.offset,l=o-c;if(n.push(i,s,r+c),!l)break;if((i=i.child(s)).isText)break;o=l-1,r+=c+1}return new C(t,n,o)},C.resolveCached=function(e,t){for(var n=0;n<S.length;n++){var r=S[n];if(r.pos==t&&r.doc==e)return r}var o=S[k]=C.resolve(e,t);return k=(k+1)%A,o},Object.defineProperties(C.prototype,w);var S=[],k=0,A=12,E=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},T={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};T.start.get=function(){return this.$from.before(this.depth+1)},T.end.get=function(){return this.$to.after(this.depth+1)},T.parent.get=function(){return this.$from.node(this.depth)},T.startIndex.get=function(){return this.$from.index(this.depth)},T.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(E.prototype,T);var O=Object.create(null),x=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||i.empty,this.marks=r||u.none},M={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};M.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},M.childCount.get=function(){return this.content.childCount},x.prototype.child=function(e){return this.content.child(e)},x.prototype.maybeChild=function(e){return this.content.maybeChild(e)},x.prototype.forEach=function(e){this.content.forEach(e)},x.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},x.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},M.textContent.get=function(){return this.textBetween(0,this.content.size,"")},x.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},M.firstChild.get=function(){return this.content.firstChild},M.lastChild.get=function(){return this.content.lastChild},x.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},x.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},x.prototype.hasMarkup=function(e,t,n){return this.type==e&&l(this.attrs,t||e.defaultAttrs||O)&&u.sameSet(this.marks,n||u.none)},x.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},x.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},x.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},x.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return h.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new h(s,r.depth-i,o.depth-i)},x.prototype.replace=function(e,t,n){return f(this.resolve(e),this.resolve(t),n)},x.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}},x.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},x.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},x.prototype.resolve=function(e){return C.resolveCached(this,e)},x.prototype.resolveNoCache=function(e){return C.resolve(this,e)},x.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},M.isBlock.get=function(){return this.type.isBlock},M.isTextblock.get=function(){return this.type.isTextblock},M.inlineContent.get=function(){return this.type.inlineContent},M.isInline.get=function(){return this.type.isInline},M.isText.get=function(){return this.type.isText},M.isLeaf.get=function(){return this.type.isLeaf},M.isAtom.get=function(){return this.type.isAtom},x.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),L(this.marks,e)},x.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},x.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var a=this.contentMatchAt(e).matchFragment(n,r,o),s=a&&a.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},x.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},x.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},x.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(e){return e.check()}))},x.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},x.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=i.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(x.prototype,M);var I=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):L(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(x);function L(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var N=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},R={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};N.parse=function(e,t){var n=new D(e,t);if(null==n.next)return N.empty;var r=F(n);n.next&&n.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),a=i>-1&&o[i+1];z(e,r).forEach((function(e){a||o.push(n,a=[]),-1==a.indexOf(e)&&a.push(e)}))}}))}));for(var i=t[r.join(",")]=new N(r.indexOf(e.length-1)>-1),a=0;a<o.length;a+=2){var s=o[a+1].sort(V);i.next.push(o[a],t[s.join(",")]||n(s))}return i}(z(e,0))}(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=e(t.exprs[a],i);if(a==t.exprs.length-1)return s;o(s,i=n())}else{if("star"==t.type){var c=n();return r(i,c),o(e(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(e(t.expr,i),l),o(e(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,d=0;d<t.min;d++){var h=n();o(e(t.expr,u),h),u=h}if(-1==t.max)o(e(t.expr,u),u);else for(var p=t.min;p<t.max;p++){var f=n();r(u,f),o(e(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(i,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var c=o.next[s],l=o.next[s+1];a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},N.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},N.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},R.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},R.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},N.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},N.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function o(a,s){var c=a.matchFragment(e,n);if(c&&(!t||c.validEnd))return i.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<a.next.length;l+=2){var u=a.next[l],d=a.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var h=o(d,s.concat(u));if(h)return h}}}(this,[])},N.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},N.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var c=o.next[s];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!o.next[s+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},R.edgeCount.get=function(){return this.next.length>>1},N.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},N.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(N.prototype,R),N.empty=new N(!0);var D=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},P={next:{configurable:!0}};function F(e){var t=[];do{t.push(H(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function H(e){var t=[];do{t.push(B(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function B(e){for(var t=function(e){if(e.eat("(")){var t=F(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.groups.indexOf(t)>-1&&o.push(a)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=q(e,t)}return t}function j(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function q(e,t){var n=j(e),r=n;return e.eat(",")&&(r="}"!=e.next?j(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function V(e,t){return t-e}function z(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,c=a.to;s||-1!=n.indexOf(c)||t(c)}}(t),n.sort(V)}function G(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function W(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function U(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Y(e[n]);return t}P.next.get=function(){return this.tokens[this.pos]},D.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},D.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(D.prototype,P);var K=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=U(n.attrs),this.defaultAttrs=G(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},$={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};$.isInline.get=function(){return!this.isBlock},$.isTextblock.get=function(){return this.isBlock&&this.inlineContent},$.isLeaf.get=function(){return this.contentMatch==N.empty},$.isAtom.get=function(){return this.isLeaf||this.spec.atom},K.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},K.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},K.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:W(this.attrs,e)},K.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new x(this,this.computeAttrs(e),i.from(t),u.setFrom(n))},K.prototype.createChecked=function(e,t,n){if(t=i.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new x(this,this.computeAttrs(e),t,u.setFrom(n))},K.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=i.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(i.empty,!0);return o?new x(this,e,t.append(o),u.setFrom(n)):null},K.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},K.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},K.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},K.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:u.empty:e},K.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new K(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(K.prototype,$);var Y=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},X={isRequired:{configurable:!0}};X.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Y.prototype,X);var J=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=U(r.attrs),this.rank=t,this.excluded=null;var o=G(this.attrs);this.instance=o&&new u(this,o)};J.prototype.create=function(e){return!e&&this.instance?this.instance:new u(this,W(this.attrs,e))},J.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new J(e,r++,t,o)})),n},J.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},J.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},J.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Z=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=o.from(e.nodes),this.spec.marks=o.from(e.marks),this.nodes=K.compile(this.spec.nodes,this),this.marks=J.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],a=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[a]||(n[a]=N.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==s?null:s?Q(this,s.split(" ")):""!=s&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:Q(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Q(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var c=e.marks[s];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Z.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof K))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Z.prototype.text=function(e,t){var n=this.nodes.text;return new I(n,n.defaultAttrs,e,u.setFrom(t))},Z.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Z.prototype.nodeFromJSON=function(e){return x.fromJSON(this,e)},Z.prototype.markFromJSON=function(e){return u.fromJSON(this,e)},Z.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var ee=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};ee.prototype.parse=function(e,t){void 0===t&&(t={});var n=new ae(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},ee.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new ae(this,t,!0);return n.addAll(e,null,t.from,t.to),h.maxOpen(n.finish())},ee.prototype.matchTag=function(e,t){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ce(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(e);if(!1===o)continue;r.attrs=o}return r}}},ee.prototype.matchStyle=function(e,t,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},ee.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=le(e)),e.mark=t}))};for(var o in e.marks)r(o);var i;for(var a in e.nodes)i=void 0,(i=e.nodes[a].spec.parseDOM)&&i.forEach((function(e){n(e=le(e)),e.node=a}));return t},ee.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new ee(e,ee.schemaRules(e)))};var te={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ne={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},re={ol:!0,ul:!0};function oe(e){return(e?1:0)|("full"===e?2:0)}var ie=function(e,t,n,r,o,i,a){this.type=e,this.attrs=t,this.solid=o,this.match=i||(4&a?null:e.contentMatch),this.options=a,this.content=[],this.marks=n,this.activeMarks=u.none,this.pendingMarks=r,this.stashMarks=[]};ie.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(i.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ie.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=i.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},ie.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(this.stashMarks[t].type==e)return this.stashMarks.splice(t,1)[0]},ie.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];if((this.type?this.type.allowsMarkType(r.type):ue(r.type,e))&&!r.isInSet(this.activeMarks)){var o=de(r,this.activeMarks);o&&this.stashMarks.push(o),this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks)}}};var ae=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,o=t.topNode,i=oe(t.preserveWhitespace)|(n?4:0);r=o?new ie(o.type,o.attrs,u.none,u.none,!0,t.topMatch||o.type.contentMatch,i):new ie(n?null:e.schema.topNodeType,null,u.none,u.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},se={top:{configurable:!0},currentPos:{configurable:!0}};function ce(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function le(e){var t={};for(var n in e)t[n]=e[n];return t}function ue(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(e)){var i=[],a=function(e){i.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),o=r.type,s=r.next;if(o==t)return!0;if(i.indexOf(s)<0&&a(s))return!0}};return a(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function de(e,t){for(var n=0;n<t.length;n++)if(e.type==t[n].type)return t[n]}se.top.get=function(){return this.nodes[this.open]},ae.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},ae.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},ae.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();re.hasOwnProperty(t)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&re.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:ne.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,i=this.needsBlock;if(te.hasOwnProperty(t))r=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(e,n)},ae.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},ae.prototype.readStyles=function(e){for(var t=u.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t},ae.prototype.addElementByRule=function(e,t){var n,r,o,i=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return i.insertNode(e)}));else{var s=t.contentElement;"string"==typeof s?s=e.querySelector(s):"function"==typeof s&&(s=s(e)),s||(s=e),this.findAround(e,s,!0),this.addAll(s,n)}n&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},ae.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&te.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},ae.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0},ae.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},ae.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},ae.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:oe(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new ie(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},ae.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},ae.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ae.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},se.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},ae.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},ae.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},ae.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},ae.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},ae.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(a(e-1,s))return!0;return!1}var l=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;s--}return!0};return a(n.length-1,this.open)},ae.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},ae.prototype.addPendingMark=function(e){var t=de(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},ae.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var o=r.popFromStashMark(e.type);o&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(ae.prototype,se);var he=function(e,t){this.nodes=e||{},this.marks=t||{}};function pe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function fe(e){return e.document||window.document}he.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=fe(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,a=0;n<i.length&&a<e.marks.length;){var s=e.marks[a];if(r.marks[s.type.name]){if(!s.eq(i[n])||!1===s.type.spec.spanning)break;n+=2,a++}else a++}for(;n<i.length;)o=i.pop(),i.pop();for(;a<e.marks.length;){var c=e.marks[a++],l=r.serializeMark(c,e.isInline,t);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(e,t))})),n},he.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=he.renderSpec(fe(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},he.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},he.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&he.renderSpec(fe(n),r(e,t))},he.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,a=n?e.createElementNS(n,r):e.createElement(r),s=t[1],c=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s))for(var l in c=2,s)if(null!=s[l]){var u=l.indexOf(" ");u>0?a.setAttributeNS(l.slice(0,u),l.slice(u+1),s[l]):a.setAttribute(l,s[l])}for(var d=c;d<t.length;d++){var h=t[d];if(0===h){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var p=he.renderSpec(e,h,n),f=p.dom,v=p.contentDOM;if(a.appendChild(f),v){if(i)throw new RangeError("Multiple content holes");i=v}}return{dom:a,contentDOM:i}},he.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new he(this.nodesFromSchema(e),this.marksFromSchema(e)))},he.nodesFromSchema=function(e){var t=pe(e.nodes);return t.text||(t.text=function(e){return e.text}),t},he.marksFromSchema=function(e){return pe(e.marks)}},function(e,t,n){"use strict";n.r(t),n.d(t,"AllSelection",(function(){return p})),n.d(t,"EditorState",(function(){return w})),n.d(t,"NodeSelection",(function(){return d})),n.d(t,"Plugin",(function(){return A})),n.d(t,"PluginKey",(function(){return O})),n.d(t,"Selection",(function(){return a})),n.d(t,"SelectionRange",(function(){return c})),n.d(t,"TextSelection",(function(){return l})),n.d(t,"Transaction",(function(){return g}));var r=n(2),o=n(13),i=Object.create(null),a=function(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},s={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};s.anchor.get=function(){return this.$anchor.pos},s.head.get=function(){return this.$head.pos},s.from.get=function(){return this.$from.pos},s.to.get=function(){return this.$to.pos},s.$from.get=function(){return this.ranges[0].$from},s.$to.get=function(){return this.ranges[0].$to},s.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},a.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},a.prototype.replace=function(e,t){void 0===t&&(t=r.Slice.empty);for(var n=t.content.lastChild,o=null,i=0;i<t.openEnd;i++)o=n,n=n.lastChild;for(var a=e.steps.length,s=this.ranges,c=0;c<s.length;c++){var l=s[c],u=l.$from,d=l.$to,h=e.mapping.slice(a);e.replaceRange(h.map(u.pos),h.map(d.pos),c?r.Slice.empty:t),0==c&&m(e,a,(n?n.isInline:o&&o.isTextblock)?-1:1)}},a.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,c=e.mapping.slice(n),l=c.map(a.pos),u=c.map(s.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),m(e,n,t.isInline?-1:1))}},a.findFrom=function(e,t,n){var r=e.parent.inlineContent?new l(e):v(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?v(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):v(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},a.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new p(e.node(0))},a.atStart=function(e){return v(e,e,0,0,1)||new p(e)},a.atEnd=function(e){return v(e,e,e.content.size,e.childCount,-1)||new p(e)},a.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},a.jsonID=function(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},a.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(a.prototype,s),a.prototype.visible=!0;var c=function(e,t){this.$from=e,this.$to=t},l=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),e.prototype.replace.call(this,t,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new u(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var a=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!a)return e.near(r,o);r=a.$head}return n.parent.inlineContent||(0==i?n=r:(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0&&(n=r)),new t(n,r)},Object.defineProperties(t.prototype,n),t}(a);a.jsonID("text",l);var u=function(e,t){this.anchor=e,this.head=t};u.prototype.map=function(e){return new u(e.map(this.anchor),e.map(this.head))},u.prototype.resolve=function(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var d=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,a=o.pos,s=n.resolve(a);return i?e.near(s):new t(s)},t.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new h(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(a);d.prototype.visible=!1,a.jsonID("node",d);var h=function(e){this.anchor=e};h.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new u(r,r):new h(r)},h.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):a.near(t)};var p=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){t.delete(0,t.doc.content.size);var o=e.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return f},t}(a);a.jsonID("all",p);var f={map:function(){return this},resolve:function(e){return new p(e)}};function v(e,t,n,r,o,i){if(t.inlineContent)return l.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&d.isSelectable(s))return d.create(e,n-(o<0?s.nodeSize:0))}else{var c=v(e,s,n+o,o<0?s.childCount:0,o,i);if(c)return c}n+=s.nodeSize*o}}function m(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i,s=e.steps[r];if(s instanceof o.c||s instanceof o.b)e.mapping.maps[r].forEach((function(e,t,n,r){null==i&&(i=r)})),e.setSelection(a.near(e.doc.resolve(i),n))}}var g=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(o.d);function y(e,t){return t&&e?e.bind(t):e}var _=function(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)},b=[new _("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new _("selection",{init:function(e,t){return e.selection||a.atStart(t.doc)},apply:function(e){return e.selection}}),new _("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new _("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],C=function(e,t){var n=this;this.schema=e,this.fields=b.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new _(e.key,e.spec.state,e))}))},w=function(e){this.config=e},S={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};S.schema.get=function(){return this.config.schema},S.plugins.get=function(){return this.config.plugins},w.prototype.apply=function(e){return this.applyTransaction(e).state},w.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},w.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,c=r?r[i].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},w.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new w(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<k.length;i++)k[i](this,e,t);return t},S.tr.get=function(){return new g(this)},w.create=function(e){for(var t=new C(e.schema||e.doc.type.schema,e.plugins),n=new w(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},w.prototype.reconfigure=function(e){for(var t=new C(e.schema||this.schema,e.plugins),n=t.fields,r=new w(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},w.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},w.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new C(e.schema,e.plugins),i=new w(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=a.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var s in n){var c=n[s],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,s))return void(i[o.name]=l.fromJSON.call(c,e,t[s],i))}i[o.name]=o.init(e,i)}})),i},w.addApplyListener=function(e){k.push(e)},w.removeApplyListener=function(e){var t=k.indexOf(e);t>-1&&k.splice(t,1)},Object.defineProperties(w.prototype,S);var k=[];var A=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:T("plugin")};A.prototype.getState=function(e){return e[this.key]};var E=Object.create(null);function T(e){return e in E?e+"$"+ ++E[e]:(E[e]=0,e+"$")}var O=function(e){void 0===e&&(e="key"),this.key=T(e)};O.prototype.get=function(e){return e.config.pluginsByKey[this.key]},O.prototype.getState=function(e){return e[this.key]}},function(e,t,n){var r=n(16),o=n(26),i=n(43),a=n(36),s=n(46),c=function(e,t,n){var l,u,d,h,p=e&c.F,f=e&c.G,v=e&c.S,m=e&c.P,g=e&c.B,y=f?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,_=f?o:o[t]||(o[t]={}),b=_.prototype||(_.prototype={});for(l in f&&(n=t),n)d=((u=!p&&y&&void 0!==y[l])?y:n)[l],h=g&&u?s(d,r):m&&"function"==typeof d?s(Function.call,d):d,y&&a(y,l,d,e&c.U),_[l]!=d&&i(_,l,h),m&&b[l]!=d&&(b[l]=d)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){"use strict";function r(){return"ct-"+o++}n.d(t,"a",(function(){return r}));var o=0},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(57),o=n(34),i=n(14),a=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"create",value:function(e,t,n){var o="",i="";return t&&(t.deferConfig?i="defer-config":o='<script type="application/json" class="ct-config-data">        \n                    '.concat(Object(r.a)(JSON.stringify(t)),"\n                  <\/script>")),"<".concat(e).concat(n?" class=".concat(n):""," ").concat(i,">").concat(o,"</").concat(e,">")}},{key:"createElement",value:function(e,t,n){return Object(o.a)(this.create(e,t,n))}},{key:"define",value:function(e){window.customElements.define(e.componentName,e)}},{key:"layoutOnNeeded",value:function(t){e.componentsNeedingLayout.forEach((function(e){i.a.elemMatchesSelector(t,e)&&t.layout(),Array.prototype.forEach.call(t.querySelectorAll(e),(function(e){e.layout()}))}))}}]),e}();a.componentsNeedingLayout=["text-field","single-range-slider","double-range-slider"]},function(e,t,n){"use strict";var r=n(6),o=/(auto|scroll)/,i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},a=function(e){return o.test(function(e){return i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")}(e))};var s=n(5);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return d}));var l={},u={},d=function(e){babelHelpers.inherits(n,e);var t=c(n);function n(){var e;return babelHelpers.classCallCheck(this,n),(e=t.call(this))._loaded=!1,e._availableResolves=[],e._availableRejects=[],e._hasConnected=!1,e._dynamicContainSize=n.SUPPORTS_CONTENT_VISIBILITY,e}return babelHelpers.createClass(n,[{key:"connectedCallback",value:function(){var e=this;if(!this._hasConnected){if(this._hasConnected=!0,!this.render)return console.error("Component does not have render method:",this),void this._availableRejects.forEach((function(t){t(e)}));if(this.hasAttribute("defer-config"))return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){var t=function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=function e(t,n){return null===t.parentNode?n:e(t.parentNode,n.concat([t]))}(e.parentNode,[]),n=0;n<t.length;n+=1)if(a(t[n]))return t[n];return document.scrollingElement||document.documentElement}}(this),n="200%";if(this.hasAttribute("lazy-load-margin-height")&&(n=this.getAttribute("lazy-load-margin-height")),this.hasAttribute("lazy-load"))return this._isLazyLoading=!0,this.classList.add("ct-lazy-loading"),this._observer=new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&e._observer&&e.lazyLoaded()}))}),{rootDIS:document.querySelector(".ct-main"),root:t,rootMargin:"".concat(n," 0px")}),this._observer.observe(this),void(this._dynamicContainSize&&(this._resizeObs=new ResizeObserver((function(t,n){t.forEach((function(t){e._reserveSpace(t.target,t.contentRect)}))})),this._resizeObs.observe(this)));this.hasAttribute("lazy-load-notify")&&(this._observer=new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&e._observer&&e.lazyLoaded()}))}),{rootDIS:document.querySelector(".ct-main"),root:t,rootMargin:"".concat(n," 0px")}),this._observer.observe(this))}this.setConfig(null)}}},{key:"_reserveSpace",value:function(e,t){if(!t){if(!e.getClientBoundingRect)return;console.error("EL:",e),t=e.getClientBoundingRect()}var n,r,o=this._lastRect,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.abs(e-t)<=n};o&&(r=t,i((n=o).width,r.width)&&i(n.height,r.height))||(this._lastRect=t,e.attributeStyleMap.set("contain-intrinsic-size","".concat(t.width,"px ").concat(t.height,"px")))}},{key:"lazyLoaded",value:function(){var e=this;this._observer&&(this._observer.unobserve(this),this._observer=null),this.classList.remove("ct-lazy-loading"),this.classList.add("ct-lazy-loaded"),this._dynamicContainSize&&setTimeout((function(){e._reserveSpace(e)}),0),this.setConfig(null),this.lazyLoadedNotify()}},{key:"isLazyLoading",value:function(){return 1==this._isLazyLoading}},{key:"lazyLoadedNotify",value:function(){}},{key:"setConfig",value:function(e){var t=this;this._loaded=!0,this._conf=e,this._setupConf(),(e=this.getConf()).ariaRole&&this.setAttribute("role",e.ariaRole);var n=e.classes||"";this.constructor.classes&&(n+=" "+this.constructor.classes),e.hide&&(n+=" ct-hidden"),e.width&&(this.style.width=e.width);var r=e.containerId||e.id||(e.nameAsContainerId?e.name+"Container":Object(s.a)());this.id=r,e.elevation&&(n+=" ct-elev--z"+e.elevation),n.split(" ").forEach((function(e){e&&t.classList.add(e)})),this._doRender(e)}},{key:"_doRender",value:function(e){var t=this;this.render(e).then((function(e){t._availableResolves.forEach((function(e){e(t)})),t._availableResolves=[],t.firstUpdated&&t.firstUpdated()})).catch((function(e){console.error("Error creating component:",e," this:",t),console.trace(),t._availableRejects.forEach((function(e){e(t)})),t._availableRejects=[]}))}},{key:"isLoaded",value:function(){return this._loaded}},{key:"_fromAttr",value:function(e,t){switch(t){case Boolean:return null!==e&&"false"!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},{key:"_toAttr",value:function(e,t){switch(t){case Boolean:return e&&"false"!=e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e}},{key:"_getDefault",value:function(e){if(e.default)return e.default;switch(e.type){case Boolean:return!1;case Number:case Object:case Array:default:return null}}},{key:"_setupConf",value:function(){var e=this,t=this.querySelector(".ct-config-data"),n=this._conf||(t?JSON.parse(t.textContent):{});t&&t.parentNode.removeChild(t);var r=this.constructor.properties||{};this._conf=n,Object.keys(r).forEach((function(t){var o=r[t];if(!(t in n)){!{id:!0}[t]&&t in HTMLElement.prototype||!e.hasAttribute(e._propertyToAttributeName(t))?n[t]=e._getDefault(o):n[t]=e._fromAttr(e.getAttribute(e._propertyToAttributeName(t)),o.type)}var i=Object.getPrototypeOf(e);i&&!i.hasOwnProperty(t)&&"id"!=t&&Object.defineProperty(i,t,{get:function(){return o.toComponent&&this._component?this._component[t]:this._conf[t]},set:function(e){o.toComponent&&this._component&&(this._component[t]=e),this._conf[t]!=e&&(this._conf[t]=e,o.reflect&&this.reflectAttribute(t,this._toAttr(e,o.type)),this.updated&&this.updated(t,e))},enumerable:!0,configurable:!0})}))}},{key:"updated",value:function(e,t){var n=(this.constructor.properties||{})[e];this._component&&n&&n.toComponent&&(this._component[e]=t)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){var r=this._attributeToPropertyName(e),o=(this.constructor.properties||{})[r];r in HTMLElement.prototype||(this[r]=this._fromAttr(n,o?o.type:null))}},{key:"reflectAttribute",value:function(e,t){var n=this._propertyToAttributeName(e);if(void 0===t||null==t)this.removeAttribute(n);else{var r=t+"";this.getAttribute(n)!=r&&this.setAttribute(n,r)}}},{key:"_attributeToPropertyName",value:function(e){var t;return u[e]||(u[e]=(t=e)?t.toLowerCase().replace(/[-_]([a-z])/g,(function(e,t){return t.toUpperCase()})):t),u[e]}},{key:"_propertyToAttributeName",value:function(e){var t;return l[e]||(l[e]=(t=e)?t.replace(/([a-z][A-Z])/g,(function(e){return e[0]+"-"+e[1]})).toLowerCase():t),l[e]}},{key:"available",value:function(){var e=this;return this._hasConnected?Promise.resolve(this):new Promise((function(t,n){e._availableResolves.push(t),e._availableRejects.push(n)}))}},{key:"getConf",value:function(){return this._conf}}],[{key:"create",value:function(e,t){return r.a.create(this.componentName,e,t)}},{key:"createElement",value:function(e,t){return r.a.createElement(this.componentName,e,t)}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));d.SUPPORTS_CONTENT_VISIBILITY=window.CSS&&window.CSS.supports&&window.CSS.supports("content-visibility: auto")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",ROOT:"mdc-list"},o={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+r.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+r.LIST_ITEM_CLASS+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+r.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+r.LIST_ITEM_CLASS+" a,\n    ."+r.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+r.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},i={UNSET_INDEX:-1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n(8),i=function(){function e(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.root_=e,this.initialize.apply(this,r.d(n)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new o.a({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,n){this.root_.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root_.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var r;void 0===n&&(n=!1),"function"==typeof CustomEvent?r=new CustomEvent(e,{bubbles:n,detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root_.dispatchEvent(r)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){var r=this;(babelHelpers.classCallCheck(this,e),this._name=t,n||("undefined"!=typeof window&&window._ctLogLevel?this._level=window._ctLogLevel:this._level=e.WARN),"undefined"!=typeof window&&(window.console||(window.console={}),["log","warn","info","error","time","timeEnd","trace"].forEach((function(e){window.console[e]||(window.console[e]=function(){})}))),this._namesTolevels={},e.NAMES.forEach((function(e,t){r._namesTolevels[e]=t})),this._levelToConsole={1:console.error,2:console.warn,3:console.info,4:console.log,5:console.log},"undefined"!=typeof window)&&window.location.search.substring(1).split("&").forEach((function(e){var t=e.split("=");"log"==t[0]&&r.enable(t[1])}))}return babelHelpers.createClass(e,[{key:"enable",value:function(e){var t=this;e&&e.split(",").forEach((function(e){var n=e.split(":");if(2!=n.length||n[0]!=t._name&&"*"!=n[0]);else{var r=t._namesTolevels[n[1]];r&&(t._level=r)}}))}},{key:"_log",value:function(t,n,r){if(this._level>=t){var o=this._levelToConsole[t]||console.log,i=this._name+":"+e.NAMES[t];r?o(r,n,i):o(n,i)}}},{key:"debug",value:function(t,n){this._log(e.DEBUG,t,n)}},{key:"log",value:function(t,n){this._log(e.LOG,t,n)}},{key:"info",value:function(t,n){this._log(e.INFO,t,n)}},{key:"warn",value:function(t,n){this._log(e.WARN,t,n)}},{key:"error",value:function(t,n){this._log(e.ERROR,t,n)}},{key:"time",value:function(e){console.time(e)}},{key:"timeEnd",value:function(e){console.timeEnd(e)}},{key:"trace",value:function(){console.trace()}}]),e}();r.ERROR=1,r.WARN=2,r.INFO=3,r.LOG=4,r.DEBUG=5,r.NAMES=["?","ERROR","WARN","INFO","LOG","DEBUG"]},function(e,t,n){"use strict";function r(e){if(window.PointerEvent)return e;var t={},n=(t=window.navigator.msPointerEanbled?{pointerdown:"MSPointerDown",pointermove:"MSPointerMove",pointerup:"MSPointerUp",pointerover:"MSPointerOver",pointerenter:"MSPointerEnter",pointerout:"MSPointerOut",pointerleave:"MSPointerLeave",pointercancel:"MSPointerCancel"}:("propertyIsEnumerable"in window||"hasOwnProperty"in document)&&(window.propertyIsEnumerable("ontouchstart")||document.hasOwnProperty("ontouchstart")||window.hasOwnProperty("ontouchstart"))?{pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointerover:"mouseover",pointerenter:"mouseenter",pointerout:"mouseout",pointerleave:"mouseleave",pointercancel:"touchcancel"}:{pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerover:"mouseover",pointerenter:"mouseenter",pointerout:"mouseout",pointerleave:"mouseleave",pointercancel:null})[e];return n||(console.error("Unable to find event type for eventName:",e,t),e)}function o(e){if(e&&(void 0===e.button&&(e.button=0),void 0===e.clientX||void 0===e.pageX)){var t=null;void 0!==e.touches&&e.touches.length?t=e.touches[0]:void 0!==e.changedTouches&&e.changedTouches.length&&(t=e.changedTouches[0]),t&&(void 0===e.clientX&&(e.clientX=t.clientX,e.clientY=t.clientY),void 0===e.pageX&&(e.pageX=t.pageX,e.pageY=t.pageY))}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return b}));var r=n(2),o=Math.pow(2,16);function i(e){return 65535&e}var a=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},s=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};s.prototype.recover=function(e){var t=0,n=i(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/o}(e)},s.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},s.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},s.prototype._map=function(e,t,n){for(var r=0,i=this.inverted?2:1,s=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>e)break;var u=this.ranges[c+i],d=this.ranges[c+s],h=l+u;if(e<=h){var p=l+r+((u?e==l?-1:e==h?1:t:t)<0?0:d);if(n)return p;var f=e==(t<0?l:h)?null:c/3+(e-l)*o;return new a(p,t<0?e!=l:e!=h,f)}r+=d-u}return n?e+r:new a(e+r)},s.prototype.touches=function(e,t){for(var n=0,r=i(t),o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[s+o];if(e<=c+l&&s==3*r)return!0;n+=this.ranges[s+a]-l}return!1},s.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),c=this.ranges[r+t],l=this.ranges[r+n];e(a,a+c,s,s+l),o+=l-c}},s.prototype.invert=function(){return new s(this.ranges,!this.inverted)},s.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},s.offset=function(e){return 0==e?s.empty:new s(e<0?[0,-e,0]:[0,0,e])},s.empty=new s([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,e=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),e=i.pos}return n?e:new a(e,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var u=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},d={before:{configurable:!0},docChanged:{configurable:!0}};function h(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},u.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new l(t.failed);return this},u.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},d.docChanged.get=function(){return this.steps.length>0},u.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(u.prototype,d);var p=Object.create(null),f=function(){};f.prototype.apply=function(e){return h()},f.prototype.getMap=function(){return s.empty},f.prototype.invert=function(e){return h()},f.prototype.map=function(e){return h()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return h()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=p[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in p)throw new RangeError("Duplicate use of step JSON ID "+e);return p[e]=t,t.prototype.jsonID=e,t};var v=function(e,t){this.doc=e,this.failed=t};v.ok=function(e){return new v(e,null)},v.fail=function(e){return new v(null,e)},v.fromReplace=function(e,t,n,o){try{return v.ok(e.replace(t,n,o))}catch(e){if(e instanceof r.ReplaceError)return v.fail(e.message);throw e}};var m=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new s([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),o,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",m);var g=function(e){function t(t,n,r,o,i,a,s){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return v.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?v.fromReplace(e,this.from,this.to,n):v.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function _(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function b(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!_(r,o,i))break}}function C(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,c=r;s&&c<o;c++)s=s.matchType(n.child(c).type);if(!s||!s.validEnd)return null;return a}(r,t);return i?o.map(w).concat({type:t,attrs:n}).concat(i.map(w)):null}function w(e){return{type:e,attrs:null}}function S(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,c=n-2;s>i;s--,c--){var l=o.node(s),u=o.index(s);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),h=r&&r[c]||l;if(h!=l&&(d=d.replaceChild(0,h.type.create(h.attrs))),!l.canReplace(u+1,l.childCount)||!h.type.validContent(d))return!1}var p=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(p,p,f?f.type:o.node(i+1).type)}function k(e,t){var n=e.resolve(t),r=n.index();return A(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function A(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function E(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&A(i,a)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function T(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var c=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(c>0?1:0);if(1==a?r.node(s).canReplace(l,l,o):r.node(s).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(s+1):r.after(s+1)}return null}function O(e,t,n){for(var o=[],i=0;i<e.childCount;i++){var a=e.child(i);a.content.size&&(a=a.copy(O(a.content,t,a))),a.isInline&&(a=t(a,n,i)),o.push(a)}return r.Fragment.fromArray(o)}f.jsonID("replaceAround",g),u.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,i=e.depth,a=n.before(i+1),s=o.after(i+1),c=a,l=s,u=r.Fragment.empty,d=0,h=i,p=!1;h>t;h--)p||n.index(h)>0?(p=!0,u=r.Fragment.from(n.node(h).copy(u)),d++):c--;for(var f=r.Fragment.empty,v=0,m=i,y=!1;m>t;m--)y||o.after(m+1)<o.end(m)?(y=!0,f=r.Fragment.from(o.node(m).copy(f)),v++):l++;return this.step(new g(c,l,a,s,new r.Slice(u.append(f),d,v),u.size-d,!0))},u.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,o=t.length-1;o>=0;o--)n=r.Fragment.from(t[o].type.create(t[o].attrs,n));var i=e.start,a=e.end;return this.step(new g(i,a,i,a,new r.Slice(n,0,0),t.length,!0))},u.prototype.setBlockType=function(e,t,n,o){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(a).map(t),n)){i.clearIncompatible(i.mapping.slice(a).map(t,1),n);var s=i.mapping.slice(a),c=s.map(t,1),l=s.map(t+e.nodeSize,1);return i.step(new g(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}})),this},u.prototype.setNodeMarkup=function(e,t,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var a=t.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,a);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new g(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new r.Slice(r.Fragment.from(a),0,0),1,!0))},u.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),i=r.Fragment.empty,a=r.Fragment.empty,s=o.depth,c=o.depth-t,l=t-1;s>c;s--,l--){i=r.Fragment.from(o.node(s).copy(i));var u=n&&n[l];a=r.Fragment.from(u?u.type.create(u.attrs,a):o.node(s).copy(a))}return this.step(new m(e,e,new r.Slice(i.append(a),t,t),!0))},u.prototype.join=function(e,t){void 0===t&&(t=1);var n=new m(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var x=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new r.Slice(O(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return v.fromReplace(e,this.from,this.to,a)},t.prototype.invert=function(){return new M(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",x);var M=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=new r.Slice(O(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return v.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new x(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function I(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",M),u.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,e),h=Math.min(c+r.nodeSize,t),p=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(a&&a.to==d&&a.mark.eq(u[f])?a.to=h:o.push(a=new M(d,h,u[f])));s&&s.to==d?s.to=h:i.push(s=new x(d,h,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},u.prototype.removeMark=function(e,t,n){var o=this;void 0===n&&(n=null);var i=[],a=0;return this.doc.nodesBetween(e,t,(function(o,s){if(o.isInline){a++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(o.marks);l&&(c=[l])}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var u=Math.min(s+o.nodeSize,t),d=0;d<c.length;d++){for(var h=c[d],p=void 0,f=0;f<i.length;f++){var v=i[f];v.step==a-1&&h.eq(i[f].style)&&(p=v)}p?(p.to=u,p.step=a):i.push({style:h,from:Math.max(s,e),to:u,step:a})}}})),i.forEach((function(e){return o.step(new M(e.from,e.to,e.style))})),this},u.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),i=[],a=e+1,s=0;s<o.childCount;s++){var c=o.child(s),l=a+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||this.step(new M(a,l,c.marks[d]))}else i.push(new m(a,l,r.Slice.empty));a=l}if(!n.validEnd){var h=n.fillBefore(r.Fragment.empty,!0);this.replace(a,a,new r.Slice(h,0,0))}for(var p=i.length-1;p>=0;p--)this.step(i[p]);return this},u.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var o=function(e,t,n,o){if(void 0===n&&(n=t),void 0===o&&(o=r.Slice.empty),t==n&&!o.size)return null;var i=e.resolve(t),a=e.resolve(n);return I(i,a,o)?new m(t,n,o):new L(i,a,o).fit()}(this.doc,e,t,n);return o&&this.step(o),this},u.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},u.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var L=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}this.placed=r.Fragment.empty;for(var a=e.depth;a>0;a--)this.placed=r.Fragment.from(e.node(a).copy(this.placed))},N={depth:{configurable:!0}};function R(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(R(e.firstChild.content,t-1,n)))}function D(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(D(e.lastChild.content,t-1,n)))}function P(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function F(e,t,n){if(t<=0)return e;var o=e.content;return t>1&&(o=o.replaceChild(0,F(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),e.copy(o)}function H(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function B(e,t,n,o,i){if(t<n){var a=e.firstChild;e=e.replaceChild(0,a.copy(B(a.content,t+1,n,o,a)))}if(t>o){var s=i.contentMatchAt(0),c=s.fillBefore(e).append(e);e=c.append(s.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return e}function j(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}N.depth.get=function(){return this.frontier.length-1},L.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(t<0?this.$to:o.doc.resolve(t));if(!i)return null;for(var a=this.placed,s=o.depth,c=i.depth;s&&c&&1==a.childCount;)a=a.firstChild.content,s--,c--;var l=new r.Slice(a,s,c);return t>-1?new g(o.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new m(o.pos,i.pos,l):void 0},L.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,o=(t?(n=P(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var a=this.frontier[i],s=a.type,c=a.match,l=void 0,u=void 0;if(1==e&&(o?c.matchType(o.type)||(u=c.fillBefore(r.Fragment.from(o),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:u};if(2==e&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},L.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=P(t,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.Slice(t,n+1,Math.max(o,i.size+n>=t.size-o?n+1:0)),!0)},L.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=P(t,n);if(i.childCount<=1&&n>0){var a=t.size-n<=n+i.size;this.unplaced=new r.Slice(R(t,n-1,1),n-1,a?n-1:o)}else this.unplaced=new r.Slice(R(t,n,1),n,o)},L.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,o=e.parent,i=e.inject,a=e.wrap;this.depth>n;)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-t,d=0,h=[],p=this.frontier[n],f=p.match,v=p.type;if(i){for(var m=0;m<i.childCount;m++)h.push(i.child(m));f=f.matchFragment(i)}for(var g=l.size+t-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),_=f.matchType(y.type);if(!_)break;(++d>1||0==u||y.content.size)&&(f=_,h.push(F(y.mark(v.allowedMarks(y.marks)),1==d?u:0,d==l.childCount?g:-1)))}var b=d==l.childCount;b||(g=-1),this.placed=D(this.placed,n,r.Fragment.from(h)),this.frontier[n].match=f,b&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var C=0,w=l;C<g;C++){var S=w.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),w=S.content}this.unplaced=b?0==t?r.Slice.empty:new r.Slice(R(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new r.Slice(R(c.content,t,d),c.openStart,c.openEnd)},L.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!H(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},L.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=H(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var c=this.frontier[s],l=c.match,u=H(e,s,c.type,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}},L.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=D(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},L.prototype.openFrontierNode=function(e,t,n){var o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=D(this.placed,this.depth,r.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},L.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);e.childCount&&(this.placed=D(this.placed,this.frontier.length,e))},Object.defineProperties(L.prototype,N),u.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var o=this.doc.resolve(e),i=this.doc.resolve(t);if(I(o,i,n))return this.step(new m(e,t,n));var a=j(o,this.doc.resolve(t));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;a.indexOf(c)>-1?s=c:o.before(c)==l&&a.splice(1,0,-c)}for(var d=a.indexOf(s),h=[],p=n.openStart,f=n.content,v=0;;v++){var g=f.firstChild;if(h.push(g),v==n.openStart)break;f=g.content}p>0&&h[p-1].type.spec.defining&&o.node(d).type!=h[p-1].type?p-=1:p>=2&&h[p-1].isTextblock&&h[p-2].type.spec.defining&&o.node(d).type!=h[p-2].type&&(p-=2);for(var y=n.openStart;y>=0;y--){var _=(y+p+1)%(n.openStart+1),b=h[_];if(b)for(var C=0;C<a.length;C++){var w=a[(C+d)%a.length],S=!0;w<0&&(S=!1,w=-w);var k=o.node(w-1),A=o.index(w-1);if(k.canReplaceWith(A,A,b.type,b.marks))return this.replace(o.before(w),S?i.after(w):t,new r.Slice(B(n.content,0,n.openStart,_),_,n.openEnd))}}for(var E=this.steps.length,T=a.length-1;T>=0&&(this.replace(e,t,n),!(this.steps.length>E));T--){var O=a[T];T<0||(e=o.before(O),t=i.after(O))}return this},u.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=j(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(31);var r=function(){function e(){babelHelpers.classCallCheck(this,e),this._listeners=new Map,this.boundMatcher=this.matchChecker.bind(this)}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"detach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this._listeners.get(e);if(o){if(n){var i=o[n];if(i){if(r){var a=[];i.forEach((function(e,t){e.selector==r&&a.push(t)}));for(var s=a.length;s>=0;s--){i[s];i.splice(a[s],1)}}r&&0!=i.length||(delete o[n],e.removeEventListener(n,this.boundMatcher))}}n&&o[n]||(n||Object.keys(o).forEach((function(n){e.removeEventListener(n,t.boundMatcher)})),this._listeners.delete(e))}}},{key:"delegate",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if("string"==typeof e&&(e=document.querySelector(e)),e){var s=this._listeners.get(e);s||(s={},this._listeners.set(e,s)),s[t]||(s[t]=[],e.addEventListener(t,this.boundMatcher,i)),s[t].push({callback:r,selector:n,context:o,dontPrevent:a})}}},{key:"_shallowClone",value:function(e,t,n){for(var r=Object.getPrototypeOf(e),o=Object.create(n?r:null),i=Object.getOwnPropertyNames(e),a=0;a<i.length;a++)t[i[a]]||Object.defineProperty(o,i[a],Object.getOwnPropertyDescriptor(e,i[a]));return o}},{key:"matchChecker",value:function(t){var n=this._listeners.get(t.currentTarget),r=!0;if(n&&(n=n[t.type])){var o=!1;return n.forEach((function(n){var i=n.selector;if(!i||e.elemMatchesSelector(t.target,i+","+i+" *")){var a=e.findMatchingParent(t.target,i,t.currentTarget);if(a){var s,c={};for(var l in t)c[l]=t[l];t.preventDefault&&(c.preventDefault=function(){t.preventDefault()}),c.currentTarget=a,"tap"!=t.type||n.dontPrevent||(r=!1),n.context?(n.contextBound||(n.contextBound=n.callback.bind(n.context)),n.contextBound(c)):s=n.callback(c),o||!1!==s||(t.stopPropagation(),o=!0)}}})),!1===r&&"tap"==t.type&&t.preventDefault(),r}}}]),e}();r.elemMatchesSelector=function(e,t){if(e.matches)return e.matches(t);var n=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return!!n&&n.bind(e)(t)},r.findMatchingParent=function(e,t,n){return t?r.elemMatchesSelector(e,t)?e:e==n?null:e==window.document.body?null:r.findMatchingParent(e.parentNode,t,n):n}},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(e){t=!1}return t}(e)&&{passive:!0}}n.d(t,"a",(function(){return r}))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(19);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return r.call(e,t)}function i(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function a(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=new RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),l=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=n(177);var d=/[&<>"]/,h=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function f(e){return p[e]}var v=/[.?*+^$[\]\\(){}|-]/g;var m=n(133);t.lib={},t.lib.mdurl=n(178),t.lib.ucmicro=n(440),t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=o,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(s,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(c,(function(e,t,n){return t||function(e,t){var n=0;return o(u,t)?u[t]:35===t.charCodeAt(0)&&l.test(t)&&i(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?a(n):e}(e,n)}))},t.isValidEntityCode=i,t.fromCodePoint=a,t.escapeHtml=function(e){return d.test(e)?e.replace(h,f):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return m.test(e)},t.escapeRE=function(e){return e.replace(v,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){babelHelpers.classCallCheck(this,e),this.initAggregator()}return babelHelpers.createClass(e,[{key:"initAggregator",value:function(){this._events=[]}},{key:"destroy",value:function(){}},{key:"on",value:function(e,t,n){var r=this._events[e];r||(r=[],this._events[e]=r),r.push({callback:t,bindContext:n})}},{key:"unsubscribeAll",value:function(e){this._events[e]&&delete this._events[e]}},{key:"unsubscribe",value:function(e,t){var n=this._events[e];n&&(n.every((function(e,r){return e.callback!=t||(delete n[r],!1)})),this._events[e].length||delete this._events[e])}},{key:"fire",value:function(e,t){var n=this._events[e];return!n||n.every((function(e){return e.bindContext?(e.boundContext||(e.boundContext=e.callback.bind(e.bindContext)),!1!==e.boundContext(t)):!1!==e.callback(t)}))}}]),e}()},function(e,t,n){var r=n(82)("wks"),o=n(61),i=n(16).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(48),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=/[&<>"'\/`]/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"};function i(e){return e&&"string"==typeof e?e.replace(r,(function(e){return o[e]})):e}},function(e,t,n){"use strict";function r(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(o(n,t))return n;n=n.parentElement}return null}function o(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}function i(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var r=n.scrollWidth;return document.documentElement.removeChild(n),r}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}))},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),o=n(10),i=n(15),a=n(25),s=n(35),c=n(95),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return r.b(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var r=new t(e);return void 0!==n.isUnbounded&&(r.unbounded=n.isUnbounded),r},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return c.b(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,Object(i.a)())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,Object(i.a)())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return Object(a.c)(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,Object(i.a)())},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,Object(i.a)())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new s.a(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(o.a)},function(e,t,n){e.exports=!n(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(18),o=n(139),i=n(58),a=Object.defineProperty;t.f=n(28)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,i=n;o<i.length;o++){var s=i[o];a(e,s),a(e.prototype,s.prototype)}return e}function a(e,t){var n,o=r(Reflect.ownKeys(t));try{for(o.s();!(n=o.n()).done;){var i=n.value;if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"arguments"!==i&&"caller"!==i)if("continue"===function(){var n=Object.getOwnPropertyDescriptor(t,i);if(!n.writable)return"continue";if(e[i]&&"function"==typeof e[i]){if("function"==typeof n.value){var r=e[i];e[i]=function(){r.call(this,arguments),n.value.call(this,arguments)}}}else Object.defineProperty(e,i,n)}())continue}}catch(e){o.e(e)}finally{o.f()}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(function(){function e(){babelHelpers.classCallCheck(this,e),this._isApp=!!document.querySelector(".ct-app"),this._isMobile=!!document.querySelector(".ct-mobile")}return babelHelpers.createClass(e,[{key:"isAndroid",value:function(){return/(android)/i.test(navigator.userAgent)}},{key:"isSafari",value:function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1}},{key:"isTouch",value:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"isNativeApp",value:function(){return this._isApp}},{key:"isMobile",value:function(){return this._isMobile}},{key:"isChrome",value:function(){return this.getChromeMajorMinorVersion()>0}},{key:"getChromeMajorMinorVersion",value:function(){var e=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);return e&&5==e.length?(e=e.map((function(e){return parseInt(e,10)})),parseFloat(e[1]+"."+e[2])):0}}]),e}())},function(e,t,n){var r=n(55);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(7),o=n(6),i=n(5),a=n(24),s=n(0),c=n(1),l=n(10),u=n(15),d=n(25),h=n(94),p=n(100),f=n(101),v=n(27),m=n(35),g=n(8),y={ROOT:"mdc-text-field-character-counter"},_={ROOT_SELECTOR:"."+y.ROOT},b=function(e){function t(n){return e.call(this,c.a({},t.defaultAdapter,n))||this}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(g.a),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new b({setContent:function(t){e.root_.textContent=t}})},t}(l.a),w={ARIA_CONTROLS:"aria-controls",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},S={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},k={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},A=["pattern","min","max","required","step","minlength","maxlength"],E=["color","date","datetime-local","month","range","time","week"],T=["mousedown","touchstart"],O=["click","keydown"],x=function(e){function t(n,r){void 0===r&&(r={});var o=e.call(this,c.a({},t.defaultAdapter,n))||this;return o.isFocused_=!1,o.receivedUserInput_=!1,o.isValid_=!0,o.useNativeValidation_=!0,o.helperText_=r.helperText,o.characterCounter_=r.characterCounter,o.leadingIcon_=r.leadingIcon,o.trailingIcon_=r.trailingIcon,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.handleInput()},o.setPointerXOffset_=function(e){return o.setTransformOrigin(e)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.validationAttributeChangeHandler_=function(e){return o.handleValidationAttributeChange(e)},o}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return S},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return E.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),T.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),O.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),T.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),O.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return A.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(S.DENSE)?k.DENSE_LABEL_SCALE:k.LABEL_SCALE,n=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(n)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,n=t?t[0]:e,r=n.target.getBoundingClientRect(),o=n.clientX-r.left;this.adapter_.setLineRippleTransformOrigin(o)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;e?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,r=n.DISABLED,o=n.INVALID;e?(this.adapter_.addClass(r),this.adapter_.removeClass(o)):this.adapter_.removeClass(r),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(g.a),M={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},I={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+M.ROOT},L=function(e){function t(n){return e.call(this,c.a({},t.defaultAdapter,n))||this}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(M.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(M.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(M.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(M.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(I.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(M.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(M.HELPER_TEXT_VALIDATION_MSG)&&!e;n?this.adapter_.setAttr(I.ROLE,"alert"):this.adapter_.removeAttr(I.ROLE),t||n||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(I.ARIA_HIDDEN,"true")},t}(g.a),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new L({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(l.a),R={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},D={ROOT:"mdc-text-field__icon"},P=["click","keydown"],F=function(e){function t(n){var r=e.call(this,c.a({},t.defaultAdapter,n))||this;return r.savedTabIndex_=null,r.interactionHandler_=function(e){return r.handleInteraction(e)},r}return c.b(t,e),Object.defineProperty(t,"strings",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return D},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),P.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;P.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",R.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter_.notifyIconAction())},t}(g.a),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new F({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)},notifyIconAction:function(){return e.emit(F.strings.ICON_EVENT,{},!0)}})},t}(l.a),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,n,r,o,i,a){void 0===e&&(e=function(e,t){return new v.a(e,t)}),void 0===t&&(t=function(e){return new p.a(e)}),void 0===n&&(n=function(e){return new N(e)}),void 0===r&&(r=function(e){return new C(e)}),void 0===o&&(o=function(e){return new H(e)}),void 0===i&&(i=function(e){return new h.a(e)}),void 0===a&&(a=function(e){return new f.a(e)}),this.input_=this.root_.querySelector(w.INPUT_SELECTOR);var s=this.root_.querySelector(w.LABEL_SELECTOR);this.label_=s?i(s):null;var c=this.root_.querySelector(w.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var l=this.root_.querySelector(w.OUTLINE_SELECTOR);this.outline_=l?a(l):null;var u=L.strings,d=this.root_.nextElementSibling,m=d&&d.classList.contains(S.HELPER_LINE),g=m&&d&&d.querySelector(u.ROOT_SELECTOR);this.helperText_=g?n(g):null;var y=b.strings,_=this.root_.querySelector(y.ROOT_SELECTOR);!_&&m&&d&&(_=d.querySelector(y.ROOT_SELECTOR)),this.characterCounter_=_?r(_):null;var k=this.root_.querySelector(w.LEADING_ICON_SELECTOR);this.leadingIcon_=k?o(k):null;var A=this.root_.querySelector(w.TRAILING_ICON_SELECTOR);this.trailingIcon_=A?o(A):null,this.ripple=this.createRipple_(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input_.required},set:function(e){this.input_.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input_.min},set:function(e){this.input_.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input_.max},set:function(e){this.input_.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input_.step},set:function(e){this.input_.step=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation_.setTrailingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation_.setTrailingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation_.setUseNativeValidation(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input_.focus()},t.prototype.layout=function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=c.a({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new x(e,this.getFoundationMap_())},t.prototype.getRootAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,n){return e.listen(t,n)},deregisterTextFieldInteractionHandler:function(t,n){return e.unlisten(t,n)},registerValidationAttributeChangeHandler:function(t){var n=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return n.observe(e.input_,{attributes:!0}),n},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()}}},t.prototype.getInputAdapterMethods_=function(){var e=this;return{getNativeInput:function(){return e.input_},isFocused:function(){return document.activeElement===e.input_},registerInputInteractionHandler:function(t,n){return e.input_.addEventListener(t,n,Object(u.a)())},deregisterInputInteractionHandler:function(t,n){return e.input_.removeEventListener(t,n,Object(u.a)())}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0},hasLabel:function(){return Boolean(e.label_)},shakeLabel:function(t){return e.label_&&e.label_.shake(t)}}},t.prototype.getLineRippleAdapterMethods_=function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{closeOutline:function(){return e.outline_&&e.outline_.closeNotch()},hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)}}},t.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},t.prototype.createRipple_=function(e){var t=this,n=this.root_.classList.contains(S.TEXTAREA),r=this.root_.classList.contains(S.OUTLINED);if(n||r)return null;var o=c.a({},v.a.createAdapter(this),{isSurfaceActive:function(){return d.c(t.input_,":active")},registerInteractionHandler:function(e,n){return t.input_.addEventListener(e,n,Object(u.a)())},deregisterInteractionHandler:function(e,n){return t.input_.removeEventListener(e,n,Object(u.a)())}});return e(this.root_,new m.a(o))},t}(l.a);n(399),n(400);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return q}));var q=function(e){babelHelpers.inherits(r,e);var t,n=j(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String,toComponent:!0},fieldType:{type:String,default:"text"},disabled:{type:Boolean,reflect:!0,toComponent:!0},required:{type:Boolean,toComponent:!0},placeHolder:{type:String},helperText:{type:String,default:null},icon:{type:String},iconTrailing:{type:Boolean},box:{type:Boolean},outlined:{type:Boolean,default:!0},fullWidth:{type:Boolean},id:{type:String},inputId:{type:String},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},reset:{type:String},classes:{type:String},inputClasses:{type:String},helperClass:{type:String},helperId:{type:String},comment:{type:String},hint:{type:String},autoComplete:{type:Boolean,default:!0},rows:{type:Number},cols:{type:Number},size:{type:Number},width:{type:String},compact:{type:Boolean}}}}]),babelHelpers.createClass(r,[{key:"updated",value:function(e,t){babelHelpers.get(babelHelpers.getPrototypeOf(r.prototype),"updated",this).call(this,e,t),"fieldType"==e&&(this._component.type=t)}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.textContent.trim(),t.label=t.label||n||"",t.parentId=this.id,this.innerHTML=r.toHtml(t),this._component=B.attachTo(this.querySelector(".mdc-text-field")),t.compact&&this.classList.add("ct-compact");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"layout",value:function(){this._component.layout()}},{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e);var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),this._component.valid=t}}],[{key:"toHtml",value:function(e){var t=e.nameAsId?e.name:e.inputId||Object(i.a)(),n=e.helperId||Object(i.a)(),r=e.helperClass,o=e.comment?'<div class="ct-form-comment">'.concat(e.comment,"</div>"):"",c=e.hint?'<icon-button class="ct-text-field-hint ct-mobile-tooltip" data-tooltip aria-label="'.concat(Object(a.a)(e.hint),'" icon-name="help"></icon-button>'):"",l=void 0!==e.reset&&e.reset?'<icon-button data-tooltip aria-label="'.concat(Object(s.d)("Reset field value"),'" data-reset-parent-id="').concat(e.parentId,'" data-reset-value="').concat(e.reset,'" icon-name="cancel"></icon-button>'):"",u="mdc-text-field__input "+(e.inputClasses?e.inputClasses:""),d="textarea"==e.fieldType?"mdc-text-field--textarea":"mdc-text-field--outlined",h="",p=e.value;return null!=p&&void 0!==p||(p=""),h="textarea"==e.fieldType?'<textarea id="'.concat(t,'"  name="').concat(e.name,'" ').concat(e.disabled?"disabled":"",' aria-controls="').concat(n,'" aria-describedby="').concat(n,'" class="').concat(u,'" ').concat(e.rows?'rows="'.concat(e.rows,'"'):""," \n            ").concat(e.cols?'cols="'.concat(e.cols,'"'):"",">").concat(p,"</textarea>"):"<input ".concat(e.disabled?"disabled":""," ").concat(!1===e.autoComplete?'autocomplete="off"':""," ").concat(e.required?"required":""," ").concat(e.size?"size="+e.size:"",' class="').concat(u,'" value="').concat(p,'" aria-controls="').concat(n,'" aria-describedby="').concat(n,'" type="').concat(e.fieldType,'" id="').concat(t,'" name="').concat(e.name,'"/>'),'<div class="mdc-text-field '.concat(d,'">\n                     ').concat(h,'\n                     <div class="mdc-notched-outline">\n                        <div class="mdc-notched-outline__leading"></div>\n                        <div class="mdc-notched-outline__notch">\n                         <label class="mdc-floating-label" for="').concat(t,'">').concat(e.label||"",'</label>                         </div>\n                        <div class="mdc-notched-outline__trailing"></div>\n                    </div>                                               \n                </div>').concat(e.helperId||r||e.helperText?'<div class="mdc-text-field-helper-line">\n                <div id="'.concat(n,'" class="mdc-text-field-helper-text mdc-text-field-helper-text--validation-msg ').concat(r||"",'" aria-hidden="true">').concat(e.helperText||"","</div></div>"):"","\n                ").concat(o," ").concat(c," ").concat(l)}},{key:"getComponentFromInput",value:function(e){return e.parentNode.parentNode}},{key:"linesToArray",value:function(e){var t=[];return e&&e.replace(/\r\n/g,"\n").split("\n").forEach((function(e){e&&e.trim()&&t.push(e)})),t}}]),r}(r.a);q.componentName="text-field",o.a.define(q)},function(e,t,n){"use strict";function r(e){var t,n,r,o,i,a;if((t=document.createElement("TEMPLATE")).content)t.innerHTML=e,r=t.content;else{for((a=e.match(/^\s*<([^>\s]+)/))&&(i={td:{container:"table",html:'<tbody><tr class="x_root"></tr></tbody>'},tr:{container:"table",html:'<tbody class="x_root"></tbody>'},thead:{container:"table",html:'<tbody class="x_root"></tbody>'},caption:{container:"table",html:'<tbody class="x_root"></tbody>'},li:{container:"ul"},dd:{container:"dl"},dt:{container:"dl"},optgroup:{container:"select"},option:{container:"select"}}[a[1].toLowerCase()])&&(t=document.createElement(i.container),i.html?(t.innerHTML=i.html,(o=t.querySelector(".x_root")).innerHTML=e):(t.innerHTML=e,o=t)),o||((t=document.createElement("DIV")).innerHTML=e,o=t),n=document.createDocumentFragment();o.firstChild;)n.appendChild(o.firstChild);r=n}return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(1),o=n(8),i={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},a={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},s={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},c=n(95);n.d(t,"a",(function(){return h}));var l=["touchstart","pointerdown","mousedown","keydown"],u=["touchend","pointerup","mouseup","contextmenu"],d=[],h=function(e){function t(n){var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.activationAnimationHasEnded_=!1,o.activationTimer_=0,o.fgDeactivationRemovalTimer_=0,o.fgScale_="0",o.frame_={width:0,height:0},o.initialSize_=0,o.layoutFrame_=0,o.maxRadius_=0,o.unboundedCoords_={left:0,top:0},o.activationState_=o.defaultActivationState_(),o.activationTimerCallback_=function(){o.activationAnimationHasEnded_=!0,o.runDeactivationUXLogicIfReady_()},o.activateHandler_=function(e){return o.activate_(e)},o.deactivateHandler_=function(){return o.deactivate_()},o.focusHandler_=function(){return o.handleFocus()},o.blurHandler_=function(){return o.handleBlur()},o.resizeHandler_=function(){return o.layout()},o}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return i},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,o=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(o),e.adapter_.isUnbounded()&&(e.adapter_.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,o=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(r),e.adapter_.removeClass(o),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(l.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):u.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;l.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),u.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&d.length>0&&d.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(d.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){d=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,o=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,a=i.FG_DEACTIVATION,s=i.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var l="",u="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),h=d.startPoint,p=d.endPoint;l=h.x+"px, "+h.y+"px",u=p.x+"px, "+p.y+"px"}this.adapter_.updateCssVariable(r,l),this.adapter_.updateCssVariable(o,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(a),this.adapter_.computeBoundingRect(),this.adapter_.addClass(s),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?Object(c.a)(n,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,o=r.hasDeactivationUXRun,i=r.isActivated;(o||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(n)}),s.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=r.a({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&r%2!=0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,o=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(i,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(o,this.unboundedCoords_.top+"px"))},t}(o.a)},function(e,t,n){var r=n(16),o=n(43),i=n(42),a=n(61)("src"),s=n(200),c=(""+s).split("toString");n(26).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(4),o=n(17),i=n(55),a=/"/g,s=function(e,t,n,r){var o=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";var r,o,i=n(7),a=n(6),s=n(5),c=(n(24),n(1)),l=n(10),u=n(94),d=n(100),h={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},p={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},f={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(r||(r={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(o||(o={}));var v,m=n(25),g=n(192),y=n(81),_=n(8),b=function(e){function t(n){var r=e.call(this,c.a({},t.defaultAdapter,n))||this;return r.isOpen_=!1,r.isQuickOpen_=!1,r.isHoistedElement_=!1,r.isFixedPosition_=!1,r.openAnimationEndTimerId_=0,r.closeAnimationEndTimerId_=0,r.animationRequestId_=0,r.anchorCorner_=o.TOP_START,r.anchorMargin_={top:0,right:0,bottom:0,left:0},r.position_={x:0,y:0},r}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,n=e.ROOT,r=e.OPEN;if(!this.adapter_.hasClass(n))throw new Error(n+" class required in root element.");this.adapter_.hasClass(r)&&(this.isOpen_=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)},t.prototype.setAnchorCorner=function(e){this.anchorCorner_=e},t.prototype.setAnchorMargin=function(e){this.anchorMargin_.top=e.top||0,this.anchorMargin_.right=e.right||0,this.anchorMargin_.bottom=e.bottom||0,this.anchorMargin_.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement_=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition_=e},t.prototype.setAbsolutePosition=function(e,t){this.position_.x=this.isFinite_(e)?e:0,this.position_.y=this.isFinite_(t)?t:0},t.prototype.setQuickOpen=function(e){this.isQuickOpen_=e},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.open=function(){var e=this;this.adapter_.saveFocus(),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame((function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.isQuickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout((function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()}),f.TRANSITION_OPEN_DURATION)})),this.isOpen_=!0},t.prototype.close=function(e){var n=this;void 0===e&&(e=!1),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){n.adapter_.removeClass(t.cssClasses.OPEN),n.isQuickOpen_?n.adapter_.notifyClose():n.closeAnimationEndTimerId_=setTimeout((function(){n.closeAnimationEndTimerId_=0,n.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter_.notifyClose()}),f.TRANSITION_CLOSE_DURATION)})),this.isOpen_=!1,e||this.maybeRestoreFocus_()},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoPosition_=function(){var e;this.measurements_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),n=this.getMenuSurfaceMaxHeight_(t),o=this.hasBit_(t,r.BOTTOM)?"bottom":"top",i=this.hasBit_(t,r.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset_(t),s=this.getVerticalOriginOffset_(t),c=this.measurements_,l=c.anchorSize,u=c.surfaceSize,d=((e={})[i]=a,e[o]=s,e);l.width/u.width>f.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(i="center"),(this.isHoistedElement_||this.isFixedPosition_)&&this.adjustPositionForHoistedElement_(d),this.adapter_.setTransformOrigin(i+" "+o),this.adapter_.setPosition(d),this.adapter_.setMaxHeight(n?n+"px":"")},t.prototype.getAutoLayoutMeasurements_=function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getBodyDimensions(),n=this.adapter_.getWindowDimensions(),r=this.adapter_.getWindowScroll();return e||(e={top:this.position_.y,right:this.position_.x,bottom:this.position_.y,left:this.position_.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions_,viewportDistance:{top:e.top,right:n.width-e.right,bottom:n.height-e.bottom,left:e.left},viewportSize:n,windowScroll:r}},t.prototype.getOriginCorner_=function(){var e=o.TOP_LEFT,t=this.measurements_,n=t.viewportDistance,i=t.anchorSize,a=t.surfaceSize,s=this.hasBit_(this.anchorCorner_,r.BOTTOM),c=s?n.top+i.height+this.anchorMargin_.bottom:n.top+this.anchorMargin_.top,l=s?n.bottom-this.anchorMargin_.bottom:n.bottom+i.height-this.anchorMargin_.top,u=a.height-c,d=a.height-l;d>0&&u<d&&(e=this.setBit_(e,r.BOTTOM));var h=this.adapter_.isRtl(),p=this.hasBit_(this.anchorCorner_,r.FLIP_RTL),f=this.hasBit_(this.anchorCorner_,r.RIGHT),v=f&&!h||!f&&p&&h,m=v?n.left+i.width+this.anchorMargin_.right:n.left+this.anchorMargin_.left,g=v?n.right-this.anchorMargin_.right:n.right+i.width-this.anchorMargin_.left,y=a.width-m,_=a.width-g;return(y<0&&v&&h||f&&!v&&y<0||_>0&&y<_)&&(e=this.setBit_(e,r.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight_=function(e){var n=this.measurements_.viewportDistance,o=0,i=this.hasBit_(e,r.BOTTOM),a=this.hasBit_(this.anchorCorner_,r.BOTTOM),s=t.numbers.MARGIN_TO_EDGE;return i?(o=n.top+this.anchorMargin_.top-s,a||(o+=this.measurements_.anchorSize.height)):(o=n.bottom-this.anchorMargin_.bottom+this.measurements_.anchorSize.height-s,a&&(o-=this.measurements_.anchorSize.height)),o},t.prototype.getHorizontalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,r.RIGHT),o=this.hasBit_(this.anchorCorner_,r.RIGHT);if(n){var i=o?t.width-this.anchorMargin_.left:this.anchorMargin_.right;return this.isHoistedElement_||this.isFixedPosition_?i-(this.measurements_.viewportSize.width-this.measurements_.bodySize.width):i}return o?t.width-this.anchorMargin_.right:this.anchorMargin_.left},t.prototype.getVerticalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,r.BOTTOM),o=this.hasBit_(this.anchorCorner_,r.BOTTOM);return n?o?t.height-this.anchorMargin_.top:-this.anchorMargin_.bottom:o?t.height+this.anchorMargin_.bottom:this.anchorMargin_.top},t.prototype.adjustPositionForHoistedElement_=function(e){var t,n,r=this.measurements_,o=r.windowScroll,i=r.viewportDistance,a=Object.keys(e);try{for(var s=c.e(a),l=s.next();!l.done;l=s.next()){var u=l.value,d=e[u]||0;d+=i[u],this.isFixedPosition_||("top"===u?d+=o.y:"bottom"===u?d-=o.y:"left"===u?d+=o.x:d-=o.x),e[u]=d}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus_=function(){var e=this.adapter_.isFocused(),t=document.activeElement&&this.adapter_.isElementInContainer(document.activeElement);(e||t)&&this.adapter_.restoreFocus()},t.prototype.hasBit_=function(e,t){return Boolean(e&t)},t.prototype.setBit_=function(e,t){return e|t},t.prototype.isFinite_=function(e){return"number"==typeof e&&isFinite(e)},t}(_.a);var C,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root_.parentElement;this.anchorElement=t&&t.classList.contains(h.ANCHOR)?t:null,this.root_.classList.contains(h.FIXED)&&this.setFixedPosition(!0),this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleBodyClick_=function(t){return e.foundation_.handleBodyClick(t)},this.registerBodyClickListener_=function(){return document.body.addEventListener("click",e.handleBodyClick_)},this.deregisterBodyClickListener_=function(){return document.body.removeEventListener("click",e.handleBodyClick_)},this.listen("keydown",this.handleKeydown_),this.listen(p.OPENED_EVENT,this.registerBodyClickListener_),this.listen(p.CLOSED_EVENT,this.deregisterBodyClickListener_)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten(p.OPENED_EVENT,this.registerBodyClickListener_),this.unlisten(p.CLOSED_EVENT,this.deregisterBodyClickListener_),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation_.isOpen()},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation_.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation_.setQuickOpen(e)},enumerable:!0,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation_.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root_.classList.add(h.FIXED):this.root_.classList.remove(h.FIXED),this.foundation_.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation_.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation_.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new b({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(b.strings.CLOSED_EVENT,{})},notifyOpen:function(){return e.emit(b.strings.OPENED_EVENT,{})},isElementInContainer:function(t){return e.root_.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root_).getPropertyValue("direction")},setTransformOrigin:function(t){var n=function(e,t){if(void 0===t&&(t=!1),void 0===v||t){var n=e.document.createElement("div");v="transform"in n.style?"transform":"webkitTransform"}return v}(window)+"-origin";e.root_.style.setProperty(n,t)},isFocused:function(){return document.activeElement===e.root_},saveFocus:function(){e.previousFocus_=document.activeElement},restoreFocus:function(){e.root_.contains(document.activeElement)&&e.previousFocus_&&e.previousFocus_.focus&&e.previousFocus_.focus()},getInnerDimensions:function(){return{width:e.root_.offsetWidth,height:e.root_.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){e.root_.style.left="left"in t?t.left+"px":"",e.root_.style.right="right"in t?t.right+"px":"",e.root_.style.top="top"in t?t.top+"px":"",e.root_.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root_.style.maxHeight=t}})},t}(l.a),S={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},k={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},A={FOCUS_ROOT_INDEX:-1};!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(C||(C={}));var E=n(9),T=function(e){function t(n){var r=e.call(this,c.a({},t.defaultAdapter,n))||this;return r.closeAnimationEndTimerId_=0,r.defaultFocusState_=C.LIST_ROOT,r}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return S},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return A},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter_.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,n=this.adapter_.getElementIndex(e);n<0||(this.adapter_.notifySelected({index:n}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var n=t.adapter_.getElementIndex(e);t.adapter_.isSelectableItemAtIndex(n)&&t.setSelectedIndex(n)}),b.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case C.FIRST_ITEM:this.adapter_.focusItemAtIndex(0);break;case C.LAST_ITEM:this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount()-1);break;case C.NONE:break;default:this.adapter_.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter_.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter_.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter_.removeAttributeFromElementAtIndex(t,k.ARIA_CHECKED_ATTR),this.adapter_.removeClassFromElementAtIndex(t,S.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(e,S.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(e,k.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter_.removeClassFromElementAtIndex(e,E.a.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,k.ARIA_DISABLED_ATTR,"false")):(this.adapter_.addClassToElementAtIndex(e,E.a.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,k.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter_.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(_.a),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new w(e)}),void 0===t&&(t=function(e){return new g.a(e)}),this.menuSurfaceFactory_=e,this.listFactory_=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(k.LIST_SELECTOR);t?(this.list_=this.listFactory_(t),this.list_.wrapFocus=!0):this.list_=null,this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened_=function(){return e.foundation_.handleMenuSurfaceOpened()},this.menuSurface_.listen(b.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.listen("keydown",this.handleKeydown_),this.listen(y.a.strings.ACTION_EVENT,this.handleItemAction_)},t.prototype.destroy=function(){this.list_&&this.list_.destroy(),this.menuSurface_.destroy(),this.menuSurface_.unlisten(b.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.unlisten("keydown",this.handleKeydown_),this.unlisten(y.a.strings.ACTION_EVENT,this.handleItemAction_),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.isOpen()},set:function(e){e?this.menuSurface_.open():this.menuSurface_.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list_&&this.list_.wrapFocus},set:function(e){this.list_&&(this.list_.wrapFocus=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:!0,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation_.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation_.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this;return new T({addClassToElementAtIndex:function(t,n){e.items[t].classList.add(n)},removeClassFromElementAtIndex:function(t,n){e.items[t].classList.remove(n)},addAttributeToElementAtIndex:function(t,n,r){e.items[t].setAttribute(n,r)},removeAttributeFromElementAtIndex:function(t,n){e.items[t].removeAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){return e.menuSurface_.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){return e.emit(k.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){return e.items[t].focus()},focusListRoot:function(){return e.root_.querySelector(k.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!Object(m.a)(e.items[t],"."+S.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var n=Object(m.a)(e.items[t],"."+S.MENU_SELECTION_GROUP).querySelector("."+S.MENU_SELECTED_LIST_ITEM);return n?e.items.indexOf(n):-1}})},t}(l.a),x=n(101),M=n(27),I=n(35),L={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",SELECTED_ITEM_CLASS:"mdc-list-item--selected",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},N={ARIA_CONTROLS:"aria-controls",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_ITEM_SELECTOR:"."+L.SELECTED_ITEM_CLASS,SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},R={LABEL_SCALE:.75,UNSET_INDEX:-1},D=function(e){function t(n,r){void 0===r&&(r={});var o=e.call(this,c.a({},t.defaultAdapter,n))||this;return o.selectedIndex_=R.UNSET_INDEX,o.disabled_=!1,o.isMenuOpen_=!1,o.leadingIcon_=r.leadingIcon,o.helperText_=r.helperText,o.menuItemValues_=o.adapter_.getMenuItemValues(),o}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return L},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return N},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedMenuItem:function(){return null},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectedTextFocused:function(){return!1},getSelectedTextAttr:function(){return""},setSelectedTextAttr:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},setAttributeAtIndex:function(){},removeAttributeAtIndex:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},getMenuItemAttr:function(){return""},addClassAtIndex:function(){},removeClassAtIndex:function(){}}},enumerable:!0,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e,t){if(void 0===t&&(t=!1),!(e>=this.adapter_.getMenuItemCount())){var n=this.selectedIndex_;this.selectedIndex_=e,this.selectedIndex_===R.UNSET_INDEX?this.adapter_.setSelectedText(""):this.adapter_.setSelectedText(this.adapter_.getMenuItemTextAtIndex(this.selectedIndex_).trim()),n!==R.UNSET_INDEX&&(this.adapter_.removeClassAtIndex(n,L.SELECTED_ITEM_CLASS),this.adapter_.removeAttributeAtIndex(n,N.ARIA_SELECTED_ATTR)),this.selectedIndex_!==R.UNSET_INDEX&&(this.adapter_.addClassAtIndex(this.selectedIndex_,L.SELECTED_ITEM_CLASS),this.adapter_.setAttributeAtIndex(this.selectedIndex_,N.ARIA_SELECTED_ATTR,"true")),this.layout(),t&&this.adapter_.closeMenu(),this.handleChange()}},t.prototype.setValue=function(e){var t=this.menuItemValues_.indexOf(e);this.setSelectedIndex(t),this.handleChange()},t.prototype.getValue=function(){var e=this.adapter_.getSelectedMenuItem();return e&&this.adapter_.getMenuItemAttr(e,N.VALUE_ATTR)||""},t.prototype.getDisabled=function(){return this.disabled_},t.prototype.setDisabled=function(e){this.disabled_=e,this.disabled_?(this.adapter_.addClass(L.DISABLED),this.adapter_.closeMenu()):this.adapter_.removeClass(L.DISABLED),this.leadingIcon_&&this.leadingIcon_.setDisabled(this.disabled_),this.adapter_.setSelectedTextAttr("tabindex",this.disabled_?"-1":"0"),this.adapter_.setSelectedTextAttr("aria-disabled",this.disabled_.toString())},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.layout=function(){if(this.adapter_.hasLabel()){var e=this.getValue().length>0;this.notchOutline(e)}},t.prototype.handleMenuOpened=function(){if(0!==this.adapter_.getMenuItemValues().length){this.adapter_.addClass(L.ACTIVATED);var e=this.selectedIndex_>=0?this.selectedIndex_:0;this.adapter_.focusMenuItemAtIndex(e)}},t.prototype.handleMenuClosed=function(){this.adapter_.removeClass(L.ACTIVATED),this.isMenuOpen_=!1,this.adapter_.setSelectedTextAttr("aria-expanded","false"),this.adapter_.isSelectedTextFocused()||this.blur_()},t.prototype.handleChange=function(){this.updateLabel_(),this.adapter_.notifyChange(this.getValue()),this.adapter_.hasClass(L.REQUIRED)&&(this.setValid(this.isValid()),this.helperText_&&this.helperText_.setValidity(this.isValid()))},t.prototype.handleMenuItemAction=function(e){this.setSelectedIndex(e,!0)},t.prototype.handleFocus=function(){this.adapter_.addClass(L.FOCUSED),this.adapter_.hasLabel()&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.activateBottomLine(),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.handleBlur=function(){this.isMenuOpen_||this.blur_()},t.prototype.handleClick=function(e){this.isMenuOpen_||(this.adapter_.setRippleCenter(e),this.adapter_.openMenu(),this.isMenuOpen_=!0,this.adapter_.setSelectedTextAttr("aria-expanded","true"))},t.prototype.handleKeydown=function(e){if(!this.isMenuOpen_){var t="Enter"===e.key||13===e.keyCode,n="Space"===e.key||32===e.keyCode,r="ArrowUp"===e.key||38===e.keyCode,o="ArrowDown"===e.key||40===e.keyCode;this.adapter_.hasClass(L.FOCUSED)&&(t||n||r||o)&&(this.adapter_.openMenu(),this.isMenuOpen_=!0,this.adapter_.setSelectedTextAttr("aria-expanded","true"),e.preventDefault())}},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline()){var t=this.adapter_.hasClass(L.FOCUSED);if(e){var n=R.LABEL_SCALE,r=this.adapter_.getLabelWidth()*n;this.adapter_.notchOutline(r)}else t||this.adapter_.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setValid=function(e){this.adapter_.setSelectedTextAttr("aria-invalid",(!e).toString()),e?this.adapter_.removeClass(L.INVALID):this.adapter_.addClass(L.INVALID)},t.prototype.isValid=function(){return!(this.adapter_.hasClass(L.REQUIRED)&&!this.adapter_.hasClass(L.DISABLED))||this.selectedIndex_!==R.UNSET_INDEX&&(0!==this.selectedIndex_||Boolean(this.getValue()))},t.prototype.setRequired=function(e){e?this.adapter_.addClass(L.REQUIRED):this.adapter_.removeClass(L.REQUIRED),this.adapter_.setSelectedTextAttr("aria-required",e.toString())},t.prototype.getRequired=function(){return"true"===this.adapter_.getSelectedTextAttr("aria-required")},t.prototype.init=function(){var e=this.adapter_.getAnchorElement();e&&(this.adapter_.setMenuAnchorElement(e),this.adapter_.setMenuAnchorCorner(o.BOTTOM_START)),this.adapter_.setMenuWrapFocus(!1);var t=this.getValue();t&&this.setValue(t),this.updateLabel_()},t.prototype.updateLabel_=function(){var e=this.getValue().length>0;this.adapter_.hasLabel()&&(this.notchOutline(e),this.adapter_.hasClass(L.FOCUSED)||this.adapter_.floatLabel(e))},t.prototype.blur_=function(){this.adapter_.removeClass(L.FOCUSED),this.updateLabel_(),this.adapter_.deactivateBottomLine(),this.adapter_.hasClass(L.REQUIRED)&&(this.setValid(this.isValid()),this.helperText_&&this.helperText_.setValidity(this.isValid()))},t}(_.a),P={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},F={HELPER_TEXT_PERSISTENT:"mdc-select-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg"},H=function(e){function t(n){return e.call(this,c.a({},t.defaultAdapter,n))||this}return c.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return F},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return P},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(F.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(F.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(F.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(F.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(P.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(F.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(F.HELPER_TEXT_VALIDATION_MSG)&&!e;n?this.adapter_.setAttr(P.ROLE,"alert"):this.adapter_.removeAttr(P.ROLE),t||n||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(P.ARIA_HIDDEN,"true")},t}(_.a),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new H({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(l.a),j={ICON_EVENT:"MDCSelect:icon",ICON_ROLE:"button"},q=["click","keydown"],V=function(e){function t(n){var r=e.call(this,c.a({},t.defaultAdapter,n))||this;return r.savedTabIndex_=null,r.interactionHandler_=function(e){return r.handleInteraction(e)},r}return c.b(t,e),Object.defineProperty(t,"strings",{get:function(){return j},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),q.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;q.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",j.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(_.a),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new V({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)},notifyIconAction:function(){return e.emit(V.strings.ICON_EVENT,{},!0)}})},t}(l.a),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,n,r,o,i){if(void 0===e&&(e=function(e){return new u.a(e)}),void 0===t&&(t=function(e){return new d.a(e)}),void 0===n&&(n=function(e){return new x.a(e)}),void 0===r&&(r=function(e){return new O(e)}),void 0===o&&(o=function(e){return new z(e)}),void 0===i&&(i=function(e){return new B(e)}),this.selectAnchor_=this.root_.querySelector(N.SELECT_ANCHOR_SELECTOR),this.selectedText_=this.root_.querySelector(N.SELECTED_TEXT_SELECTOR),!this.selectedText_)throw new Error("MDCSelect: Missing required element: The following selector must be present: '"+N.SELECTED_TEXT_SELECTOR+"'");if(this.selectedText_.hasAttribute(N.ARIA_CONTROLS)){var a=document.getElementById(this.selectedText_.getAttribute(N.ARIA_CONTROLS));a&&(this.helperText_=i(a))}this.menuSetup_(r);var s=this.root_.querySelector(N.LABEL_SELECTOR);this.label_=s?e(s):null;var c=this.root_.querySelector(N.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var l=this.root_.querySelector(N.OUTLINE_SELECTOR);this.outline_=l?n(l):null;var h=this.root_.querySelector(N.LEADING_ICON_SELECTOR);h&&(this.leadingIcon_=o(h)),this.root_.classList.contains(L.OUTLINED)||(this.ripple_=this.createRipple_())},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleFocus_=function(){return e.foundation_.handleFocus()},this.handleBlur_=function(){return e.foundation_.handleBlur()},this.handleClick_=function(t){e.selectedText_.focus(),e.foundation_.handleClick(e.getNormalizedXCoordinate_(t))},this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleMenuItemAction_=function(t){return e.foundation_.handleMenuItemAction(t.detail.index)},this.handleMenuOpened_=function(){return e.foundation_.handleMenuOpened()},this.handleMenuClosed_=function(){return e.foundation_.handleMenuClosed()},this.selectedText_.addEventListener("focus",this.handleFocus_),this.selectedText_.addEventListener("blur",this.handleBlur_),this.selectedText_.addEventListener("click",this.handleClick_),this.selectedText_.addEventListener("keydown",this.handleKeydown_),this.menu_.listen(p.CLOSED_EVENT,this.handleMenuClosed_),this.menu_.listen(p.OPENED_EVENT,this.handleMenuOpened_),this.menu_.listen(k.SELECTED_EVENT,this.handleMenuItemAction_),this.foundation_.init(),this.disabled=this.root_.classList.contains(L.DISABLED)},t.prototype.destroy=function(){this.selectedText_.removeEventListener("change",this.handleChange_),this.selectedText_.removeEventListener("focus",this.handleFocus_),this.selectedText_.removeEventListener("blur",this.handleBlur_),this.selectedText_.removeEventListener("keydown",this.handleKeydown_),this.selectedText_.removeEventListener("click",this.handleClick_),this.menu_.unlisten(p.CLOSED_EVENT,this.handleMenuClosed_),this.menu_.unlisten(p.OPENED_EVENT,this.handleMenuOpened_),this.menu_.unlisten(k.SELECTED_EVENT,this.handleMenuItemAction_),this.menu_.destroy(),this.ripple_&&this.ripple_.destroy(),this.outline_&&this.outline_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.helperText_&&this.helperText_.destroy(),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.getDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.foundation_.getRequired()},set:function(e){this.foundation_.setRequired(e)},enumerable:!0,configurable:!0}),t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){var e=c.a({},this.getSelectAdapterMethods_(),this.getCommonAdapterMethods_(),this.getOutlineAdapterMethods_(),this.getLabelAdapterMethods_());return new D(e,this.getFoundationMap_())},t.prototype.menuSetup_=function(e){this.menuElement_=this.root_.querySelector(N.MENU_SELECTOR),this.menu_=e(this.menuElement_)},t.prototype.createRipple_=function(){var e=this,t=c.a({},M.a.createAdapter({root_:this.selectAnchor_}),{registerInteractionHandler:function(t,n){return e.selectedText_.addEventListener(t,n)},deregisterInteractionHandler:function(t,n){return e.selectedText_.removeEventListener(t,n)}});return new M.a(this.selectAnchor_,new I.a(t))},t.prototype.getSelectAdapterMethods_=function(){var e=this;return{getSelectedMenuItem:function(){return e.menuElement_.querySelector(N.SELECTED_ITEM_SELECTOR)},getMenuItemAttr:function(e,t){return e.getAttribute(t)},setSelectedText:function(t){return e.selectedText_.textContent=t},isSelectedTextFocused:function(){return document.activeElement===e.selectedText_},getSelectedTextAttr:function(t){return e.selectedText_.getAttribute(t)},setSelectedTextAttr:function(t,n){return e.selectedText_.setAttribute(t,n)},openMenu:function(){return e.menu_.open=!0},closeMenu:function(){return e.menu_.open=!1},getAnchorElement:function(){return e.root_.querySelector(N.SELECT_ANCHOR_SELECTOR)},setMenuAnchorElement:function(t){return e.menu_.setAnchorElement(t)},setMenuAnchorCorner:function(t){return e.menu_.setAnchorCorner(t)},setMenuWrapFocus:function(t){return e.menu_.wrapFocus=t},setAttributeAtIndex:function(t,n,r){return e.menu_.items[t].setAttribute(n,r)},removeAttributeAtIndex:function(t,n){return e.menu_.items[t].removeAttribute(n)},focusMenuItemAtIndex:function(t){return e.menu_.items[t].focus()},getMenuItemCount:function(){return e.menu_.items.length},getMenuItemValues:function(){return e.menu_.items.map((function(e){return e.getAttribute(N.VALUE_ATTR)||""}))},getMenuItemTextAtIndex:function(t){return e.menu_.items[t].textContent},addClassAtIndex:function(t,n){return e.menu_.items[t].classList.add(n)},removeClassAtIndex:function(t,n){return e.menu_.items[t].classList.remove(n)}}},t.prototype.getCommonAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setRippleCenter:function(t){return e.lineRipple_&&e.lineRipple_.setRippleCenter(t)},activateBottomLine:function(){return e.lineRipple_&&e.lineRipple_.activate()},deactivateBottomLine:function(){return e.lineRipple_&&e.lineRipple_.deactivate()},notifyChange:function(t){var n=e.selectedIndex;e.emit(N.CHANGE_EVENT,{value:t,index:n},!0)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)},closeOutline:function(){return e.outline_&&e.outline_.closeNotch()}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{hasLabel:function(){return!!e.label_},floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0}}},t.prototype.getNormalizedXCoordinate_=function(e){var t=e.target.getBoundingClientRect();return(this.isTouchEvent_(e)?e.touches[0].clientX:e.clientX)-t.left},t.prototype.isTouchEvent_=function(e){return Boolean(e.touches)},t.prototype.getFoundationMap_=function(){return{helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0}},t}(l.a);n(173),n(385),n(386),n(387),n(388);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return U}));var U=function(e){babelHelpers.inherits(r,e);var t,n=W(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String,toComponent:!0},disabled:{type:Boolean,toComponent:!0},selectedIndex:{type:Boolean,toComponent:!0},id:{type:String},inputId:{type:String},choices:{type:Array,default:[]},comment:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String},inputClasses:{type:String},compact:{type:Boolean}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-radio-helper-text--show"):n.classList.add("ct-radio-helper-text--show")}},{key:"supressNextChangeEvent",value:function(){this._ignoreNextChange=!0}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),t.compact&&this.classList.add("ct-select-compact"),this._component=G.attachTo(this),this._component.listen("MDCSelect:change",(function(){if(n._ignoreNextChange)n._ignoreNextChange=!1;else{var e={value:n.value,selectedIndex:n.selectedIndex,name:t.name,type:"select"};n.querySelector("input").value=n.value,n.dispatchEvent(new CustomEvent("change",{detail:e,bubbles:!0,cancelable:!0}))}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.nameAsId?e.name:e.inputId||Object(s.a)(),n=(e.helperId,e.helperClass,null),r=null,o=null,i=e.choices.map((function(e,t){var i=e.value;return"function"==typeof e&&(i=i()),t||(o=i),e.selected&&(n=e.label,r=i),'<li data-value="'.concat(i,'" class="mdc-list-item ').concat(e.selected?"mdc-list-item--selected":"",'" ').concat(e.selected?'aria-selected="true"':"",">").concat(e.label,"</li>")})).join(""),a="";e.inputClasses&&(a=e.inputClasses);var c="";return null!==r?c=r:null!==o&&(c=o),'<input id="'.concat(t,'" value="').concat(c,'" class="').concat(a,'" type="hidden" name="').concat(e.name||"",'">\n                  <div class="mdc-select__anchor ct-select-width">\n                    <i class="mdc-select__dropdown-icon"></i>\n                    <div class="mdc-select__selected-text">').concat(n||"",'</div>\n                    <span class="mdc-floating-label ').concat(n?"mdc-floating-label--float-above":"",'">').concat(e.label||"",'</span>\n                    <div class="mdc-line-ripple"></div>\n                  </div>\n                  <div class="mdc-select__menu mdc-menu mdc-menu-surface ct-select-width">\n                   <ul class="mdc-list">\n                    ').concat(i,"\n                   </ul>\n                  </div>").concat(e.comment?'<div class="ct-select-comment">'.concat(e.comment,"</div>"):"")}},{key:"getComponentFromInput",value:function(e){return e.parentNode}},{key:"createChoice",value:function(e,t,n){return{label:e,value:t,selected:t==n}}},{key:"createChoices",value:function(e,t){return e.map((function(e){return r.createChoice(e.label,e.value,t)}))}}]),r}(i.a);U.componentName="ct-select",U.classes="mdc-select ct-select-width",a.a.define(U)},function(e,t,n){"use strict";var r=n(7),o=n(6),i=n(5),a=n(27),s=n(1),c=n(10),l=n(8),u={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},d={ARIA_PRESSED:"aria-pressed",CHANGE_EVENT:"MDCIconButtonToggle:change"},h=function(e){function t(n){return e.call(this,s.a({},t.defaultAdapter,n))||this}return s.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.setAttr(d.ARIA_PRESSED,""+this.isOn())},t.prototype.handleClick=function(){this.toggle(),this.adapter_.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter_.hasClass(u.ICON_BUTTON_ON)},t.prototype.toggle=function(e){void 0===e&&(e=!this.isOn()),e?this.adapter_.addClass(u.ICON_BUTTON_ON):this.adapter_.removeClass(u.ICON_BUTTON_ON),this.adapter_.setAttr(d.ARIA_PRESSED,""+e)},t}(l.a),p=h.strings,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return s.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleClick_=function(){return e.foundation_.handleClick()},this.listen("click",this.handleClick_)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick_),this.ripple_.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new h({addClass:function(t){return e.root_.classList.add(t)},hasClass:function(t){return e.root_.classList.contains(t)},notifyChange:function(t){return e.emit(p.CHANGE_EVENT,t)},removeClass:function(t){return e.root_.classList.remove(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)}})},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.foundation_.isOn()},set:function(e){this.foundation_.toggle(e)},enumerable:!0,configurable:!0}),t.prototype.createRipple_=function(){var e=new a.a(this.root_);return e.unbounded=!0,e},t}(c.a);n(174),n(389),n(390),n(391);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return m}));var m=function(e){babelHelpers.inherits(r,e);var t,n=v(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String},disabled:{type:Boolean},raised:{type:Boolean},outlined:{type:Boolean},title:{type:String},buttonType:{type:String,default:"button"},buttonId:{type:String},buttonClasses:{type:String},coloured:{type:Boolean},accent:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},className:{type:String},classes:{type:String},iconName:{type:String},toggleIconName:{type:String},svgIconName:{type:String},iconOnly:{type:Boolean},labelAsIcon:{type:Boolean},tooltip:{type:String},compact:{type:Boolean},attributes:{type:Array},fab:{type:Boolean},fabMini:{type:Boolean},appendSpinner:{type:Boolean},startSpinner:{type:Boolean},html:{type:Boolean}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.html?this.innerHTML:this.textContent.trim(),t.label=t.label||n||"",this.innerHTML=r.toHtml(t),t.toggleIconName?(this._component=f.attachTo(this.querySelector("button")),this._component.listen("MDCIconButtonToggle:change",(function(){o.dispatchEvent(new CustomEvent("change",{detail:{value:o._component.on,name:t.name,type:"toggle"},bubbles:!0,cancelable:!0}))}))):(this._component=a.a.attachTo(this.querySelector("button")),t.iconOnly&&(this._component.unbounded=!0)),t.compact&&this.classList.add("ct-button-compact");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isOn",value:function(){return this._component.on}},{key:"toggle",value:function(e){this._component.on=e}},{key:"updated",value:function(e,t){switch(e){case"disabled":this.querySelector("button").disabled=t;break;case"label":var n=this.querySelector(".mdc-button__label");n&&(n.innerHTML=t);break;case"accent":var o=this.querySelector("button");t?r.ACCENT_CLASSES.forEach((function(e){return o.classList.add(e)})):r.ACCENT_CLASSES.forEach((function(e){return o.classList.remove(e)}));break;case"iconName":this.querySelector("button").innerHTML=t}}}],[{key:"toHtml",value:function(e){var t=e.buttonId||Object(i.a)(),n="",o=e.fab?"mdc-fab":e.fabMini?"mdc-fab mdc-fab--mini":"",a=o||"mdc-icon-button ".concat(e.iconName?"material-icons":e.labelAsIcon?"ct-label-icon":"ct-svg-icon"),s=e.iconOnly||o?a:"mdc-button";e.className&&(s+=" "+e.className),e.buttonClasses&&(s+=" "+e.buttonClasses),e.iconOnly||o||(e.coloured,e.raised&&(s+=" mdc-button--raised"),e.outlined&&(s+=" mdc-button--outlined"),e.accent&&(s+=" "+r.ACCENT_CLASSES.join(" ")),e.appendSpinner&&(n=" <circular-progress ".concat(e.startSpinner?'closed="false"':"","></circular-progress>")));var c=e.tooltip?e.tooltip:"",l=e.attributes?e.attributes.map((function(e){return" ".concat(e[0],'="').concat(e[1],'"')})).join(""):"";if(e.iconOnly||o){var u="";if(o)u='<span class="mdc-fab__icon '.concat(e.iconName?"material-icons":"",'">').concat(e.iconName,"</span>");else if(e.iconName)u=e.toggleIconName?'<i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">'.concat(e.iconName,'</i>\n                               <i class="material-icons mdc-icon-button__icon">').concat(e.toggleIconName,"</i>"):e.iconName;else if(e.labelAsIcon)u='<span class="ct-icon-button-label">'.concat(e.label,"</span>");else if(e.svgIconName){var d="/images/"+e.svgIconName+".svg";0==e.svgIconName.indexOf("/images")&&(d=e.svgIconName),u='<img alt="'.concat(e.title||"",'" src="').concat((window._ctImgPath||"")+d,'"/>')}return"<button id=".concat(t," ").concat(l,"  ").concat(e.disabled?"disabled":"",' type="').concat(e.buttonType,'" ').concat(c?'data-tooltip aria-label="'.concat(c,'"'):"",' aria-label="').concat(e.title||e.label||"",'" class="').concat(s,'">').concat(u,"</button>")}return"<button id=".concat(t," ").concat(l," ").concat(e.disabled?"disabled":"",' type="').concat(e.buttonType,'" ').concat(c?'data-tooltip aria-label="'.concat(c,'"'):"",' class="').concat(s,'"><span class="ct-button-label mdc-button__label">').concat(e.label).concat(n,"</span></button>")}},{key:"getComponentFromButton",value:function(e){return e.parentNode}}]),r}(r.a);m.ACCENT_CLASSES=["mdc-theme--secondary-bg","mdc-theme--on-secondary"],m.componentName="ct-button",o.a.define(m)},function(e,t,n){"use strict";for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||s&&c,d=0;d<10;d++)r[48+d]=r[96+d]=String(d);for(d=1;d<=24;d++)r[d+111]="F"+d;for(d=65;d<=90;d++)r[d]=String.fromCharCode(d+32),o[d]=String.fromCharCode(d);for(var h in r)o.hasOwnProperty(h)||(o[h]=r[h]);var p=n(3);n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g}));var f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var c=i[s];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);f?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function m(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function g(e){return new p.Plugin({props:{handleKeyDown:y(e)}})}function y(e){var t=function(e){var t=Object.create(null);for(var n in e)t[v(n)]=e[n];return t}(e);return function(e,n){var i,s=function(e){var t=!(u&&(e.ctrlKey||e.altKey||e.metaKey)||(a||l)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),c=1==s.length&&" "!=s,d=t[m(s,n,!c)];if(d&&d(e.state,e.dispatch,e))return!0;if(c&&(n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=s){var h=t[m(i,n,!0)];if(h&&h(e.state,e.dispatch,e))return!0}else if(c&&n.shiftKey){var p=t[m(s,n,!0)];if(p&&p(e.state,e.dispatch,e))return!0}return!1}}},function(e,t,n){"use strict";n.r(t),n.d(t,"CellSelection",(function(){return R})),n.d(t,"TableMap",(function(){return f})),n.d(t,"TableView",(function(){return Ee})),n.d(t,"__clipCells",(function(){return B})),n.d(t,"__insertCells",(function(){return V})),n.d(t,"__pastedCells",(function(){return F})),n.d(t,"addColSpan",(function(){return L})),n.d(t,"addColumn",(function(){return re})),n.d(t,"addColumnAfter",(function(){return ie})),n.d(t,"addColumnBefore",(function(){return oe})),n.d(t,"addRow",(function(){return le})),n.d(t,"addRowAfter",(function(){return de})),n.d(t,"addRowBefore",(function(){return ue})),n.d(t,"cellAround",(function(){return C})),n.d(t,"colCount",(function(){return O})),n.d(t,"columnIsHeader",(function(){return N})),n.d(t,"columnResizing",(function(){return xe})),n.d(t,"columnResizingPluginKey",(function(){return Oe})),n.d(t,"deleteColumn",(function(){return se})),n.d(t,"deleteRow",(function(){return pe})),n.d(t,"deleteTable",(function(){return Ae})),n.d(t,"findCell",(function(){return T})),n.d(t,"fixTables",(function(){return te})),n.d(t,"fixTablesKey",(function(){return ee})),n.d(t,"goToNextCell",(function(){return ke})),n.d(t,"handlePaste",(function(){return Y})),n.d(t,"inSameTable",(function(){return E})),n.d(t,"isInTable",(function(){return w})),n.d(t,"mergeCells",(function(){return ve})),n.d(t,"moveCellForward",(function(){return A})),n.d(t,"nextCell",(function(){return x})),n.d(t,"pointsAtCell",(function(){return k})),n.d(t,"removeColSpan",(function(){return I})),n.d(t,"removeColumn",(function(){return ae})),n.d(t,"removeRow",(function(){return he})),n.d(t,"rowIsHeader",(function(){return ce})),n.d(t,"selectedRect",(function(){return ne})),n.d(t,"selectionCell",(function(){return S})),n.d(t,"setAttr",(function(){return M})),n.d(t,"setCellAttr",(function(){return ye})),n.d(t,"splitCell",(function(){return me})),n.d(t,"splitCellWithType",(function(){return ge})),n.d(t,"tableEditing",(function(){return De})),n.d(t,"tableEditingKey",(function(){return b})),n.d(t,"tableNodeTypes",(function(){return _})),n.d(t,"tableNodes",(function(){return y})),n.d(t,"toggleHeader",(function(){return be})),n.d(t,"toggleHeaderCell",(function(){return Se})),n.d(t,"toggleHeaderColumn",(function(){return we})),n.d(t,"toggleHeaderRow",(function(){return Ce})),n.d(t,"updateColumnsOnResize",(function(){return Te}));var r,o,i=n(3),a=n(2),s=n(40),c=n(53),l=n(13);if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(e){return u.get(e)},o=function(e,t){return u.set(e,t),t}}else{var d=[],h=0;r=function(e){for(var t=0;t<d.length;t+=2)if(d[t]==e)return d[t+1]},o=function(e,t){return 10==h&&(h=0),d[h++]=e,d[h++]=t}}var p=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},f=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function v(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function m(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var a in t){var s=t[a].getFromDOM,c=s&&s(e);null!=c&&(i[a]=c)}return i}function g(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function y(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return m(e,t)}}],toDOM:function(e){return["td",g(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return m(e,t)}}],toDOM:function(e){return["th",g(e,t),0]}}}}function _(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}f.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(var c=1;a<this.height&&this.map[t+this.width*c]==n;c++)a++;return new p(r,o,i,a)}}throw new RangeError("No cell with offset "+e+" found")},f.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},f.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]},f.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,s=this.findCell(t),c=s.left,l=s.right,u=s.top,d=s.bottom;return new p(Math.min(r,c),Math.min(i,u),Math.max(o,l),Math.max(a,d))},f.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t},f.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}},f.get=function(e){return r(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),c=0;c<s.childCount;c++){var l=s.child(c);a+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var d=o.child(u);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,c=t*n;s<c;s++)r[s]=0;for(var l=0,u=0;l<n;l++){var d=e.child(l);u++;for(var h=0;;h++){for(;o<r.length&&0!=r[o];)o++;if(h==d.childCount)break;for(var p=d.child(h),m=p.attrs,g=m.colspan,y=m.rowspan,_=m.colwidth,b=0;b<y;b++){if(b+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:y-b});break}for(var C=o+b*t,w=0;w<g;w++){0==r[C+w]?r[C+w]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:g-w});var S=_&&_[w];if(S){var k=(C+w)%t*2,A=a[k];null==A||A!=S&&1==a[k+1]?(a[k]=S,a[k+1]=1):A==S&&a[k+1]++}}}o+=g,u+=p.nodeSize}for(var E=(l+1)*t,T=0;o<E;)0==r[o++]&&T++;T&&(i||(i=[])).push({type:"missing",row:l,n:T}),u++}for(var O=new f(t,n,r,i),x=!1,M=0;!x&&M<a.length;M+=2)null!=a[M]&&a[M+1]<n&&(x=!0);x&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var a=n.nodeAt(i),s=null,c=0;c<a.attrs.colspan;c++){var l=(r+c)%e.width,u=t[2*l];null==u||a.attrs.colwidth&&a.attrs.colwidth[c]==u||((s||(s=v(a.attrs)))[c]=u)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(O,a,e);return O}(e))};var b=new i.PluginKey("selectingCells");function C(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function w(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function S(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:C(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function k(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function A(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function E(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function T(e){return f.get(e.node(-1)).findCell(e.pos-e.start(-1))}function O(e){return f.get(e.node(-1)).colCount(e.pos-e.start(-1))}function x(e,t,n){var r=e.start(-1),o=f.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function M(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function I(e,t,n){void 0===n&&(n=1);var r=M(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function L(e,t,n){void 0===n&&(n=1);var r=M(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function N(e,t,n){for(var r=_(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var R=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),o=f.get(r),a=t.start(-1),s=o.rectBetween(t.pos-a,n.pos-a),c=t.node(0),l=o.cellsInRect(s).filter((function(e){return e!=n.pos-a}));l.unshift(n.pos-a);var u=l.map((function(e){var t=r.nodeAt(e),n=e+a+1;return new i.SelectionRange(c.resolve(n),c.resolve(n+t.content.size))}));e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(k(r)&&k(o)&&E(r,o)){var a=this.$anchorCell.node(-1)!=r.node(-1);return a&&this.isRowSelection()?t.rowSelection(r,o):a&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return i.TextSelection.between(r,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=f.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var c=[],l=s*t.width+r.left,u=r.left;u<r.right;u++,l++){var d=t.map[l];if(!o[d]){o[d]=!0;var h=t.findCell(d),p=e.nodeAt(d),v=r.left-h.left,m=h.right-r.right;if(v>0||m>0){var g=p.attrs;v>0&&(g=I(g,0,v)),m>0&&(g=I(g,g.colspan-m,m)),p=h.left<r.left?p.type.createAndFill(g):p.type.create(g,p.content)}if(h.top<r.top||h.bottom>r.bottom){var y=M(p.attrs,"rowspan",Math.min(h.bottom,r.bottom)-Math.max(h.top,r.top));p=h.top<r.top?p.type.createAndFill(y):p.type.create(y,p.content)}c.push(p)}}i.push(e.child(s).copy(a.Fragment.from(c)))}var _=this.isColSelection()&&this.isRowSelection()?e:i;return new a.Slice(a.Fragment.from(_),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a.Slice.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],c=s.$from,l=s.$to,u=t.mapping.slice(r);t.replace(u.map(c.pos),u.map(l.pos),i?a.Slice.empty:n)}var d=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);d&&t.setSelection(d)},t.prototype.replaceWith=function(e,t){this.replace(e,new a.Slice(a.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=f.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=f.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),a=r.findCell(n.pos-o),s=e.node(0);return i.top<=a.top?(i.top>0&&(e=s.resolve(o+r.map[i.left])),a.bottom<r.height&&(n=s.resolve(o+r.map[r.width*(r.height-1)+a.right-1]))):(a.top>0&&(n=s.resolve(o+r.map[a.left])),i.bottom<r.height&&(e=s.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=f.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=f.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),a=r.findCell(n.pos-o),s=e.node(0);return i.left<=a.left?(i.left>0&&(e=s.resolve(o+r.map[i.top*r.width])),a.right<r.width&&(n=s.resolve(o+r.map[r.width*(a.top+1)-1]))):(a.left>0&&(n=s.resolve(o+r.map[a.top*r.width])),i.right<r.width&&(e=s.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new D(this.$anchorCell.pos,this.$headCell.pos)},t}(i.Selection);R.prototype.visible=!1,i.Selection.jsonID("cell",R);var D=function(e,t){this.anchor=e,this.head=t};function P(e){if(!(e.selection instanceof R))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(c.a.node(n,n+e.nodeSize,{class:"selectedCell"}))})),c.b.create(e.doc,t)}function F(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,c=[];if("row"==i)for(var l=0;l<t.childCount;l++){var u=t.child(l).content,d=l?0:Math.max(0,n-1),h=l<t.childCount-1?0:Math.max(0,r-1);(d||h)&&(u=H(_(s).row,new a.Slice(u,d,h)).content),c.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;c.push(n||r?H(_(s).row,new a.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,c=s.rowspan,l=s.colspan,u=r;u<r+c;u++)n[u]=(n[u]||0)+l;for(var d=0,h=0;h<n.length;h++)d=Math.max(d,n[h]);for(var p=0;p<n.length;p++)if(p>=t.length&&t.push(a.Fragment.empty),n[p]<d){for(var f=_(e).cell.createAndFill(),v=[],m=n[p];m<d;m++)v.push(f);t[p]=t[p].append(a.Fragment.from(v))}return{height:t.length,width:d,rows:t}}(s,c)}function H(e,t){var n=e.createAndFill();return new l.d(n).replace(0,n.content.size,t).doc}function B(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var s=[],c=[],l=0;l<i.length;l++){for(var u=i[l],d=[],h=s[l]||0,p=0;h<t;p++){var f=u.child(p%u.childCount);h+f.attrs.colspan>t&&(f=f.type.create(I(f.attrs,f.attrs.colspan,h+f.attrs.colspan-t),f.content)),d.push(f),h+=f.attrs.colspan;for(var v=1;v<f.attrs.rowspan;v++)s[l+v]=(s[l+v]||0)+f.attrs.colspan}c.push(a.Fragment.from(d))}i=c,r=t}if(o!=n){for(var m=[],g=0,y=0;g<n;g++,y++){for(var _=[],b=i[y%o],C=0;C<b.childCount;C++){var w=b.child(C);g+w.attrs.rowspan>n&&(w=w.type.create(M(w.attrs,"rowspan",n-w.attrs.rowspan),w.content)),_.push(w)}m.push(a.Fragment.from(_))}i=m,o=n}return{width:r,height:o,rows:i}}function j(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var c=!1,l=o;l<i;l++){var u=a*t.width+l,d=t.map[u];if(t.map[u-t.width]==d){c=!0;var h=n.nodeAt(d),p=t.findCell(d),f=p.top,v=p.left;e.setNodeMarkup(e.mapping.slice(s).map(d+r),null,M(h.attrs,"rowspan",a-f)),e.insert(e.mapping.slice(s).map(t.positionAt(a,v,n)),h.type.createAndFill(M(h.attrs,"rowspan",f+h.attrs.rowspan-a))),l+=h.attrs.colspan-1}}return c}function q(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var c=!1,l=o;l<i;l++){var u=l*t.width+a,d=t.map[u];if(t.map[u-1]==d){c=!0;var h=n.nodeAt(d),p=t.colCount(d),f=e.mapping.slice(s).map(d+r);e.setNodeMarkup(f,null,I(h.attrs,a-p,h.attrs.colspan-(a-p))),e.insert(f+h.nodeSize,h.type.createAndFill(I(h.attrs,0,a-p))),l+=h.attrs.rowspan-1}}return c}function V(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,s=f.get(i),c=r.top,l=r.left,u=l+o.width,d=c+o.height,h=e.tr,p=0;function v(){i=n?h.doc.nodeAt(n-1):h.doc,s=f.get(i),p=h.mapping.maps.length}(function(e,t,n,r,o,i,s){var c,l,u=_(e.doc.type.schema);if(o>t.width)for(var d=0,h=0;d<t.height;d++){var p=n.child(d);h+=p.nodeSize;var f=[],v=void 0;v=null==p.lastChild||p.lastChild.type==u.cell?c||(c=u.cell.createAndFill()):l||(l=u.header_cell.createAndFill());for(var m=t.width;m<o;m++)f.push(v);e.insert(e.mapping.slice(s).map(h-1+r),f)}if(i>t.height){for(var g=[],y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var C=!(y>=t.width)&&n.nodeAt(t.map[b+y]).type==u.header_cell;g.push(C?l||(l=u.header_cell.createAndFill()):c||(c=u.cell.createAndFill()))}for(var w=u.row.create(null,a.Fragment.from(g)),S=[],k=t.height;k<i;k++)S.push(w);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),S)}return!(!c&&!l)})(h,s,i,n,u,d,p)&&v(),j(h,s,i,n,l,u,c,p)&&v(),j(h,s,i,n,l,u,d,p)&&v(),q(h,s,i,n,c,d,l,p)&&v(),q(h,s,i,n,c,d,u,p)&&v();for(var m=c;m<d;m++){var g=s.positionAt(m,l,i),y=s.positionAt(m,u,i);h.replace(h.mapping.slice(p).map(g+n),h.mapping.slice(p).map(y+n),new a.Slice(o.rows[m-c],0,0))}v(),h.setSelection(new R(h.doc.resolve(n+s.positionAt(c,l,i)),h.doc.resolve(n+s.positionAt(d-1,u-1,i)))),t(h)}D.prototype.map=function(e){return new D(e.map(this.anchor),e.map(this.head))},D.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&E(t,n)?new R(t,n):i.Selection.near(n,1)};var z=Object(s.a)({ArrowLeft:W("horiz",-1),ArrowRight:W("horiz",1),ArrowUp:W("vert",-1),ArrowDown:W("vert",1),"Shift-ArrowLeft":U("horiz",-1),"Shift-ArrowRight":U("horiz",1),"Shift-ArrowUp":U("vert",-1),"Shift-ArrowDown":U("vert",1),Backspace:K,"Mod-Backspace":K,Delete:K,"Mod-Delete":K});function G(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function W(e,t){return function(n,r,o){var a=n.selection;if(a instanceof R)return G(n,r,i.Selection.near(a.$headCell,t));if("horiz"!=e&&!a.empty)return!1;var s=J(o,e,t);if(null==s)return!1;if("horiz"==e)return G(n,r,i.Selection.near(n.doc.resolve(a.head+t),t));var c,l=n.doc.resolve(s),u=x(l,e,t);return c=u?i.Selection.near(u,1):t<0?i.Selection.near(n.doc.resolve(l.before(-1)),-1):i.Selection.near(n.doc.resolve(l.after(-1)),1),G(n,r,c)}}function U(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof R)){var a=J(o,e,t);if(null==a)return!1;i=new R(n.doc.resolve(a))}var s=x(i.$headCell,e,t);return!!s&&G(n,r,new R(i.$anchorCell,s))}}function K(e,t){var n=e.selection;if(!(n instanceof R))return!1;if(t){var r=e.tr,o=_(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new a.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function $(e,t){var n=C(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new R(n))),!0)}function Y(e,t,n){if(!w(e.state))return!1;var r=F(n),o=e.state.selection;if(o instanceof R){r||(r={width:1,height:1,rows:[a.Fragment.from(H(_(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),c=f.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=B(r,c.right-c.left,c.bottom-c.top),V(e.state,e.dispatch,s,c,r),!0}if(r){var l=S(e.state),u=l.start(-1);return V(e.state,e.dispatch,u,f.get(l.node(-1)).findCell(l.pos-u),r),!0}return!1}function X(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=Z(e,t.target);if(t.shiftKey&&e.state.selection instanceof R)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=C(e.state.selection.$anchor))&&Q(e,t).pos!=n.pos)o(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",a)}function o(t,n){var r=Q(e,n),o=null==b.getState(e.state);if(!r||!E(t,r)){if(!o)return;r=t}var i=new R(t,r);if(o||!e.state.selection.eq(i)){var a=e.state.tr.setSelection(i);o&&a.setMeta(b,t.pos),e.dispatch(a)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",a),null!=b.getState(e.state)&&e.dispatch(e.state.tr.setMeta(b,-1))}function a(n){var a,s=b.getState(e.state);if(null!=s)a=e.state.doc.resolve(s);else if(Z(e,n.target)!=r&&!(a=Q(e,t)))return i();a&&o(a,n)}}function J(e,t,n){if(!(e.state.selection instanceof i.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var a=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var s=r.before(o),c="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(c)?s:null}}return null}function Z(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function Q(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?C(e.state.doc.resolve(n.pos)):null}var ee=new i.PluginKey("fix-tables");function te(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=f.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],c=0;c<o.height;c++)s.push(0);for(var l=0;l<o.problems.length;l++){var u=o.problems[l];if("collision"==u.type){for(var d=t.nodeAt(u.pos),h=0;h<d.attrs.rowspan;h++)s[u.row+h]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,I(d.attrs,d.attrs.colspan-u.n,u.n))}else if("missing"==u.type)s[u.row]+=u.n;else if("overlong_rowspan"==u.type){var p=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,M(p.attrs,"rowspan",p.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var v=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,M(v.attrs,"colwidth",u.colwidth))}}for(var m=0;m<s.length;m++)s[m]&&(null==i&&(i=m),a=m);for(var g=0,y=n+1;g<o.height;g++){var b=t.child(g),C=y+b.nodeSize,w=s[g];if(w>0){var S="cell";b.firstChild&&(S=b.firstChild.type.spec.tableRole);for(var k=[],A=0;A<w;A++)k.push(_(e.schema)[S].createAndFill());var E=0!=g&&i!=g-1||a!=g?C-1:y+1;r.insert(r.mapping.map(E),k)}y=C}return r.setMeta(ee,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,a=n.childCount;e:for(var s=0,c=0;s<a;s++){for(var l=n.child(s),u=c,d=Math.min(i,s+3);u<d;u++)if(t.child(u)==l){c=u+1,r+=l.nodeSize;continue e}o(l,r),c<i&&t.child(c).sameMarkup(l)?e(t.child(c),l,r+1,o):l.nodesBetween(0,l.content.size,o,r+1),r+=l.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function ne(e){var t,n=e.selection,r=S(e),o=r.node(-1),i=r.start(-1),a=f.get(o);return(t=n instanceof R?a.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):a.findCell(r.pos-i)).tableStart=i,t.map=a,t.table=o,t}function re(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=n>0?-1:0;N(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var c=s*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=i.nodeAt(l);e.setNodeMarkup(e.mapping.map(o+l),null,L(u.attrs,n-r.colCount(l))),s+=u.attrs.rowspan-1}else{var d=null==a?_(i.type.schema).cell:i.nodeAt(r.map[c+a]).type,h=r.positionAt(s,n,i);e.insert(e.mapping.map(o+h),d.createAndFill())}}return e}function oe(e,t){if(!w(e))return!1;if(t){var n=ne(e);t(re(e.tr,n,n.left))}return!0}function ie(e,t){if(!w(e))return!1;if(t){var n=ne(e);t(re(e.tr,n,n.right))}return!0}function ae(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var c=s*r.width+n,l=r.map[c],u=o.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)e.setNodeMarkup(e.mapping.slice(a).map(i+l),null,I(u.attrs,n-r.colCount(l)));else{var d=e.mapping.slice(a).map(i+l);e.delete(d,d+u.nodeSize)}s+=u.attrs.rowspan}}function se(e,t){if(!w(e))return!1;if(t){var n=ne(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;ae(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);t(r)}return!0}function ce(e,t,n){for(var r=_(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0}function le(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,a=o,s=0;s<n;s++)a+=i.child(s).nodeSize;var c=[],l=n>0?-1:0;ce(r,i,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,d=r.width*n;u<r.width;u++,d++)if(n>0&&n<r.height&&r.map[d]==r.map[d-r.width]){var h=r.map[d],p=i.nodeAt(h).attrs;e.setNodeMarkup(o+h,null,M(p,"rowspan",p.rowspan+1)),u+=p.colspan-1}else{var f=null==l?_(i.type.schema).cell:i.nodeAt(r.map[d+l*r.width]).type;c.push(f.createAndFill())}return e.insert(a,_(i.type.schema).row.create(null,c)),e}function ue(e,t){if(!w(e))return!1;if(t){var n=ne(e);t(le(e.tr,n,n.top))}return!0}function de(e,t){if(!w(e))return!1;if(t){var n=ne(e);t(le(e.tr,n,n.bottom))}return!0}function he(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var c=a+o.child(n).nodeSize,l=e.mapping.maps.length;e.delete(a+i,c+i);for(var u=0,d=n*r.width;u<r.width;u++,d++){var h=r.map[d];if(n>0&&h==r.map[d-r.width]){var p=o.nodeAt(h).attrs;e.setNodeMarkup(e.mapping.slice(l).map(h+i),null,M(p,"rowspan",p.rowspan-1)),u+=p.colspan-1}else if(n<r.width&&h==r.map[d+r.width]){var f=o.nodeAt(h),v=f.type.create(M(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(l).map(i+m),v),u+=f.attrs.colspan-1}}}function pe(e,t){if(!w(e))return!1;if(t){var n=ne(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;he(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);t(r)}return!0}function fe(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function ve(e,t){var n=e.selection;if(!(n instanceof R)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=ne(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,c=i+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&o[a]==o[a-1]||t.right<n&&o[c]==o[c+1])return!0;a+=n,c+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,s,c=e.tr,l={},u=a.Fragment.empty,d=r.top;d<r.bottom;d++)for(var h=r.left;h<r.right;h++){var p=o.map[d*o.width+h],f=r.table.nodeAt(p);if(!l[p])if(l[p]=!0,null==i)i=p,s=f;else{fe(f)||(u=u.append(f.content));var v=c.mapping.map(p+r.tableStart);c.delete(v,v+f.nodeSize)}}if(c.setNodeMarkup(i+r.tableStart,null,M(L(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var m=i+1+s.content.size,g=fe(s)?i+1:m;c.replaceWith(g+r.tableStart,m+r.tableStart,u)}c.setSelection(new R(c.doc.resolve(i+r.tableStart))),t(c)}return!0}function me(e,t){var n=_(e.schema);return ge((function(e){var t=e.node;return n[t.type.spec.tableRole]}))(e,t)}function ge(e){return function(t,n){var r,o,i=t.selection;if(i instanceof R){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from)))return!1;o=C(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var a=r.attrs,s=[],c=a.colwidth;a.rowspan>1&&(a=M(a,"rowspan",1)),a.colspan>1&&(a=M(a,"colspan",1));for(var l,u=ne(t),d=t.tr,h=0;h<u.right-u.left;h++)s.push(c?M(a,"colwidth",c&&c[h]?[c[h]]:null):a);for(var p=u.top;p<u.bottom;p++){var f=u.map.positionAt(p,u.left,u.table);p==u.top&&(f+=r.nodeSize);for(var v=u.left,m=0;v<u.right;v++,m++)v==u.left&&p==u.top||d.insert(l=d.mapping.map(f+u.tableStart,1),e({node:r,row:p,col:v}).createAndFill(s[m]))}d.setNodeMarkup(o,e({node:r,row:u.top,col:u.left}),s[0]),i instanceof R&&d.setSelection(new R(d.doc.resolve(i.$anchorCell.pos),l&&d.doc.resolve(l))),n(d)}return!0}}function ye(e,t){return function(n,r){if(!w(n))return!1;var o=S(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof R?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&i.setNodeMarkup(r,null,M(n.attrs,e,t))})):i.setNodeMarkup(o.pos,null,M(o.nodeAfter.attrs,e,t)),r(i)}return!0}}function _e(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function be(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!w(t))return!1;if(n){for(var r=_(t.schema),o=ne(t),i=t.tr,a=o.map.cellsInRect("column"==e?new p(o.left,0,o.right,o.map.height):"row"==e?new p(0,o.top,o.map.width,o.bottom):o),s=a.map((function(e){return o.table.nodeAt(e)})),c=0;c<a.length;c++)s[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[c],r.cell,s[c].attrs);if(0==i.steps.length)for(var l=0;l<a.length;l++)i.setNodeMarkup(o.tableStart+a[l],r.header_cell,s[l].attrs);n(i)}return!0}}(e):function(t,n){if(!w(t))return!1;if(n){var r=_(t.schema),o=ne(t),i=t.tr,a=_e("row",o,r),s=_e("column",o,r),c=("column"===e?a:"row"===e&&s)?1:0,l="column"==e?new p(0,c,1,o.map.height):"row"==e?new p(c,0,o.map.width,1):o,u="column"==e?s?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)})),n(i)}return!0}}var Ce=be("row",{useDeprecatedLogic:!0}),we=be("column",{useDeprecatedLogic:!0}),Se=be("cell",{useDeprecatedLogic:!0});function ke(e){return function(t,n){if(!w(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var a=e.node(-1),s=e.indexAfter(-1),c=e.after();s<a.childCount;s++){var l=a.child(s);if(l.childCount)return c+1;c+=l.nodeSize}}}(S(t),e);if(null!=r){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(i.TextSelection.between(o,A(o))).scrollIntoView())}return!0}}}function Ae(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Ee=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Te(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Te(e,t,n,r,o,i){for(var a=0,s=!0,c=t.firstChild,l=e.firstChild,u=0,d=0;u<l.childCount;u++)for(var h=l.child(u).attrs,p=h.colspan,f=h.colwidth,v=0;v<p;v++,d++){var m=o==d?i:f&&f[v],g=m?m+"px":"";a+=m||r,m||(s=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}s?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}Ee.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,Te(e,this.colgroup,this.table,this.cellMinWidth),!0)},Ee.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var Oe=new i.PluginKey("tableColumnResizing");function xe(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=Ee);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:Oe,state:{init:function(e,t){return this.spec.props.nodeViews[_(t.schema).table.name]=function(e,t){return new r(e,n,t)},new Me(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return Oe.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,o){var i=Oe.getState(e.state);if(!i.dragging){var a=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),s=-1;if(a){var c=a.getBoundingClientRect(),l=c.left,u=c.right;t.clientX-l<=n?s=Ie(e,t,"left"):u-t.clientX<=n&&(s=Ie(e,t,"right"))}if(s!=i.activeHandle){if(!o&&-1!==s){var d=e.state.doc.resolve(s),h=d.node(-1),p=f.get(h),v=d.start(-1);if(p.colCount(d.pos-v)+d.nodeAfter.attrs.colspan-1==p.width-1)return}Ne(e,s)}}}(e,n,t,0,o)},mouseleave:function(e){!function(e){var t=Oe.getState(e.state);t.activeHandle>-1&&!t.dragging&&Ne(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var r=Oe.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,c=r;if(o)for(var l=0;l<r;l++)o[l]&&(s-=o[l],c--);return s/c}(e,r.activeHandle,o.attrs);function a(t){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var r=Oe.getState(e.state);r.dragging&&(!function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=f.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,c=e.state.tr,l=0;l<i.height;l++){var u=l*i.width+s;if(!l||i.map[u]!=i.map[u-i.width]){var d=i.map[u],h=o.nodeAt(d).attrs,p=1==h.colspan?0:s-i.colCount(d);if(!h.colwidth||h.colwidth[p]!=n){var v=h.colwidth?h.colwidth.slice():Re(h.colspan);v[p]=n,c.setNodeMarkup(a+d,null,M(h,"colwidth",v))}}}c.docChanged&&e.dispatch(c)}(e,r.activeHandle,Le(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Oe,{setDragging:null})))}function s(t){if(!t.which)return a(t);var r=Oe.getState(e.state),o=Le(r.dragging,t,n);!function(e,t,n,r){var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=f.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,c=e.domAtPos(o.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;Te(i,c.firstChild,c,r,s,n)}(e,r.activeHandle,o,n)}e.dispatch(e.state.tr.setMeta(Oe,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=Oe.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=f.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=s+l*i.width-1;if(!(s!=i.width&&i.map[u]==i.map[u+1]||0!=l&&i.map[u-1]==i.map[u-1-i.width])){var d=i.map[u],h=a+d+o.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(c.a.widget(h,p))}}return c.b.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})}var Me=function(e,t){this.activeHandle=e,this.dragging=t};function Ie(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=C(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=f.get(o.node(-1)),a=o.start(-1),s=i.map.indexOf(o.pos-a);return s%i.width==0?-1:a+i.map[s-1]}function Le(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Ne(e,t){e.dispatch(e.state.tr.setMeta(Oe,{setHandle:t}))}function Re(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function De(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new i.Plugin({key:b,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(b);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:P,handleDOMEvents:{mousedown:X},createSelectionBetween:function(e){if(null!=b.getState(e.state))return e.state.selection},handleTripleClick:$,handleKeyDown:z,handlePaste:Y},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,a=(t||e).selection,s=(t||e).doc;if(a instanceof i.NodeSelection&&(o=a.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=R.create(s,a.from);else if("row"==o){var c=s.resolve(a.from+1);r=R.rowSelection(c,c)}else if(!n){var l=f.get(a.node),u=a.from+1,d=u+l.map[l.width*l.height-1];r=R.create(s,u+1,d)}}else a instanceof i.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(a)?r=i.TextSelection.create(s,a.from):a instanceof i.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;s>0;s--){var c=o.node(s);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return t!==n&&0===o.parentOffset}(a)&&(r=i.TextSelection.create(s,a.$from.start(),a.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,te(r,n),t)}})}Me.prototype.apply=function(e){var t=this,n=e.getMeta(Oe);if(n&&null!=n.setHandle)return new Me(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Me(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);k(e.doc.resolve(r))||(r=null),t=new Me(r,t.dragging)}return t}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(29),o=n(60);e.exports=n(28)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(77),o=n(55);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(47);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(78),o=n(60),i=n(44),a=n(58),s=n(42),c=n(139),l=Object.getOwnPropertyDescriptor;t.f=n(28)?l:function(e,t){if(e=i(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(4),o=n(26),i=n(17);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(46),o=n(77),i=n(32),a=n(23),s=n(155);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,d=6==e,h=5==e||d,p=t||s;return function(t,s,f){for(var v,m,g=i(t),y=o(g),_=r(s,f,3),b=a(y.length),C=0,w=n?p(t,b):c?p(t,0):void 0;b>C;C++)if((h||C in y)&&(m=_(v=y[C],C,g),e))if(n)w[C]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:w.push(v)}else if(u)return!1;return d?-1:l||u?u:w}}},function(e,t,n){"use strict";var r=n(7),o=n(6),i=n(5),a=(n(24),n(568)),s=n(1),c=n(10),l=n(15),u=n(27),d=n(35),h=n(8),p={NATIVE_CONTROL_SELECTOR:".mdc-radio__native-control"},f={DISABLED:"mdc-radio--disabled",ROOT:"mdc-radio"},v=function(e){function t(n){return e.call(this,s.a({},t.defaultAdapter,n))||this}return s.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(e){var n=t.cssClasses.DISABLED;this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t}(h.a),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return s.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.ripple_.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new v({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=s.a({},u.a.createAdapter(this),{registerInteractionHandler:function(t,n){return e.nativeControl_.addEventListener(t,n,Object(l.a)())},deregisterInteractionHandler:function(t,n){return e.nativeControl_.removeEventListener(t,n,Object(l.a)())},isSurfaceActive:function(){return!1},isUnbounded:function(){return!0}});return new u.a(this.root_,new d.a(t))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=v.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Radio component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(c.a);n(131),n(417),n(418);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return y}));var y=function(e){babelHelpers.inherits(r,e);var t,n=g(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String,toComponent:!0},disabled:{type:Boolean,toComponent:!0},checked:{type:Boolean,toComponent:!0},id:{type:String},inputId:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-radio-helper-text--show"):n.classList.add("ct-radio-helper-text--show")}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),(n=a.a.attachTo(this)).input=m.attachTo(this.querySelector(".mdc-radio")),this._component=n.input;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.nameAsId?e.name:e.inputId||Object(i.a)(),n=e.helperId,r=e.helperClass,o=e.value;return o||0===o||(o="On"),'<div class="mdc-form-field">\n                  <div class="mdc-radio '.concat(e.disabled?"mdc-radio--disabled":""," ").concat(e.checked?"mdc-radio--checked":"",'">\n                        <input ').concat(e.disabled?"disabled=true":"",' value="').concat(o,'" type="radio" id="').concat(t,'" name="').concat(e.name,'"  ').concat(e.checked?"checked":"",' class="mdc-radio__native-control"/>\n                            <div class="mdc-radio__background">\n\t\t\t      <div class="mdc-radio__outer-circle"></div>                            \n\t\t\t      <div class="mdc-radio__inner-circle"></div>                            \n                            </div>                            \n                 </div>\n                 <label for="').concat(t,'">').concat(e.label,"</label>\n                 </div>\n                </div>\n                 ").concat(n||r?'<div class="mdc-text-field-helper-line">\n                     <div id="'.concat(n||Object(i.a)(),'" class="mdc-text-field-helper-text ').concat(r||"",'"></div>'):"")}},{key:"getComponentFromInput",value:function(e){return e.parentNode.parentNode.parentNode}}]),r}(r.a);y.componentName="ct-radio",o.a.define(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return wt})),n.d(t,"b",(function(){return Et})),n.d(t,"c",(function(){return Ft}));var r=n(3),o=n(2),i=n(13),a={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var s=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);a.mac=/Mac/.test(navigator.platform);var u=a.ie=!!(c||l||s);a.ie_version=c?document.documentMode||6:l?+l[1]:s?+s[1]:null,a.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),a.gecko_version=a.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);a.chrome=!!d,a.chrome_version=d&&+d[1],a.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),a.android=/Android \d/.test(navigator.userAgent),a.webkit="webkitFontSmoothing"in document.documentElement.style,a.safari=/Apple Computer/.test(navigator.vendor),a.webkit_version=a.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var h=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},p=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},v=function(e,t,n,r){return n&&(g(e,t,n,r,-1)||g(e,t,n,r,1))},m=/^(img|br|input|textarea|hr)$/i;function g(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:y(e))){var i=e.parentNode;if(1!=i.nodeType||_(e)||m.test(e.nodeName)||"false"==e.contentEditable)return!1;t=h(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?y(e):0}}}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function _(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var b=function(e){var t=e.isCollapsed;return t&&a.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function C(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function w(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function S(e,t){return"number"==typeof e?e:e[t]}function k(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function A(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;a=p(a))if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,c=s?w(i):k(a),l=0,u=0;if(t.top<c.top+S(r,"top")?u=-(c.top-t.top+S(o,"top")):t.bottom>c.bottom-S(r,"bottom")&&(u=t.bottom-c.bottom+S(o,"bottom")),t.left<c.left+S(r,"left")?l=-(c.left-t.left+S(o,"left")):t.right>c.right-S(r,"right")&&(l=t.right-c.right+S(o,"right")),l||u)if(s)i.defaultView.scrollBy(l,u);else{var d=a.scrollLeft,h=a.scrollTop;u&&(a.scrollTop+=u),l&&(a.scrollLeft+=l);var f=a.scrollLeft-d,v=a.scrollTop-h;t={left:t.left-f,top:t.top-v,right:t.right-f,bottom:t.bottom-v}}if(s)break}}function E(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=p(e));return t}function T(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var O=null;function x(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=f(c).getClientRects()}for(var d=0;d<u.length;d++){var h=u[d];if(h.top<=a&&h.bottom>=s){a=Math.max(h.bottom,a),s=Math.min(h.top,s);var p=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(p<o){n=c,o=p,r=p&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==c.nodeType&&p&&(i=l+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=L(r,1);if(i.top!=i.bottom&&M(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:x(n,r)}function M(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function I(e,t){var n,r,o,i,s=e.root;if(s.caretPositionFromPoint)try{var c=s.caretPositionFromPoint(t.left,t.top);c&&(o=(n=c).offsetNode,i=n.offset)}catch(e){}if(!o&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var u,d=s.elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var h=e.dom.getBoundingClientRect();if(!M(t,h))return null;if(!(d=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),a=i;;){var s=t.childNodes[a];if(1==s.nodeType)for(var c=s.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(M(n,u))return e(s,n,u)}if((a=(a+1)%o)==i)break}return t}(e.dom,t,h)))return null}if(a.safari&&d.draggable&&(o=i=null),d=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(d,t),o){if(a.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var p,f=o.childNodes[i];"IMG"==f.nodeName&&(p=f.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?u=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,o,i,t))}null==u&&(u=function(e,t,n){var r=x(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,d,t));var v=e.docView.nearestDesc(d,!0);return{pos:u,inside:v?v.posAtStart-v.border:-1}}function L(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function N(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset;if(3==r.nodeType&&(a.webkit||a.gecko)){var i=L(f(r,o,o),0);if(a.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var s=L(f(r,o-1,o-1),-1);if(s.top==i.top){var c=L(f(r,o,o+1),-1);if(c.top!=i.top)return R(c,c.left<s.left)}}return i}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,u=!0;if(o<r.childNodes.length){var d=r.childNodes[o];1==d.nodeType&&(l=d.getBoundingClientRect())}if(!l&&o){var h=r.childNodes[o-1];1==h.nodeType&&(l=h.getBoundingClientRect(),u=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(l||r.getBoundingClientRect(),u)}for(var p=-1;p<2;p+=2)if(p<0&&o){var v=void 0,m=3==r.nodeType?f(r,o-1,o):3==(v=r.childNodes[o-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(m){var g=L(m,1);if(g.top<g.bottom)return R(g,!1)}}else if(p>0&&o<y(r)){var _=void 0,b=3==r.nodeType?f(r,o,o+1):3==(_=r.childNodes[o]).nodeType?f(_):1==_.nodeType?_:null;if(b){var C=L(b,-1);if(C.top<C.bottom)return R(C,!0)}}return R(L(3==r.nodeType?f(r):r,0),!1)}function R(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function D(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var P=/[\u0590-\u08ac]/;var F=null,H=null,B=!1;function j(e,t,n){return F==t&&H==n?B:(F=t,H=n,B="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return D(e,t,(function(){for(var t=e.docView.domFromPos(o.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var i=N(e,o.pos),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=f(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<s.length;c++){var l=s[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=getSelection();return P.test(r.parent.textContent)&&s.modify?D(e,t,(function(){var t=s.getRangeAt(0),o=s.focusNode,i=s.focusOffset,a=s.caretBidiLevel;s.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||o==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=a&&(s.caretBidiLevel=a),c})):"left"==n||"backward"==n?i:a}(e,t,n))}var q=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},V={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};q.prototype.matchesWidget=function(){return!1},q.prototype.matchesMark=function(){return!1},q.prototype.matchesNode=function(){return!1},q.prototype.matchesHack=function(){return!1},V.beforePosition.get=function(){return!1},q.prototype.parseRule=function(){return null},q.prototype.stopEvent=function(){return!1},V.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},V.border.get=function(){return 0},q.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},q.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},V.posBefore.get=function(){return this.parent.posBeforeChild(this)},V.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},V.posAfter.get=function(){return this.posBefore+this.size},V.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},q.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},q.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},q.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},q.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},q.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},q.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:h(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},q.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==r&&e<=c){var l=i+s.border;if(e>=l&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var u=a;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=h(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(var p=a+1;p<this.children.length;p++){var f=this.children[p];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=h(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},q.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},q.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},q.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,c=0;s<this.children.length;s++){var l=this.children[s],u=c+l.size;if(o>c&&i<u)return l.setSelection(e-c-l.border,t-c-l.border,n,r);c=u}var d=this.domFromPos(e),h=this.domFromPos(t),p=n.getSelection(),f=!1;if((a.gecko||a.safari)&&e==t){var m=d.node.childNodes[d.offset-1];f=m&&("BR"==m.nodeName||"false"==m.contentEditable)}if(r||f&&a.safari||!v(d.node,d.offset,p.anchorNode,p.anchorOffset)||!v(h.node,h.offset,p.focusNode,p.focusOffset)){var g=!1;if((p.extend||e==t)&&!f){p.collapse(d.node,d.offset);try{e!=t&&p.extend(h.node,h.offset),g=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!g){if(e>t){var y=d;d=h,h=y}var _=document.createRange();_.setEnd(h.node,h.offset),_.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(_)}}},q.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},V.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},q.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=3);o.dirty=3}n=i}this.dirty=2},q.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},Object.defineProperties(q.prototype,V);var z=[],G=function(e){function t(t,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,z,a,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},Object.defineProperties(t.prototype,n),t}(q),W=function(e){function t(t,n,r,o){e.call(this,t,z,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(q),U=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,i){var a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return s&&s.dom||(s=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=ce(i,n,a,r)),e>0&&(i=ce(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o},t}(q),K=function(e){function t(t,n,r,o,i,a,s,c,l){e.call(this,t,n.isLeaf?z:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,r,i,a,s){var c,l,u=a.nodeViews[n.type.name],d=u&&u(n,a,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(n.text);else h||(h=(c=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,p=c.contentDOM);p||n.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable=!1),n.type.spec.draggable&&(h.draggable=!0));var f=h;return h=re(h,r,n),d?l=new J(e,n,r,i,h,p,f,d,a,s+1):n.isText?new Y(e,n,r,i,h,f,a):new t(e,n,r,i,h,p,f,a,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?o.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&oe(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,i=t,s=r&&e.composing&&this.localCompositionNode(e,t),c=new ae(this,s&&s.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var a=0;a<e.childCount;a++){var s=e.child(a);r(s,o,t.forChild(i,s),a),i+=s.nodeSize}return}for(var c=0,l=[],u=null,d=0;;){if(c<o.length&&o[c].to==i){for(var h=o[c++],p=void 0;c<o.length&&o[c].to==i;)(p||(p=[h])).push(o[c++]);if(p){p.sort(se);for(var f=0;f<p.length;f++)n(p[f],d,!!u)}else n(h,d,!!u)}var v=void 0,m=void 0;if(u)m=-1,v=u,u=null;else{if(!(d<e.childCount))break;m=d,v=e.child(d++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)l.push(o[c++]);var y=i+v.nodeSize;if(v.isText){var _=y;c<o.length&&o[c].from<_&&(_=o[c].from);for(var b=0;b<l.length;b++)l[b].to<_&&(_=l[b].to);_<y&&(u=v.cut(_-i),v=v.cut(0,_-i),y=_,m=-1)}var C=l.length?v.isInline&&!v.isLeaf?l.filter((function(e){return!e.inline})):l.slice():z;r(v,C,t.forChild(i,v),m),i=y}}(this.node,this.innerDeco,(function(t,a,s){t.spec.marks?c.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&c.syncToMarks(a==n.node.childCount?o.Mark.none:n.node.child(a).marks,r,e),c.placeWidget(t,e,i)}),(function(t,n,o,a){c.syncToMarks(t.marks,r,e),c.findNodeMatch(t,n,o,a)||c.updateNextNode(t,n,o,e,a)||c.addNode(t,n,o,e,i),i+=t.nodeSize})),c.syncToMarks(z,r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),function e(t,n,r){for(var o=t.firstChild,i=!1,a=0;a<n.length;a++){var s=n[a],c=s.dom;if(c.parentNode==t){for(;c!=o;)o=ie(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(c,o);if(s instanceof U){var l=o?o.previousSibling:t.lastChild;e(s.contentDOM,s.children,r),o=l?l.nextSibling:t.firstChild}}for(;o;)o=ie(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),a.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,o=n.from,i=n.to;if(!(!(e.state.selection instanceof r.TextSelection)||o<t||i>t+this.node.content.size)){var a=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=y(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(a.focusNode,a.focusOffset);if(s&&this.dom.contains(s.parentNode)){var c=s.nodeValue,l=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var c=a.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(t,r-s);if(u>=0&&u+t.length+s>=n)return s+u}}}return-1}(this.node.content,c,o-t,i-t);return l<0?null:{node:s,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new W(this,i,n,o);e.compositionNodes.push(a),this.children=ce(this.children,r,r+o.length,e,a)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!oe(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=te(this.dom,this.nodeDOM,ee(this.outerDeco,this.node,t),ee(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(t.prototype,n),t}(q);function $(e,t,n,r,o){return re(r,t,e),new K(null,e,t,n,r,r,r,o,0)}var Y=function(e){function t(t,n,r,o,i,a,s){e.call(this,t,n,r,o,i,null,a,s)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},t}(K),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(q),J=function(e){function t(t,n,r,o,i,a,s,c,l,u){e.call(this,t,n,r,o,i,a,s,l,u),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(K);function Z(e){e&&(this.nodeName=e)}Z.prototype=Object.create(null);var Q=[new Z];function ee(e,t,n){if(0==e.length)return Q;for(var r=n?Q[0]:new Z,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs,s=r;if(a)for(var c in a.nodeName&&o.push(s=new Z(a.nodeName)),a){var l=a[c];null!=l&&(n&&1==o.length&&o.push(s=r=new Z(t.isInline?"span":"div")),"class"==c?s.class=(s.class?s.class+" ":"")+l:"style"==c?s.style=(s.style?s.style+";":"")+l:"nodeName"!=c&&(s[c]=l))}}return o}function te(e,t,n,r){if(n==Q&&r==Q)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var c=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==a.nodeName?o=c:((c=document.createElement(a.nodeName)).pmIsDeco=!0,c.appendChild(o),s=Q[0],o=c)}ne(o,s||Q[0],a)}return o}function ne(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):z,a=n.class?n.class.split(" "):z,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var c=0;c<a.length;c++)-1==i.indexOf(a[c])&&e.classList.add(a[c])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function re(e,t,n){return te(e,e,Q,ee(t,n,1!=e.nodeType))}function oe(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ie(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ae=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;r>0&&o>=0;o--){var i=t[o],a=i.node;if(a){if(a!=e.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function se(e,t){return e.type.side-t.type.side}function ce(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var c=e[a],l=s,u=s+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function le(e,t){var n=e.root.getSelection(),o=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),a=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var c,l,u=o.resolve(s);if(b(n)){for(c=u;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,n){for(var r=0==t,o=t==y(e);r||o;){if(e==n)return!0;var i=h(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==y(e)}}(n.focusNode,n.focusOffset,i.dom))){var d=i.posBefore;l=new r.NodeSelection(s==d?u:o.resolve(d))}}else{var p=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(p<0)return null;c=o.resolve(p)}l||(l=ge(e,c,u,"pointer"==t||e.state.selection.head<u.pos&&!a?1:-1));return l}function ue(e,t){var n=e.state.selection;if(ve(e,n),e.editable?e.hasFocus():ye(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,h(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&a.ie&&a.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var o,i,s=n.anchor,c=n.head;!de||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=he(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=he(e,n.to))),e.docView.setSelection(s,c,e.root,t),de&&(o&&fe(o),i&&fe(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}ae.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},ae.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},ae.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ae.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[o])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=U.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},ae.prototype.findNodeMatch=function(e,t,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),a=this.top.children;if(i&&i.matchesNode(e,t,n))o=a.indexOf(i);else for(var s=this.index,c=Math.min(a.length,s+5);s<c;s++){var l=a[s];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},ae.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof K){var s=this.preMatched.indexOf(a);if(s>-1&&s+this.preMatchOffset!=o)return!1;var c=a.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&oe(t,a.outerDeco)))&&a.update(e,t,n,r))return this.destroyBetween(this.index,i),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ae.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,K.create(this.top,e,t,n,r,o)),this.changed=!0},ae.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new G(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},ae.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof U;)e=e.children[e.children.length-1];if(!e||!(e instanceof Y)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new X(this.top,z,t,null)),this.changed=!0}};var de=a.safari||a.chrome&&a.chrome_version<63;function he(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(a.safari&&i&&"false"==i.contentEditable)return pe(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return pe(i);if(s)return pe(s)}}function pe(e){return e.contentEditable="true",a.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function fe(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ve(e,t){if(t instanceof r.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(me(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else me(e)}function me(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ge(e,t,n,o){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.TextSelection.between(t,n,o)}function ye(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function _e(e,t){var n=e.selection,o=n.$anchor,i=n.$head,a=t>0?o.max(i):o.min(i),s=a.parent.inlineContent?a.depth?e.doc.resolve(t>0?a.after():a.before()):null:a;return s&&r.Selection.findFrom(s,t)}function be(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ce(e,t,n){var o=e.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return be(e,new r.TextSelection(t>0?o.$to:o.$from));var i=_e(e.state,t);return!!i&&be(e,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var s=_e(e.state,t);return!!(s&&s instanceof r.NodeSelection)&&be(e,s)}if(!(a.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var d=t<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=e.docView.descAt(d))&&!c.contentDOM)&&(r.NodeSelection.isSelectable(u)?be(e,new r.NodeSelection(t<0?e.state.doc.resolve(l.pos-u.nodeSize):l)):!!a.webkit&&be(e,new r.TextSelection(e.state.doc.resolve(t<0?d:d+u.nodeSize))))}}function we(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Se(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function ke(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,s=!1;for(a.gecko&&1==n.nodeType&&r<we(n)&&Se(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Se(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(Ee(n))break;for(var l=n.previousSibling;l&&Se(l);)o=n.parentNode,i=h(l),l=l.previousSibling;if(l)r=we(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}s?Te(e,t,n,r):o&&Te(e,t,o,i)}}function Ae(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=we(n);;)if(r<a){if(1!=n.nodeType)break;if(!Se(n.childNodes[r]))break;o=n,i=++r}else{if(Ee(n))break;for(var s=n.nextSibling;s&&Se(s);)o=s.parentNode,i=h(s)+1,s=s.nextSibling;if(s)r=0,a=we(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&Te(e,t,o,i)}}function Ee(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Te(e,t,n,r){if(b(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&ue(e)}),50)}function Oe(e,t,n){var o=e.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(a.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,s=o.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=_e(e.state,t);if(c&&c instanceof r.NodeSelection)return be(e,c)}if(!i.parent.inlineContent){var l=r.Selection.findFrom(t<0?i:s,t);return!l||be(e,l)}return!1}function xe(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;var n=e.state.selection,o=n.$head,i=n.$anchor,a=n.empty;if(!o.sameParent(i))return!0;if(!a)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){var c=e.state.tr;return t<0?c.delete(o.pos-s.nodeSize,o.pos):c.delete(o.pos,o.pos+s.nodeSize),e.dispatch(c),!0}return!1}function Me(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ie(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||a.mac&&72==n&&"c"==r?xe(e,-1)||ke(e):46==n||a.mac&&68==n&&"c"==r?xe(e,1)||Ae(e):13==n||27==n||(37==n?Ce(e,-1,r)||ke(e):39==n?Ce(e,1,r)||Ae(e):38==n?Oe(e,-1,r)||ke(e):40==n?function(e){if(a.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Me(e,o,!0),setTimeout((function(){return Me(e,o,!1)}),20)}}}(e)||Oe(e,1,r)||Ae(e):r==(a.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Le(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(a.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||a.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Ne(e,t,n,i,s){if(t<0){var c=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,l=le(e,c);if(l&&!e.state.selection.eq(l)){var u=e.state.tr.setSelection(l);"pointer"==c?u.setMeta("pointer",!0):"key"==c&&u.scrollIntoView(),e.dispatch(u)}}else{var d=e.state.doc.resolve(t),h=d.sharedDepth(n);t=d.before(h+1),n=e.state.doc.resolve(n).after(h+1);var p,f,v=e.state.selection,m=function(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,s=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,d=e.root.getSelection(),h=null,p=d.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],b(d)||h.push({node:d.focusNode,offset:d.focusOffset})),a.chrome&&8===e.lastKeyCode)for(var f=c;f>s;f--){var v=i.childNodes[f-1],m=v.pmViewDesc;if("BR"==v.nodeType&&!m){c=f;break}if(!m||m.size)break}var g=e.state.doc,y=e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema),_=g.resolve(l),C=null,w=y.parse(i,{topNode:_.parent,topMatch:_.parent.contentMatchAt(_.index()),topOpen:!0,from:s,to:c,preserveWhitespace:!_.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:Le,context:_});if(h&&null!=h[0].pos){var S=h[0].pos,k=h[1]&&h[1].pos;null==k&&(k=S),C={anchor:S+l,head:k+l}}return{doc:w,sel:C,from:l,to:u}}(e,t,n),g=e.state.doc,y=g.slice(m.from,m.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(p=e.state.selection.to,f="end"):(p=e.state.selection.from,f="start"),e.lastKeyCode=null;var _=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,c=a.b;if("end"==o){var l=Math.max(0,i-Math.min(s,c));r-=s+l-i}if(s<i&&e.size<t.size){c=(i-=r<=i&&r>=s?i-r:0)+(c-s),s=i}else if(c<i){s=(i-=r<=i&&r>=c?i-r:0)+(s-c),c=i}return{start:i,endA:s,endB:c}}(y.content,m.doc.content,m.from,p,f);if(!_){if(!(i&&v instanceof r.TextSelection&&!v.empty&&v.$head.sameParent(v.$anchor))||e.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var w=Re(e,e.state.doc,m.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}_={start:v.from,endA:v.to,endB:v.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&_.start==_.endB&&e.state.selection instanceof r.TextSelection&&(_.start>e.state.selection.from&&_.start<=e.state.selection.from+2?_.start=e.state.selection.from:_.endA<e.state.selection.to&&_.endA>=e.state.selection.to-2&&(_.endB+=e.state.selection.to-_.endA,_.endA=e.state.selection.to)),a.ie&&a.ie_version<=11&&_.endB==_.start+1&&_.endA==_.start&&_.start>m.from&&" "==m.doc.textBetween(_.start-m.from-1,_.start-m.from+1)&&(_.start--,_.endA--,_.endB--);var S,k=m.doc.resolveNoCache(_.start-m.from),A=m.doc.resolveNoCache(_.endB-m.from),E=k.sameParent(A)&&k.parent.inlineContent;if((a.ios&&e.lastIOSEnter>Date.now()-225&&(!E||s.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!E&&k.pos<m.doc.content.size&&(S=r.Selection.findFrom(m.doc.resolve(k.pos+1),1,!0))&&S.head==A.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,C(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>_.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||De(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(De(i,!0,!0));if(!a.parent.isTextblock||a.pos>n||De(a,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(g,_.start,_.endA,k,A)&&e.someProp("handleKeyDown",(function(t){return t(e,C(8,"Backspace"))})))a.android&&a.chrome&&e.domObserver.suppressSelectionUpdates();else{a.android&&!E&&k.start()!=A.start()&&0==A.parentOffset&&k.depth==A.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==_.endA&&(_.endB-=2,A=m.doc.resolveNoCache(_.endB-m.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,C(13,"Enter"))}))}),20));var T,O,x,M,I=_.start,L=_.endA;if(E)if(k.pos==A.pos)a.ie&&a.ie_version<=11&&0==k.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return ue(e)}),20)),T=e.state.tr.delete(I,L),O=g.resolve(_.start).marksAcross(g.resolve(_.endA));else if(_.endA==_.endB&&(M=g.resolve(_.start))&&(x=function(e,t){for(var n,r,i,a=e.firstChild.marks,s=t.firstChild.marks,c=a,l=s,u=0;u<s.length;u++)c=s[u].removeFromSet(c);for(var d=0;d<a.length;d++)l=a[d].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var h=[],p=0;p<t.childCount;p++)h.push(i(t.child(p)));if(o.Fragment.from(h).eq(e))return{mark:r,type:n}}(k.parent.content.cut(k.parentOffset,A.parentOffset),M.parent.content.cut(M.parentOffset,_.endA-M.start()))))T=e.state.tr,"add"==x.type?T.addMark(I,L,x.mark):T.removeMark(I,L,x.mark);else if(k.parent.child(k.index()).isText&&k.index()==A.index()-(A.textOffset?0:1)){var N=k.parent.textBetween(k.parentOffset,A.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,I,L,N)})))return;T=e.state.tr.insertText(N,I,L)}if(T||(T=e.state.tr.replace(I,L,m.doc.slice(_.start-m.from,_.endB-m.from))),m.sel){var R=Re(e,T.doc,m.sel);R&&!(a.chrome&&a.android&&e.composing&&R.empty&&(R.head==I||R.head==T.mapping.map(L)-1)||a.ie&&R.empty&&R.head==I)&&T.setSelection(R)}O&&T.ensureMarks(O),e.dispatch(T.scrollIntoView())}}}function Re(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ge(e,t.resolve(n.anchor),t.resolve(n.head))}function De(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Pe(e,t){for(var n=[],r=t.content,i=t.openStart,a=t.openEnd;i>1&&a>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,a--;var s=r.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),r=s.content}var c=e.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(e.state.schema),l=Ve(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));for(var d,h=u.firstChild;h&&1==h.nodeType&&(d=je[h.nodeName.toLowerCase()]);){for(var p=d.length-1;p>=0;p--){for(var f=l.createElement(d[p]);u.firstChild;)f.appendChild(u.firstChild);u.appendChild(f)}h=u.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",i+" "+a+" "+JSON.stringify(n)),{dom:u,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Fe(e,t,n,r,i){var a,s,c=i.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,c||r)})),c)return new o.Slice(o.Fragment.from(e.state.schema.text(t)),0,0);var u=e.someProp("clipboardTextParser",(function(e){return e(t,i,r)}));u?s=u:(a=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){a.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),a=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Ve().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&je[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length);r.innerHTML=e;for(var a=0;a<i;a++)r=r.firstChild;return r}(n);var d=a&&a.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!s){var p=e.someProp("clipboardParser")||e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema);s=p.parseSlice(a,{preserveWhitespace:!(!l&&!h),context:i})}return s=h?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,a=e.openStart,s=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o.Fragment.from(l.create(n[c+1],i)),a++,s++}return new o.Slice(i,a,s)}(function(e,t,n){t<e.openStart&&(e=new o.Slice(Be(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new o.Slice(Be(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(s,+h[1],+h[2]),h[3]):o.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),i=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=r.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&i.length&&function e(t,n,r,i,a){if(a<t.length&&a<n.length&&t[a]==n[a]){var s=e(t,n,r,i.lastChild,a+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(a==t.length-1?r.type:t[a+1]))return i.copy(i.content.append(o.Fragment.from(He(r,t,a+1))))}}(n,i,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(o.Fragment.empty,!0);return t.copy(r.append(i))}(a[a.length-1],i.length));var s=He(e,n);a.push(s),r=r.matchType(s.type,s.attrs),i=n}}})),a)return{v:o.Fragment.from(a)}},r=t.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}(s.content,i),!1),e.someProp("transformPasted",(function(e){s=e(s)})),s}function He(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,o.Fragment.from(e));return e}function Be(e,t,n,r,i,a){var s=t<0?e.firstChild:e.lastChild,c=s.content;return i<r-1&&(c=Be(c,t,n,r,i+1,a)),i>=n&&(c=t<0?s.contentMatchAt(0).fillBefore(c,e.childCount>1||a<=i).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(o.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(c))}var je={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},qe=null;function Ve(){return qe||(qe=document.implementation.createHTMLDocument("title"))}var ze={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ge=a.ie&&a.ie_version<=11,We=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};We.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},We.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ue=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);a.ie&&a.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new We,Ge&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ue.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Ue.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ue.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,ze),Ge&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ue.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Ge&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ue.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ue.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ue.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Ue.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&ye(e)){var e;if(this.suppressingSelectionUpdates)return ue(this.view);if(a.ie&&a.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&v(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Ue.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ue.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ue.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&ye(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(a.gecko&&s.length>1){var u=s.filter((function(e){return"BR"==e.nodeName}));if(2==u.length){var d=u[0],h=u[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(e){if(Ke)return;Ke=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||ue(this.view))}},Ue.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,o=e.nextSibling;if(a.ie&&a.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var s=e.addedNodes[i],c=s.previousSibling,l=s.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l)}for(var u=r&&r.parentNode==e.target?h(r)+1:0,d=n.localPosFromDOM(e.target,u,-1),p=o&&o.parentNode==e.target?h(o):e.target.childNodes.length,f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);return{from:d,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Ke=!1;var $e={},Ye={};function Xe(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Je(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ze(e,t)})}))}function Ze(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Qe(e){return{left:e.clientX,top:e.clientY}}function et(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var c=a(s);if(c)return c.v}return!1}function tt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function nt(e,t,n,o,i){return et(e,"handleClickOn",t,n,o)||e.someProp("handleClick",(function(n){return n(e,t,o)}))||(i?function(e,t){if(-1==t)return!1;var n,o,i=e.state.selection;i instanceof r.NodeSelection&&(n=i.node);for(var a=e.state.doc.resolve(t),s=a.depth+1;s>0;s--){var c=s>a.depth?a.nodeAfter:a.node(s);if(r.NodeSelection.isSelectable(c)){o=n&&i.$from.depth>0&&s>=i.$from.depth&&a.before(i.$from.depth+1)==i.$from.pos?a.before(i.$from.depth):a.before(s);break}}return null!=o&&(tt(e,r.NodeSelection.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(tt(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function rt(e,t,n,r){return et(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function ot(e,t,n,o){return et(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",(function(n){return n(e,t,o)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(tt(e,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(t),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)tt(e,r.TextSelection.create(n,s+1,s+1+a.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(a))continue;tt(e,r.NodeSelection.create(n,s),"pointer")}return!0}}(e,n)}function it(e){return ht(e)}Ye.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!ct(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!a.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Ie(e,t)?t.preventDefault():Xe(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,C(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Ye.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Ye.keypress=function(e,t){if(!(ct(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||a.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var at=a.mac?"metaKey":"ctrlKey";$e.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=it(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[at]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(Qe(t));i&&("singleClick"==o?e.mouseDown=new st(e,i,t,n):("doubleClick"==o?rt:ot)(e,i.pos,i.inside,t)?t.preventDefault():Xe(e,"pointer"))};var st=function(e,t,n,o){var i,s,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=o,this.selectNode=n[at],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,s=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d?d.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof r.NodeSelection&&s==e.state.selection.from)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&a.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xe(e,"pointer")};function ct(e,t){return!!e.composing||!!(a.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}st.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},st.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Qe(e))),this.allowDefault||!t?Xe(this.view,"pointer"):nt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||a.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||a.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(tt(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Xe(this.view,"pointer")}},st.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Xe(this.view,"pointer")},$e.touchdown=function(e){it(e),Xe(e,"pointer")},$e.contextmenu=function(e){return it(e)};var lt=a.android?5e3:-1;function ut(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return ht(e)}),t))}function dt(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function ht(e,t){if(e.domObserver.forceFlush(),dt(e),t||e.docView.dirty){var n=le(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Ye.compositionstart=Ye.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),ht(e,!0),e.markCursor=null;else if(ht(e),a.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}e.composing=!0}ut(e,lt)},Ye.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,ut(e,20))};var pt=a.ie&&a.ie_version<15||a.ios&&a.webkit_version<604;function ft(e,t,n,r){var i=Fe(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,i||o.Slice.empty)}))&&i){var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}$e.copy=Ye.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=pt?null:t.clipboardData,i=Pe(e,n.content()),a=i.dom,s=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Ye.paste=function(e,t){var n=pt?null:t.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(ft(e,o,r,t),t.preventDefault()):function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ft(e,r.value,null,t):ft(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var vt=function(e,t){this.slice=e,this.move=t},mt=a.mac?"altKey":"ctrlKey";for(var gt in $e.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var o=e.state.selection,i=o.empty?null:e.posAtCoords(Qe(t));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var a=e.docView.nearestDesc(t.target,!0);if(!a||!a.node.type.spec.draggable||a==e.docView)return;e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,a.posBefore)))}var s=e.state.selection.content(),c=Pe(e,s),l=c.dom,u=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(pt?"Text":"text/html",l.innerHTML),pt||t.dataTransfer.setData("text/plain",u),e.dragging=new vt(s,!t[mt])}},$e.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},Ye.dragover=Ye.dragenter=function(e,t){return t.preventDefault()},Ye.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var a=e.posAtCoords(Qe(t));if(a){var s=e.state.doc.resolve(a.pos);if(s){var c=n&&n.slice||Fe(e,t.dataTransfer.getData(pt?"Text":"text/plain"),pt?null:t.dataTransfer.getData("text/html"),!1,s),l=n&&!t[mt];if(e.someProp("handleDrop",(function(n){return n(e,t,c||o.Slice.empty,l)})))t.preventDefault();else if(c){t.preventDefault();var u=c?Object(i.g)(e.state.doc,s.pos,c):s.pos;null==u&&(u=s.pos);var d=e.state.tr;l&&d.deleteSelection();var h=d.mapping.map(u),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,f=d.doc;if(p?d.replaceRangeWith(h,h,c.content.firstChild):d.replaceRange(h,h,c),!d.doc.eq(f)){var v=d.doc.resolve(h);if(p&&r.NodeSelection.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.NodeSelection(v));else{var m=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((function(e,t,n,r){return m=r})),d.setSelection(ge(e,v,d.doc.resolve(m)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))}}}}}},$e.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&ue(e)}),20))},$e.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},$e.beforeinput=function(e,t){if(a.chrome&&a.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,C(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Ye)$e[gt]=Ye[gt];function yt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var _t=function(e,t){this.spec=t||At,this.side=this.spec.side||0,this.toDOM=e};_t.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new wt(i-n,i-n,this)},_t.prototype.valid=function(){return!0},_t.prototype.eq=function(e){return this==e||e instanceof _t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&yt(this.spec,e.spec))};var bt=function(e,t){this.spec=t||At,this.attrs=e};bt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new wt(o,i,this)},bt.prototype.valid=function(e,t){return t.from<t.to},bt.prototype.eq=function(e){return this==e||e instanceof bt&&yt(this.attrs,e.attrs)&&yt(this.spec,e.spec)},bt.is=function(e){return e.type instanceof bt};var Ct=function(e,t){this.spec=t||At,this.attrs=e};Ct.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new wt(o.pos-n,i.pos-n,this)},Ct.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},Ct.prototype.eq=function(e){return this==e||e instanceof Ct&&yt(this.attrs,e.attrs)&&yt(this.spec,e.spec)};var wt=function(e,t,n){this.from=e,this.to=t,this.type=n},St={spec:{configurable:!0},inline:{configurable:!0}};wt.prototype.copy=function(e,t){return new wt(e,t,this.type)},wt.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},wt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},wt.widget=function(e,t,n){return new wt(e,e,new _t(t,n))},wt.inline=function(e,t,n,r){return new wt(e,t,new bt(n,r))},wt.node=function(e,t,n,r){return new wt(e,t,new Ct(n,r))},St.spec.get=function(){return this.type.spec},St.inline.get=function(){return this.type instanceof bt},Object.defineProperties(wt.prototype,St);var kt=[],At={},Et=function(e,t){this.local=e&&e.length?e:kt,this.children=t&&t.length?t:kt};Et.create=function(e,t){return t.length?Lt(t,e,0,At):Tt},Et.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Et.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var c=this.children[s]+1;this.children[s+2].findInner(e-c,t-c,n,r+c,o)}},Et.prototype.map=function(e,t,n){return this==Tt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||At)},Et.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,o,i,a){for(var s=e.slice(),c=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||e>c+i||(t>=s[a]+i?s[a+1]=-1:n>=o&&(l=r-n-(t-e))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<s.length;d+=3)if(-1==s[d+1]){var h=n.map(e[d]+i),p=h-o;if(p<0||p>=r.content.size){u=!0;continue}var f=n.map(e[d+1]+i,-1)-o,v=r.content.findIndex(p),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==p&&g+y.nodeSize==f){var _=s[d+2].mapInner(n,y,h+1,e[d]+i+1,a);_!=Tt?(s[d]=p,s[d+1]=f,s[d+2]=_):(s[d+1]=-2,u=!0)}else u=!0}if(u){var b=Lt(function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(r,o,t);c?n.push(c):a.onRemove&&a.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&s(e[c+2],t[c]+i+1);return n}(s,e,t||[],n,o,i,a),r,0,a);t=b.local;for(var C=0;C<s.length;C+=3)s[C+1]<0&&(s.splice(C,3),C-=3);for(var w=0,S=0;w<b.children.length;w+=3){for(var k=b.children[w];S<s.length&&s[S]<k;)S+=3;s.splice(S,0,b.children[w],b.children[w+1],b.children[w+2])}}return new Et(t&&t.sort(Nt),s)}(this.children,i,e,t,n,r,o):i?new Et(i.sort(Nt)):Tt},Et.prototype.add=function(e,t){return t.length?this==Tt?Et.create(e,t):this.addInner(e,t,0):this},Et.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,a){var s,c=a+n;if(s=Mt(t,e,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,c+1):r.splice(i,0,a,a+e.nodeSize,Lt(s,e,c+1,At)),i+=3}}));var a=xt(i?It(t):t,-n);return new Et(a.length?this.local.concat(a).sort(Nt):this.local,r||this.children)},Et.prototype.remove=function(e){return 0==e.length||this==Tt?this:this.removeInner(e,0)},Et.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>a&&l.to<s&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=Tt?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var d=0,h=void 0;d<e.length;d++)if(h=e[d])for(var p=0;p<r.length;p++)r[p].eq(h,t)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Et(r,n):Tt},Et.prototype.forChild=function(e,t){if(this==Tt)return this;if(t.isLeaf)return Et.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var c=this.local[s];if(c.from<a&&c.to>i&&c.type instanceof bt){var l=Math.max(i,c.from)-i,u=Math.min(a,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Et(r.sort(Nt));return n?new Ot([d,n]):d}return n||Tt},Et.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Et)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Et.prototype.locals=function(e){return Rt(this.localsInner(e))},Et.prototype.localsInner=function(e){if(this==Tt)return kt;if(e.inlineContent||!this.local.some(bt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof bt||t.push(this.local[n]);return t};var Tt=new Et;Et.empty=Tt,Et.removeOverlap=Rt;var Ot=function(e){this.members=e};function xt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new wt(o.from+t,o.to+t,o.type))}return n}function Mt(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function It(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Lt(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=Mt(e,t,a+n);if(s){i=!0;var c=Lt(s,t,n+a+1,r);c!=Tt&&o.push(a,a+t.nodeSize,c)}}));for(var a=xt(i?It(e):e,-n).sort(Nt),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new Et(a,o):Tt}function Nt(e,t){return e.from-t.from||e.to-t.to}function Rt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Dt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Dt(t,o+1,i.copy(r.to,i.to)))}}return t}function Dt(e,t,n){for(;t<e.length&&Nt(n,e[t])>0;)t++;e.splice(t,0,n)}function Pt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Tt&&t.push(r)})),e.cursorWrapper&&t.push(Et.create(e.state.doc,[e.cursorWrapper.deco])),Ot.from(t)}Ot.prototype.forChild=function(e,t){if(t.isLeaf)return Et.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=Tt&&(o instanceof Ot?n=n.concat(o.members):n.push(o))}return Ot.from(n)},Ot.prototype.eq=function(e){if(!(e instanceof Ot)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Ot.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Rt(n?t:t.sort(Nt)):kt},Ot.from=function(e){switch(e.length){case 0:return Tt;case 1:return e[0];default:return new Ot(e)}};var Ft=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qt(this),this.markCursor=null,this.cursorWrapper=null,jt(this),this.nodeViews=Vt(this),this.docView=$(this.state.doc,Bt(this),Pt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ue(e,(function(t,n,r,o){return Ne(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=$e[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ze(e,t)||!e.editable&&t.type in Ye||n(e,t)})};for(var n in $e)t(n);a.safari&&e.dom.addEventListener("input",(function(){return null})),Je(e)}(this),this.pluginViews=[],this.updatePluginViews()},Ht={props:{configurable:!0},root:{configurable:!0}};function Bt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[wt.node(0,e.state.doc.content.size,t)]}function jt(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:wt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qt(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Vt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Ht.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Ft.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Je(this),this._props=e,this.updateStateInner(e.state,!0)},Ft.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Ft.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Ft.prototype.updateStateInner=function(e,t){var n=this,o=this.state,i=!1,s=!1;if(e.storedMarks&&this.composing&&(dt(this),s=!0),this.state=e,t){var c=Vt(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),Je(this)}this.editable=qt(this),jt(this);var l=Pt(this),u=Bt(this),d=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,u,l);!h&&e.selection.eq(o.selection)||(s=!0);var p,f,m,g,y,_,b,C,w,S,k,O="preserve"==d&&s&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s!=e.dom&&e.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=o-20){t=s,n=c.top;break}}}return{refDOM:t,refTop:n,stack:E(e.dom)}}(this);if(s){this.domObserver.stop();var x=h&&(a.ie||a.chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&(g=o.selection,y=e.selection,_=Math.min(g.$anchor.sharedDepth(g.head),y.$anchor.sharedDepth(y.head)),g.$anchor.start(_)!=y.$anchor.start(_));if(h){var M=a.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=$(e.doc,u,l,this.dom,this)),M&&!this.trackWrites&&(x=!0)}x||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,f=p.docView.domFromPos(p.state.selection.anchor),m=p.root.getSelection(),v(f.node,f.offset,m.anchorNode,m.anchorOffset)))?ue(this,x):(ve(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var I=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.NodeSelection?A(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),I):A(this,this.coordsAtPos(e.selection.head),I))}else O&&(C=(b=O).refDOM,w=b.refTop,S=b.stack,k=C?C.getBoundingClientRect().top:0,T(S,0==k?0:k-w))},Ft.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Ft.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Ft.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},Ft.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Ft.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(O)return e.focus(O);var t=E(e);e.focus(null==O?{get preventScroll(){return O={preventScroll:!0},!0}}:void 0),O||(O=!1,T(t,0))}(this.dom),ue(this),this.domObserver.start()},Ht.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Ft.prototype.posAtCoords=function(e){return I(this,e)},Ft.prototype.coordsAtPos=function(e){return N(this,e)},Ft.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Ft.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Ft.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Ft.prototype.endOfTextblock=function(e,t){return j(this,t||this.state,e)},Ft.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Ft.prototype.dispatchEvent=function(e){return function(e,t){Ze(e,t)||!$e[t.type]||!e.editable&&t.type in Ye||$e[t.type](e,t)}(this,e)},Ft.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Ft.prototype,Ht)},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(28)){var r=n(62),o=n(16),i=n(17),a=n(4),s=n(93),c=n(127),l=n(46),u=n(75),d=n(60),h=n(43),p=n(76),f=n(48),v=n(23),m=n(166),g=n(64),y=n(58),_=n(42),b=n(79),C=n(19),w=n(32),S=n(119),k=n(65),A=n(67),E=n(66).f,T=n(121),O=n(61),x=n(22),M=n(51),I=n(83),L=n(80),N=n(123),R=n(73),D=n(86),P=n(74),F=n(122),H=n(157),B=n(29),j=n(49),q=B.f,V=j.f,z=o.RangeError,G=o.TypeError,W=o.Uint8Array,U=Array.prototype,K=c.ArrayBuffer,$=c.DataView,Y=M(0),X=M(2),J=M(3),Z=M(4),Q=M(5),ee=M(6),te=I(!0),ne=I(!1),re=N.values,oe=N.keys,ie=N.entries,ae=U.lastIndexOf,se=U.reduce,ce=U.reduceRight,le=U.join,ue=U.sort,de=U.slice,he=U.toString,pe=U.toLocaleString,fe=x("iterator"),ve=x("toStringTag"),me=O("typed_constructor"),ge=O("def_constructor"),ye=s.CONSTR,_e=s.TYPED,be=s.VIEW,Ce=M(1,(function(e,t){return Ee(L(e,e[ge]),t)})),we=i((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Se=!!W&&!!W.prototype.set&&i((function(){new W(1).set({})})),ke=function(e,t){var n=f(e);if(n<0||n%t)throw z("Wrong offset!");return n},Ae=function(e){if(C(e)&&_e in e)return e;throw G(e+" is not a typed array!")},Ee=function(e,t){if(!(C(e)&&me in e))throw G("It is not a typed array constructor!");return new e(t)},Te=function(e,t){return Oe(L(e,e[ge]),t)},Oe=function(e,t){for(var n=0,r=t.length,o=Ee(e,r);r>n;)o[n]=t[n++];return o},xe=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t,n,r,o,i,a,s=w(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=T(s);if(null!=h&&!S(h)){for(a=h.call(s),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);s=r}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,n=v(s.length),o=Ee(this,n);n>t;t++)o[t]=d?u(s[t],t):s[t];return o},Ie=function(){for(var e=0,t=arguments.length,n=Ee(this,t);t>e;)n[e]=arguments[e++];return n},Le=!!W&&i((function(){pe.call(new W(1))})),Ne=function(){return pe.apply(Le?de.call(Ae(this)):Ae(this),arguments)},Re={copyWithin:function(e,t){return H.call(Ae(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(Ae(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Ae(this),arguments)},filter:function(e){return Te(this,X(Ae(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Q(Ae(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ae(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(Ae(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ae(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ae(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Ae(this),arguments)},lastIndexOf:function(e){return ae.apply(Ae(this),arguments)},map:function(e){return Ce(Ae(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ae(this),arguments)},reduceRight:function(e){return ce.apply(Ae(this),arguments)},reverse:function(){for(var e,t=Ae(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return J(Ae(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Ae(this),e)},subarray:function(e,t){var n=Ae(this),r=n.length,o=g(e,r);return new(L(n,n[ge]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===t?r:g(t,r))-o))}},De=function(e,t){return Te(this,de.call(Ae(this),e,t))},Pe=function(e){Ae(this);var t=ke(arguments[1],1),n=this.length,r=w(e),o=v(r.length),i=0;if(o+t>n)throw z("Wrong length!");for(;i<o;)this[t+i]=r[i++]},Fe={entries:function(){return ie.call(Ae(this))},keys:function(){return oe.call(Ae(this))},values:function(){return re.call(Ae(this))}},He=function(e,t){return C(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Be=function(e,t){return He(e,t=y(t,!0))?d(2,e[t]):V(e,t)},je=function(e,t,n){return!(He(e,t=y(t,!0))&&C(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};ye||(j.f=Be,B.f=je),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Be,defineProperty:je}),i((function(){he.call({})}))&&(he=pe=function(){return le.call(this)});var qe=p({},Re);p(qe,Fe),h(qe,fe,Fe.values),p(qe,{slice:De,set:Pe,constructor:function(){},toString:he,toLocaleString:Ne}),xe(qe,"buffer","b"),xe(qe,"byteOffset","o"),xe(qe,"byteLength","l"),xe(qe,"length","e"),q(qe,ve,{get:function(){return this[_e]}}),e.exports=function(e,t,n,c){var l=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,p="set"+e,f=o[l],g=f||{},y=f&&A(f),_=!f||!s.ABV,w={},S=f&&f.prototype,T=function(e,n){q(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[d](n*t+r.o,we)}(this,n)},set:function(e){return function(e,n,r){var o=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](n*t+o.o,r,we)}(this,n,e)},enumerable:!0})};_?(f=n((function(e,n,r,o){u(e,f,l,"_d");var i,a,s,c,d=0,p=0;if(C(n)){if(!(n instanceof K||"ArrayBuffer"==(c=b(n))||"SharedArrayBuffer"==c))return _e in n?Oe(f,n):Me.call(f,n);i=n,p=ke(r,t);var g=n.byteLength;if(void 0===o){if(g%t)throw z("Wrong length!");if((a=g-p)<0)throw z("Wrong length!")}else if((a=v(o)*t)+p>g)throw z("Wrong length!");s=a/t}else s=m(n),i=new K(a=s*t);for(h(e,"_d",{b:i,o:p,l:a,e:s,v:new $(i)});d<s;)T(e,d++)})),S=f.prototype=k(qe),h(S,"constructor",f)):i((function(){f(1)}))&&i((function(){new f(-1)}))&&D((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=n((function(e,n,r,o){var i;return u(e,f,l),C(n)?n instanceof K||"ArrayBuffer"==(i=b(n))||"SharedArrayBuffer"==i?void 0!==o?new g(n,ke(r,t),o):void 0!==r?new g(n,ke(r,t)):new g(n):_e in n?Oe(f,n):Me.call(f,n):new g(m(n))})),Y(y!==Function.prototype?E(g).concat(E(y)):E(g),(function(e){e in f||h(f,e,g[e])})),f.prototype=S,r||(S.constructor=f));var O=S[fe],x=!!O&&("values"==O.name||null==O.name),M=Fe.values;h(f,me,!0),h(S,_e,l),h(S,be,!0),h(S,ge,f),(c?new f(1)[ve]==l:ve in S)||q(S,ve,{get:function(){return l}}),w[l]=f,a(a.G+a.W+a.F*(f!=g),w),a(a.S,l,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*i((function(){g.of.call(f,1)})),l,{from:Me,of:Ie}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",t),a(a.P,l,Re),P(l),a(a.P+a.F*Se,l,{set:Pe}),a(a.P+a.F*!x,l,Fe),r||S.toString==he||(S.toString=he),a(a.P+a.F*i((function(){new f(1).slice()})),l,{slice:De}),a(a.P+a.F*(i((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!i((function(){S.toLocaleString.call([1,2])}))),l,{toLocaleString:Ne}),R[l]=x?O:M,r||x||h(S,fe,M)}}else e.exports=function(){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=/[\u2028\u2029><&]/g,o={"\u2028":"\\u2028","\u2029":"\\u2029",">":"\\u003e","<":"\\u003c","&":"\\u0026"};function i(e){return e.replace(r,(function(e){return o[e]}))}},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(61)("meta"),o=n(19),i=n(42),a=n(29).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(17)((function(){return c(Object.preventExtensions({}))})),u=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!i(e,r)&&u(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(141),o=n(106);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(48),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(18),o=n(142),i=n(106),a=n(105)("IE_PROTO"),s=function(){},c=function(){var e,t=n(103)("iframe"),r=i.length;for(t.style.display="none",n(107).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(141),o=n(106).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(42),o=n(32),i=n(105)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(22)("unscopables"),o=Array.prototype;null==o[r]&&n(43)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=c.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var o=n(1).default,i=n(2).default;t.__esModule=!0;var a=o(n(3)),s=i(n(36)),c=i(n(5)),l=o(n(4)),u=o(n(37)),d=i(n(43)),h=r();h.create=r,d.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__esModule=!0},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict";function r(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var o=n(2).default;t.__esModule=!0,t.HandlebarsEnvironment=r;var i=n(4),a=o(n(5)),s=n(9),c=n(29),l=o(n(31)),u=n(32);t.VERSION="4.7.6",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var d="[object Object]";r.prototype={constructor:r,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(i.toString.call(e)===d){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===d)i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===d){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var h=l.default.log;t.log=h,t.createFrame=i.createFrame,t.logger=l.default},function(e,t){"use strict";function n(e){return o[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}t.__esModule=!0,t.extend=r,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return a.test(e)?e.replace(i,n):e},t.isEmpty=function(e){return!e&&0!==e||!(!l(e)||0!==e.length)},t.createFrame=function(e){var t=r({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/,s=Object.prototype.toString;t.toString=s;var c=function(e){return"function"==typeof e};c(/x/)&&(t.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=c;var l=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};t.isArray=l},function(e,t,n){"use strict";function r(e,t){var n=t&&t.loc,a=void 0,s=void 0,c=void 0,l=void 0;n&&(a=n.start.line,s=n.end.line,c=n.start.column,l=n.end.column,e+=" - "+a+":"+c);for(var u=Error.prototype.constructor.call(this,e),d=0;d<i.length;d++)this[i[d]]=u[i[d]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{n&&(this.lineNumber=a,this.endLineNumber=s,o?(Object.defineProperty(this,"column",{value:c,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=c,this.endColumn=l))}catch(e){}}var o=n(6).default;t.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];r.prototype=new Error,t.default=r,e.exports=t.default},function(e,t,n){e.exports={default:n(7),__esModule:!0}},function(e,t,n){var r=n(8);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),i.default(e),a.default(e),s.default(e),c.default(e),l.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var o=r(n(10)),i=r(n(11)),a=r(n(24)),s=r(n(25)),c=r(n(26)),l=r(n(27)),u=r(n(28))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var o=n.inverse,i=n.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return i(t,n)}))},e.exports=t.default},function(e,t,n){(function(r){"use strict";var o=n(12).default,i=n(2).default;t.__esModule=!0;var a=n(4),s=i(n(5));t.default=function(e){e.registerHelper("each",(function(e,t){function n(t,n,r){d&&(d.key=t,d.index=n,d.first=0===n,d.last=!!r,h&&(d.contextPath=h+t)),u+=i(e[t],{data:d,blockParams:a.blockParams([e[t],t],[h+t,null])})}if(!t)throw new s.default("Must pass iterator to #each");var i=t.fn,c=t.inverse,l=0,u="",d=void 0,h=void 0;if(t.data&&t.ids&&(h=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(d=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var p=e.length;l<p;l++)l in e&&n(l,l,l===e.length-1);else if(r.Symbol&&e[r.Symbol.iterator]){for(var f=[],v=e[r.Symbol.iterator](),m=v.next();!m.done;m=v.next())f.push(m.value);for(p=(e=f).length;l<p;l++)n(l,l,l===e.length-1)}else!function(){var t=void 0;o(e).forEach((function(e){void 0!==t&&n(t,l-1),t=e,l++})),void 0!==t&&n(t,l-1,!0)}();return 0===l&&(u=c(this)),u}))},e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){e.exports={default:n(13),__esModule:!0}},function(e,t,n){n(14),e.exports=n(20).Object.keys},function(e,t,n){var r=n(15);n(17)("keys",(function(e){return function(t){return e(r(t))}}))},function(e,t,n){var r=n(16);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(18),o=n(20),i=n(23);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(19),o=n(20),i=n(21),a="prototype",s=function(e,t,n){var c,l,u,d=e&s.F,h=e&s.G,p=e&s.S,f=e&s.P,v=e&s.B,m=e&s.W,g=h?o:o[t]||(o[t]={}),y=h?r:p?r[t]:(r[t]||{})[a];for(c in h&&(n=t),n)(l=!d&&y&&c in y)&&c in g||(u=l?y[c]:n[c],g[c]=h&&"function"!=typeof y[c]?n[c]:v&&l?i(u,r):m&&y[c]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(u):f&&"function"==typeof u?i(Function.call,u):u,f&&((g[a]||(g[a]={}))[c]=u))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var o=r(n(5));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var o=n(4),i=r(n(5));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new i.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new i.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var o=n(4),i=r(n(5));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new i.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:o.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var o=r(n(30))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(o,i);return n.partials=a,s}),t.partials[o.args[0]]=o.fn,i}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console[t].apply(console,r)}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==l[e]&&(l[e]=!0,c.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}var o=n(33).default,i=n(12).default,a=n(1).default;t.__esModule=!0,t.createProtoAccessControl=function(e){var t=o(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=o(null);return n.__proto__=!1,{properties:{whitelist:s.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:s.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return r("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){i(l).forEach((function(e){delete l[e]}))};var s=n(35),c=a(n(31)),l=o(null)},function(e,t,n){e.exports={default:n(34),__esModule:!0}},function(e,t,n){var r=n(8);e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){"use strict";var r=n(33).default;t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.extend.apply(void 0,[r(null)].concat(t))};var o=n(4)},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){function c(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(a=[t].concat(s)),n(e,t,e.helpers,e.partials,o.data||r,i&&[o.blockParams].concat(i),a)}return(c=a(n,c,e,s,r,i)).program=t,c.depth=s?s.length:0,c.blockParams=o||0,c}function o(){return""}function i(e,t){return t&&"root"in t||((t=t?p.createFrame(t):{}).root=e),t}function a(e,t,n,r,o,i){if(e.decorator){var a={};t=e.decorator(t,a,n,r&&r[0],o,i,r),d.extend(t,a)}return t}var s=n(38).default,c=n(12).default,l=n(1).default,u=n(2).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=p.COMPILER_REVISION;if(!(t>=p.LAST_COMPATIBLE_COMPILER_REVISION&&t<=p.COMPILER_REVISION)){if(t<p.LAST_COMPATIBLE_COMPILER_REVISION){var r=p.REVISION_CHANGES[n],o=p.REVISION_CHANGES[t];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){function n(t){function r(t){return""+e.main(l,t,l.helpers,l.partials,s,u,c)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o.data;n._setup(o),!o.partial&&e.useData&&(s=i(t,s));var c=void 0,u=e.useBlockParams?[]:void 0;return e.useDepths&&(c=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(r=a(e.main,r,l,o.depths||[],s,u))(t,o)}if(!t)throw new h.default("No environment passed to template");if(!e||!e.main)throw new h.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var o=e.compiler&&7===e.compiler[0],l={strict:function(e,t,n){if(!(e&&t in e))throw new h.default('"'+t+'" not defined in '+e,{loc:n});return e[t]},lookupProperty:function(e,t){var n=e[t];return null==n?n:Object.prototype.hasOwnProperty.call(e,t)?n:m.resultIsAllowed(n,l.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(null!=(e[r]&&l.lookupProperty(e[r],t)))return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:function(n,r,o){o.hash&&(r=d.extend({},r,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,o);var i=d.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=t.VM.invokePartial.call(this,n,r,i);if(null==a&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),a=o.partials[o.name](r,i)),null!=a){if(o.indent){for(var s=a.split("\n"),c=0,l=s.length;c<l&&(s[c]||c+1!==l);c++)s[c]=o.indent+s[c];a=s.join("\n")}return a}throw new h.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,o,i){var a=this.programs[e],s=this.fn(e);return t||i||o||n?a=r(this,e,s,t,n,o,i):a||(a=this.programs[e]=r(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=d.extend({},t,e)),n},nullContext:s({}),noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(n){if(n.partial)l.protoAccessControl=n.protoAccessControl,l.helpers=n.helpers,l.partials=n.partials,l.decorators=n.decorators,l.hooks=n.hooks;else{var r=d.extend({},t.helpers,n.helpers);(function(e,t){c(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return v.wrapHelper(e,(function(e){return d.extend({lookupProperty:n},e)}))}(r,t)}))})(r,l),l.helpers=r,e.usePartial&&(l.partials=l.mergeIfNeeded(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(l.decorators=d.extend({},t.decorators,n.decorators)),l.hooks={},l.protoAccessControl=m.createProtoAccessControl(n);var i=n.allowCallsToHelperMissing||o;f.moveHelperToHooks(l,"helperMissing",i),f.moveHelperToHooks(l,"blockHelperMissing",i)}},n._child=function(t,n,o,i){if(e.useBlockParams&&!o)throw new h.default("must pass block params");if(e.useDepths&&!i)throw new h.default("must pass parent depths");return r(l,t,e[t],n,0,o,i)},n},t.wrapProgram=r,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==o&&function(){n.data=p.createFrame(n.data);var e=n.fn;i=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=p.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=d.extend({},n.partials,e.partials))}(),void 0===e&&i&&(e=i),void 0===e)throw new h.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=o;var d=l(n(4)),h=u(n(5)),p=n(3),f=n(9),v=n(42),m=n(32)},function(e,t,n){e.exports={default:n(39),__esModule:!0}},function(e,t,n){n(40),e.exports=n(20).Object.seal},function(e,t,n){var r=n(41);n(17)("seal",(function(e){return function(t){return e&&r(t)?e(t):t}}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},function(e,t){(function(n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default}).call(t,function(){return this}())}])},function(e,t,n){var r=n(29).f,o=n(42),i=n(22)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(4),o=n(55),i=n(17),a=n(109),s="["+a+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,n){var o={},s=i((function(){return!!a[e]()||""!=""[e]()})),c=o[e]=s?t(d):a[e];n&&(o[n]=c),r(r.P+r.F*s,"String",o)},d=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(16),o=n(29),i=n(28),a=n(22)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(36);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){var r=n(54);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(54),o=n(22)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(18),o=n(47),i=n(22)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),o=n(8),i=n(9),a=["input","button","textarea","select"];var s=function(e){function t(n){var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.wrapFocus_=!1,o.isVertical_=!0,o.isSingleSelectionList_=!1,o.selectedIndex_=i.b.UNSET_INDEX,o.focusedItemIndex_=i.b.UNSET_INDEX,o.useActivatedClass_=!1,o.ariaCurrentAttrValue_=null,o.isCheckboxList_=!1,o.isRadioList_=!1,o}return r.b(t,e),Object.defineProperty(t,"strings",{get:function(){return i.c},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return i.a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return i.b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){}}},enumerable:!0,configurable:!0}),t.prototype.layout=function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"0")},t.prototype.handleFocusOut=function(e,t){var n=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"-1"),setTimeout((function(){n.adapter_.isFocusInsideList()||n.setTabindexToFirstSelectedItem_()}),0)},t.prototype.handleKeydown=function(e,t,n){var r="ArrowLeft"===e.key||37===e.keyCode,o="ArrowUp"===e.key||38===e.keyCode,i="ArrowRight"===e.key||39===e.keyCode,a="ArrowDown"===e.key||40===e.keyCode,s="Home"===e.key||36===e.keyCode,c="End"===e.key||35===e.keyCode,l="Enter"===e.key||13===e.keyCode,u="Space"===e.key||32===e.keyCode;if(this.adapter_.isRootFocused())o||c?(e.preventDefault(),this.focusLastElement()):(a||s)&&(e.preventDefault(),this.focusFirstElement());else{var d=this.adapter_.getFocusedElementIndex();if(!(-1===d&&(d=n)<0)){var h;if(this.isVertical_&&a||!this.isVertical_&&i)this.preventDefaultEvent_(e),h=this.focusNextElement(d);else if(this.isVertical_&&o||!this.isVertical_&&r)this.preventDefaultEvent_(e),h=this.focusPrevElement(d);else if(s)this.preventDefaultEvent_(e),h=this.focusFirstElement();else if(c)this.preventDefaultEvent_(e),h=this.focusLastElement();else if((l||u)&&t){var p=e.target;if(p&&"A"===p.tagName&&l)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(d),this.adapter_.notifyAction(d)}this.focusedItemIndex_=d,void 0!==h&&(this.setTabindexAtIndex_(h),this.focusedItemIndex_=h)}}},t.prototype.handleClick=function(e,t){e!==i.b.UNSET_INDEX&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.adapter_.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter_.removeClassForElementIndex(e,i.a.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,i.c.ARIA_DISABLED,"false")):(this.adapter_.addClassForElementIndex(e,i.a.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,i.c.ARIA_DISABLED,"true")))},t.prototype.preventDefaultEvent_=function(e){var t=(""+e.target.tagName).toLowerCase();-1===a.indexOf(t)&&e.preventDefault()},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=i.a.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=i.a.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==i.b.UNSET_INDEX&&this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.addClassForElementIndex(e,t),this.setAriaForSingleSelectionAtIndex_(e),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===i.b.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter_.getAttributeForElementIndex(e,i.c.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,n=t?i.c.ARIA_CURRENT:i.c.ARIA_SELECTED;this.selectedIndex_!==i.b.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,n,"false");var r=t?this.ariaCurrentAttrValue_:"true";this.adapter_.setAttributeForElementIndex(e,n,r)},t.prototype.setRadioAtIndex_=function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==i.b.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,i.c.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,i.c.ARIA_CHECKED,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var n=!1;e.indexOf(t)>=0&&(n=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,n),this.adapter_.setAttributeForElementIndex(t,i.c.ARIA_CHECKED,n?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex_=function(e){this.focusedItemIndex_===i.b.UNSET_INDEX&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex","-1"),this.adapter_.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedItem_=function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==i.b.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),this.setTabindexAtIndex_(e)},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.adapter_.listItemAtIndexHasClass(e,i.a.LIST_ITEM_DISABLED_CLASS)||(this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e))},t.prototype.toggleCheckboxAtIndex_=function(e,t){var n=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(n=!n,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,n)),this.adapter_.setAttributeForElementIndex(e,i.c.ARIA_CHECKED,n?"true":"false");var r=this.selectedIndex_===i.b.UNSET_INDEX?[]:this.selectedIndex_.slice();n?r.push(e):r=r.filter((function(t){return t!==e})),this.selectedIndex_=r},t}(o.a)},function(e,t,n){var r=n(26),o=n(16),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(62)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(44),o=n(23),i=n(64);e.exports=function(e){return function(t,n,a){var s,c=r(t),l=o(c.length),u=i(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(54);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(22)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(18);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(79),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(159);var r=n(36),o=n(43),i=n(17),a=n(55),s=n(22),c=n(124),l=s("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=s(e),p=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p?!i((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[h](""),!t})):void 0;if(!p||!f||"replace"===e&&!u||"split"===e&&!d){var v=/./[h],m=n(a,h,""[e],(function(e,t,n,r,o){return t.exec===c?p&&!o?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=m[0],y=m[1];r(String.prototype,e,g),o(RegExp.prototype,h,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){var r=n(46),o=n(154),i=n(119),a=n(18),s=n(23),c=n(121),l={},u={};(t=e.exports=function(e,t,n,d,h){var p,f,v,m,g=h?function(){return e}:c(e),y=r(n,d,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=s(e.length);p>_;_++)if((m=t?y(a(f=e[_])[0],f[1]):y(e[_]))===l||m===u)return m}else for(v=g.call(e);!(f=v.next()).done;)if((m=o(v,y,f.value,t))===l||m===u)return m}).BREAK=l,t.RETURN=u},function(e,t,n){var r=n(16).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(16),o=n(4),i=n(36),a=n(76),s=n(59),c=n(90),l=n(75),u=n(19),d=n(17),h=n(86),p=n(71),f=n(110);e.exports=function(e,t,n,v,m,g){var y=r[e],_=y,b=m?"set":"add",C=_&&_.prototype,w={},S=function(e){var t=C[e];i(C,e,"delete"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(g||C.forEach&&!d((function(){(new _).entries().next()})))){var k=new _,A=k[b](g?{}:-0,1)!=k,E=d((function(){k.has(1)})),T=h((function(e){new _(e)})),O=!g&&d((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));T||((_=t((function(t,n){l(t,_,e);var r=f(new y,t,_);return null!=n&&c(n,m,r[b],r),r}))).prototype=C,C.constructor=_),(E||O)&&(S("delete"),S("has"),m&&S("get")),(O||A)&&S(b),g&&C.clear&&delete C.clear}else _=v.getConstructor(t,e,m,b),a(_.prototype,n),s.NEED=!0;return p(_,e),w[e]=_,o(o.G+o.W+o.F*(_!=y),w),g||v.setStrong(_,e,m),_}},function(e,t,n){for(var r,o=n(16),i=n(43),a=n(61),s=a("typed_array"),c=a("view"),l=!(!o.ArrayBuffer||!o.DataView),u=l,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=o[h[d++]])?(i(r.prototype,s,!0),i(r.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),o=n(10),i=n(25),a=n(102),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation_.shake(e)},t.prototype.float=function(e){this.foundation_.float(e)},t.prototype.getWidth=function(){return this.foundation_.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return Object(i.b)(e.root_)},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)}};return new a.a(t)},t}(o.a)},function(e,t,n){"use strict";var r;function o(e,t){void 0===t&&(t=!1);var n,o=e.CSS;if("boolean"==typeof r&&!t)return r;if(!(o&&"function"==typeof o.supports))return!1;var i=o.supports("--css-vars","yes"),a=o.supports("(--css-vars: yes)")&&o.supports("color","#00000000");return n=i||a,t||(r=n),n}function i(e,t,n){if(!e)return{x:0,y:0};var r,o,i=t.x,a=t.y,s=i+n.left,c=a+n.top;if("touchstart"===e.type){var l=e;r=l.changedTouches[0].pageX-s,o=l.changedTouches[0].pageY-c}else{var u=e;r=u.pageX-s,o=u.pageY-c}return{x:r,y:o}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),o=n(6),i=n(5);n(24),n(0),n(392),n(393),n(394);function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var s=function(e){babelHelpers.inherits(r,e);var t,n=a(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{classes:{type:String},titleClasses:{type:String},titleText:{type:String},titleIcon:{type:String},titleIconLabel:{type:String},titleIconClasses:{type:String},mediaContent:{type:String},mediaContentClasses:{type:String},bodyContent:{type:String},bodyContentClasses:{type:String},actionsContent:{type:String},actionsClasses:{type:String},elevation:{type:Number,default:1},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.titleText?'<h2 id="'.concat(e.titleId||Object(i.a)(),'" class="ct-card__title--text">').concat(e.titleText,"</h2>"):"",n=e.titleIcon?'<i aria-label="'.concat(e.titleIconLabel||"",'" role="button" class="').concat(e.titleIconClasses||"",' material-icons">').concat(e.titleIcon,"</i>"):"",r='<div class="ct-card__title '.concat(e.titleClasses||"",'">').concat(n," ").concat(t,"</div>"),o=e.mediaContent?'<div class="ct-card__media mdc-card__media '.concat(e.mediaContentClasses||"",'">').concat(e.mediaContent,"</div>"):"",a='<div class="'.concat(e.bodyContentClasses||"",' ct-card__supporting-text">').concat(e.bodyContent||"","</div>"),s='<div class="'.concat(e.actionsClasses||"",' ct-card__actions mdc-card__actions">').concat(e.actionsContent||"","</div>");return"".concat(r).concat(o).concat(a).concat(s)}}]),r}(r.a);s.componentName="ct-card",s.classes="mdc-card ct-card",o.a.define(s)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),o=n(6),i=n(52);n(5),n(24),n(0),n(419);function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var s=function(e){babelHelpers.inherits(r,e);var t,n=a(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},choices:{type:Array,default:[]},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"getValue",value:function(){return this.querySelector('input[name="'.concat(this._conf.name,'"]:checked')).value}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.choices.map((function(t){return t.name=t.name||e.name,i.a.create(t)})).join("");return'<div class="ct-form-group-label">'.concat(e.label," ").concat(e.label?":":"",'</div><div class="ct-radio-group-choices">').concat(t,"</div>")}}]),r}(r.a);s.componentName="radio-group",o.a.define(s)},function(e,t,n){"use strict";e.exports=n(434)},function(e,t,n){"use strict";var r=n(7),o=n(6),i=n(5),a=n(24),s=n(568),c=n(1),l=n(10),u=n(15),d=n(25),h=n(27),p=n(35),f=n(8),v={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},m={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},g=function(e){function t(n){return e.call(this,c.a({},t.defaultAdapter,n))||this}return c.b(t,e),Object.defineProperty(t,"strings",{get:function(){return m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setChecked=function(e){this.adapter_.setNativeControlChecked(e),this.updateAriaChecked_(e),this.updateCheckedStyling_(e)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(v.DISABLED):this.adapter_.removeClass(v.DISABLED)},t.prototype.handleChange=function(e){var t=e.target;this.updateAriaChecked_(t.checked),this.updateCheckedStyling_(t.checked)},t.prototype.updateCheckedStyling_=function(e){e?this.adapter_.addClass(v.CHECKED):this.adapter_.removeClass(v.CHECKED)},t.prototype.updateAriaChecked_=function(e){this.adapter_.setNativeControlAttr(m.ARIA_CHECKED_ATTR,""+!!e)},t}(f.a),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return c.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.changeHandler_)},t.prototype.initialSyncWithDOM=function(){var e=this;this.changeHandler_=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(t=e.foundation_).handleChange.apply(t,c.d(n))},this.nativeControl_.addEventListener("change",this.changeHandler_),this.checked=this.checked},t.prototype.getDefaultFoundation=function(){var e=this;return new g({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNativeControlChecked:function(t){return e.nativeControl_.checked=t},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t},setNativeControlAttr:function(t,n){return e.nativeControl_.setAttribute(t,n)}})},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.foundation_.setChecked(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.createRipple_=function(){var e=this,t=g.strings.RIPPLE_SURFACE_SELECTOR,n=this.root_.querySelector(t),r=c.a({},h.a.createAdapter(this),{addClass:function(e){return n.classList.add(e)},computeBoundingRect:function(){return n.getBoundingClientRect()},deregisterInteractionHandler:function(t,n){e.nativeControl_.removeEventListener(t,n,Object(u.a)())},isSurfaceActive:function(){return Object(d.c)(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,n){e.nativeControl_.addEventListener(t,n,Object(u.a)())},removeClass:function(e){n.classList.remove(e)},updateCssVariable:function(e,t){n.style.setProperty(e,t)}});return new h.a(this.root_,new p.a(r))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=g.strings.NATIVE_CONTROL_SELECTOR;return this.root_.querySelector(e)},enumerable:!0,configurable:!0}),t}(l.a);n(131),n(415),n(416);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"a",(function(){return b}));var b=function(e){babelHelpers.inherits(r,e);var t,n=_(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String},disabled:{type:Boolean,toComponent:!0},checked:{type:Boolean,toComponent:!0},id:{type:String},inputId:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String},comment:{type:String},hint:{type:String}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-toggle-helper-text--show"):n.classList.add("ct-toggle-helper-text--show")}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),t.hint&&this.classList.add("ct-toggle-has-hint"),(n=s.a.attachTo(this)).input=y.attachTo(this.querySelector(".mdc-switch")),this._component=n.input;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.nameAsId?e.name:e.inputId||Object(i.a)(),n=e.helperId,r=e.helperClass,o=e.comment?'<div class="ct-form-comment">( '.concat(e.comment," )</div>"):"",s=e.hint?'<icon-button class="ct-toggle-hint ct-mobile-tooltip" data-tooltip aria-label="'.concat(Object(a.a)(e.hint),'" icon-name="help"></icon-button>'):"";return'<div class="mdc-form-field">\n                  <div class="mdc-switch '.concat(e.disabled?"mdc-switch--disabled":""," ").concat(e.checked?"mdc-switch--checked":"",'">\n                    <div class="mdc-switch__track"></div>\n                    <div class="mdc-switch__thumb-underlay">\n                      <div class="mdc-switch__thumb">\n                        <input ').concat(e.disabled?"disabled=true":"",' value="').concat(e.value||"On",'" type="checkbox" id="').concat(t,'" name="').concat(e.name,'"  ').concat(e.checked?"checked":"",' class="mdc-switch__native-control" role="switch"/>\n                      </div>\n                    </div>\n                  </div>\n                  <label for="').concat(t,'">').concat(e.label,"</label> ").concat(s,"\n                </div>\n\n                 ").concat(n||r?'<div class="mdc-text-field-helper-line">\n                     <div id="'.concat(n||Object(i.a)(),'" class="mdc-text-field-helper-text ').concat(r||"",'"></div>'):"","\n                 ").concat(o,"\n                 ")}}]),r}(r.a);b.componentName="ct-toggle",o.a.define(b)},function(e,t,n){"use strict";var r=n(1),o=n(10),i=n(8),a={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},s=function(e){function t(n){var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.transitionEndHandler_=function(e){return o.handleTransitionEnd(e)},o}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(a.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(a.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(a.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(a.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(a.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(a.LINE_RIPPLE_DEACTIVATING))},t}(i.a);n.d(t,"a",(function(){return c}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new s({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,n){return e.root_.style.setProperty(t,n)},registerEventHandler:function(t,n){return e.listen(t,n)},deregisterEventHandler:function(t,n){return e.unlisten(t,n)}})},t}(o.a)},function(e,t,n){"use strict";var r=n(1),o=n(10),i=n(102),a={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},s={NOTCH_ELEMENT_PADDING:8},c={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},l=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=s.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(n(8).a);n.d(t,"a",(function(){return u}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(a.NOTCH_ELEMENT_SELECTOR);var e=this.root_.querySelector("."+i.a.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root_.classList.add(c.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root_.classList.add(c.NO_LABEL)},t.prototype.notch=function(e){this.foundation_.notch(e)},t.prototype.closeNotch=function(){this.foundation_.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new l({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNotchWidthProperty:function(t){return e.notchElement_.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){return e.notchElement_.style.removeProperty("width")}})},t}(o.a)},function(e,t,n){"use strict";var r=n(1),o=n(8),i={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};n.d(t,"a",(function(){return a}));var a=function(e){function t(n){var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.shakeAnimationEndHandler_=function(){return o.handleShakeAnimationEnd_()},o}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return i},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,r=n.LABEL_FLOAT_ABOVE,o=n.LABEL_SHAKE;e?this.adapter_.addClass(r):(this.adapter_.removeClass(r),this.adapter_.removeClass(o))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(o.a)},function(e,t,n){var r=n(19),o=n(16).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){t.f=n(22)},function(e,t,n){var r=n(82)("keys"),o=n(61);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(16).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(19),o=n(18),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(46)(Function.call,n(49).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(e,t,n){var r=n(19),o=n(108).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){"use strict";var r=n(48),o=n(55);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(48),o=n(55);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(62),o=n(4),i=n(36),a=n(43),s=n(73),c=n(153),l=n(71),u=n(67),d=n(22)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,v,m,g){c(n,t,f);var y,_,b,C=function(e){if(!h&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",S="values"==v,k=!1,A=e.prototype,E=A[d]||A["@@iterator"]||v&&A[v],T=E||C(v),O=v?S?C("entries"):T:void 0,x="Array"==t&&A.entries||E;if(x&&(b=u(x.call(new e)))!==Object.prototype&&b.next&&(l(b,w,!0),r||"function"==typeof b[d]||a(b,d,p)),S&&E&&"values"!==E.name&&(k=!0,T=function(){return E.call(this)}),r&&!g||!h&&!k&&A[d]||a(A,d,T),s[t]=T,s[w]=p,v)if(y={values:S?T:C("values"),keys:m?T:C("keys"),entries:O},g)for(_ in y)_ in A||i(A,_,y[_]);else o(o.P+o.F*(h||k),t,y);return y}},function(e,t,n){var r=n(117),o=n(55);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(19),o=n(54),i=n(22)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(22)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(73),o=n(22)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(29),o=n(60);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(79),o=n(22)("iterator"),i=n(73);e.exports=n(26).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(32),o=n(64),i=n(23);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);l>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(68),o=n(158),i=n(73),a=n(44);e.exports=n(115)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,o,i=n(87),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,l=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(e){var t,n,r,o,c=this;return u&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),l&&(t=c.lastIndex),r=a.call(c,e),l&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},function(e,t,n){"use strict";var r=n(114)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,o,i,a=n(46),s=n(147),c=n(107),l=n(103),u=n(16),d=u.process,h=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,v=u.Dispatch,m=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){y.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete g[e]},"process"==n(54)(d)?r=function(e){d.nextTick(a(y,e,1))}:v&&v.now?r=function(e){v.now(a(y,e,1))}:f?(i=(o=new f).port2,o.port1.onmessage=_,r=a(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",_,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){"use strict";var r=n(16),o=n(28),i=n(62),a=n(93),s=n(43),c=n(76),l=n(17),u=n(75),d=n(48),h=n(23),p=n(166),f=n(66).f,v=n(29).f,m=n(122),g=n(71),y=r.ArrayBuffer,_=r.DataView,b=r.Math,C=r.RangeError,w=r.Infinity,S=y,k=b.abs,A=b.pow,E=b.floor,T=b.log,O=b.LN2,x=o?"_b":"buffer",M=o?"_l":"byteLength",I=o?"_o":"byteOffset";function L(e,t,n){var r,o,i,a=new Array(n),s=8*n-t-1,c=(1<<s)-1,l=c>>1,u=23===t?A(2,-24)-A(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for((e=k(e))!=e||e===w?(o=e!=e?1:0,r=c):(r=E(T(e)/O),e*(i=A(2,-r))<1&&(r--,i*=2),(e+=r+l>=1?u/i:u*A(2,1-l))*i>=2&&(r++,i/=2),r+l>=c?(o=0,r=c):r+l>=1?(o=(e*i-1)*A(2,t),r+=l):(o=e*A(2,l-1)*A(2,t),r=0));t>=8;a[d++]=255&o,o/=256,t-=8);for(r=r<<t|o,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*h,a}function N(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,s=o-7,c=n-1,l=e[c--],u=127&l;for(l>>=7;s>0;u=256*u+e[c],c--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===u)u=1-a;else{if(u===i)return r?NaN:l?-w:w;r+=A(2,t),u-=a}return(l?-1:1)*r*A(2,u-t)}function R(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function D(e){return[255&e]}function P(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return L(e,52,8)}function B(e){return L(e,23,4)}function j(e,t,n){v(e.prototype,t,{get:function(){return this[n]}})}function q(e,t,n,r){var o=p(+n);if(o+t>e[M])throw C("Wrong index!");var i=e[x]._b,a=o+e[I],s=i.slice(a,a+t);return r?s:s.reverse()}function V(e,t,n,r,o,i){var a=p(+n);if(a+t>e[M])throw C("Wrong index!");for(var s=e[x]._b,c=a+e[I],l=r(+o),u=0;u<t;u++)s[c+u]=l[i?u:t-u-1]}if(a.ABV){if(!l((function(){y(1)}))||!l((function(){new y(-1)}))||l((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var z,G=(y=function(e){return u(this,y),new S(p(e))}).prototype=S.prototype,W=f(S),U=0;W.length>U;)(z=W[U++])in y||s(y,z,S[z]);i||(G.constructor=y)}var K=new _(new y(2)),$=_.prototype.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||c(_.prototype,{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},!0)}else y=function(e){u(this,y,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[M]=t},_=function(e,t,n){u(this,_,"DataView"),u(e,y,"DataView");var r=e[M],o=d(t);if(o<0||o>r)throw C("Wrong offset!");if(o+(n=void 0===n?r-o:h(n))>r)throw C("Wrong length!");this[x]=e,this[I]=o,this[M]=n},o&&(j(y,"byteLength","_l"),j(_,"buffer","_b"),j(_,"byteLength","_l"),j(_,"byteOffset","_o")),c(_.prototype,{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return R(q(this,4,e,arguments[1]))},getUint32:function(e){return R(q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){V(this,1,e,D,t)},setUint8:function(e,t){V(this,1,e,D,t)},setInt16:function(e,t){V(this,2,e,P,t,arguments[2])},setUint16:function(e,t){V(this,2,e,P,t,arguments[2])},setInt32:function(e,t){V(this,4,e,F,t,arguments[2])},setUint32:function(e,t){V(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){V(this,4,e,B,t,arguments[2])},setFloat64:function(e,t){V(this,8,e,H,t,arguments[2])}});g(y,"ArrayBuffer"),g(_,"DataView"),s(_.prototype,a.VIEW,!0),t.ArrayBuffer=y,t.DataView=_},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(171)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},r.prototype.at=function(e,t,n){var r=this.__find__(e),o=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=o.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var o=this.__find__(e),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var o=this.__find__(e),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},function(e,t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r={appendTo:function(e,t,n){Array.isArray(e)?e.forEach((function(e){0===n?t.insertBefore(e,t.childNodes[n]||null):t.appendChild(e)})):0===n?t.insertBefore(e,t.childNodes[n]||null):t.appendChild(e)},addEvent:function(e,t,n){function r(e,t,n){e.addEventListener(t,n,!1)}Array.isArray(e)?e.forEach((function(e){r(e,t,n)})):r(e,t,n)},removeEvent:function(e,t,n){function r(e,t,n){e.removeEventListener(t,n,!1)}Array.isArray(e)?e.forEach((function(e){r(e,t,n)})):r(e,t,n)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createElem:function(e,t,n,o){var i=document.createElement(e);return void 0!==n&&(i[o?"innerHTML":"innerText"]=n),void 0!==t&&r.setAttributes(i,t),i},setAttributes:function(e,t){for(var n in t)e.setAttribute(n,t[n])},setStyles:function(e,t){for(var n in t)e.style[n]=t[n]},getDaysCount:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},dateDiff:function(e,t){return Math.round((t-e)/864e5)},screenDim:function(){var e=document.documentElement;return{height:Math.max(e.offsetHeight,e.clientHeight),width:Math.max(e.offsetWidth,e.clientWidth)}},calcOffset:function(e){var t=document.documentElement||document.body,n=e.getBoundingClientRect(),o={top:n.top+t.scrollTop,left:n.left+t.scrollLeft},i=e.offsetHeight,a=e.offsetWidth,s=r.screenDim();return{top:o.top+i,left:o.left,right:s.width-(o.left+a),bottom:s.height-o.top}},extend:function(){var e={},t=!1,n=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);for(var i=function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t&&"[object Object]"===Object.prototype.toString.call(n[o])?e[o]=r.extend(!0,e[o],n[o]):e[o]=n[o])};n<o;n++){var a=arguments[n];i(a)}return e},formatDate:function(e,t){var n=new Date(e),r=n.getDate(),o=n.getMonth(),i=n.getFullYear(),a=this.config.i18n,s=o+1;return t.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,(function(e){switch(e){case"d":return r;case"dd":return("00"+r).slice(-2);case"D":return a.shortDays[n.getDay()];case"DD":return a.days[n.getDay()];case"m":return s;case"mm":return("00"+s).slice(-2);case"mmm":return a.shortMonths[o];case"mmmm":return a.months[o];case"yy":return i.toString().substr(2,2);case"yyyy":return i}}))},parseDate:function(e,t){var n,r,o=this,i=void 0===t?o.config.format:t,a=(i.match(/d/g)||[]).length,s=(i.match(/m/g)||[]).length,c=(i.match(/y/g)||[]).length,l=4===s,u=1===s,d=1===a,h=e.length,p=i.indexOf("m"),f=i.indexOf("d"),v=i.indexOf("y"),m="",g="",y="",_=-1;if(""===e)return{m:null,d:null,y:null,date:new Date("")};if(l)_=o.config.i18n.months.findIndex((function(t){return e.indexOf(t)>=0})),m=o.config.i18n.months[_],f=(i=i.replace("mmmm",m)).indexOf("d"),v=v<p?i.indexOf("y"):i.indexOf("y",i.indexOf(m)+m.length);else if(!d&&!u||d&&!u&&p<f)m=e.substr(p,s);else{var b=i.lastIndexOf("m");n=i.substring(p-1,p),r=i.substring(b+1,b+2),m=b===i.length-1?e.substring(e.indexOf(n,p-1)+1,h):0===p?e.substring(0,e.indexOf(r,p)):e.substring(e.indexOf(n,p-1)+1,e.indexOf(r,p+1))}if(!d&&!u||!d&&u&&f<p)g=e.substr(f,a);else{var C=i.lastIndexOf("d");n=i.substring(f-1,f),r=i.substring(C+1,C+2),g=C===i.length-1?e.substring(e.indexOf(n,f-1)+1,h):0===f?e.substring(0,e.indexOf(r,f)):e.substring(e.indexOf(n,f-1)+1,e.indexOf(r,f+1))}return!u&&!d||u&&d&&v<p&&v<f||!u&&d&&v<f||u&&!d&&v<p?y=e.substr(v,c):(n=i.substring(v-1,v),y=e.substr(e.indexOf(n,v-1)+1,c)),{m:m,d:g,y:y,date:new Date(y,isNaN(parseInt(m))?_:m-1,g)}},triggerChange:function(e,t){e.dispatchEvent(new Event("change")),e.dispatchEvent(new Event("onchange")),e.dispatchEvent(new function(e){var t=document.createEvent("CustomEvent");return t.initCustomEvent("datechanged",!1,!1),t.data=e,t}(t))},daysOfWeekDOM:function(){for(var e=this.config,t=e.i18n,n=[],r=0,o=e.firstDay||t.firstDay;r<t.shorterDays.length;r++,o++)n.push(t.shorterDays[o%7]);return"<span>".concat(n.join("</span><span>"),"</span>")},jsonToDate:function(e){return new Date(e.year,e.month,e.date)},dateToJson:function(e){return e?{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}:null},isElement:function(e){return e instanceof Element}},o={btnOk:"OK",btnCancel:"CANCEL",btnClear:"CLEAR"},i=function e(n,i,a,s,c,l,u){t(this,e),this.months=n,this.shortMonths=i||this.months.map((function(e){return e.substr(0,3)})),this.days=a,this.shortDays=s||this.days.map((function(e){return e.substr(0,3)})),this.shorterDays=c||this.days.map((function(e){return e.substr(0,2)})),this.firstDay=l,this.dict=r.extend(o,u)},a={Locale:i,en:new i("January_February_March_April_May_June_July_August_September_October_November_December".split("_"),null,"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),null,null,7),ru:new i("___________".split("_"),"._._._.____._._._._.".split("_"),"______".split("_"),"______".split("_"),"______".split("_"),1,{btnCancel:"",btnClear:""}),es:new i("enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),null,"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),"dom._lun._mar._mi._jue._vie._sb.".split("_"),null,1,{btnCancel:"Cancelar",btnClear:"Despejar"}),tr:new i("Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),null,"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),1),fa:new i("___________".split("_"),"___________".split("_"),"______".split("_"),"______".split("_"),"______".split("_"),1),fr:new i("janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),1,{btnCancel:"Abandonner",btnClear:"Effacer"}),de:new i("Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),1,{btnCancel:"Stornieren",btnClear:"Lschen"}),ja:new i("___________".split("_"),"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"______".split("_"),"______".split("_"),"______".split("_"),7),pt:new i("janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),null,"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),"Do_2_3_4_5_6_S".split("_"),1,{btnCancel:"Cancelar",btnClear:"Clarear"}),vi:new i("thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),1),zh:new i("___________".split("_"),"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"______".split("_"),"______".split("_"),"______".split("_"),1)},s=[9,112,113,114,115,116,117,118,119,120,121,122,123],c="_duDatepicker",l={value:null,format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,inline:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[],range:!1,rangeDelim:"-",fromTarget:null,toTarget:null,events:{dateChanged:null,onRangeFormat:null,ready:null,shown:null,hidden:null},i18n:a.en,firstDay:null,root:"body"},u=function(){function e(n,i){t(this,e);var a=this,c=i.i18n;"string"==typeof c&&(i.i18n=d.i18n[c]),this.config=r.extend(l,i);var u=this.config.root;"string"==typeof u?this.config.root=document.querySelector(u):r.isElement(u)||delete this.config.root,this.animating=!1,this.visible=!1,this.input=n,this.input.readOnly=!0,this.fromEl=document.querySelector(this.config.fromTarget),this.toEl=document.querySelector(this.config.toTarget),this.input.hidden=this.config.range&&(this.fromEl||this.toEl),this.viewMode="calendar",this.dict=r.extend(o,this.config.i18n.dict),this.datepicker={container:r.createElem("div",{class:"dcalendarpicker"}),wrapper:r.createElem("div",{class:"dudp__wrapper",tabindex:0}),header:{wrapper:r.createElem("section",{class:"dudp__calendar-header"}),selectedYear:r.createElem("span",{class:"dudp__sel-year"}),selectedDate:r.createElem("span",{class:"dcp_sel-date"})},calendarHolder:{wrapper:r.createElem("section",{class:"dudp__cal-container"}),btnPrev:r.createElem("span",{class:"dudp__btn-cal-prev",role:"button"},"&lsaquo;",!0),btnNext:r.createElem("span",{class:"dudp__btn-cal-next",role:"button"},"&rsaquo;",!0),calendarViews:{wrapper:r.createElem("div",{class:"dudp__calendar-views"}),calendars:[]},yearsView:r.createElem("div",{class:"dudp__years-view dp__hidden"}),monthsView:r.createElem("div",{class:"dudp__months-view dp__hidden"}),buttons:{wrapper:r.createElem("div",{class:"dudp__buttons"}),btnClear:r.createElem("span",{class:"dudp__button clear",role:"button"},a.dict.btnClear),btnCancel:r.createElem("span",{class:"dudp__button cancel",role:"button"},a.dict.btnCancel),btnOk:r.createElem("span",{class:"dudp__button ok",role:"button"},a.dict.btnOk)}}},a.config.value&&(a.input.value=a.config.value,a.input.setAttribute("value",a.config.value)),this.minDate=a.input.dataset.mindate||a.config.minDate,this.maxDate=a.input.dataset.maxdate||a.config.maxDate;var h=new Date;if(a.config.range){var p=a.input.value,f=p.split(a.config.rangeDelim);if(""!==p&&f.length<2)throw new Error("duDatePicker: Invalid date range value");var v=""===p?null:r.parseDate.call(a,f[0]).date,m=""===p?null:r.parseDate.call(a,f[1]).date;if(this.dateFrom=v,this.dateTo=m,this.rangeFrom=null,this.rangeTo=null,this.viewMonth=(v||h).getMonth(),this.viewYear=(v||h).getFullYear(),p){var g=a.config.events&&a.config.events.onRangeFormat?a.formatRange(v,m):p,y=r.formatDate.call(a,v,a.config.format),_=r.formatDate.call(a,v,a.config.outFormat||a.config.format),b=r.formatDate.call(a,m,a.config.format),C=r.formatDate.call(a,m,a.config.outFormat||a.config.format);a.input.value=g,r.setAttributes(a.input,{value:g,"data-range-from":_,"data-range-to":C}),a.fromEl&&(a.fromEl.value=y,r.setAttributes(a.fromEl,{value:y,"data-value":_})),a.toEl&&(a.toEl.value=b,r.setAttributes(a.toEl,{value:y,"data-value":C}))}}else this.date=""===a.input.value?h:r.parseDate.call(a,a.input.value).date,this.selected=r.dateToJson(a.date),this.viewMonth=a.selected.month,this.viewYear=a.selected.year;function w(){a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()}function S(e){return 13===e.keyCode&&(a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()),!(s.indexOf(e.which)<0)}this._unbindInput=function(){a.input.readOnly=!1,a.input.removeEventListener("click",w),a.input.removeEventListener("keydown",S),a.fromEl&&(a.fromEl.readOnly=!1,a.fromEl.removeEventListener("click",w),a.fromEl.removeEventListener("keydown",S)),a.toEl&&(a.toEl.readOnly=!1,a.toEl.removeEventListener("click",w),a.toEl.removeEventListener("keydown",S))},r.addEvent(a.input,"click",w),r.addEvent(a.input,"keydown",S),a.fromEl&&(a.fromEl.readOnly=!0,r.addEvent(a.fromEl,"click",w),r.addEvent(a.fromEl,"keydown",S)),a.toEl&&(a.toEl.readOnly=!0,r.addEvent(a.toEl,"click",w),r.addEvent(a.toEl,"keydown",S)),this._init(),this._setSelection()}var i,a,u;return i=e,(a=[{key:"_init",value:function(){var e=this,t=e.datepicker,n=t.header,o=t.calendarHolder,i=o.buttons,a=e.selected?e.selected:new Date;e.config.inline||(r.appendTo([n.selectedYear,n.selectedDate],n.wrapper),r.appendTo(n.wrapper,t.wrapper),r.addEvent(n.selectedYear,"click",(function(){"years"!==e.viewMode&&e._switchView("years")})),r.addEvent(n.selectedDate,"click",(function(){var t=new Date,n=e.config.range?t.getMonth():e.selected.month,r=e.config.range?t.getFullYear():e.selected.year;e.viewMonth===n&&e.viewYear===r&&"calendar"===e.viewMode||(e.viewMonth=n,e.viewYear=r,e._setupCalendar(),e._switchView("calendar"))})));for(var s=0,c=1;c<4;c++){for(var l=r.createElem("div",{class:"dudp__month-row"}),u=0;u<4;u++){var d=r.createElem("span",{class:"dudp__month"});s===a.month&&d.classList.add("selected"),d.innerText=e.config.i18n.shortMonths[s],d.dataset.month=s,r.appendTo(d,l),r.addEvent(d,"click",(function(t){var n=this.dataset.month;e.viewMonth=n,e._setupCalendar(),e._switchView("calendar")})),s++}r.appendTo(l,o.monthsView)}r.appendTo(e._getYears(),o.yearsView),e.config.clearBtn&&r.appendTo(i.btnClear,i.wrapper),e.config.cancelBtn&&r.appendTo(i.btnCancel,i.wrapper),e.config.auto&&!e.config.range||r.appendTo(i.btnOk,i.wrapper),r.appendTo([o.btnPrev,o.btnNext,o.calendarViews.wrapper,o.monthsView,o.yearsView,i.wrapper],o.wrapper),r.appendTo(o.wrapper,t.wrapper),r.appendTo(t.wrapper,t.container),r.appendTo(t.container,e.config.root),e.config.inline&&t.container.setAttribute("inline",!0),t.wrapper.dataset.theme=e.input.dataset.theme||e.config.theme,r.addEvent(t.wrapper,"keydown",(function(t){27===t.keyCode?e.hide():37===t.keyCode?e._move("prev"):39===t.keyCode&&e._move("next")})),e.config.inline&&r.addEvent(t.wrapper,"blur",(function(){e.hide()})),r.addEvent(o.btnPrev,"click",(function(){e._move("prev")})),r.addEvent(o.btnNext,"click",(function(){e._move("next")})),r.addEvent(o.calendarViews.wrapper,"click",(function(t){t.target.classList.contains("cal-year")?e._switchView("years"):t.target.classList.contains("cal-month")&&e._switchView("months")})),e.config.clearBtn&&r.addEvent(i.btnClear,"click",(function(){e.setValue(""),e.hide()})),e.config.overlayClose&&(r.addEvent(t.container,"click",(function(){e.hide()})),r.addEvent(t.wrapper,"click",(function(e){e.stopPropagation()}))),e.config.cancelBtn&&r.addEvent(i.btnCancel,"click",(function(){e.hide()})),r.addEvent(i.btnOk,"click",(function(){if(e.config.range){if(!e.rangeFrom||!e.rangeTo)return;var t=r.jsonToDate(e.rangeFrom),n=r.jsonToDate(e.rangeTo);if(e._dateDisabled(t)||e._dateDisabled(n))return;e.dateFrom=t,e.dateTo=n,e.setValue([r.formatDate.call(e,t,e.config.format),r.formatDate.call(e,n,e.config.format)].join(e.config.rangeDelim))}else{var o=r.jsonToDate(e.selected);if(e._dateDisabled(o))return;e.date=o,e.setValue(e.date)}e.hide()})),e.config.events&&e.config.events.ready&&e.config.events.ready.call(e,e)}},{key:"_inRange",value:function(e){if(!this.config.range)return!1;var t=this,n=t.rangeFrom?r.jsonToDate(t.rangeFrom):null,o=t.rangeTo?r.jsonToDate(t.rangeTo):null;return n&&e>n&&o&&e<o}},{key:"_dateDisabled",value:function(e){var t=this,n=null,o=null,i=new Date,a=new Date(i.getFullYear(),i.getMonth(),i.getDate()),s=t.config.disabledDates,c=t.config.disabledDays,l=s.filter((function(n){return n.indexOf("-")>=0?e>=r.parseDate.call(t,n.split("-")[0]).date&&e<=r.parseDate.call(t,n.split("-")[1]).date:r.parseDate.call(t,n).date.getTime()===e.getTime()})).length>0,u=c.indexOf(t.config.i18n.days[e.getDay()])>=0||c.indexOf(t.config.i18n.shortDays[e.getDay()])>=0||c.indexOf(t.config.i18n.shorterDays[e.getDay()])>=0;return t.minDate&&(n="today"===t.minDate?a:new Date(t.minDate)),t.maxDate&&(o="today"===t.maxDate?a:new Date(t.maxDate)),n&&e<n||o&&e>o||l||u}},{key:"_getDates",value:function(e,t){for(var n=this,o=1,i=new Date,a=new Date(i.getFullYear(),i.getMonth(),i.getDate()),s=n.config.range?null:r.jsonToDate(n.selected),c=n.rangeFrom?r.jsonToDate(n.rangeFrom):null,l=n.rangeTo?r.jsonToDate(n.rangeTo):null,u=new Date(e,t,o),d=r.getDaysCount(u),h=1,p=[],f=n.config.firstDay||n.config.i18n.firstDay,v=(f+6)%7,m=1;m<=6;m++){for(var g=[],y=0,_=f;y<7;y++,_++)g.push(r.createElem("span",{class:"dudp__date","data-dow":_%7}));for(var b=function(){u.setDate(o);var r=u.getDay(),i=g.find((function(e){return parseInt(e.dataset.dow)===r}));return i.dataset.date=o,i.dataset.month=t,i.dataset.year=e,u.getTime()===a.getTime()&&i.classList.add("current"),n._dateDisabled(u)&&i.classList.add("disabled"),n._inRange(u)&&i.classList.add("in-range"),n.config.range||u.getTime()!==s.getTime()||i.classList.add("selected"),n.config.range&&c&&u.getTime()===c.getTime()&&i.classList.add("range-from"),n.config.range&&l&&u.getTime()===l.getTime()&&i.classList.add("range-to"),1===m&&r===f%7?"break":r===v?(i.innerText=o++,"break"):void(i.innerText=o++)};o<=d&&"break"!==b(););(1===m||m>4)&&(1===m?function(){for(var o=new Date(e,t-1,1),i=r.getDaysCount(o),u=1;u<=7;u++){o.setDate(i--);var d=g.find((function(e){return parseInt(e.dataset.dow)===o.getDay()}));""===d.innerText&&(d.dataset.date=o.getDate(),d.dataset.month=o.getMonth(),d.dataset.year=o.getFullYear(),d.innerText=o.getDate(),d.classList.add("dudp__pm"),n._dateDisabled(o)&&d.classList.add("disabled"),n._inRange(o)&&d.classList.add("in-range"),o.getTime()===a.getTime()&&d.classList.add("current"),n.config.range||o.getTime()!==s.getTime()||d.classList.add("selected"),n.config.range&&c&&o.getTime()===c.getTime()&&d.classList.add("range-from"),n.config.range&&l&&o.getTime()===l.getTime()&&d.classList.add("range-to"))}}():m>4&&function(){for(var r=new Date(e,t+1,1),o=1;o<=7;o++){r.setDate(h);var i=g.find((function(e){return parseInt(e.dataset.dow)===r.getDay()}));""===i.innerText&&(h++,i.dataset.date=r.getDate(),i.dataset.month=r.getMonth(),i.dataset.year=r.getFullYear(),i.innerText=r.getDate(),i.classList.add("dudp__nm"),n._dateDisabled(r)&&i.classList.add("disabled"),n._inRange(r)&&i.classList.add("in-range"),r.getTime()===a.getTime()&&i.classList.add("current"),n.config.range||r.getTime()!==s.getTime()||i.classList.add("selected"),n.config.range&&c&&r.getTime()===c.getTime()&&i.classList.add("range-from"),n.config.range&&l&&r.getTime()===l.getTime()&&i.classList.add("range-to"))}}()),p.push(g)}var C=[];return p.forEach((function(e){for(var t=r.createElem("div",{class:"dudp__cal-week"}),o=0;o<e.length;o++){var i=e[o];r.addEvent(i,"click",(function(){var e=this.dataset.year,t=this.dataset.month,o=this.dataset.date,i=new Date(e,t,o),a=!1;if(!n._dateDisabled(i)){if(n.config.range){var s=n.rangeFrom?r.jsonToDate(n.rangeFrom):null,c=n.rangeTo?r.jsonToDate(n.rangeTo):null;!n.rangeFrom||n.rangeFrom&&i<s||n.rangeFrom&&n.rangeTo&&r.dateDiff(s,i)<=r.dateDiff(i,c)&&0!==r.dateDiff(s,i)||n.rangeFrom&&n.rangeTo&&c.getTime()===i.getTime()?(n.rangeFrom={year:e,month:t,date:o},a=!0):(!n.rangeTo||n.rangeTo&&i>c||n.rangeFrom&&n.rangeTo&&r.dateDiff(i,c)<r.dateDiff(s,i)&&0!==r.dateDiff(i,c)||n.rangeFrom&&n.rangeTo&&s.getTime()===i.getTime())&&(n.rangeTo={year:e,month:t,date:o},a=!1),n.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach((function(r){var i=r.dataset.year,s=r.dataset.month,c=r.dataset.date,l=n._inRange(new Date(i,s,c));r.classList[e===i&&t===s&&o===c?"add":"remove"](a?"range-from":"range-to"),r.classList[l?"add":"remove"]("in-range")}))}else n.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach((function(n){var r=n.dataset.year,i=n.dataset.month,a=n.dataset.date;n.classList[e===r&&t===i&&o===a?"add":"remove"]("selected")})),this.classList.add("selected"),n.selected={year:e,month:t,date:o},n._setSelection(),n.config.auto&&(n.date=i,n.setValue(n.date),n.hide());n.datepicker.calendarHolder.wrapper.querySelectorAll(".dudp__month").forEach((function(e){var n=e.dataset.month;e.classList[n===t?"add":"remove"]("selected")}))}})),r.appendTo(i,t)}C.push(t)})),C}},{key:"_getYears",value:function(){for(var e=this,t=e.viewYear-50,n=e.viewYear+25,o=[],i=t;i<=n;i++){var a=r.createElem("span",{class:"dudp__year"});i===e.viewYear&&a.classList.add("selected"),a.innerText=i,a.dataset.year=i,r.addEvent(a,"click",(function(){var t=parseInt(this.dataset.year);e.viewYear=t,e.config.range||(e.selected.year=t),e._setSelection(),e._setupCalendar(),e._switchView("calendar")})),o.push(a)}return o}},{key:"_setupCalendar",value:function(){var e=this,t=e.datepicker.calendarHolder.calendarViews,n=+e.viewYear,o=+e.viewMonth;t.calendars.length=0;var i={wrapper:r.createElem("div",{class:"dudp__calendar"}),header:r.createElem("div",{class:"dudp__cal-month-year"}),weekDays:r.createElem("div",{class:"dudp__weekdays"},r.daysOfWeekDOM.call(e),!0),datesHolder:r.createElem("div",{class:"dudp__dates-holder"})},a={wrapper:r.createElem("div",{class:"dudp__calendar"}),header:r.createElem("div",{class:"dudp__cal-month-year"}),weekDays:r.createElem("div",{class:"dudp__weekdays"},r.daysOfWeekDOM.call(e),!0),datesHolder:r.createElem("div",{class:"dudp__dates-holder"})},s={wrapper:r.createElem("div",{class:"dudp__calendar"}),header:r.createElem("div",{class:"dudp__cal-month-year"}),weekDays:r.createElem("div",{class:"dudp__weekdays"},r.daysOfWeekDOM.call(e),!0),datesHolder:r.createElem("div",{class:"dudp__dates-holder"})},c=0===o?11:o-1,l=11===o?0:o+1,u=0===o?n-1:n,d=11===o?n+1:n;r.appendTo([r.createElem("span",{class:"cal-month"},e.config.i18n.months[c]),r.createElem("span",{class:"cal-year"},u)],a.header),r.appendTo(e._getDates(u,c),a.datesHolder),r.appendTo([a.header,a.weekDays,a.datesHolder],a.wrapper),t.calendars.push(a),r.appendTo([r.createElem("span",{class:"cal-month"},e.config.i18n.months[o]),r.createElem("span",{class:"cal-year"},n)],i.header),r.appendTo(e._getDates(n,o),i.datesHolder),r.appendTo([i.header,i.weekDays,i.datesHolder],i.wrapper),t.calendars.push(i),r.appendTo([r.createElem("span",{class:"cal-month"},e.config.i18n.months[l]),r.createElem("span",{class:"cal-year"},d)],s.header),r.appendTo(e._getDates(d,l),s.datesHolder),r.appendTo([s.header,s.weekDays,s.datesHolder],s.wrapper),t.calendars.push(s),r.empty(t.wrapper),r.appendTo([a.wrapper,i.wrapper,s.wrapper],t.wrapper)}},{key:"_switchView",value:function(e){if("calendar"===e||"months"===e||"years"===e){var t=this,n=t.datepicker,o=n.calendarHolder.monthsView,i=n.calendarHolder.yearsView,a=n.calendarHolder.calendarViews.wrapper,s=n.calendarHolder.buttons.wrapper,c=t.viewMode,l="dp__hidden";switch(t.viewMode=e,t.viewMode){case"calendar":var u=a.querySelector(".dudp__calendar:nth-child(2)");a.classList.add("dp__animate-out"),a.classList.remove(l),"calendar"!==c&&u.classList.add("dp__zooming","dp__animate-zoom"),n.calendarHolder.btnPrev.classList.remove(l),n.calendarHolder.btnNext.classList.remove(l),s.classList.remove(l),setTimeout((function(){a.classList.remove("dp__animate-out"),"calendar"!==c&&u.classList.remove("dp__animate-zoom")}),10),o.classList.add("dp__animate-out"),i.classList.add(l),setTimeout((function(){"calendar"!==c&&u.classList.remove("dp__zooming"),o.classList.add(l),o.classList.remove("dp__animate-out")}),250);break;case"months":n.calendarHolder.btnPrev.classList.add(l),n.calendarHolder.btnNext.classList.add(l),s.classList.add(l),a.classList.add("dp__animate-out"),o.classList.add("dp__animate-out"),o.classList.remove(l),setTimeout((function(){o.classList.remove("dp__animate-out")}),10),setTimeout((function(){a.classList.add(l),a.classList.remove("dp__animate-out")}),250);break;case"years":r.empty(i),r.appendTo(t._getYears(),i);var d=i.querySelector(".dudp__year.selected");i.scrollTop=d.offsetTop-120,n.calendarHolder.btnPrev.classList.add(l),n.calendarHolder.btnNext.classList.add(l),s.classList.add(l),o.classList.add("dp__animate-out"),a.classList.add("dp__animate-out"),i.classList.remove(l),setTimeout((function(){a.classList.add(l),a.classList.remove("dp__animate-out"),o.classList.add(l),o.classList.remove("dp__animate-out")}),250)}}}},{key:"_move",value:function(e){if("next"===e||"prev"===e){var t=this;if(!t.animating){var n=t.datepicker.calendarHolder.calendarViews,o="next"===e;(o?t.viewMonth+1>11:t.viewMonth-1<0)&&(t.viewYear+=o?1:-1),t.viewMonth=o?t.viewMonth+1>11?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0;var i="dp__animate-"+(o?"left":"right");n.wrapper.querySelectorAll(".dudp__calendar").forEach((function(e){e.classList.add(i)}));var a=t.viewYear,s=o?t.viewMonth+1:t.viewMonth-1;(o?s>11:s<0)&&(s=o?0:11,a+=o?1:-1);var c=t._getDates(a,s),l={wrapper:r.createElem("div",{class:"dudp__calendar"}),header:r.createElem("div",{class:"dudp__cal-month-year"}),weekDays:r.createElem("div",{class:"dudp__weekdays"},r.daysOfWeekDOM.call(t),!0),datesHolder:r.createElem("div",{class:"dudp__dates-holder"})};r.appendTo([r.createElem("span",{class:"cal-month"},t.config.i18n.months[s]),r.createElem("span",{class:"cal-year"},a)],l.header),r.appendTo(c,l.datesHolder),r.appendTo([l.header,l.weekDays,l.datesHolder],l.wrapper),setTimeout((function(){r.appendTo(l.wrapper,n.wrapper,o?void 0:0),n.wrapper.querySelectorAll(".dudp__calendar").forEach((function(e){e.classList.remove(i)})),n.wrapper.removeChild(n.calendars[o?0:2].wrapper),n.calendars[o?"shift":"pop"](),n.calendars[o?"push":"unshift"](l),t.animating=!1}),250)}}}},{key:"_resetSelection",value:function(){var e=this;if(e.config.range){var t=e.dateFrom?e.dateFrom:new Date;e.rangeFrom=r.dateToJson(e.dateFrom),e.rangeTo=r.dateToJson(e.dateTo),e.viewYear=t.getFullYear(),e.viewMonth=t.getMonth()}else e.selected=r.dateToJson(e.date),e.viewYear=e.selected.year,e.viewMonth=e.selected.month;e.datepicker.calendarHolder.monthsView.querySelectorAll(".dudp__month").forEach((function(t){var n=parseInt(t.dataset.month),r=e.config.range?e.dateFrom?e.dateFrom.getMonth():null:e.selected.month;t.classList[n===r?"add":"remove"]("selected")}))}},{key:"_setSelection",value:function(){var e=this,t=e.datepicker,n=e.config.range?new Date:r.jsonToDate(e.selected);t.header.selectedYear.innerText=n.getFullYear(),t.header.selectedDate.innerText=r.formatDate.call(e,n,"D, mmm d")}},{key:"setValue",value:function(e){if(void 0===e)throw new Error("Expecting a value.");var t=this,n="string"==typeof e&&""===e,o=null;if(t.config.range){var i=n?[]:e.split(t.config.rangeDelim);if(""!==e&&i.length<2)throw new Error("Invalid date range value.");var a=new Date,s=n?null:r.parseDate.call(t,i[0]).date,c=n?null:r.parseDate.call(t,i[1]).date,l=n?"":r.formatDate.call(t,s,t.config.format),u=n?"":r.formatDate.call(t,s,t.config.outFormat||t.config.format),d=n?"":r.formatDate.call(t,c,t.config.format),h=n?"":r.formatDate.call(t,c,t.config.outFormat||t.config.format),p=n?"":t.config.events&&t.config.events.onRangeFormat?t.formatRange(s,c):i[0]===i[1]?i[0]:e;t.dateFrom=s,t.dateTo=c,t.viewYear=(s||a).getFullYear(),t.viewMonth=(s||a).getMonth(),t.input.value=p,r.setAttributes(t.input,{value:p,"data-range-from":u,"data-range-to":h}),t.fromEl&&(t.fromEl.value=l,r.setAttributes(t.fromEl,{value:l,"data-value":u})),t.toEl&&(t.toEl.value=d,r.setAttributes(t.toEl,{value:d,"data-value":h})),o={_dateFrom:s,dateFrom:n?null:l,_dateTo:c,dateTo:n?null:d,value:p}}else{var f="string"==typeof e?n?new Date:r.parseDate.call(t,e,t.config.format).date:e,v=n?"":r.formatDate.call(t,f,t.config.format);t.date=f,t.viewYear=f.getFullYear(),t.viewMonth=f.getMonth(),t.input.value=v,t.input.setAttribute("value",v),o={_date:n?null:t.date,date:n?null:r.formatDate.call(t,t.date,t.config.outFormat||t.config.format)}}r.triggerChange(t.input,o),t.config.events&&t.config.events.dateChanged&&t.config.events.dateChanged.call(t,o,t)}},{key:"formatDate",value:function(e,t){return r.formatDate.call(this,e,t)}},{key:"formatRange",value:function(e,t){return this.config.events.onRangeFormat.call(this,e,t,this)}},{key:"show",value:function(){var e=this;setTimeout((function(){if(document.body.setAttribute("datepicker-display","on"),e._resetSelection(),e._setSelection(),e._setupCalendar(),e.datepicker.container.classList.add("dp__open"),e.config.inline){var t=e.showInFromEl?e.fromEl:e.showInToEl?e.toEl:e.input,n=r.calcOffset(t),o={height:e.datepicker.wrapper.offsetHeight,width:e.datepicker.wrapper.offsetWidth},i=r.screenDim(),a=n.top+o.height<i.height,s=n.left+o.width<i.width,c={},l={y:window.scrollY,x:window.scrollX};c[a?"top":"bottom"]="".concat(a?n.top-l.y:n.bottom,"px"),c[s?"left":"right"]="".concat(s?n.left-l.x:n.right,"px"),e.datepicker.container.removeAttribute("style"),r.setStyles(e.datepicker.container,c)}e.datepicker.wrapper.focus(),e.visible=!0,e.input.blur(),e.config.events&&e.config.events.shown&&e.config.events.shown.call(e,e)}),0)}},{key:"hide",value:function(){var e=this;e.datepicker.container.classList.add("dp__closing"),e.visible=!1,e.input.focus(),document.body.removeAttribute("datepicker-display"),setTimeout((function(){e._switchView("calendar"),e.datepicker.container.classList.remove("dp__closing","dp__open"),e.config.events&&e.config.events.hidden&&e.config.events.hidden.call(e,e)}),200)}},{key:"destroy",value:function(){this._unbindInput(),this.config.root.removeChild(this.datepicker.container),delete this.input[c]}}])&&n(i.prototype,a),u&&n(i,u),e}();function d(){var t=arguments,n=t[0],o=n instanceof NodeList||Array.isArray(n),i=r.isElement(n),a="string"==typeof n?document.querySelectorAll(n):o?n:i?[n]:document.querySelectorAll(".duDatepicker-input"),s="object"!==e(n)||o||i?t[1]&&"object"===e(t[1])?t[1]:{}:n;Array.from(a).forEach((function(e){var r=e[c];r||(e[c]=r=new u(e,s)),("string"==typeof n||o||i)&&t[1]&&"string"==typeof t[1]&&r[t[1]].apply(r,Array.prototype.slice.call(t).slice(2))}))}return Object.defineProperty(d,"i18n",{value:a}),d}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(2),i=n(41),a=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var i=L(e[r])(n.selection);if(i){var a=v(i.pos,t)(n);if(a!==n)return a}}return n}},s=function(e){return function(t){if(h(t.selection)){var n=t.selection,i=n.$from,a=n.$to;if(e instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),e)||i.parent.canReplaceWith(i.index(),i.indexAfter(),e.type))return f(t.replaceWith(i.pos,a.pos,e).setSelection(new r.NodeSelection(t.doc.resolve(i.pos))))}return t}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(e),t,!0);return o?n.setSelection(o):n}},l=function(e){return e.type&&e.type.spec.selectable},u=function(e,t,n){return function(e){return l(e)&&e.type.isLeaf}(e)?n.setSelection(new r.NodeSelection(n.doc.resolve(t))):c(t)(n)},d=function(e,t,n){return function(r){var o="number"==typeof t,i=r.selection.$from,c=o?r.doc.resolve(t):h(r.selection)?r.doc.resolve(i.pos+1):i,d=c.parent;if(h(r.selection)&&n&&r!==(r=s(e)(r)))return r;if(b(d)&&r!==(r=a(d.type,e)(r))){var p=l(e)?c.before(c.depth):c.pos;return u(e,p,r)}if(_(c,e)){r.insert(c.pos,e);var v=o?c.pos:l(e)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(u(e,v,r))}for(var m=c.depth;m>0;m--){var g=c.after(m),y=r.doc.resolve(g);if(_(y,e))return r.insert(g,e),f(u(e,g,r))}return r}},h=function(e){return e instanceof r.NodeSelection},p=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},v=function(e,t){return function(n){var r=n.doc.nodeAt(e),o=n.doc.resolve(e);if(m(o,t)){var i=(n=n.replaceWith(e,e+r.nodeSize,t)).selection.$from.pos-1;return n=c(Math.max(i,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},m=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof o.Fragment?t:o.Fragment.from(t))},g=function(e){return function(t){var n=t.doc.nodeAt(e);return f(t.delete(e,e+n.nodeSize))}},y=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},_=function(e,t){var n=e.index();return t instanceof o.Fragment?e.parent.canReplace(n,n,t):t instanceof o.Node&&e.parent.canReplaceWith(n,n,t.type)},b=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},w=function(e){return function(t){for(var n=i.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),o=n.cellsInRect(e),a=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),s=0,c=o.length;s<c;s++)if(-1===a.indexOf(o[s]))return!1;return!0}},S=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},k=function(e){for(var t=i.TableMap.get(e),n=[],r=0;r<t.height;r++){for(var o=[],a={},s=0;s<t.width;s++){var c=t.map[r*t.width+s],l=e.nodeAt(c),u=t.findCell(c);a[c]||u.top!==r?o.push(null):(a[c]=!0,o.push(l))}n.push(o)}return n},A=function(e,t){for(var n=[],r=i.TableMap.get(e),o=0;o<r.height;o++){for(var a=e.child(o),s=[],c=0;c<r.width;c++)if(t[o][c]){var l=r.map[o*r.width+c],u=t[o][c],d=e.nodeAt(l).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);s.push(d)}n.push(a.type.createChecked(a.attrs,s,a.marks))}return e.type.createChecked(e.attrs,n,e.marks)},E=function(e,t,n,r){var o=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),a=i.length%2==0?1:0,s=void 0;return s=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-a+1:-1===o?n[0]:n[n.length-1]-a,e.splice.apply(e,[s,0].concat(i)),e},T=function(e,t,n,r){var o="Target position is invalid, you can't move the "+r+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(o)}else if(-1!==n.slice(1).indexOf(t))throw new Error(o);return!0},O=function(e){return function(t){var n=t.$from;return x(n,e)}},x=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},M=function(e,t){return function(n){var r=O(e)(n);if(r)return R(r.pos,t)}},I=function(e){return function(t){return!!O(e)(t)}},L=function(e){return function(t){return O((function(t){return p(e,t)}))(t)}},N=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var o=L(t.type)(n);return o?o.pos:n.$from.pos}},R=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},D=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},P=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return D(e,n).filter((function(e){return t(e.node)}))},F=function(e,t,n){return P(e,(function(e){return e.type===t}),n)};var H=function(e){return O((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},B=function(e){return e instanceof i.CellSelection},j=function(e){if(B(e)){var t=i.TableMap.get(e.$anchorCell.node(-1));return w({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},q=function(e){return function(t){var n=H(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.width-1){var o=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},V=function(e){return function(t){var n=H(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},z=function(e){return function(t,n){return function(r){var o=H(r.selection),a="row"===e;if(o){var s=i.TableMap.get(o.node);if(t>=0&&t<(a?s.height:s.width)){var c=a?0:t,l=a?t:0,u=a?s.width:t+1,d=a?t+1:s.height;if(n){var h=J(r.selection.$from);if(!h)return r;var p=s.findCell(h.pos-o.start);a?(l=Math.min(l,p.top),d=Math.max(d,p.bottom)):(c=Math.min(c,p.left),u=Math.max(u,p.right))}var v=s.cellsInRect({left:c,top:l,right:a?u:c+1,bottom:a?l+1:d}),m=d-l==1?v:s.cellsInRect({left:a?c:u-1,top:a?d-1:l,right:u,bottom:d}),g=o.start+v[0],y=o.start+m[m.length-1],_=r.doc.resolve(g),b=r.doc.resolve(y);return f(r.setSelection(new i.CellSelection(b,_)))}}return r}}},G=z("column"),W=z("row"),U=function(e){return function(t){var n=H(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var o=n.node,a=y(o.type.schema),s=n.start,c=0;c<e+1;c++)s+=o.child(c).nodeSize;var l=o.child(e),u=[],h=0;if(l.forEach((function(e){1===e.attrs.rowspan&&(h+=e.attrs.colspan,u.push(a[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),h<r.width){for(var p=[],f=function(n){var r=Q(n,(function(t,r){var o=t.node.attrs.rowspan;return o>1&&n+o>e}))(t);p.push.apply(p,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},v=e;v>=0;v--)f(v);p.length&&p.forEach((function(e){t=X(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return d(a.row.create(l.attrs,u),s)(t)}}return t}},K=function(e){return function(t){var n=H(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.width)return Y(t);if(e>=0&&e<=r.width)return i.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},$=function(e){return function(t){var n=H(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.height)return Y(t);if(e>=0&&e<=r.height)return i.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},Y=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},X=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),f(n)):n}},J=function(e){return x(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},Z=function(e){var t=J(e);if(t){var n=function(e){return x(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),r=i.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},Q=function(e,t){return function(n){var r=[],o=V(e)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)t(o[i],n)&&r.push(o[i]);return r}},ee=function(e){return function(t){for(var n=e,r=e,o=function(e){var o=q(e)(t.selection);o&&o.forEach((function(t){var o=t.node.attrs.colspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var a=function(e){var n=q(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)a(i);var s=[];for(i=n;i<=r;i++){var c=q(i)(t.selection);c&&c.length&&s.push(i)}n=s[0],r=s[s.length-1];for(var l=q(n)(t.selection),u=V(0)(t.selection),d=t.doc.resolve(l[l.length-1].pos),h=void 0,p=r;p>=n;p--){var f=q(p)(t.selection);if(f&&f.length){for(var v=u.length-1;v>=0;v--)if(u[v].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:d,$head:t.doc.resolve(h.pos),indexes:s}}},te=function(e){return function(t){for(var n=e,r=e,o=function(e){V(e)(t.selection).forEach((function(t){var o=t.node.attrs.rowspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var a=function(e){V(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)a(i);var s=[];for(i=n;i<=r;i++){var c=V(i)(t.selection);c&&c.length&&s.push(i)}n=s[0],r=s[s.length-1];for(var l=V(n)(t.selection),u=q(0)(t.selection),d=t.doc.resolve(l[l.length-1].pos),h=void 0,p=r;p>=n;p--){var f=V(p)(t.selection);if(f&&f.length){for(var v=u.length-1;v>=0;v--)if(u[v].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:d,$head:t.doc.resolve(h.pos),indexes:s}}};t.isNodeSelection=h,t.canInsert=_,t.convertTableNodeToArrayOfRows=k,t.convertArrayOfRowsToTableNode=A,t.findParentNode=O,t.findParentNodeClosestToPos=x,t.findParentDomRef=M,t.hasParentNode=I,t.findParentNodeOfType=L,t.findParentNodeOfTypeClosestToPos=function(e,t){return x(e,(function(e){return p(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return I((function(t){return p(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return M((function(t){return p(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(h(t)){var n=t.node,r=t.$from;if(p(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=N,t.findDomRefAtPos=R,t.flatten=D,t.findChildren=P,t.findTextNodes=function(e,t){return P(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return P(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return P(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return P(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=F,t.findChildrenByMark=function(e,t,n){return P(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!F(e,t).length},t.findTable=H,t.isCellSelection=B,t.getSelectionRect=function(e){if(B(e)){var t=e.$anchorCell.start(-1);return i.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(B(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return w({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(B(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return w({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=j,t.getCellsInColumn=q,t.getCellsInRow=V,t.getCellsInTable=function(e){var t=H(e);if(t){var n=i.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},t.selectColumn=G,t.selectRow=W,t.selectTable=function(e){var t=H(e.selection);if(t){var n=i.TableMap.get(t.node).map;if(n&&n.length){var r=t.start+n[0],o=t.start+n[n.length-1],a=e.doc.resolve(r),s=e.doc.resolve(o);return f(e.setSelection(new i.CellSelection(s,a)))}}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=y(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,r),f(n)}return n}},t.addColumnAt=function(e){return function(t){var n=H(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.width)return f(i.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.moveRow=function(e,t,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=H(r.selection);if(!i)return r;var a=te(e)(r).indexes,s=te(t)(r).indexes;if(a.indexOf(t)>-1)return r;!o.tryToFit&&s.length>1&&T(e,t,s,"row");var c=function(e,t,n,r){var o=k(e.node);return o=E(o,t,n,r),A(e.node,o)}(i,a,s,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},t.moveColumn=function(e,t,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=H(r.selection);if(!i)return r;var a=ee(e)(r).indexes,s=ee(t)(r).indexes;if(a.indexOf(t)>-1)return r;!o.tryToFit&&s.length>1&&T(e,t,s,"column");var c=function(e,t,n,r){var o=S(k(e.node));return o=E(o,t,n,r),o=S(o),A(e.node,o)}(i,a,s,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},t.addRowAt=function(e,t){return function(n){var r=H(n.selection);if(r){var o=i.TableMap.get(r.node),a=e-1;if(t&&a>=0)return f(U(a)(n));if(e>=0&&e<=o.height)return f(i.addRow(n,{map:o,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=U,t.removeColumnAt=K,t.removeRowAt=$,t.removeTable=Y,t.removeSelectedColumns=function(e){var t=e.selection;if(j(t))return Y(e);if(B(t)){var n=H(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var a=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),s=a.right-1;i.removeColumn(e,a,s),s!==a.left;s--)a.table=a.tableStart?e.doc.nodeAt(a.tableStart-1):e.doc,a.map=i.TableMap.get(a.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(j(t))return Y(e);if(B(t)){var n=H(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var a=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),s=a.bottom-1;i.removeRow(e,a,s),s!==a.top;s--)a.table=a.tableStart?e.doc.nodeAt(a.tableStart-1):e.doc,a.map=i.TableMap.get(a.table);return f(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=Z(e);return n?K(n.left)(c(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=Z(e);return n?$(n.top)(c(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(o){var i=q(e)(o.selection);if(i){for(var a=i.length-1;a>=0;a--)o=t(i[a],o);if(n){var s=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(s))}return f(o)}return o}},t.forEachCellInRow=function(e,t,n){return function(o){var i=V(e)(o.selection);if(i){for(var a=i.length-1;a>=0;a--)o=t(i[a],o);if(n){var s=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(s))}}return o}},t.setCellAttrs=X,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=y(e),a=i.cell,s=i.header_cell,c=i.row,l=i.table,u=[],d=[],h=0;h<n;h++)u.push(C(a,o)),r&&d.push(C(s,o));for(var p=[],f=0;f<t;f++)p.push(c.createChecked(null,r&&0===f?d:u));return l.createChecked(null,p)},t.findCellClosestToPos=J,t.findCellRectClosestToPos=Z,t.getSelectionRangeInColumn=ee,t.getSelectionRangeInRow=te,t.removeParentNodeOfType=function(e){return function(t){var n=L(e)(t.selection);return n?g(n.pos)(t):t}},t.replaceParentNodeOfType=a,t.removeSelectedNode=function(e){if(h(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=s,t.setTextSelection=c,t.safeInsert=d,t.setParentNodeMarkup=function(e,t,n,r){return function(o){var i=L(e)(o.selection);return i?f(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),r)):o}},t.selectParentNodeOfType=function(e){return function(t){if(!h(t.selection)){var n=L(e)(t.selection);if(n)return f(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=N(e.selection);return"number"==typeof t?g(t)(e):e}},,function(e,t,n){e.exports=!n(28)&&!n(17)((function(){return 7!=Object.defineProperty(n(103)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(16),o=n(26),i=n(62),a=n(104),s=n(29).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(42),o=n(44),i=n(83)(!1),a=n(105)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(29),o=n(18),i=n(63);e.exports=n(28)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(44),o=n(66).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){"use strict";var r=n(28),o=n(63),i=n(84),a=n(78),s=n(32),c=n(77),l=Object.assign;e.exports=!l||n(17)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,u=1,d=i.f,h=a.f;l>u;)for(var p,f=c(arguments[u++]),v=d?o(f).concat(d(f)):o(f),m=v.length,g=0;m>g;)p=v[g++],r&&!h.call(f,p)||(n[p]=f[p]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(47),o=n(19),i=n(147),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(16).parseInt,o=n(72).trim,i=n(109),a=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(16).parseFloat,o=n(72).trim;e.exports=1/r(n(109)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(54);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(19),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(65),o=n(60),i=n(71),a={};n(43)(a,n(22)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(18);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(290);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(47),o=n(32),i=n(77),a=n(23);e.exports=function(e,t,n,s,c){r(t);var l=o(e),u=i(l),d=a(l.length),h=c?d-1:0,p=c?-1:1;if(n<2)for(;;){if(h in u){s=u[h],h+=p;break}if(h+=p,c?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:d>h;h+=p)h in u&&(s=t(s,u[h],h,l));return s}},function(e,t,n){"use strict";var r=n(32),o=n(64),i=n(23);e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),s=o(e,a),c=o(t,a),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?a:o(l,a))-c,a-s),d=1;for(c<s&&s<c+u&&(d=-1,c+=u-1,s+=u-1);u-- >0;)c in n?n[s]=n[c]:delete n[s],s+=d,c+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(124);n(4)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(28)&&"g"!=/./g.flags&&n(29).f(RegExp.prototype,"flags",{configurable:!0,get:n(87)})},function(e,t,n){"use strict";var r,o,i,a,s=n(62),c=n(16),l=n(46),u=n(79),d=n(4),h=n(19),p=n(47),f=n(75),v=n(90),m=n(80),g=n(126).set,y=n(310)(),_=n(162),b=n(311),C=n(91),w=n(163),S=c.TypeError,k=c.process,A=k&&k.versions,E=A&&A.v8||"",T=c.Promise,O="process"==u(k),x=function(){},M=o=_.f,I=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(22)("species")]=function(e){e(x,x)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t&&0!==E.indexOf("6.6")&&-1===C.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,s=o?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(o||(2==e._h&&P(e),e._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===t.promise?l(S("Promise-chain cycle")):(i=L(n))?i.call(n,c,l):c(n)):l(r)}catch(e){u&&!a&&u.exit(),l(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){g.call(c,(function(){var t,n,r,o=e._v,i=D(e);if(i&&(t=b((function(){O?k.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=O||D(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},P=function(e){g.call(c,(function(){var t;O?k.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},H=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=L(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,l(H,r,1),l(F,r,1))}catch(e){F.call(r,e)}})):(n._v=e,n._s=1,N(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};I||(T=function(e){f(this,T,"Promise","_h"),p(e),r.call(this);try{e(l(H,this,1),l(F,this,1))}catch(e){F.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(76)(T.prototype,{then:function(e,t){var n=M(m(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(H,e,1),this.reject=l(F,e,1)},_.f=M=function(e){return e===T||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!I,{Promise:T}),n(71)(T,"Promise"),n(74)("Promise"),a=n(26).Promise,d(d.S+d.F*!I,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?T:this,e)}}),d(d.S+d.F*!(I&&n(86)((function(e){T.all(e).catch(x)}))),"Promise",{all:function(e){var t=this,n=M(t),r=n.resolve,o=n.reject,i=b((function(){var n=[],i=0,a=1;v(e,!1,(function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,o=b((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";var r=n(47);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(18),o=n(19),i=n(162);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(29).f,o=n(65),i=n(76),a=n(46),s=n(75),c=n(90),l=n(115),u=n(158),d=n(74),h=n(28),p=n(59).fastKey,f=n(69),v=h?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&c(r,n,e[l],e)}));return i(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=f(this,t),r=m(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[v]--}return!!r},forEach:function(e){f(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(f(this,t),e)}}),h&&r(u.prototype,"size",{get:function(){return f(this,t)[v]}}),u},def:function(e,t,n){var r,o,i=m(e,t);return i?i.v=n:(e._l=i={i:o=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:m,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(76),o=n(59).getWeak,i=n(18),a=n(19),s=n(75),c=n(90),l=n(51),u=n(42),d=n(69),h=l(5),p=l(6),f=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},g=function(e,t){return h(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=r&&c(r,n,e[i],e)}));return r(l.prototype,{delete:function(e){if(!a(e))return!1;var n=o(e);return!0===n?v(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=o(e);return!0===n?v(d(this,t)).has(e):n&&u(n,this._i)}}),l},def:function(e,t,n){var r=o(i(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){var r=n(48),o=n(23);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(66),o=n(84),i=n(18),a=n(16).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(23),o=n(111),i=n(55);e.exports=function(e,t,n,a){var s=String(i(e)),c=s.length,l=void 0===n?" ":String(n),u=r(t);if(u<=c||""==l)return s;var d=u-c,h=o.call(l,Math.ceil(d/l.length));return h.length>d&&(h=h.slice(0,d)),a?h+s:s+h}},function(e,t,n){var r=n(28),o=n(63),i=n(44),a=n(78).f;e.exports=function(e){return function(t){for(var n,s=i(t),c=o(s),l=c.length,u=0,d=[];l>u;)n=c[u++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n(176)},function(e,t,n){},function(e,t,n){"use strict";e.exports=n(435)},function(e,t,n){"use strict";e.exports.encode=n(436),e.exports.decode=n(437),e.exports.format=n(438),e.exports.parse=n(439)},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",i=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),a=new RegExp("^(?:"+r+"|"+o+")");e.exports.HTML_TAG_RE=i,e.exports.HTML_OPEN_CLOSE_TAG_RE=a},function(e,t,n){"use strict";function r(e,t){var n,r,o,i,a,s=[],c=t.length;for(n=0;n<c;n++)126===(o=t[n]).marker&&-1!==o.end&&(i=t[o.end],(a=e.tokens[o.token]).type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",(a=e.tokens[i.token]).type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="","text"===e.tokens[i.token-1].type&&"~"===e.tokens[i.token-1].content&&s.push(i.token-1));for(;s.length;){for(r=(n=s.pop())+1;r<e.tokens.length&&"s_close"===e.tokens[r].type;)r++;n!==--r&&(a=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=a)}}e.exports.tokenize=function(e,t){var n,r,o,i,a=e.pos,s=e.src.charCodeAt(a);if(t)return!1;if(126!==s)return!1;if(o=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(s),o<2)return!1;for(o%2&&(e.push("text","",0).content=i,o--),n=0;n<o;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:s,length:0,jump:n,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},function(e,t,n){"use strict";function r(e,t){var n,r,o,i,a,s;for(n=t.length-1;n>=0;n--)95!==(r=t[n]).marker&&42!==r.marker||-1!==r.end&&(o=t[r.end],s=n>0&&t[n-1].end===r.end+1&&t[n-1].token===r.token-1&&t[r.end+1].token===o.token+1&&t[n-1].marker===r.marker,a=String.fromCharCode(r.marker),(i=e.tokens[r.token]).type=s?"strong_open":"em_open",i.tag=s?"strong":"em",i.nesting=1,i.markup=s?a+a:a,i.content="",(i=e.tokens[o.token]).type=s?"strong_close":"em_close",i.tag=s?"strong":"em",i.nesting=-1,i.markup=s?a+a:a,i.content="",s&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}e.exports.tokenize=function(e,t){var n,r,o=e.pos,i=e.src.charCodeAt(o);if(t)return!1;if(95!==i&&42!==i)return!1;for(r=e.scanDelims(e.pos,42===i),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:r.length,jump:n,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},function(e,t,n){},function(e,t,n){var r={"./blue-gradient.scss":187,"./blue.scss":498,"./brown-cream.scss":499,"./brown.scss":500,"./cadet-grey-gradient.scss":501,"./camouflage.scss":502,"./cracked-stone.scss":503,"./fabric.scss":504,"./gold-silver.scss":505,"./granite.scss":506,"./grass.scss":507,"./green-plasma.scss":508,"./green-white.scss":509,"./green.scss":510,"./grey-diagonals.scss":511,"./grey-gradient.scss":512,"./grey.scss":513,"./leather.scss":514,"./light-grey.scss":515,"./marble-brown.scss":516,"./marble-green.scss":517,"./metal.scss":518,"./sand-snow.scss":519,"./stucco.scss":520,"./teal-gradient.scss":521,"./tiled.scss":188,"./white-grey.scss":522,"./wood-dark.scss":523,"./wood-dark2.scss":524,"./wood-light.scss":525,"./wood-medium.scss":526,"./wood-pine.scss":527};function o(e){return i(e).then((function(e){return n.t(e,7)}))}function i(e){return Promise.resolve().then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}o.keys=function(){return Object.keys(r)},o.resolve=i,o.id=186,e.exports=o},function(e,t,n){},function(e,t,n){},function(e,t,n){var r={"./alpha/pieces.css":[538,1],"./blindfold1/pieces.css":[539,2],"./blindfold2/pieces.css":[540,3],"./blindfold3/pieces.css":[541,4],"./blindfold4/pieces.css":[542,5],"./case/pieces.css":[543,6],"./celtic/pieces.css":[544,7],"./eyes/pieces.css":[545,8],"./fantasy/pieces.css":[546,9],"./goodcomp-gradient/pieces.css":[548,10],"./goodcomp/pieces.css":[547,11],"./kingdom/pieces.css":[549,12],"./kosal/pieces.css":[550,13],"./leipzig/pieces.css":[551,14],"./maya/pieces.css":[552,15],"./merida-gradient/pieces.css":[190],"./merida/pieces.css":[553,16],"./skulls/pieces.css":[554,17],"./spatial/pieces.css":[555,18],"./wiki/pieces.css":[556,19]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(o,7)}))}o.keys=function(){return Object.keys(r)},o.id=189,e.exports=o},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(11),o=n(0),i=n(7),a=n(6),s=n(5),c=n(12),l=(n(24),n(14)),u=n(33),d=n(39),h=n(38),p=n(136),f=n.n(p);n(401),n(402);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}new r.a("linear-progress");var m=function(e){babelHelpers.inherits(r,e);var t,n=v(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{id:{type:String},inputId:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},timePeriod:{type:String,default:""},periodType:{type:String,default:"allTime"},nameAsContainerId:{type:Boolean},classes:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"updated",value:function(e,t){"closed"==e&&(t?this.close():this.open())}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.nameAsId?t.name:t.inputId||Object(s.a)(),t.predefined||(t.predefined=r.getPredefinedDefaults(t.name,t.periodType||"allTime")),o=h.a.create(t.predefined),(i=t.timePeriod||"").indexOf("#")<0&&(i=""),console.log("DATE RANGE CONF:",t,i),this.innerHTML='<div class="ct-date-range">\n              <div class="ct-date-range-selector">\n               <div class="ct-date-range-output">\n                 <input '.concat(t.disabled?"disabled=true":"",' value = "').concat(i,'" type="text" id="').concat(n,'" name="').concat(t.name,'" class="ct-date-range-input ct-hidden"/>\n                 ').concat(o,' <span class="ct-date-range-presentation"></span>\n              </div>\n             </div>'),this._input=this.querySelector(".ct-date-range-input"),this._present=this.querySelector(".ct-date-range-presentation"),f()(this._input,{range:!0,cancelBtn:!0,format:"yyyy-mm-dd",rangeDelim:"#",maxdate:"today",events:{dateChanged:function(e){console.error("on date changed:",a,e,e.dateFrom,e.dateTo),a._setRange(e._dateFrom,e._dateTo)},onRangeFormat:function(e,t){console.error("on range format:",e,t),a._setRange(e,t)},ready:function(e){console.error("on date ready:",e)},shown:function(e){console.error("on date shown:",e)},hidden:function(e){console.error("on date hidden:",e)}}}),this._select=this.querySelector("ct-select"),this._select.addEventListener("change",(function(e){console.log("date select change:",e),a._setFromSelectChange(e.detail.value)})),"customRange"!=t.periodType&&this._setFromSelectChange(t.periodType);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_setFromSelectChange",value:function(e){switch(e){case"customRange":f()(this._input,"show");break;case"lastMonth":var t=new Date;t.setDate(0);var n=t,r=new Date,o=new Date(r.getFullYear(),r.getMonth()-1,1);this._setRange(o,n);break;case"thisMonth":var i=new Date;i.setDate(1);var a=new Date;this._setRange(i,a);break;case"thisYear":var s=new Date,c=new Date(s.getFullYear(),0,1),l=new Date;this._setRange(c,l);break;case"lastYear":var u=new Date,d=new Date(u.getFullYear()-1,11,31),h=new Date(u.getFullYear()-1,0,1);this._setRange(h,d);break;case"lastSeven":var p=new Date(Date.now()-6048e5),v=new Date;this._setRange(p,v);break;case"lastThirty":var m=new Date(Date.now()-2592e6),g=new Date;this._setRange(m,g);break;case"lastNinety":var y=new Date(Date.now()-7776e6),_=new Date;this._setRange(y,_);break;case"allTime":this._setRange(null,null)}}},{key:"_getIso",value:function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}},{key:"_setRange",value:function(e,t){if(console.log("set range from to:",e,t),e){var n=this._getIso(e),r=this._getIso(t);this._present.innerHTML="".concat(n," ").concat(Object(o.d)("to")," ").concat(r),this._input.value="".concat(n,"#").concat(r)}else this._present.innerHTML=Object(o.d)("All time"),this._input.value="allTime"}}],[{key:"getRangeNamePresentationString",value:function(e){var t={customRange:Object(o.d)("Custom range"),lastMonth:Object(o.d)("Last month"),thisMonth:Object(o.d)("This month"),thisYear:Object(o.d)("This year"),lastYear:Object(o.d)("Last year"),lastSeven:Object(o.d)("Last 7 days"),lastThirty:Object(o.d)("Last 30 days"),lastNinety:Object(o.d)("Last 90 days"),allTime:Object(o.d)("All time")}[e];return t||(t=""),t}},{key:"getPredefinedDefaults",value:function(e,t){var n=function(e){return{label:r.getRangeNamePresentationString(e),value:e,selected:t==e}};return{label:"",name:"date_range_selector_"+e,compact:!0,choices:[n("allTime"),n("lastSeven"),n("lastThirty"),n("lastNinety"),n("thisMonth"),n("lastMonth"),n("thisYear"),n("lastYear"),n("customRange")]}}}]),r}(i.a);m.componentName="date-range",a.a.define(m);var g=n(568),y=n(1),_={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}},b={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function C(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}function w(e,t){if(C(e)&&t in _){var n=e.document.createElement("div"),r=_[t],o=r.standard,i=r.prefixed;return o in n.style?o:i}return t}function S(e,t){if(C(e)&&t in b){var n=e.document.createElement("div"),r=b[t],o=r.standard,i=r.prefixed;return r.cssProperty in n.style?o:i}return t}var k=n(10),A=n(15),E=n(25),T=n(27),O=n(35),x=n(8),M={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},I={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},L={ANIM_END_LATCH_MS:250},N=function(e){function t(n){var r=e.call(this,y.a({},t.defaultAdapter,n))||this;return r.currentCheckState_=I.TRANSITION_STATE_INIT,r.currentAnimationClass_="",r.animEndLatchTimer_=0,r.enableAnimationEndHandler_=!1,r}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return L},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter_.addClass(M.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(M.DISABLED):this.adapter_.removeClass(M.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter_.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),L.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter_.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var n=M.SELECTED;t===I.TRANSITION_STATE_UNCHECKED?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=I.TRANSITION_STATE_INDETERMINATE,t=I.TRANSITION_STATE_CHECKED,n=I.TRANSITION_STATE_UNCHECKED;return this.adapter_.isIndeterminate()?e:this.adapter_.isChecked()?t:n},t.prototype.getTransitionAnimationClass_=function(e,n){var r=I.TRANSITION_STATE_INIT,o=I.TRANSITION_STATE_CHECKED,i=I.TRANSITION_STATE_UNCHECKED,a=t.cssClasses,s=a.ANIM_UNCHECKED_CHECKED,c=a.ANIM_UNCHECKED_INDETERMINATE,l=a.ANIM_CHECKED_UNCHECKED,u=a.ANIM_CHECKED_INDETERMINATE,d=a.ANIM_INDETERMINATE_CHECKED,h=a.ANIM_INDETERMINATE_UNCHECKED;switch(e){case r:return n===i?"":n===o?d:h;case i:return n===o?s:c;case o:return n===i?l:u;default:return n===o?d:h}},t.prototype.updateAriaChecked_=function(){this.adapter_.isIndeterminate()?this.adapter_.setNativeControlAttr(I.ARIA_CHECKED_ATTR,I.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter_.removeNativeControlAttr(I.ARIA_CHECKED_ATTR)},t}(x.a),R=["checked","indeterminate"],D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return y.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.nativeControl_.indeterminate},set:function(e){this.nativeControl_.indeterminate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleAnimationEnd_=function(){return e.foundation_.handleAnimationEnd()},this.nativeControl_.addEventListener("change",this.handleChange_),this.listen(S(window,"animationend"),this.handleAnimationEnd_),this.installPropertyChangeHooks_()},t.prototype.destroy=function(){this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.handleChange_),this.unlisten(S(window,"animationend"),this.handleAnimationEnd_),this.uninstallPropertyChangeHooks_(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new N({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},hasNativeControl:function(){return!!e.nativeControl_},isAttachedToDOM:function(){return Boolean(e.root_.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){return e.root_.classList.remove(t)},removeNativeControlAttr:function(t){return e.nativeControl_.removeAttribute(t)},setNativeControlAttr:function(t,n){return e.nativeControl_.setAttribute(t,n)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=y.a({},T.a.createAdapter(this),{deregisterInteractionHandler:function(t,n){return e.nativeControl_.removeEventListener(t,n,Object(A.a)())},isSurfaceActive:function(){return Object(E.c)(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,n){return e.nativeControl_.addEventListener(t,n,Object(A.a)())}});return new T.a(this.root_,new O.a(t))},t.prototype.installPropertyChangeHooks_=function(){var e=this,t=this.nativeControl_,n=Object.getPrototypeOf(t);R.forEach((function(r){var o=Object.getOwnPropertyDescriptor(n,r);if(P(o)){var i=o.get,a={configurable:o.configurable,enumerable:o.enumerable,get:i,set:function(n){o.set.call(t,n),e.foundation_.handleChange()}};Object.defineProperty(t,r,a)}}))},t.prototype.uninstallPropertyChangeHooks_=function(){var e=this.nativeControl_,t=Object.getPrototypeOf(e);R.forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);P(r)&&Object.defineProperty(e,n,r)}))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=N.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(k.a);function P(e){return!!e&&"function"==typeof e.set}n(131),n(403),n(404);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var H=function(e){babelHelpers.inherits(r,e);var t,n=F(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String,toComponent:!0},disabled:{type:Boolean,toComponent:!0},checked:{type:Boolean,toComponent:!0},id:{type:String},inputId:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-checkbox-helper-text--show"):n.classList.add("ct-checkbox-helper-text--show")}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),(n=g.a.attachTo(this)).input=D.attachTo(this.querySelector(".mdc-checkbox")),this._component=n.input;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.nameAsId?e.name:e.inputId||Object(s.a)(),n=e.helperId,r=e.helperClass,o=e.value||"On";return 0===e.value&&(o=0),'<div class="mdc-form-field">\n                  <div class="mdc-checkbox '.concat(e.disabled?"mdc-checkbox--disabled":""," ").concat(e.checked?"mdc-checkbox--checked":"",'">\n                        <input ').concat(e.disabled?"disabled=true":"",' value="').concat(o,'" type="checkbox" id="').concat(t,'" name="').concat(e.name,'"  ').concat(e.checked?"checked":"",' class="mdc-checkbox__native-control"/>\n                            <div class="mdc-checkbox__background">\n                            \t<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">\n\t\t\t\t  <path class="mdc-checkbox__checkmark-path" fill="none" stroke="white" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>\n\t\t\t       </svg>\n\t\t\t      <div class="mdc-checkbox__mixedmark"></div>                            \n                            </div>                            \n                 </div>\n                 <label for="').concat(t,'">').concat(e.label||"","</label>\n                 </div>\n                </div>\n                 ").concat(n||r?'<div class="mdc-text-field-helper-line">\n                     <div id="'.concat(n||Object(s.a)(),'" class="mdc-text-field-helper-text ').concat(r||"",'"></div>'):"")}},{key:"getComponentFromInput",value:function(e){return e.parentNode.parentNode.parentNode}}]),r}(i.a);H.componentName="ct-checkbox",a.a.define(H);n(175),n(405);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var j=function(e){babelHelpers.inherits(r,e);var t,n=B(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},expandable:{type:Boolean},collapsed:{type:Boolean},expandLabel:{type:String},elevation:{type:Number,default:0},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.expandable?'<icon-button data-tooltip aria-label="'.concat(e.expandLabel||Object(o.d)("Expand"),'" icon-name="').concat(e.collapsed?"expand_more":"expand_less",'" class="ct-form-group-expander"></icon-button>'):"";return'<span class="ct-form-label">'.concat(e.label||"","</span>\n                  ").concat(t,'\n                  <div class="ct-form-panel-content ').concat(e.collapsed?"ct-hidden":"",'">\n                    ').concat(e.html,"\n                </div>")}}]),r}(i.a);j.componentName="ct-panel",a.a.define(j);var q,V=n(96),z={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},G={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"},W=function(e){this.adapter_=e},U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.prototype.getScrollPositionRTL=function(){var e=this.adapter_.getScrollAreaScrollLeft(),t=this.calculateScrollEdges_().right;return Math.round(t-e)},t.prototype.scrollToRTL=function(e){var t=this.calculateScrollEdges_(),n=this.adapter_.getScrollAreaScrollLeft(),r=this.clampScrollValue_(t.right-e);return{finalScrollPosition:r,scrollDelta:r-n}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft(),n=this.clampScrollValue_(t-e);return{finalScrollPosition:n,scrollDelta:n-t}},t.prototype.getAnimatingScrollPosition=function(e){return e},t.prototype.calculateScrollEdges_=function(){return{left:0,right:this.adapter_.getScrollContentOffsetWidth()-this.adapter_.getScrollAreaOffsetWidth()}},t.prototype.clampScrollValue_=function(e){var t=this.calculateScrollEdges_();return Math.min(Math.max(t.left,e),t.right)},t}(W),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.prototype.getScrollPositionRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft();return Math.round(e-t)},t.prototype.scrollToRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft(),n=this.clampScrollValue_(-e);return{finalScrollPosition:n,scrollDelta:n-t}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft(),n=this.clampScrollValue_(t-e);return{finalScrollPosition:n,scrollDelta:n-t}},t.prototype.getAnimatingScrollPosition=function(e,t){return e-t},t.prototype.calculateScrollEdges_=function(){var e=this.adapter_.getScrollContentOffsetWidth();return{left:this.adapter_.getScrollAreaOffsetWidth()-e,right:0}},t.prototype.clampScrollValue_=function(e){var t=this.calculateScrollEdges_();return Math.max(Math.min(t.right,e),t.left)},t}(W),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.prototype.getScrollPositionRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft();return Math.round(t-e)},t.prototype.scrollToRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft(),n=this.clampScrollValue_(e);return{finalScrollPosition:n,scrollDelta:t-n}},t.prototype.incrementScrollRTL=function(e){var t=this.adapter_.getScrollAreaScrollLeft(),n=this.clampScrollValue_(t+e);return{finalScrollPosition:n,scrollDelta:t-n}},t.prototype.getAnimatingScrollPosition=function(e,t){return e+t},t.prototype.calculateScrollEdges_=function(){return{left:this.adapter_.getScrollContentOffsetWidth()-this.adapter_.getScrollAreaOffsetWidth(),right:0}},t.prototype.clampScrollValue_=function(e){var t=this.calculateScrollEdges_();return Math.min(Math.max(t.right,e),t.left)},t}(W),Y=function(e){function t(n){var r=e.call(this,y.a({},t.defaultAdapter,n))||this;return r.isAnimating_=!1,r}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return G},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.adapter_.computeHorizontalScrollbarHeight();this.adapter_.setScrollAreaStyleProperty("margin-bottom",-e+"px"),this.adapter_.addScrollAreaClass(t.cssClasses.SCROLL_AREA_SCROLL)},t.prototype.getScrollPosition=function(){if(this.isRTL_())return this.computeCurrentScrollPositionRTL_();var e=this.calculateCurrentTranslateX_();return this.adapter_.getScrollAreaScrollLeft()-e},t.prototype.handleInteraction=function(){this.isAnimating_&&this.stopScrollAnimation_()},t.prototype.handleTransitionEnd=function(e){var n=e.target;this.isAnimating_&&this.adapter_.eventTargetMatchesSelector(n,t.strings.CONTENT_SELECTOR)&&(this.isAnimating_=!1,this.adapter_.removeClass(t.cssClasses.ANIMATING))},t.prototype.incrementScroll=function(e){0!==e&&this.animate_(this.getIncrementScrollOperation_(e))},t.prototype.incrementScrollImmediate=function(e){if(0!==e){var t=this.getIncrementScrollOperation_(e);0!==t.scrollDelta&&(this.stopScrollAnimation_(),this.adapter_.setScrollAreaScrollLeft(t.finalScrollPosition))}},t.prototype.scrollTo=function(e){if(this.isRTL_())return this.scrollToRTL_(e);this.scrollTo_(e)},t.prototype.getRTLScroller=function(){return this.rtlScrollerInstance_||(this.rtlScrollerInstance_=this.rtlScrollerFactory_()),this.rtlScrollerInstance_},t.prototype.calculateCurrentTranslateX_=function(){var e=this.adapter_.getScrollContentStyleValue("transform");if("none"===e)return 0;var t=/\((.+?)\)/.exec(e);if(!t)return 0;var n=t[1],r=y.c(n.split(","),6),o=(r[0],r[1],r[2],r[3],r[4]);r[5];return parseFloat(o)},t.prototype.clampScrollValue_=function(e){var t=this.calculateScrollEdges_();return Math.min(Math.max(t.left,e),t.right)},t.prototype.computeCurrentScrollPositionRTL_=function(){var e=this.calculateCurrentTranslateX_();return this.getRTLScroller().getScrollPositionRTL(e)},t.prototype.calculateScrollEdges_=function(){return{left:0,right:this.adapter_.getScrollContentOffsetWidth()-this.adapter_.getScrollAreaOffsetWidth()}},t.prototype.scrollTo_=function(e){var t=this.getScrollPosition(),n=this.clampScrollValue_(e),r=n-t;this.animate_({finalScrollPosition:n,scrollDelta:r})},t.prototype.scrollToRTL_=function(e){var t=this.getRTLScroller().scrollToRTL(e);this.animate_(t)},t.prototype.getIncrementScrollOperation_=function(e){if(this.isRTL_())return this.getRTLScroller().incrementScrollRTL(e);var t=this.getScrollPosition(),n=e+t,r=this.clampScrollValue_(n);return{finalScrollPosition:r,scrollDelta:r-t}},t.prototype.animate_=function(e){var n=this;0!==e.scrollDelta&&(this.stopScrollAnimation_(),this.adapter_.setScrollAreaScrollLeft(e.finalScrollPosition),this.adapter_.setScrollContentStyleProperty("transform","translateX("+e.scrollDelta+"px)"),this.adapter_.computeScrollAreaClientRect(),requestAnimationFrame((function(){n.adapter_.addClass(t.cssClasses.ANIMATING),n.adapter_.setScrollContentStyleProperty("transform","none")})),this.isAnimating_=!0)},t.prototype.stopScrollAnimation_=function(){this.isAnimating_=!1;var e=this.getAnimatingScrollPosition_();this.adapter_.removeClass(t.cssClasses.ANIMATING),this.adapter_.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter_.setScrollAreaScrollLeft(e)},t.prototype.getAnimatingScrollPosition_=function(){var e=this.calculateCurrentTranslateX_(),t=this.adapter_.getScrollAreaScrollLeft();return this.isRTL_()?this.getRTLScroller().getAnimatingScrollPosition(t,e):t-e},t.prototype.rtlScrollerFactory_=function(){var e=this.adapter_.getScrollAreaScrollLeft();this.adapter_.setScrollAreaScrollLeft(e-1);var t=this.adapter_.getScrollAreaScrollLeft();if(t<0)return this.adapter_.setScrollAreaScrollLeft(e),new K(this.adapter_);var n=this.adapter_.computeScrollAreaClientRect(),r=this.adapter_.computeScrollContentClientRect(),o=Math.round(r.right-n.right);return this.adapter_.setScrollAreaScrollLeft(e),o===t?new $(this.adapter_):new U(this.adapter_)},t.prototype.isRTL_=function(){return"rtl"===this.adapter_.getScrollContentStyleValue("direction")},t}(x.a);var X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(){this.area_=this.root_.querySelector(Y.strings.AREA_SELECTOR),this.content_=this.root_.querySelector(Y.strings.CONTENT_SELECTOR)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleInteraction_=function(){return e.foundation_.handleInteraction()},this.handleTransitionEnd_=function(t){return e.foundation_.handleTransitionEnd(t)},this.area_.addEventListener("wheel",this.handleInteraction_,Object(A.a)()),this.area_.addEventListener("touchstart",this.handleInteraction_,Object(A.a)()),this.area_.addEventListener("pointerdown",this.handleInteraction_,Object(A.a)()),this.area_.addEventListener("mousedown",this.handleInteraction_,Object(A.a)()),this.area_.addEventListener("keydown",this.handleInteraction_,Object(A.a)()),this.content_.addEventListener("transitionend",this.handleTransitionEnd_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.area_.removeEventListener("wheel",this.handleInteraction_,Object(A.a)()),this.area_.removeEventListener("touchstart",this.handleInteraction_,Object(A.a)()),this.area_.removeEventListener("pointerdown",this.handleInteraction_,Object(A.a)()),this.area_.removeEventListener("mousedown",this.handleInteraction_,Object(A.a)()),this.area_.removeEventListener("keydown",this.handleInteraction_,Object(A.a)()),this.content_.removeEventListener("transitionend",this.handleTransitionEnd_)},t.prototype.getDefaultFoundation=function(){var e=this;return new Y({eventTargetMatchesSelector:function(e,t){return Object(E.c)(e,t)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},addScrollAreaClass:function(t){return e.area_.classList.add(t)},setScrollAreaStyleProperty:function(t,n){return e.area_.style.setProperty(t,n)},setScrollContentStyleProperty:function(t,n){return e.content_.style.setProperty(t,n)},getScrollContentStyleValue:function(t){return window.getComputedStyle(e.content_).getPropertyValue(t)},setScrollAreaScrollLeft:function(t){return e.area_.scrollLeft=t},getScrollAreaScrollLeft:function(){return e.area_.scrollLeft},getScrollContentOffsetWidth:function(){return e.content_.offsetWidth},getScrollAreaOffsetWidth:function(){return e.area_.offsetWidth},computeScrollAreaClientRect:function(){return e.area_.getBoundingClientRect()},computeScrollContentClientRect:function(){return e.content_.getBoundingClientRect()},computeHorizontalScrollbarHeight:function(){return function(e,t){if(void 0===t&&(t=!0),t&&void 0!==q)return q;var n=e.createElement("div");n.classList.add(z.SCROLL_TEST),e.body.appendChild(n);var r=n.offsetHeight-n.clientHeight;return e.body.removeChild(n),t&&(q=r),r}(document)}})},t.prototype.getScrollPosition=function(){return this.foundation_.getScrollPosition()},t.prototype.getScrollContentWidth=function(){return this.content_.offsetWidth},t.prototype.incrementScroll=function(e){this.foundation_.incrementScroll(e)},t.prototype.scrollTo=function(e){this.foundation_.scrollTo(e)},t}(k.a),J={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},Z={CONTENT_SELECTOR:".mdc-tab-indicator__content"},Q=function(e){function t(n){return e.call(this,y.a({},t.defaultAdapter,n))||this}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.computeContentClientRect=function(){return this.adapter_.computeContentClientRect()},t}(x.a),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.prototype.activate=function(){this.adapter_.addClass(Q.cssClasses.ACTIVE)},t.prototype.deactivate=function(){this.adapter_.removeClass(Q.cssClasses.ACTIVE)},t}(Q),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.prototype.activate=function(e){if(e){var t=this.computeContentClientRect(),n=e.width/t.width,r=e.left-t.left;this.adapter_.addClass(Q.cssClasses.NO_TRANSITION),this.adapter_.setContentStyleProperty("transform","translateX("+r+"px) scaleX("+n+")"),this.computeContentClientRect(),this.adapter_.removeClass(Q.cssClasses.NO_TRANSITION),this.adapter_.addClass(Q.cssClasses.ACTIVE),this.adapter_.setContentStyleProperty("transform","")}else this.adapter_.addClass(Q.cssClasses.ACTIVE)},t.prototype.deactivate=function(){this.adapter_.removeClass(Q.cssClasses.ACTIVE)},t}(Q),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(){this.content_=this.root_.querySelector(Q.strings.CONTENT_SELECTOR)},t.prototype.computeContentClientRect=function(){return this.foundation_.computeContentClientRect()},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},computeContentClientRect:function(){return e.content_.getBoundingClientRect()},setContentStyleProperty:function(t,n){return e.content_.style.setProperty(t,n)}};return this.root_.classList.contains(Q.cssClasses.FADE)?new ee(t):new te(t)},t.prototype.activate=function(e){this.foundation_.activate(e)},t.prototype.deactivate=function(){this.foundation_.deactivate()},t}(k.a),re={ACTIVE:"mdc-tab--active"},oe={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"},ie=function(e){function t(n){var r=e.call(this,y.a({},t.defaultAdapter,n))||this;return r.focusOnActivate_=!0,r}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return re},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return oe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!0,configurable:!0}),t.prototype.handleClick=function(){this.adapter_.notifyInteracted()},t.prototype.isActive=function(){return this.adapter_.hasClass(re.ACTIVE)},t.prototype.setFocusOnActivate=function(e){this.focusOnActivate_=e},t.prototype.activate=function(e){this.adapter_.addClass(re.ACTIVE),this.adapter_.setAttr(oe.ARIA_SELECTED,"true"),this.adapter_.setAttr(oe.TABINDEX,"0"),this.adapter_.activateIndicator(e),this.focusOnActivate_&&this.adapter_.focus()},t.prototype.deactivate=function(){this.isActive()&&(this.adapter_.removeClass(re.ACTIVE),this.adapter_.setAttr(oe.ARIA_SELECTED,"false"),this.adapter_.setAttr(oe.TABINDEX,"-1"),this.adapter_.deactivateIndicator())},t.prototype.computeDimensions=function(){var e=this.adapter_.getOffsetWidth(),t=this.adapter_.getOffsetLeft(),n=this.adapter_.getContentOffsetWidth(),r=this.adapter_.getContentOffsetLeft();return{contentLeft:t+r,contentRight:t+r+n,rootLeft:t,rootRight:t+e}},t}(x.a),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e,t){return new T.a(e,t)}),void 0===t&&(t=function(e){return new ne(e)}),this.id=this.root_.id;var n=this.root_.querySelector(ie.strings.RIPPLE_SELECTOR),r=y.a({},T.a.createAdapter(this),{addClass:function(e){return n.classList.add(e)},removeClass:function(e){return n.classList.remove(e)},updateCssVariable:function(e,t){return n.style.setProperty(e,t)}}),o=new O.a(r);this.ripple_=e(this.root_,o);var i=this.root_.querySelector(ie.strings.TAB_INDICATOR_SELECTOR);this.tabIndicator_=t(i),this.content_=this.root_.querySelector(ie.strings.CONTENT_SELECTOR)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleClick_=function(){return e.foundation_.handleClick()},this.listen("click",this.handleClick_)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick_),this.ripple_.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new ie({setAttr:function(t,n){return e.root_.setAttribute(t,n)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},activateIndicator:function(t){return e.tabIndicator_.activate(t)},deactivateIndicator:function(){return e.tabIndicator_.deactivate()},notifyInteracted:function(){return e.emit(ie.strings.INTERACTED_EVENT,{tabId:e.id},!0)},getOffsetLeft:function(){return e.root_.offsetLeft},getOffsetWidth:function(){return e.root_.offsetWidth},getContentOffsetLeft:function(){return e.content_.offsetLeft},getContentOffsetWidth:function(){return e.content_.offsetWidth},focus:function(){return e.root_.focus()}})},Object.defineProperty(t.prototype,"active",{get:function(){return this.foundation_.isActive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusOnActivate",{set:function(e){this.foundation_.setFocusOnActivate(e)},enumerable:!0,configurable:!0}),t.prototype.activate=function(e){this.foundation_.activate(e)},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.computeIndicatorClientRect=function(){return this.tabIndicator_.computeContentClientRect()},t.prototype.computeDimensions=function(){return this.foundation_.computeDimensions()},t.prototype.focus=function(){this.root_.focus()},t}(k.a),se={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},ce={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32},le=new Set;le.add(se.ARROW_LEFT_KEY),le.add(se.ARROW_RIGHT_KEY),le.add(se.END_KEY),le.add(se.HOME_KEY),le.add(se.ENTER_KEY),le.add(se.SPACE_KEY);var ue=new Map;ue.set(ce.ARROW_LEFT_KEYCODE,se.ARROW_LEFT_KEY),ue.set(ce.ARROW_RIGHT_KEYCODE,se.ARROW_RIGHT_KEY),ue.set(ce.END_KEYCODE,se.END_KEY),ue.set(ce.HOME_KEYCODE,se.HOME_KEY),ue.set(ce.ENTER_KEYCODE,se.ENTER_KEY),ue.set(ce.SPACE_KEYCODE,se.SPACE_KEY);var de=function(e){function t(n){var r=e.call(this,y.a({},t.defaultAdapter,n))||this;return r.useAutomaticActivation_=!1,r}return y.b(t,e),Object.defineProperty(t,"strings",{get:function(){return se},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ce},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setUseAutomaticActivation=function(e){this.useAutomaticActivation_=e},t.prototype.activateTab=function(e){var t,n=this.adapter_.getPreviousActiveTabIndex();this.indexIsInRange_(e)&&e!==n&&(-1!==n&&(this.adapter_.deactivateTabAtIndex(n),t=this.adapter_.getTabIndicatorClientRectAtIndex(n)),this.adapter_.activateTabAtIndex(e,t),this.scrollIntoView(e),this.adapter_.notifyTabActivated(e))},t.prototype.handleKeyDown=function(e){var t=this.getKeyFromEvent_(e);if(void 0!==t)if(this.isActivationKey_(t)||e.preventDefault(),this.useAutomaticActivation_){if(this.isActivationKey_(t))return;var n=this.determineTargetFromKey_(this.adapter_.getPreviousActiveTabIndex(),t);this.adapter_.setActiveTab(n),this.scrollIntoView(n)}else{var r=this.adapter_.getFocusedTabIndex();if(this.isActivationKey_(t))this.adapter_.setActiveTab(r);else{n=this.determineTargetFromKey_(r,t);this.adapter_.focusTabAtIndex(n),this.scrollIntoView(n)}}},t.prototype.handleTabInteraction=function(e){this.adapter_.setActiveTab(this.adapter_.getIndexOfTabById(e.detail.tabId))},t.prototype.scrollIntoView=function(e){if(this.indexIsInRange_(e))return 0===e?this.adapter_.scrollTo(0):e===this.adapter_.getTabListLength()-1?this.adapter_.scrollTo(this.adapter_.getScrollContentWidth()):this.isRTL_()?this.scrollIntoViewRTL_(e):void this.scrollIntoView_(e)},t.prototype.determineTargetFromKey_=function(e,t){var n=this.isRTL_(),r=this.adapter_.getTabListLength()-1,o=e;return t===se.END_KEY?o=r:t===se.ARROW_LEFT_KEY&&!n||t===se.ARROW_RIGHT_KEY&&n?o-=1:t===se.ARROW_RIGHT_KEY&&!n||t===se.ARROW_LEFT_KEY&&n?o+=1:o=0,o<0?o=r:o>r&&(o=0),o},t.prototype.calculateScrollIncrement_=function(e,t,n,r){var o=this.adapter_.getTabDimensionsAtIndex(t),i=o.contentLeft-n-r,a=o.contentRight-n-ce.EXTRA_SCROLL_AMOUNT,s=i+ce.EXTRA_SCROLL_AMOUNT;return t<e?Math.min(a,0):Math.max(s,0)},t.prototype.calculateScrollIncrementRTL_=function(e,t,n,r,o){var i=this.adapter_.getTabDimensionsAtIndex(t),a=o-i.contentLeft-n,s=o-i.contentRight-n-r+ce.EXTRA_SCROLL_AMOUNT,c=a-ce.EXTRA_SCROLL_AMOUNT;return t>e?Math.max(s,0):Math.min(c,0)},t.prototype.findAdjacentTabIndexClosestToEdge_=function(e,t,n,r){var o=t.rootLeft-n,i=t.rootRight-n-r,a=o+i;return o<0||a<0?e-1:i>0||a>0?e+1:-1},t.prototype.findAdjacentTabIndexClosestToEdgeRTL_=function(e,t,n,r,o){var i=o-t.rootLeft-r-n,a=o-t.rootRight-n,s=i+a;return i>0||s>0?e+1:a<0||s<0?e-1:-1},t.prototype.getKeyFromEvent_=function(e){return le.has(e.key)?e.key:ue.get(e.keyCode)},t.prototype.isActivationKey_=function(e){return e===se.SPACE_KEY||e===se.ENTER_KEY},t.prototype.indexIsInRange_=function(e){return e>=0&&e<this.adapter_.getTabListLength()},t.prototype.isRTL_=function(){return this.adapter_.isRTL()},t.prototype.scrollIntoView_=function(e){var t=this.adapter_.getScrollPosition(),n=this.adapter_.getOffsetWidth(),r=this.adapter_.getTabDimensionsAtIndex(e),o=this.findAdjacentTabIndexClosestToEdge_(e,r,t,n);if(this.indexIsInRange_(o)){var i=this.calculateScrollIncrement_(e,o,t,n);this.adapter_.incrementScroll(i)}},t.prototype.scrollIntoViewRTL_=function(e){var t=this.adapter_.getScrollPosition(),n=this.adapter_.getOffsetWidth(),r=this.adapter_.getTabDimensionsAtIndex(e),o=this.adapter_.getScrollContentWidth(),i=this.findAdjacentTabIndexClosestToEdgeRTL_(e,r,t,n,o);if(this.indexIsInRange_(i)){var a=this.calculateScrollIncrementRTL_(e,i,t,n,o);this.adapter_.incrementScroll(a)}},t}(x.a),he=de.strings,pe=0,fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"focusOnActivate",{set:function(e){this.tabList_.forEach((function(t){return t.focusOnActivate=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useAutomaticActivation",{set:function(e){this.foundation_.setUseAutomaticActivation(e)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new ae(e)}),void 0===t&&(t=function(e){return new X(e)}),this.tabList_=this.instantiateTabs_(e),this.tabScroller_=this.instantiateTabScroller_(t)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleTabInteraction_=function(t){return e.foundation_.handleTabInteraction(t)},this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.listen(ie.strings.INTERACTED_EVENT,this.handleTabInteraction_),this.listen("keydown",this.handleKeyDown_);for(var t=0;t<this.tabList_.length;t++)if(this.tabList_[t].active){this.scrollIntoView(t);break}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.unlisten(ie.strings.INTERACTED_EVENT,this.handleTabInteraction_),this.unlisten("keydown",this.handleKeyDown_),this.tabList_.forEach((function(e){return e.destroy()})),this.tabScroller_&&this.tabScroller_.destroy()},t.prototype.getDefaultFoundation=function(){var e=this;return new de({scrollTo:function(t){return e.tabScroller_.scrollTo(t)},incrementScroll:function(t){return e.tabScroller_.incrementScroll(t)},getScrollPosition:function(){return e.tabScroller_.getScrollPosition()},getScrollContentWidth:function(){return e.tabScroller_.getScrollContentWidth()},getOffsetWidth:function(){return e.root_.offsetWidth},isRTL:function(){return"rtl"===window.getComputedStyle(e.root_).getPropertyValue("direction")},setActiveTab:function(t){return e.foundation_.activateTab(t)},activateTabAtIndex:function(t,n){return e.tabList_[t].activate(n)},deactivateTabAtIndex:function(t){return e.tabList_[t].deactivate()},focusTabAtIndex:function(t){return e.tabList_[t].focus()},getTabIndicatorClientRectAtIndex:function(t){return e.tabList_[t].computeIndicatorClientRect()},getTabDimensionsAtIndex:function(t){return e.tabList_[t].computeDimensions()},getPreviousActiveTabIndex:function(){for(var t=0;t<e.tabList_.length;t++)if(e.tabList_[t].active)return t;return-1},getFocusedTabIndex:function(){var t=e.getTabElements_(),n=document.activeElement;return t.indexOf(n)},getIndexOfTabById:function(t){for(var n=0;n<e.tabList_.length;n++)if(e.tabList_[n].id===t)return n;return-1},getTabListLength:function(){return e.tabList_.length},notifyTabActivated:function(t){return e.emit(he.TAB_ACTIVATED_EVENT,{index:t},!0)}})},t.prototype.activateTab=function(e){this.foundation_.activateTab(e)},t.prototype.scrollIntoView=function(e){this.foundation_.scrollIntoView(e)},t.prototype.getTabElements_=function(){return[].slice.call(this.root_.querySelectorAll(he.TAB_SELECTOR))},t.prototype.instantiateTabs_=function(e){return this.getTabElements_().map((function(t){return t.id=t.id||"mdc-tab-"+ ++pe,e(t)}))},t.prototype.instantiateTabScroller_=function(e){var t=this.root_.querySelector(he.TAB_SCROLLER_SELECTOR);return t?e(t):null},t}(k.a);n(406),n(407),n(408),n(409),n(174),n(410);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var me=new r.a("tabs"),ge=function(e){babelHelpers.inherits(r,e);var t,n=ve(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{tabs:{type:Array},hide:{type:Boolean},dense:{type:Boolean},backForwardButtons:{type:Boolean},classes:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._selectedIndex=t.tabs.findIndex((function(e){return e.active})),this._selectedIndex<0&&t.tabs.length&&(t.tabs[0].active=!0,this._selectedIndex=0),this.innerHTML=r.toHtml(t),t.dense&&this.classList.add("ct-tabs--dense"),this._component=new fe(this.querySelector(".mdc-tab-bar")),me.log({tabBarComp:this._component},"INITED TABBAR"),this._tabPanels=this.querySelectorAll(".ct-tab-panel"),this._updateForwardBackIndicators(),this._component.listen("MDCTabBar:activated",(function(e){var t=n.querySelector(".ct-active-tab-panel");t&&(t.classList.remove("ct-active-tab-panel"),t.setAttribute("aria-hidden","true"));var r=n._tabPanels[e.detail.index];r&&(r.classList.add("ct-active-tab-panel"),r.setAttribute("aria-hidden","false")),n._tabPanels[e.detail.index].classList.add("ct-active-tab-panel"),n._selectedIndex=e.detail.index,a.a.layoutOnNeeded(n._tabPanels[e.detail.index]),n._updateForwardBackIndicators()})),t.backForwardButtons&&(this.querySelector(".ct-tabs-scroll-indicator-back").addEventListener("tap",(function(e){n._selectedIndex>0&&n.selectTab(n._selectedIndex-1)})),this.querySelector(".ct-tabs-scroll-indicator-forward").addEventListener("tap",(function(e){n._selectedIndex<n._tabPanels.length&&n.selectTab(n._selectedIndex+1)})));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"layout",value:function(){a.a.layoutOnNeeded(this._tabPanels[this._selectedIndex])}},{key:"selectTab",value:function(e){this._component.activateTab(e)}},{key:"_updateForwardBackIndicators",value:function(){this.getConf().backForwardButtons&&(this._selectedIndex>0?this.querySelector(".ct-tabs-scroll-indicator-back").disabled=!1:this.querySelector(".ct-tabs-scroll-indicator-back").disabled=!0,this._selectedIndex<this._tabPanels.length-1?this.querySelector(".ct-tabs-scroll-indicator-forward").disabled=!1:this.querySelector(".ct-tabs-scroll-indicator-forward").disabled=!0)}}],[{key:"toHtml",value:function(e){Object(s.a)();var t='<div class="ct-tab-bar mdc-tab-bar" role="tablist">\n              '.concat(e.backForwardButtons?d.a.create({iconOnly:!0,iconName:"navigate_before",label:Object(o.d)("scroll back"),classes:"ct-tabs-scroll-indicator-back"}):"",'\n              <div class="mdc-tab-scroller">\n               <div class="mdc-tab-scroller__scroll-area">\n                 <div class="mdc-tab-scroller__scroll-content">\n              ').concat(e.tabs.map((function(e){var t=Object(s.a)();return e.id=t,e.tabButtonId=Object(s.a)(),e.ignoreTab?"":'<button role="tab" href="#'.concat(t,'" data-tabname="').concat(e.name||t,'" tabindex="').concat(e.active?"0":"-1",'" class="ct-tab mdc-tab ').concat(e.active?"mdc-tab--active":""," ").concat(e.tabLabelClasses||"",'" ').concat(e.tooltip?"data-tooltip":""," ").concat(e.tooltipPosition?'tooltip-position="'.concat(e.tooltipPosition,'"'):"",' aria-label="').concat(e.label||"",'" id="').concat(e.tabButtonId,'" aria-controls="').concat(t,'">\n                   <span class="mdc-tab__content">\n                     ').concat(e.icon?'<span class="mdc-tab__icon material-icons" aria-hidden="true">'.concat(e.icon,"</span>"):"","\n                     ").concat(e.iconOnly?"":'<span class="mdc-tab__text-label">'.concat(e.label,"</span>"),'\n                   </span>\n                   <span class="mdc-tab-indicator ').concat(e.active?"mdc-tab-indicator--active":"",'">\n                     <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n                   </span>\n                   <span class="mdc-tab__ripple"></span>              \n                  </button>')})).join(""),"\n              </div>\n             </div>\n            </div>\n              ").concat(e.backForwardButtons?d.a.create({iconOnly:!0,iconName:"navigate_next",label:Object(o.d)("scroll forward"),classes:"ct-tabs-scroll-indicator-forward"}):"","\n           </div>\n\n"),n=e.tabs.map((function(e){if(e.ignoreTab)return"";var t=e.html||Ct.childrenToHTML(e.children),n=e.classes?e.classes:"",r=e.comment?'<div class="ct-tab-comment">'.concat(e.comment,"</div>"):"";return'<div role="tabpanel" tabindex="0" aria-labelledby="'.concat(e.tabButtonId,'" aria-hidden="').concat(e.active?"false":"true",'" class="ct-tab-panel ').concat(e.active?"ct-active-tab-panel":""," ").concat(n,'" id="').concat(e.id,'">\n                   ').concat(r,"\n                   ").concat(t,"\n                 </div>")})).join("");return'<section class="ct-tab-bar--holder">\n               '.concat(t,'\n              </section>\n              <section class="ct-tab-panels--holder">\n              ').concat(n,"\n             </section>")}}]),r}(i.a);ge.componentName="ct-tabs",a.a.define(ge);n(411);function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var _e=function(e){babelHelpers.inherits(r,e);var t,n=ye(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},expandable:{type:Boolean},collapsed:{type:Boolean},expandLabel:{type:String},elevation:{type:Number,default:0},children:{type:Object},direction:{type:String,default:"row"},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){var e=this;this._del=new l.a,this._del.delegate(this,"tap",".ct-form-group-expander",(function(t){e.toggleGroup()}))}},{key:"destroy",value:function(){this._del.destroy()}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.expandLabel&&(t.expandable=!0),t.collapsed&&(t.expandable=!0),this.innerHTML=r.toHtml(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toggleGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.querySelector(".ct-form-group-expander"),r=this.querySelector(".ct-form-group-content"),o=(e||r.classList.contains("ct-hidden"))&&!t;o?(n.setIcon("expand_less"),r.classList.remove("ct-hidden"),a.a.layoutOnNeeded(r)):(n.setIcon("expand_more"),r.classList.add("ct-hidden"))}}],[{key:"toHtml",value:function(e){var t=Ct.childrenToHTML(e.children),n=e.expandable?'<icon-button data-tooltip aria-label="'.concat(e.expandLabel||Object(o.d)("Expand"),'" icon-name="').concat(e.collapsed?"expand_more":"expand_less",'" class="ct-form-group-expander"></icon-button>'):"";return"\n                  ".concat(e.label?'<span class="ct-form-label">'.concat(e.label).concat(n,"</span>"):"",'\n\n                  <div class="ct-form-group-content ct-form-group-direction-').concat(e.direction," ").concat(e.collapsed?"ct-hidden":"",'">\n                    ').concat(t,"\n                  </div>\n                ")}}]),r}(i.a);_e.componentName="ct-group",a.a.define(_e);var be={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},Ce={ARIA_VALUENOW:"aria-valuenow",BUFFER_SELECTOR:".mdc-linear-progress__buffer",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},we=function(e){function t(n){return e.call(this,y.a({},t.defaultAdapter,n))||this}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return be},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Ce},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},getBuffer:function(){return null},getPrimaryBar:function(){return null},hasClass:function(){return!1},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){},setStyle:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.isDeterminate_=!this.adapter_.hasClass(be.INDETERMINATE_CLASS),this.isReversed_=this.adapter_.hasClass(be.REVERSED_CLASS),this.progress_=0,this.buffer_=1},t.prototype.setDeterminate=function(e){this.isDeterminate_=e,this.isDeterminate_?(this.adapter_.removeClass(be.INDETERMINATE_CLASS),this.adapter_.setAttribute(Ce.ARIA_VALUENOW,this.progress_.toString()),this.setScale_(this.adapter_.getPrimaryBar(),this.progress_),this.setScale_(this.adapter_.getBuffer(),this.buffer_)):(this.isReversed_&&(this.adapter_.removeClass(be.REVERSED_CLASS),this.adapter_.forceLayout(),this.adapter_.addClass(be.REVERSED_CLASS)),this.adapter_.addClass(be.INDETERMINATE_CLASS),this.adapter_.removeAttribute(Ce.ARIA_VALUENOW),this.setScale_(this.adapter_.getPrimaryBar(),1),this.setScale_(this.adapter_.getBuffer(),1))},t.prototype.setProgress=function(e){this.progress_=e,this.isDeterminate_&&(this.setScale_(this.adapter_.getPrimaryBar(),e),this.adapter_.setAttribute(Ce.ARIA_VALUENOW,e.toString()))},t.prototype.setBuffer=function(e){this.buffer_=e,this.isDeterminate_&&this.setScale_(this.adapter_.getBuffer(),e)},t.prototype.setReverse=function(e){this.isReversed_=e,this.isDeterminate_||(this.adapter_.removeClass(be.INDETERMINATE_CLASS),this.adapter_.forceLayout(),this.adapter_.addClass(be.INDETERMINATE_CLASS)),this.isReversed_?this.adapter_.addClass(be.REVERSED_CLASS):this.adapter_.removeClass(be.REVERSED_CLASS)},t.prototype.open=function(){this.adapter_.removeClass(be.CLOSED_CLASS)},t.prototype.close=function(){this.adapter_.addClass(be.CLOSED_CLASS)},t.prototype.setScale_=function(e,t){if(e){var n="scaleX("+t+")";this.adapter_.setStyle(e,w(window,"transform"),n)}},t}(x.a),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"determinate",{set:function(e){this.foundation_.setDeterminate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progress",{set:function(e){this.foundation_.setProgress(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{set:function(e){this.foundation_.setBuffer(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverse",{set:function(e){this.foundation_.setReverse(e)},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(){this.foundation_.close()},t.prototype.getDefaultFoundation=function(){var e=this;return new we({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},getBuffer:function(){return e.root_.querySelector(we.strings.BUFFER_SELECTOR)},getPrimaryBar:function(){return e.root_.querySelector(we.strings.PRIMARY_BAR_SELECTOR)},hasClass:function(t){return e.root_.classList.contains(t)},removeAttribute:function(t){e.root_.removeAttribute(t)},removeClass:function(t){return e.root_.classList.remove(t)},setAttribute:function(t,n){e.root_.setAttribute(t,n)},setStyle:function(e,t,n){return e.style.setProperty(t,n)}})},t}(k.a);n(412),n(413);function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}new r.a("linear-progress");var Ae=function(e){babelHelpers.inherits(r,e);var t,n=ke(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{classes:{type:String},ariaRole:{type:String,default:"progressbar"},closed:{type:Boolean,default:!0},determinate:{type:Boolean,default:!1}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"updated",value:function(e,t){"closed"==e&&(t?this.close():this.open())}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML='\n             <div class="mdc-linear-progress__buffer">\n              <div class="mdc-linear-progress__buffer-bar"></div>\n              <div class="mdc-linear-progress__buffer-dots"></div>\n             </div>\n             <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n               <span class="mdc-linear-progress__bar-inner"></span>\n             </div>\n             <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n               <span class="mdc-linear-progress__bar-inner"></span>\n             </div>',this._component=Se.attachTo(this),this._component.determinate=t.determinate,t.closed&&this.close();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setProgress",value:function(e){this._component.progress=e}},{key:"close",value:function(){this._component.close()}},{key:"open",value:function(){this._component.open()}}]),r}(i.a);Ae.classes="mdc-linear-progress",Ae.componentName="linear-progress",a.a.define(Ae);n(414);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Te=function(e){babelHelpers.inherits(r,e);var t,n=Ee(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{classes:{type:String},ariaRole:{type:String,default:"progressbar"},closed:{type:Boolean,default:"true"}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"updated",value:function(e,t){"closed"==e&&(t?this.close():this.open())}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.closed&&this.close(),this.innerHTML='<svg class="ct-circular-progress" viewBox="25 25 50 50">\n                <circle class="ct-circular-progress__path" cx="50" cy="50" r="20" \n                  fill="none" stroke-width="4" stroke-miterlimit="10"/>\n             </svg>';case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"close",value:function(){this.classList.add("ct-circular-progress--closed")}},{key:"open",value:function(){this.classList.remove("ct-circular-progress--closed")}}]),r}(i.a);Te.componentName="circular-progress",a.a.define(Te);var Oe=n(99),xe=n(52),Me=n(97),Ie=n(192);n(173),n(420);function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Ne=function(e){babelHelpers.inherits(r,e);var t,n=Le(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{label:{type:String},value:{type:String,toComponent:!0},disabled:{type:Boolean,toComponent:!0},selectedIndex:{type:Array,toComponent:!0},id:{type:String},inputId:{type:String},choices:{type:Array,default:[]},comment:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String},inputClasses:{type:String},compact:{type:Boolean}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-radio-helper-text--show"):n.classList.add("ct-radio-helper-text--show")}},{key:"supressNextChangeEvent",value:function(){this._ignoreNextChange=!0}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=this.toHtml(t),t.compact&&this.classList.add("ct-select-compact"),this._component=Ie.a.attachTo(this),this._component.listen("MDCList:action",(function(e){if(console.error("list action:",e),n._ignoreNextChange)n._ignoreNextChange=!1;else{var r={value:n.value,selectedIndex:n.selectedIndex,name:t.name,type:"select"};console.error({detail:r},"dispatched custom list action"),n.dispatchEvent(new CustomEvent("action",{detail:r,bubbles:!0,cancelable:!0}))}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setChoices",value:function(e){this._conf.choices=e;var t=this._createChoicesHtml(this._conf);this.querySelector(".mdc-list").innerHTML=t}},{key:"_createChoicesHtml",value:function(e){return e.choices.map((function(t,n){var r=Object(s.a)();return n||t.value,t.selected&&(t.label,t.value),'<li role="checkbox" data-value="'.concat(t.value,'" tabindex="').concat(n?"-1":"0",'" class="mdc-list-item ').concat(t.selected?"mdc-list-item--selected":"",'" ').concat(t.selected?'aria-selected="true" aria-checked="true"':"",'>\n                   <span class="mdc-list-item__graphic">\n                    <div class="mdc-checkbox">\n                     <input name="').concat(e.name||"",'" value="').concat(t.value,'" ').concat(t.selected?"checked":"",' type="checkbox" class="mdc-checkbox__native-control" id="').concat(r,'"/>\n                     <div class="mdc-checkbox__background">\n                       <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">\n                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>\n                       </svg>\n                       <div class="mdc-checkbox__mixedmark"></div>\n                     </div>\n                   </div>\n                 </span>\n                 <label class="mdc-list-item__text" for="').concat(r,'">').concat(t.label,"</label>\n                </li>")})).join("")}},{key:"toHtml",value:function(e){e.nameAsId?e.name:e.inputId||Object(s.a)(),e.helperId,e.helperClass;var t=this._createChoicesHtml(e);return e.inputClasses&&e.inputClasses,'<ul class="mdc-list" role="group" aria-label="'.concat(e.label||"",'">\n                   ').concat(t,"\n                  </ul>")}}]),r}(i.a);Ne.componentName="multi-select",Ne.classes="",a.a.define(Ne);n(421);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var De=function(e){babelHelpers.inherits(r,e);var t,n=Re(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},choices:{type:Array,default:[]},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.choices.map((function(t){return t.name=t.name||e.name,H.create(t)})).join("");return'<div class="ct-form-group-label">'.concat(e.label," ").concat(e.label?":":"",'</div><div class="ct-checkbox-group-choices">').concat(t,"</div>")}}]),r}(i.a);De.componentName="checkbox-group",a.a.define(De);n(422);function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Fe=function(e){babelHelpers.inherits(r,e);var t,n=Pe(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},comment:{type:String},textFieldData:{type:Object},actionLabel:{type:String},actionLabels:{type:Array,default:[]},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getValue",value:function(){return this.querySelector("text-field").value}},{key:"getName",value:function(){return this.querySelector("text-field input").getAttribute("name")}}],[{key:"toHtml",value:function(e){var t=u.a.create(e.textFieldData),n=e.comment?'<div class="ct-form-comment">'.concat(e.comment,"</div>"):"",r=e.actionLabels||[];e.actionLabel&&r.push({label:e.actionLabel,className:""});var o=r.map((function(e){return d.a.create(e)})).join("");return"".concat(t,"\n         ").concat(o,"\n         ").concat(n,"\n         ")}}]),r}(i.a);Fe.componentName="text-field-with-button",a.a.define(Fe);var He={ACTIVE:"mdc-slider--active",DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",FOCUS:"mdc-slider--focus",HAS_TRACK_MARKER:"mdc-slider--display-markers",IN_TRANSIT:"mdc-slider--in-transit",IS_DISCRETE:"mdc-slider--discrete"},Be={ARIA_DISABLED:"aria-disabled",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",CHANGE_EVENT:"MDCSlider:change",INPUT_EVENT:"MDCSlider:input",PIN_VALUE_MARKER_SELECTOR:".mdc-slider__pin-value-marker",STEP_DATA_ATTR:"data-step",THUMB_CONTAINER_SELECTOR:".mdc-slider__thumb-container",TRACK_MARKER_CONTAINER_SELECTOR:".mdc-slider__track-marker-container",TRACK_SELECTOR:".mdc-slider__track"},je={PAGE_FACTOR:4},qe=["mousedown","pointerdown","touchstart"],Ve=["mouseup","pointerup","touchend"],ze={mousedown:"mousemove",pointerdown:"pointermove",touchstart:"touchmove"},Ge="ArrowDown",We="ArrowLeft",Ue="ArrowRight",Ke="ArrowUp",$e="End",Ye="Home",Xe="PageDown",Je="PageUp",Ze=function(e){function t(n){var r=e.call(this,y.a({},t.defaultAdapter,n))||this;return r.savedTabIndex_=NaN,r.active_=!1,r.inTransit_=!1,r.isDiscrete_=!1,r.hasTrackMarker_=!1,r.handlingThumbTargetEvt_=!1,r.min_=0,r.max_=100,r.step_=0,r.value_=0,r.disabled_=!1,r.preventFocusState_=!1,r.thumbContainerPointerHandler_=function(){return r.handlingThumbTargetEvt_=!0},r.interactionStartHandler_=function(e){return r.handleDown_(e)},r.keydownHandler_=function(e){return r.handleKeydown_(e)},r.focusHandler_=function(){return r.handleFocus_()},r.blurHandler_=function(){return r.handleBlur_()},r.resizeHandler_=function(){return r.layout()},r}return y.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return He},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Be},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return je},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabIndex:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerThumbContainerInteractionHandler:function(){},deregisterThumbContainerInteractionHandler:function(){},registerBodyInteractionHandler:function(){},deregisterBodyInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},notifyInput:function(){},notifyChange:function(){},setThumbContainerStyleProperty:function(){},setTrackStyleProperty:function(){},setMarkerValue:function(){},setTrackMarkers:function(){},isRTL:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.isDiscrete_=this.adapter_.hasClass(He.IS_DISCRETE),this.hasTrackMarker_=this.adapter_.hasClass(He.HAS_TRACK_MARKER),qe.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionStartHandler_),e.adapter_.registerThumbContainerInteractionHandler(t,e.thumbContainerPointerHandler_)})),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.registerResizeHandler(this.resizeHandler_),this.layout(),this.isDiscrete_&&0===this.getStep()&&(this.step_=1)},t.prototype.destroy=function(){var e=this;qe.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionStartHandler_),e.adapter_.deregisterThumbContainerInteractionHandler(t,e.thumbContainerPointerHandler_)})),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.setupTrackMarker=function(){this.isDiscrete_&&this.hasTrackMarker_&&0!==this.getStep()&&this.adapter_.setTrackMarkers(this.getStep(),this.getMax(),this.getMin())},t.prototype.layout=function(){this.rect_=this.adapter_.computeBoundingRect(),this.updateUIForCurrentValue_()},t.prototype.getValue=function(){return this.value_},t.prototype.setValue=function(e){this.setValue_(e,!1)},t.prototype.getMax=function(){return this.max_},t.prototype.setMax=function(e){if(e<this.min_)throw new Error("Cannot set max to be less than the slider's minimum value");this.max_=e,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Be.ARIA_VALUEMAX,String(this.max_)),this.setupTrackMarker()},t.prototype.getMin=function(){return this.min_},t.prototype.setMin=function(e){if(e>this.max_)throw new Error("Cannot set min to be greater than the slider's maximum value");this.min_=e,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Be.ARIA_VALUEMIN,String(this.min_)),this.setupTrackMarker()},t.prototype.getStep=function(){return this.step_},t.prototype.setStep=function(e){if(e<0)throw new Error("Step cannot be set to a negative number");this.isDiscrete_&&("number"!=typeof e||e<1)&&(e=1),this.step_=e,this.setValue_(this.value_,!1,!0),this.setupTrackMarker()},t.prototype.isDisabled=function(){return this.disabled_},t.prototype.setDisabled=function(e){this.disabled_=e,this.toggleClass_(He.DISABLED,this.disabled_),this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setAttribute(Be.ARIA_DISABLED,"true"),this.adapter_.removeAttribute("tabindex")):(this.adapter_.removeAttribute(Be.ARIA_DISABLED),isNaN(this.savedTabIndex_)||this.adapter_.setAttribute("tabindex",String(this.savedTabIndex_)))},t.prototype.handleDown_=function(e){var t=this;if(!this.disabled_){this.preventFocusState_=!0,this.setInTransit_(!this.handlingThumbTargetEvt_),this.handlingThumbTargetEvt_=!1,this.setActive_(!0);var n=function(e){t.handleMove_(e)},r=ze[e.type],o=function(){t.handleUp_(),t.adapter_.deregisterBodyInteractionHandler(r,n),Ve.forEach((function(e){return t.adapter_.deregisterBodyInteractionHandler(e,o)}))};this.adapter_.registerBodyInteractionHandler(r,n),Ve.forEach((function(e){return t.adapter_.registerBodyInteractionHandler(e,o)})),this.setValueFromEvt_(e)}},t.prototype.handleMove_=function(e){e.preventDefault(),this.setValueFromEvt_(e)},t.prototype.handleUp_=function(){this.setActive_(!1),this.adapter_.notifyChange()},t.prototype.getClientX_=function(e){return e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].clientX:e.clientX},t.prototype.setValueFromEvt_=function(e){var t=this.getClientX_(e),n=this.computeValueFromClientX_(t);this.setValue_(n,!0)},t.prototype.computeValueFromClientX_=function(e){var t=this.max_,n=this.min_,r=(e-this.rect_.left)/this.rect_.width;return this.adapter_.isRTL()&&(r=1-r),n+r*(t-n)},t.prototype.handleKeydown_=function(e){var t=this.getKeyId_(e),n=this.getValueForKeyId_(t);isNaN(n)||(e.preventDefault(),this.adapter_.addClass(He.FOCUS),this.setValue_(n,!0),this.adapter_.notifyChange())},t.prototype.getKeyId_=function(e){return e.key===We||37===e.keyCode?We:e.key===Ue||39===e.keyCode?Ue:e.key===Ke||38===e.keyCode?Ke:e.key===Ge||40===e.keyCode?Ge:e.key===Ye||36===e.keyCode?Ye:e.key===$e||35===e.keyCode?$e:e.key===Je||33===e.keyCode?Je:e.key===Xe||34===e.keyCode?Xe:""},t.prototype.getValueForKeyId_=function(e){var t=this.max_,n=this.min_,r=this.step_||(t-n)/100;switch(this.adapter_.isRTL()&&(e===We||e===Ue)&&(r=-r),e){case We:case Ge:return this.value_-r;case Ue:case Ke:return this.value_+r;case Ye:return this.min_;case $e:return this.max_;case Je:return this.value_+r*je.PAGE_FACTOR;case Xe:return this.value_-r*je.PAGE_FACTOR;default:return NaN}},t.prototype.handleFocus_=function(){this.preventFocusState_||this.adapter_.addClass(He.FOCUS)},t.prototype.handleBlur_=function(){this.preventFocusState_=!1,this.adapter_.removeClass(He.FOCUS)},t.prototype.setValue_=function(e,t,n){if(void 0===n&&(n=!1),e!==this.value_||n){var r=this.min_,o=this.max_,i=e===r||e===o;this.step_&&!i&&(e=this.quantize_(e)),e<r?e=r:e>o&&(e=o),e=e||0,this.value_=e,this.adapter_.setAttribute(Be.ARIA_VALUENOW,String(this.value_)),this.updateUIForCurrentValue_(),t&&(this.adapter_.notifyInput(),this.isDiscrete_&&this.adapter_.setMarkerValue(e))}},t.prototype.quantize_=function(e){return Math.round(e/this.step_)*this.step_},t.prototype.updateUIForCurrentValue_=function(){var e=this,t=this.max_,n=this.min_,r=(this.value_-n)/(t-n),o=r*this.rect_.width;this.adapter_.isRTL()&&(o=this.rect_.width-o);var i=w(window,"transform"),a=S(window,"transitionend");if(this.inTransit_){var s=function(){e.setInTransit_(!1),e.adapter_.deregisterThumbContainerInteractionHandler(a,s)};this.adapter_.registerThumbContainerInteractionHandler(a,s)}requestAnimationFrame((function(){e.adapter_.setThumbContainerStyleProperty(i,"translateX("+o+"px) translateX(-50%)"),e.adapter_.setTrackStyleProperty(i,"scaleX("+r+")")}))},t.prototype.setActive_=function(e){this.active_=e,this.toggleClass_(He.ACTIVE,this.active_)},t.prototype.setInTransit_=function(e){this.inTransit_=e,this.toggleClass_(He.IN_TRANSIT,this.inTransit_)},t.prototype.toggleClass_=function(e,t){t?this.adapter_.addClass(e):this.adapter_.removeClass(e)},t}(x.a),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.foundation_.getMin()},set:function(e){this.foundation_.setMin(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.foundation_.getMax()},set:function(e){this.foundation_.setMax(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.foundation_.getStep()},set:function(e){this.foundation_.setStep(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.thumbContainer_=this.root_.querySelector(Be.THUMB_CONTAINER_SELECTOR),this.track_=this.root_.querySelector(Be.TRACK_SELECTOR),this.pinValueMarker_=this.root_.querySelector(Be.PIN_VALUE_MARKER_SELECTOR),this.trackMarkerContainer_=this.root_.querySelector(Be.TRACK_MARKER_CONTAINER_SELECTOR)},t.prototype.getDefaultFoundation=function(){var e=this;return new Ze({hasClass:function(t){return e.root_.classList.contains(t)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getAttribute:function(t){return e.root_.getAttribute(t)},setAttribute:function(t,n){return e.root_.setAttribute(t,n)},removeAttribute:function(t){return e.root_.removeAttribute(t)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},getTabIndex:function(){return e.root_.tabIndex},registerInteractionHandler:function(t,n){return e.listen(t,n,Object(A.a)())},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n,Object(A.a)())},registerThumbContainerInteractionHandler:function(t,n){e.thumbContainer_.addEventListener(t,n,Object(A.a)())},deregisterThumbContainerInteractionHandler:function(t,n){e.thumbContainer_.removeEventListener(t,n,Object(A.a)())},registerBodyInteractionHandler:function(e,t){return document.body.addEventListener(e,t)},deregisterBodyInteractionHandler:function(e,t){return document.body.removeEventListener(e,t)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},notifyInput:function(){return e.emit(Be.INPUT_EVENT,e)},notifyChange:function(){return e.emit(Be.CHANGE_EVENT,e)},setThumbContainerStyleProperty:function(t,n){e.thumbContainer_.style.setProperty(t,n)},setTrackStyleProperty:function(t,n){return e.track_.style.setProperty(t,n)},setMarkerValue:function(t){return e.pinValueMarker_.innerText=t.toLocaleString()},setTrackMarkers:function(t,n,r){var o=t.toLocaleString(),i="linear-gradient(to right, currentColor 2px, transparent 0) "+("0 center / calc((100% - 2px) / "+("(("+n.toLocaleString()+" - "+r.toLocaleString()+") / "+o+")")+") 100% repeat-x");e.trackMarkerContainer_.style.setProperty("background",i)},isRTL:function(){return"rtl"===getComputedStyle(e.root_).direction}})},t.prototype.initialSyncWithDOM=function(){var e=this.parseFloat_(this.root_.getAttribute(Be.ARIA_VALUENOW),this.value),t=this.parseFloat_(this.root_.getAttribute(Be.ARIA_VALUEMIN),this.min),n=this.parseFloat_(this.root_.getAttribute(Be.ARIA_VALUEMAX),this.max);t>=this.max?(this.max=n,this.min=t):(this.min=t,this.max=n),this.step=this.parseFloat_(this.root_.getAttribute(Be.STEP_DATA_ATTR),this.step),this.value=e,this.disabled=this.root_.hasAttribute(Be.ARIA_DISABLED)&&"false"!==this.root_.getAttribute(Be.ARIA_DISABLED),this.foundation_.setupTrackMarker()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.stepUp=function(e){void 0===e&&(e=this.step||1),this.value+=e},t.prototype.stepDown=function(e){void 0===e&&(e=this.step||1),this.value-=e},t.prototype.parseFloat_=function(e,t){var n=parseFloat(e);return"number"==typeof n&&isFinite(n)?n:t},t}(k.a);n(423),n(424);function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var tt=function(e){babelHelpers.inherits(r,e);var t,n=et(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{value:{type:String,toComponent:!0},min:{type:Number,toComponent:!0},max:{type:Number,toComponent:!0},step:{type:Number,toComponent:!0,default:0},disabled:{type:Boolean,toComponent:!0},id:{type:String},label:{type:String},inputId:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String}}}}]),babelHelpers.createClass(r,[{key:"setHelperText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Set helper text to:",e),this._component.valid=t;var n=this.querySelector(".mdc-text-field-helper-text");n&&(n.innerHTML=e),t?n.classList.remove("ct-checkbox-helper-text--show"):n.classList.add("ct-checkbox-helper-text--show")}},{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),this._component=Qe.attachTo(this.querySelector(".mdc-slider")),this._component.listen("MDCSlider:change",(function(e){var r=console.log("About to dispatch range change event",r);n.dispatchEvent(new CustomEvent("change",{detail:{value:n.value,name:t.name,type:"range"},bubbles:!0,cancelable:!0}))})),this._component.listen("MDCSlider:update",(function(e){n.dispatchEvent(new CustomEvent("update",{detail:{value:n.value,name:t.name,type:"range"},bubbles:!0,cancelable:!0}))}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"layout",value:function(){this._component&&this._component.layout()}}],[{key:"toHtml",value:function(e){e.nameAsId?e.name:e.inputId||Object(s.a)(),e.helperId,e.helperClass;var t=e.hint?'<icon-button data-tooltip aria-label="'.concat(e.hint,'" icon-name="help"></icon-button>'):"";return'<div class="ct-slider-label">'.concat(e.label||"",'</div>\n             <div class="ct-slider-holder">\n              <span class="ct-slider-label-min">').concat(e.minLabel||"",'</span> \n              <div class="mdc-slider mdc-slider--discrete" tabindex="0" role="slider"\n               aria-valuemin="').concat(e.minimum,'" aria-valuemax="').concat(e.maximum,'" aria-valuenow="').concat(e.initialValue,'"\n               data-step="').concat(e.step,'" aria-label="').concat(e.label,'">\n                <div class="mdc-slider__track-container">\n                 <div class="mdc-slider__track"></div>\n                </div>\n                <div class="mdc-slider__thumb-container">\n                 <div class="mdc-slider__pin">\n                  <span class="mdc-slider__pin-value-marker"></span>\n                 </div>\n                 <svg class="mdc-slider__thumb" width="21" height="21">\n                  <circle cx="10.5" cy="10.5" r="7.875"></circle>\n                 </svg>\n                 <div class="mdc-slider__focus-ring"></div>\n                </div> \n              </div>\n              <span class="ct-slider-label-max">').concat(e.maxLabel||"","</span>\n             </div>\n               ").concat(t)}}]),r}(i.a);tt.componentName="single-range-slider",a.a.define(tt);n(425);function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var rt=function(e){babelHelpers.inherits(r,e);var t,n=nt(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},checkType:{type:String,default:"radio"},elevation:{type:Number,default:0},choices:{type:Array,default:[]},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=e.checkType,n=e.choices.map((function(n){var r=Object(s.a)();return'<label class="" for="'.concat(r,'" data-label="').concat(n.label,'">\n                  <input type="').concat(t,'" id="').concat(r,'" class="" name="').concat(e.name,'" value="').concat(n.value,'" ').concat(n.checked?"checked":"",' />\n                  <span class="').concat(n.className?n.className:"",'">\n                     ').concat(n.imgUrl?'<img alt="'.concat(n.label,'" src="').concat((window._ctImgPath||"")+n.imgUrl,'">'):"","\n                     ").concat(n.text?n.text:"","\n                     ").concat(n.icon?'<ct-icon name="'.concat(n.icon,'"/>'):"","\n                  </span>\n                 </label>")})).join("");return"".concat(e.label?'<span class="ct-image-radio-label">'.concat(e.label,":</span>"):"").concat(n)}}]),r}(i.a);rt.componentName="image-radio",a.a.define(rt);n(426);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var it=function(e){babelHelpers.inherits(r,e);var t,n=ot(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},choices:{type:Array,default:[]},multiple:{type:Boolean},flow:{type:Boolean},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),t.multipleSelect&&this.setAttribute("multiple",""),t.name&&this.setAttribute("name",t.name);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t="ct-selectable-item";e.flow&&(t+=" ct-selectable-item-flow");var n=e.choices.map((function(e,n){return'<div tabindex="0" role="button" data-index="'.concat(n,'" class="').concat(t," ").concat(e.selected?"ct-select-selected":"",'" title="').concat(e.label?e.label:"",'" value="').concat(e.value,'">').concat(e.content,"</div>")})).join(""),r=e.height?"height:".concat(e.height,";"):"",o=(e.multipleSelect,e.hideLabel||!e.label?"":'<span class="ct-selectable-list-label">'.concat(e.label,"</span>"));return"".concat(o,'\n    <div class="ct-selectable-list-choices" style="').concat(r,'">').concat(n,"</div>")}}]),r}(i.a);it.classes="ct-selectable-list ct-noselect",it.componentName="select-list",a.a.define(it);n(427);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var st=function(e){babelHelpers.inherits(r,e);var t,n=at(r);function r(){var e;return babelHelpers.classCallCheck(this,r),(e=n.call(this))._isMobile=!!document.querySelector(".ct-mobile"),e}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{id:{type:String},label:{type:String},inputId:{type:String},width:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String},minValue:{type:Number,default:0},minName:{type:String},minTextLabel:{type:String},minDirty:{type:Boolean},startMin:{type:Number},maxValue:{type:Number,default:3e3},maxName:{type:String},maxTextLabel:{type:String},maxOnly:{type:Boolean},maxDirty:{type:Boolean},startMax:{type:Number},minRange:{type:Number,default:0},maxRange:{type:Number,default:3e3},roundTo:{type:Number,default:5},roundLevels:{type:Array},powerMultiply:{type:Number},powerAdd:{type:Number},powerScale:{type:Boolean},powerFactor:{type:Number},powerRoundOuputs:{type:Number}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"layout",value:function(){this.redraw()}},{key:"redraw",value:function(){if(this.offsetHeight){this._leftKnobWidth=this._leftKnob.clientWidth,this._rightKnobWidth=this._rightKnob.clientWidth;var e=this._o.startMin||this._o.minValue,t=this._o.startMax||this._o.maxValue;"_lastMinSet"in this&&(e=this._lastMinSet,t=this._lastMaxSet),this._setPositionsFromValues(e,t),this._updateOutput(),this._updateFields()}}},{key:"_moveKnob",value:function(e,t){Object(c.b)(e),t.classList.add("ct-range-knob-moving"),this._startX=e.clientX,this._currentPosition=this.getBoundingClientRect().left,this._startPosition=t.offsetLeft,this._mouseOffset=this._startX-t.getBoundingClientRect().left}},{key:"_moveLeftKnob",value:function(e){Object(c.b)(e),this._leftKnobMoving=!0,this._moveKnob(e,this._leftKnob)}},{key:"_moveRightKnob",value:function(e){Object(c.b)(e),this._rightKnobMoving=!0,this._moveKnob(e,this._rightKnob)}},{key:"_moveRange",value:function(e){Object(c.b)(e),this._rangeMoving=!0,this._startX=e.clientX,this._currentPosition=this.getBoundingClientRect().left,this._startPosition=this._range.offsetLeft,this._currentWidth=this._range.style.width.replace(/[^-\d\.]/g,""),this._mouseOffset=this._startX-this._rightKnob.getBoundingClientRect().left}},{key:"_updateFields",value:function(e){var t=this.getMinValue(e),n=this.getMaxValue(e);this._minField.value=t,this._maxField.value=n,this._dirty&&(this._lastMinSet=this._minField.value,this._lastMaxSet=this._maxField.value)}},{key:"_handleValueTap",value:function(e){var t=this;if(!e.currentTarget.querySelector("input")){var n=parseFloat(e.currentTarget.innerHTML),r="min";e.currentTarget.classList.contains("ct-range-max-value")&&(r="max"),e.currentTarget.innerHTML='<input size="4" tabindex="0" data-type="'.concat(r,'" type="number" value="').concat(n,'"/>');var o=e.currentTarget.querySelector("input");o.focus(),o.addEventListener("blur",(function(e){return t._handleValueChange(e)})),o.addEventListener("keypress",(function(e){13==e.keyCode&&e.currentTarget.blur()}))}}},{key:"_handleValueChange",value:function(e){var t=parseFloat(e.currentTarget.value);"min"==e.currentTarget.getAttribute("data-type")?(this._setPositionsFromValues(t,this.getMaxValue()),this._minField.classList.remove("ct-form-ignore"),this._minField.value=t,this._lastMinSet=t,this._setMinOutputValue(t)):(this._setPositionsFromValues(this.getMinValue(),t),this._maxField.classList.remove("ct-form-ignore"),this._maxField.value=t,this._lastMaxSet=t,this._setMaxOutputValue(t))}},{key:"markDirty",value:function(){this._dirty||(this._dirty=!0,this._minField.classList.remove("ct-form-ignore"),this._maxField.classList.remove("ct-form-ignore"))}},{key:"_stopMoving",value:function(){var e=this._leftKnobMoving||this._rightKnobMoving;this._leftKnobMoving=this._rightKnobMoving=!1,e&&(this._leftKnob.classList.remove("ct-range-knob-moving"),this._rightKnob.classList.remove("ct-range-knob-moving"),this.markDirty(),this._updateFields())}},{key:"_round",value:function(e,t){if(t)return{round:e};var n=function(e,t){if(t>=1)return Math.round(e/t)*t;if(t>=0){var n=1/t;return Math.round(e*n)/n}return parseFloat(e.toFixed(-1*t))};if(this._o.roundLevels){for(var r=this._o.roundLevels.length,o=0;o<r;o++)if(this._o.roundLevels[o].max&&e<this._o.roundLevels[o].max)return{round:n(e,this._o.roundLevels[o].roundTo),roundTo:this._o.roundLevels[o].roundTo,outputRoundTo:this._o.roundLevels[o].outputRoundTo,units:this._o.roundLevels[o].units};return{round:n(e,this._o.roundLevels[r-1].roundTo),roundTo:this._o.roundLevels[r-1].roundTo,outputRoundTo:this._o.roundLevels[r-1].outputRoundTo,units:this._o.roundLevels[r-1].units}}return this._o.roundTo?{round:n(e,this._o.roundTo)}:{round:e}}},{key:"getMinValue",value:function(e){if(this.offsetWidth){var t=this._round(this._getValueFromPosition(this._getMinPosition()),e),n=t.round;t.units;return n}return this._o.minValue}},{key:"getMaxValue",value:function(e){if(this.offsetWidth){var t=this._round(this._getValueFromPosition(this._getMaxPosition()),e),n=t.round;t.units;return n}return this._o.maxValue}},{key:"_getMinPosition",value:function(){return this._leftKnob.offsetLeft+this._leftKnobWidth}},{key:"_getMaxPosition",value:function(){return this._rightKnob.offsetLeft}},{key:"_getOurWidth",value:function(){return this._ourWidth||(this._ourWidth=this.querySelector(".ct-range-track").clientWidth),this._ourWidth}},{key:"_getValueFromPosition",value:function(e){e<0&&(e=0);this._o.powerMultiply,this._o.powerAdd;return this._o.powerScale?this._o.minValue+(this._o.maxValue-this._o.minValue)*Math.pow(e/this._getOurWidth(),this._o.powerFactor):this._o.minValue+(this._o.maxValue-this._o.minValue)*(e/this._getOurWidth())}},{key:"_getPositionFromValue",value:function(e){return this._o.powerScale?Math.pow((e-this._o.minValue)/(this._o.maxValue-this._o.minValue),1/this._o.powerFactor)*this._getOurWidth():(e-this._o.minValue)/(this._o.maxValue-this._o.minValue)*this._getOurWidth()}},{key:"setMinMax",value:function(e,t){this._setPositionsFromValues(e,t),this._setMinOutputValue(e,!0),this._setMaxOutputValue(t,!0),this._minField.value=e,this._maxField.value=t,this._lastMinSet=this._minField.value,this._lastMaxSet=this._maxField.value}},{key:"_setPositionsFromValues",value:function(e,t){this._leftKnob.style.left=this._getPositionFromValue(e)-this._leftKnobWidth+"px",this._rightKnob.style.left=this._getPositionFromValue(t)+"px",this._range.style.left=this._leftKnob.offsetLeft+this._leftKnobWidth/2+"px",this._range.style.width=this._rightKnob.offsetLeft-this._leftKnob.offsetLeft+"px"}},{key:"_setOutputValue",value:function(e,t,n){if(!n&&this._o.roundOutputs){var r=this._round(t),o=r.round,i=r.units,a=r.outputRoundTo;i&&a&&(t=parseInt(o/a)+" "+i)}e.innerHTML=t}},{key:"_setMinOutputValue",value:function(e,t){this._setOutputValue(this._minOutput,e,t)}},{key:"_setMaxOutputValue",value:function(e,t){this._setOutputValue(this._maxOutput,e,t)}},{key:"_updateOutput",value:function(e){this._setMinOutputValue(this.getMinValue(e),e),this._setMaxOutputValue(this.getMaxValue(e),e)}},{key:"_move",value:function(e){if(Object(c.b)(e),this._leftKnobMoving||this._rightKnobMoving){var t=e.clientX,n=this._startPosition+(t-this._startX),r=this._getValueFromPosition(this._getMaxPosition()),o=this._getValueFromPosition(this._getMinPosition());if(this._leftKnobMoving){var i=this._getValueFromPosition(n+this._leftKnobWidth);(i=Math.min(Math.max(i,this._o.minValue),this._o.maxValue))>r&&(r=i),this._setPositionsFromValues(i,r)}if(this._rightKnobMoving){var a=this._getValueFromPosition(n);(a=Math.min(Math.max(a,this._o.minValue),this._o.maxValue))<o&&(o=a),this._setPositionsFromValues(o,a)}this._rangeMoving,this._updateOutput()}}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,o,i,a,s,l,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._o=t,this.innerHTML=r.toHtml(t),this.classList.add("ct-noselect"),t.maxOnly&&this.classList.add("ct-range-max-only"),n=Object(c.a)("pointerdown"),o=Object(c.a)("pointerup"),i=Object(c.a)("pointermove"),(a=this.querySelector(".ct-range-knob-left")).addEventListener(n,(function(e){return u._moveLeftKnob(e)})),(s=this.querySelector(".ct-range-knob-right")).addEventListener(n,(function(e){return u._moveRightKnob(e)})),(l=this.querySelector(".ct-range-range")).addEventListener(n,(function(e){return u._moveRange(e)})),document.addEventListener(o,(function(e){return u._stopMoving(e)})),document.addEventListener(i,(function(e){return u._move(e)})),this.querySelector(".ct-range-min-value").addEventListener("tap",(function(e){return u._handleValueTap(e)})),this.querySelector(".ct-range-max-value").addEventListener("tap",(function(e){return u._handleValueTap(e)})),this.querySelector(".ct-range-min-field").addEventListener("change",(function(e){return u.markDirty()})),this.querySelector(".ct-range-max-field").addEventListener("change",(function(e){return u.markDirty()})),a.ondragstart=function(){return!1},s.ondragstart=function(){return!1},l.ondragstart=function(){return!1},this._leftKnobMoving=!1,this._rightKnobMoving=!1,this._rangeMoving=!1,this._leftKnob=a,this._rightKnob=s,this._range=l,this._minField=this.querySelector(".ct-range-min-field"),this._maxField=this.querySelector(".ct-range-max-field"),this._minOutput=this.querySelector(".ct-range-min-value"),this._maxOutput=this.querySelector(".ct-range-max-value"),this.redraw();case 33:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){}}],[{key:"toHtml",value:function(e){var t=u.a.create({name:e.minName,label:e.minTextLabel||Object(o.d)("Minimum value"),inputClasses:"ct-range-min-field "+(e.minDirty?"":"ct-form-ignore"),value:e.startMin||e.minValue}),n=u.a.create({name:e.maxName,label:e.maxTextLabel||Object(o.d)("Maximum value"),inputClasses:"ct-range-max-field "+(e.maxDirty?"":"ct-form-ignore"),value:e.startMax||e.maxValue});return"".concat(e.label?'<div class="ct-range-slider-label">'.concat(e.label,"</div>"):"",'\n             <div class="ct-range-output-values">\n               <span class="ct-range-min-value ct-clickable"></span> <span class="ct-range-hyphen">-</span> <span class="ct-range-max-value ct-clickable"></span>\n             </div>\n             <div class="ct-range-rail-and-thumbs">\n              <div class="ct-range-track"></div>\n              <div class="ct-range-range"></div>\n              <div class="ct-range-knob ct-range-knob-left"></div>\n              <div class="ct-range-knob ct-range-knob-right"></div>\n             </div>\n             <div class="ct-range-slider-accessibility-panel ct-accessible-content">\n              ').concat(t,"               \n              ").concat(n,"               \n             </div>")}}]),r}(i.a);st.componentName="double-range-slider",a.a.define(st);n(428),n(176);function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var lt=function(e){babelHelpers.inherits(n,e);var t=ct(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_render",value:function(){this.hasAttribute("shadow-depth")&&this.classList.add("ct-elev--z".concat(this.getAttribute("shadow-depth"))),this.setAttribute("role","button"),this.setAttribute("tabindex",0),this.setIcon(this.getAttribute("icon-name"))}},{key:"setIcon",value:function(e){this.innerHTML='<i class="material-icons">'.concat(e,"</i>")}},{key:"destroy",value:function(){}},{key:"connectedCallback",value:function(){this._render()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));lt.createHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconName,n=void 0===t?"":t,r=e.tooltip,o=void 0===r?"":r,i=e.className,a=void 0===i?"":i,s=e.shadowDepth,c=void 0===s?"":s;return o&&(o='data-tooltip aria-label="'.concat(o,'"')),c&&(c='shadow-depth="'.concat(c,'"')),'<icon-button icon-name="'.concat(n,'" class="').concat(a,'" ').concat(c," ").concat(o,"></icon-button>")},window.customElements.define("icon-button",lt);n(429);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var dt=function(e){babelHelpers.inherits(r,e);var t,n=ut(r);function r(){return babelHelpers.classCallCheck(this,r),n.apply(this,arguments)}return babelHelpers.createClass(r,[{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._rulesById={},this._groupsById={},this.innerHTML=r.toHtml(t),this.classList.add("ct-expression-builder-group"),this.setAttribute("name",t.name),this._del=new l.a,this._del.delegate(this,"tap",".ct-expression-builder-add-rule",this._handleAddRule,this),this._del.delegate(this,"tap",".ct-expression-builder-add-group",this._handleAddGroup,this),this._del.delegate(this,"tap",".ct-expression-builder-remove-group",this._handleRemoveGroup,this),this._del.delegate(this,"tap",".ct-expression-builder-remove-rule",this._handleRemoveRule,this),this._del.delegate(this,"change",".ct-expression-rule-param-select",this._handleParamTypeChange,this);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setup",value:function(e,t){console.log("TRYING TO SETUP expression builder:",e," rules:",t),this._params=e,this._rootGroup={rules:t.rules||[],root:!0,operator:t.operator,element:this},console.log("add root group:",this._rootGroup),this._addSubgroup(this._rootGroup),console.log("FINISHED SETUP expression builder")}},{key:"_setupRules",value:function(e){}},{key:"_addSubgroup",value:function(e){var t=this,n=h.a.create({classes:"ct-expression-group-operator-holder",inputClasses:"ct-form-ignore ct-expression-group-operator",label:"",choices:[{label:Object(o.d)("All"),selected:"and"==e.operator,value:"and"},{label:Object(o.d)("Any"),selected:"or"==e.operator,value:"or"}]});e.groupId=Object(s.a)(),this._groupsById[e.groupId]=e;var r='<div class="ct-expression-group-data-group" data-group-id="'.concat(e.groupId,'">\n                  <div class="ct-expression-group-operator-line">\n                    ').concat(Object(o.b)("{RULE_TYPE_SELECTOR} of the following are true",{subs:[["RULE_TYPE_SELECTOR",n]]}),'\n                    <icon-button data-tooltip aria-label="').concat(Object(o.d)("Add new rule"),'" icon-name="add_circle" class="ct-expression-builder-add-rule"></icon-button>\n                    <icon-button data-tooltip aria-label="').concat(Object(o.d)("Add new rule group"),'" icon-name="group_work" class="ct-expression-builder-add-group"></icon-button>\n                    ').concat(e.root?"":'<icon-button data-tooltip aria-label="'.concat(Object(o.d)("Remove rule group"),'" class="ct-expression-builder-remove-group" icon-name="remove_circle"></icon-button>'),'\n                  </div>\n                  <div class="ct-expression-builder-rule-list"></div>\n                 </div>');e.element.innerHTML=r,e.rules.forEach((function(n){return t._addRule(n,e,!0)}))}},{key:"_addRule",value:function(e,t){if(e.group){var n=document.createElement("div");n.classList.add("ct-expression-builder-group"),t.element.appendChild(n),e.group.element=n,this._addSubgroup(e.group,!0),e.group.parentGroup=t,e.group.parentRule=e}else{var r=t.element.querySelector(".ct-expression-builder-rule-list"),o=document.createElement("div");e.ruleId=Object(s.a)(),this._rulesById[e.ruleId]=e,o.classList.add("ct-expression-rule"),o.innerHTML=this._ruleToHTML(this._params,e),r.appendChild(o),e.element=o}e.parentGroup=t}},{key:"_ruleToHTML",value:function(e,t){var n=e[t.param];console.log("rule to html values:",t,n);var r=-1==t.operator?n.operators[0]:n.operators.find((function(e){return e.value==t.operator})),i=e.map((function(e){return console.log("PARAM CHOICES p:",e),{label:e.label,value:e.value,selected:e.value==t.param}})),a=n.operators.map((function(e){return{label:e.label,value:e.value,selected:e.value==r.value}})),s=h.a.create({label:"",choices:i,classes:"ct-expression-rule-param-select",inputClasses:"ct-expression-rule-param ct-form-ignore"});if(s+=h.a.create({label:"",choices:a,inputClasses:"ct-expression-rule-operator ct-form-ignore"}),n.values){s+=h.a.create({label:"",choices:n.values.map((function(e){return{label:e.label,value:e.value,selected:e.value==t.value}})),inputClasses:"ct-expression-rule-value ct-form-ignore",classes:"ct-expression-builder-value-selectfield"})}else s+=u.a.create({label:"",value:-1==t.value?"":t.value,inputCasses:"ct-expression-rule-value ct-form-ignore",classes:"ct-expression-builder-value-textfield"});return s+='<icon-button data-tooltip aria-label="'.concat(Object(o.d)("Remove rule"),'" class="ct-expression-builder-remove-rule" icon-name="remove_circle"></icon-button>'),'<div class="ct-expression-data-rule" data-rule-id="'.concat(t.ruleId,'">').concat(s,"</div>")}},{key:"destroy",value:function(){this._del.destroy()}},{key:"toJSON",value:function(){if(!this._rootGroup)return{};function e(t){var n=t.element.querySelector("ct-select");return n||console.error("no select for group:",t.element,t.element.innerHTML),{rules:t.rules.map((function(t){return function(t){var n=null;if(t.group)n={group:e(t.group)};else{var r=t.element.querySelector(".ct-expression-rule-value").value;n={param:t.element.querySelector(".ct-expression-rule-param").value,operator:t.element.querySelector(".ct-expression-rule-operator").value,value:r}}return n}(t)})).filter((function(e){return-1!=e.value&&(!e.group||e.group.rules.length>0)})),operator:n.value}}return e(this._rootGroup)}},{key:"_handleAddRule",value:function(e){var t=e.currentTarget.parentNode.parentNode.getAttribute("data-group-id"),n=this._groupsById[t],r={param:0,operator:-1,value:-1};this._addRule(r,n),n.rules.push(r)}},{key:"_handleAddGroup",value:function(e){var t=e.currentTarget.parentNode.parentNode.getAttribute("data-group-id"),n=this._groupsById[t],r=document.createElement("div");r.classList.add("ct-expression-builder-group"),n.element.appendChild(r);var o={element:r,rules:[]};this._addSubgroup(o);var i={group:o,parentGroup:n};i.parentRule=i,n.rules.push(i),o.parentGroup=n;var a={param:0,operator:-1,value:-1};this._addRule(a,o),o.rules.push(a)}},{key:"_handleRemoveRule",value:function(e){var t=e.currentTarget.parentNode.getAttribute("data-rule-id"),n=this._rulesById[t];this._deleteRule(n)}},{key:"_deleteRule",value:function(e){var t=e.parentGroup,n=t.rules.filter((function(t){return t!=e}));t.rules=n,e.element.parentNode.removeChild(e.element)}},{key:"_handleRemoveGroup",value:function(e){var t=e.currentTarget.parentNode.parentNode.getAttribute("data-group-id"),n=this._groupsById[t];this._deleteGroup(n)}},{key:"_handleParamTypeChange",value:function(e){console.error("param change:",e);var t=e.currentTarget.parentNode.getAttribute("data-rule-id"),n=this._rulesById[t];this._deleteRule(n),n={param:e.currentTarget.value,operator:-1,parentGroup:n.parentGroup,value:-1},this._addRule(n,n.parentGroup),n.parentGroup.rules.push(n)}},{key:"_deleteGroup",value:function(e){e.element.parentNode.removeChild(e.element);var t=e.parentGroup,n=t.rules.filter((function(t){return!t.group||t.group!=e}));t.rules=n}}],[{key:"toHtml",value:function(e){return""}},{key:"properties",get:function(){return{id:{type:String},label:{type:String},inputId:{type:String},width:{type:String},hide:{type:Boolean},name:{type:String},nameAsId:{type:Boolean},nameAsContainerId:{type:Boolean},classes:{type:String}}}}]),r}(i.a);dt.componentName="expression-builder",a.a.define(dt);n(430);function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var pt=function(e){babelHelpers.inherits(r,e);var t,n=ht(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},comment:{type:String},textFieldData:{type:Object},selectData:{type:Object},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=u.a.create(e.textFieldData),n=e.comment?'<div class="ct-form-comment">'.concat(e.comment,"</div>"):"",r=h.a.create(e.selectData);return"".concat(t,"\n         ").concat(r,"\n         ").concat(n,"\n         ")}}]),r}(i.a);pt.componentName="text-field-with-select",a.a.define(pt);n(431);function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var vt=function(e){babelHelpers.inherits(r,e);var t,n=ft(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{name:{type:String},nameAsId:{type:Boolean},title:{type:String},label:{type:String},classes:{type:String},elevation:{type:Number,default:0},accept:{type:String},width:{type:String}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){this._del=new l.a,this._del.delegate(this,"change","input[type='file']",this._handleFileSelect,this)}},{key:"_handleFileSelect",value:function(e){for(var t,n=this,r=e.target.files,o="",i=0,a=0;t=r[a];a++){var s=new FileReader;s.onload=function(e){o+=e.target.result+"\n",++i==r.length&&n.dispatchEvent(new CustomEvent("file-uploaded",{detail:{content:o},bubbles:!0,cancelable:!0}))},s.readAsText(t)}}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML=r.toHtml(t),(n=t.title||t.label)&&(this.setAttribute("aria-label",n),this.setAttribute("data-tooltip",""));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"toHtml",value:function(e){var t=Object(s.a)();return'<label class="mdc-button mdc-button--raised" for="'.concat(t,'">\n                    ').concat(e.label,'\n                    <i class="material-icons">file_upload</i>\n                  <input id="').concat(t,'" type="file" ').concat(e.accept?'accept="'.concat(e.accept,'"'):"",' \n                    class="ct-hidden" name="files" multiple/>\n\n                 </label>\n                 ')}}]),r}(i.a);vt.componentName="file-input",vt.classes="ct-file-input image_input_button",a.a.define(vt);var mt=n(21),gt=n(30);function yt(e,t,n){return e&&0!=e.length?e.reduce((function(e,r){var o=n(r),i=n(e);return t(o,i)==o?r:e})):null}n(432);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"Form",(function(){return Ct}));var bt=new r.a("form"),Ct=function(e){babelHelpers.inherits(r,e);var t,n=_t(r);function r(){var e;return babelHelpers.classCallCheck(this,r),(e=n.call(this)).initAggregator(),e}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{children:{type:Array},action:{type:String},id:{type:String},formId:{type:String},noFormTag:{type:Boolean}}}}]),babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){this._del=new l.a,this._del.delegate(this,"tap",".ct-selectable-item",this._selectListSelected,this),this._del.delegate(this,"tap",".ct-tab-label",this._tabChange,this),this._del.delegate(this,"tap","text-field-with-button button",this._textFieldButtonClick,this),this._del.delegate(this,Object(c.a)("pointerover"),".ct-selectable-item",this._selectListHover,this),this._del.delegate(this,Object(c.a)("pointerout"),".ct-selectable-item",this._selectListHoverEnd,this),this._del.delegate(this,"change","input",this._inputChange,this),this._del.delegate(this,"change","single-range-slider",this._rangeChange,this),this._del.delegate(this,"change","ct-select",this._selectChange,this),this._del.delegate(this,"tap","*[data-reset-value]",this._handleReset,this)}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.children&&t.children.length){e.next=2;break}return e.abrupt("return");case 2:this.setupFromJSON(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this._del.destroy()}},{key:"_setFromJson",value:function(e){var t=r.childrenToHTML(e.children);e.noFormTag?this.innerHTML=t:this.innerHTML='<form id="'.concat(e.formId||Object(s.a)(),'" ').concat(void 0!==e.action&&e.action?'action="'.concat(e.action,'"'):'action="javascript: void(0)"',">")+t+"</form>"}},{key:"setupFromJSON",value:function(e){this._defaultJson=e,this._setFromJson(e)}},{key:"layout",value:function(){a.a.layoutOnNeeded(document)}},{key:"reset",value:function(){this._defaultJson&&this._setFromJson(this._defaultJson)}},{key:"_handleReset",value:function(e){var t=this.querySelector("#"+e.currentTarget.getAttribute("data-reset-parent-id")+" input");t.value=e.currentTarget.getAttribute("data-reset-value"),this.fire("inputChange",{value:t.value,checked:t.checked,type:t.type,name:t.getAttribute("name")})}},{key:"_selectChange",value:function(e){e.currentTarget;bt.log({e:e},"form select change firing selectChange"),this.fire("selectChange",e.detail)}},{key:"_rangeChange",value:function(e){e.currentTarget;bt.log({e:e},"range change"),this.fire("inputChange",e.detail)}},{key:"_inputChange",value:function(e){var t=e.currentTarget;bt.log({e:e},"input change"),this.fire("inputChange",{value:t.value,checked:t.checked,type:t.type,name:t.getAttribute("name")})}},{key:"_tabChange",value:function(e){var t=this,n=e.currentTarget;bt.log({e:e},"tab change");var r=this.querySelector("#"+n.getAttribute("data-tabid"));r?Array.prototype.forEach.call(r.querySelectorAll("range-slider"),(function(e){bt.log({s:e},"about to redraw range slider"),setTimeout((function(){e.redraw(!0)}),0)})):bt.log({e:e},"no tab panel"),setTimeout((function(){t.fire("tabChange",{tabPanel:r,tabName:n.getAttribute("data-tabname")})}),0)}},{key:"_selectListHover",value:function(e){var t=e.currentTarget;bt.log({item:t},"select list hover"),this.fire("hoverListItem",{value:t.getAttribute("value"),name:t.parentNode.getAttribute("name")})}},{key:"_selectListHoverEnd",value:function(e){var t=e.currentTarget;this.fire("hoverEndListItem",{value:t.getAttribute("value"),name:t.parentNode.getAttribute("name")})}},{key:"_clearSelectListSelections",value:function(e){Array.prototype.forEach.call(e.querySelectorAll(".ct-select-selected"),(function(e){return e.classList.remove("ct-select-selected")}))}},{key:"_selectListElements",value:function(e,t,n){bt.log("select list elem start:"+t+" end:"+n);e.querySelector("*[data-index='"+t+"']"),e.querySelector("*[data-index='"+n+"']");for(var r=t;r<=n;r++){e.querySelector("*[data-index='"+r+"']").classList.add("ct-select-selected")}}},{key:"_selectListSelected",value:function(e){var t=e.currentTarget,n=parseInt(t.getAttribute("data-index")),r=t.parentNode.parentNode,o=[];if(Array.prototype.forEach.call(r.querySelectorAll(".ct-select-selected"),(function(e){return o.push(e)})),bt.log({e:e},"select list event"),o.length>0)if(r.hasAttribute("multiple")&&(e.shiftKey||e.metaKey||e.ctrlKey)){var i=function(e){return parseInt(e.getAttribute("data-index"))},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return yt(e,Math.min,t)}(o,i),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return yt(e,Math.max,t)}(o,i),c=i(a);i(s);e.shiftKey?(this._clearSelectListSelections(r),n<parseInt(a.getAttribute("data-index"))?this._selectListElements(r,n,c):this._selectListElements(r,c,n)):t.classList.contains("ct-select-selected")?t.classList.remove("ct-select-selected"):t.classList.add("ct-select-selected")}else t.classList.contains("ct-select-selected")?this._clearSelectListSelections(r):(this._clearSelectListSelections(r),t.classList.add("ct-select-selected"));else t.classList.add("ct-select-selected");this.fire("selectedListItem",{value:t.getAttribute("value"),name:r.getAttribute("name")})}},{key:"_textFieldButtonClick",value:function(e){bt.log({e:e},"textFieldaction click");for(var t=e.currentTarget;t&&"TEXT-FIELD-WITH-BUTTON"!=t.tagName;)t=t.parentNode;t&&this.fire("textFieldActionClicked",{value:t.getValue(),name:t.getName()})}},{key:"getFormData",value:function(){return new FormData(this.querySelector("form"))}},{key:"getFormJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.checkboxFalseHandling,n=void 0!==t&&t,r=this.querySelector("form"),o={};function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(r&&!1===t||""!=t)&&(n&&o[e]?Array.isArray(o[e])?o[e].push(t):o[e]=[o[e],t]:o[e]=t)}for(var a=0,s=r.elements.length;a<s;a++){var c=r.elements[a];if(!c.disabled&&!c.classList.contains("ct-form-ignore"))switch(c.nodeName.toLowerCase()){case"input":switch(c.type){case"text":case"password":case"hidden":i(c.name,c.value);break;case"radio":case"checkbox":if(c.checked){var l=c.value;"On"==l&&(l=!0),i(c.name,l,!0)}else n&&"On"==c.value&&i(c.name,!1,!0,!0)}break;case"textarea":i(c.name,c.value);break;case"select":switch(c.type){case"select-one":i(c.name,c.value);break;case"select-multiple":for(var u=[],d=0,h=c.options.length;d<h;d++)c.options[d].selected&&u.push(c.options[d].value);i(c.name,u)}}}return Array.prototype.forEach.call(r.querySelectorAll(".ct-selectable-list"),(function(e){var t=Array.prototype.map.call(e.querySelectorAll(".ct-select-selected"),(function(e){return e.getAttribute("value")}));bt.log({s:e,vals:t},"selectable list"),t.length&&(o[e.getAttribute("name")]=t)})),Array.prototype.forEach.call(r.querySelectorAll("expression-builder"),(function(e){var t=e.toJSON();bt.log({expJson:t},"form expJson"),t.rules&&t.rules.length&&(o[e.getAttribute("name")]=t)})),o}}],[{key:"childrenToHTML",value:function(e,t){return e.map((function(e){if(e.ignoreChild)return"";var n=r._typeToConstructor(e.type);return n?n.create?n.create(e,t):(bt.error("No component create for form child type:"+e.type),""):(bt.error("Unknown form child type:"+e.type),"")})).join("")}},{key:"_typeToConstructor",value:function(e){switch(e){case"DateRange":return m;case"TextField":return u.a;case"TextFieldRange":return null;case"TextFieldWithButton":return Fe;case"LinearProgress":return Ae;case"CircularProgress":return Te;case"Button":return d.a;case"FileInput":return vt;case"Form":return r;case"TextFieldWithSelect":return pt;case"RadioGroup":return Me.a;case"Radio":return xe.a;case"ImageRadio":return rt;case"Checkbox":return H;case"Select":return h.a;case"MultiSelect":return Ne;case"Tabs":return ge;case"Panel":return j;case"Card":return V.a;case"ExpressionBuilder":return dt;case"Group":return _e;case"Toggle":return Oe.a;case"SelectList":return it;case"SingleRangeSlider":return tt;case"DoubleRangeSlider":return st;case"CheckboxGroup":return De}return null}}]),r}(i.a);Object(gt.a)(Ct,mt.a),Ct.componentName="ct-form",a.a.define(Ct)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n(10),i=n(25),a=n(9),s=n(81),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation_.setVerticalOrientation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return[].slice.call(this.root_.querySelectorAll("."+a.a.LIST_ITEM_CLASS))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation_.setWrapFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation_.setSingleSelection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.handleClick_=this.handleClickEvent_.bind(this),this.handleKeydown_=this.handleKeydownEvent_.bind(this),this.focusInEventListener_=this.handleFocusInEvent_.bind(this),this.focusOutEventListener_=this.handleFocusOutEvent_.bind(this),this.listen("keydown",this.handleKeydown_),this.listen("click",this.handleClick_),this.listen("focusin",this.focusInEventListener_),this.listen("focusout",this.focusOutEventListener_),this.layout(),this.initializeListType()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten("click",this.handleClick_),this.unlisten("focusin",this.focusInEventListener_),this.unlisten("focusout",this.focusOutEventListener_)},t.prototype.layout=function(){var e=this.root_.getAttribute(a.c.ARIA_ORIENTATION);this.vertical=e!==a.c.ARIA_ORIENTATION_HORIZONTAL,[].slice.call(this.root_.querySelectorAll(".mdc-list-item:not([tabindex])")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.root_.querySelectorAll(a.c.FOCUSABLE_CHILD_ELEMENTS)).forEach((function(e){return e.setAttribute("tabindex","-1")})),this.foundation_.layout()},t.prototype.initializeListType=function(){var e=this,t=this.root_.querySelectorAll(a.c.ARIA_ROLE_CHECKBOX_SELECTOR),n=this.root_.querySelector("\n      ."+a.a.LIST_ITEM_ACTIVATED_CLASS+",\n      ."+a.a.LIST_ITEM_SELECTED_CLASS+"\n    "),r=this.root_.querySelector(a.c.ARIA_CHECKED_RADIO_SELECTOR);if(t.length){var o=this.root_.querySelectorAll(a.c.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=[].map.call(o,(function(t){return e.listElements.indexOf(t)}))}else n?(n.classList.contains(a.a.LIST_ITEM_ACTIVATED_CLASS)&&this.foundation_.setUseActivatedClass(!0),this.singleSelection=!0,this.selectedIndex=this.listElements.indexOf(n)):r&&(this.selectedIndex=this.listElements.indexOf(r))},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getDefaultFoundation=function(){var e=this,t={addClassForElementIndex:function(t,n){var r=e.listElements[t];r&&r.classList.add(n)},focusItemAtIndex:function(t){var n=e.listElements[t];n&&n.focus()},getAttributeForElementIndex:function(t,n){return e.listElements[t].getAttribute(n)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(a.c.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(a.c.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(a.c.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root_.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root_},listItemAtIndexHasClass:function(t,n){return e.listElements[t].classList.contains(n)},notifyAction:function(t){e.emit(a.c.ACTION_EVENT,{index:t},!0)},removeClassForElementIndex:function(t,n){var r=e.listElements[t];r&&r.classList.remove(n)},setAttributeForElementIndex:function(t,n,r){var o=e.listElements[t];o&&o.setAttribute(n,r)},setCheckedCheckboxOrRadioAtIndex:function(t,n){var r=e.listElements[t].querySelector(a.c.CHECKBOX_RADIO_SELECTOR);r.checked=n;var o=document.createEvent("Event");o.initEvent("change",!0,!0),r.dispatchEvent(o)},setTabIndexForListItemChildren:function(t,n){var r=e.listElements[t];[].slice.call(r.querySelectorAll(a.c.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX)).forEach((function(e){return e.setAttribute("tabindex",n)}))}};return new s.a(t)},t.prototype.getListItemIndex_=function(e){var t=e.target,n=Object(i.a)(t,"."+a.a.LIST_ITEM_CLASS+", ."+a.a.ROOT);return n&&Object(i.c)(n,"."+a.a.LIST_ITEM_CLASS)?this.listElements.indexOf(n):-1},t.prototype.handleFocusInEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusIn(e,t)},t.prototype.handleFocusOutEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusOut(e,t)},t.prototype.handleKeydownEvent_=function(e){var t=this.getListItemIndex_(e),n=e.target;this.foundation_.handleKeydown(e,n.classList.contains(a.a.LIST_ITEM_CLASS),t)},t.prototype.handleClickEvent_=function(e){var t=this.getListItemIndex_(e),n=e.target,r=!Object(i.c)(n,a.c.CHECKBOX_RADIO_SELECTOR);this.foundation_.handleClick(t,r)},t}(o.a)},function(e,t,n){"use strict";var r=n(492),o=n(493),i=n(494),a=n(495),s=n(496);e.exports=function(e,t){var n={defs:r,shortcuts:o,enabled:[]},c=s(e.utils.assign({},n,t||{}));e.renderer.rules.emoji=i,e.core.ruler.push("emoji",a(e,c.defs,c.shortcuts,c.scanRE,c.replaceRE))}},,function(e,t,n){n(196),n(382),n(383),e.exports=n(537)},function(e,t,n){"use strict";n(197);var r,o=(r=n(369))&&r.__esModule?r:{default:r};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0},function(e,t,n){"use strict";n(198),n(341),n(343),n(346),n(348),n(350),n(352),n(354),n(356),n(358),n(360),n(362),n(364),n(368)},function(e,t,n){n(199),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(280),n(281),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(123),n(304),n(159),n(305),n(160),n(306),n(307),n(308),n(309),n(161),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),e.exports=n(26)},function(e,t,n){"use strict";var r=n(16),o=n(42),i=n(28),a=n(4),s=n(36),c=n(59).KEY,l=n(17),u=n(82),d=n(71),h=n(61),p=n(22),f=n(104),v=n(140),m=n(201),g=n(85),y=n(18),_=n(19),b=n(32),C=n(44),w=n(58),S=n(60),k=n(65),A=n(143),E=n(49),T=n(84),O=n(29),x=n(63),M=E.f,I=O.f,L=A.f,N=r.Symbol,R=r.JSON,D=R&&R.stringify,P=p("_hidden"),F=p("toPrimitive"),H={}.propertyIsEnumerable,B=u("symbol-registry"),j=u("symbols"),q=u("op-symbols"),V=Object.prototype,z="function"==typeof N&&!!T.f,G=r.QObject,W=!G||!G.prototype||!G.prototype.findChild,U=i&&l((function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=M(V,t);r&&delete V[t],I(e,t,n),r&&e!==V&&I(V,t,r)}:I,K=function(e){var t=j[e]=k(N.prototype);return t._k=e,t},$=z&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},Y=function(e,t,n){return e===V&&Y(q,t,n),y(e),t=w(t,!0),y(n),o(j,t)?(n.enumerable?(o(e,P)&&e[P][t]&&(e[P][t]=!1),n=k(n,{enumerable:S(0,!1)})):(o(e,P)||I(e,P,S(1,{})),e[P][t]=!0),U(e,t,n)):I(e,t,n)},X=function(e,t){y(e);for(var n,r=m(t=C(t)),o=0,i=r.length;i>o;)Y(e,n=r[o++],t[n]);return e},J=function(e){var t=H.call(this,e=w(e,!0));return!(this===V&&o(j,e)&&!o(q,e))&&(!(t||!o(this,e)||!o(j,e)||o(this,P)&&this[P][e])||t)},Z=function(e,t){if(e=C(e),t=w(t,!0),e!==V||!o(j,t)||o(q,t)){var n=M(e,t);return!n||!o(j,t)||o(e,P)&&e[P][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=L(C(e)),r=[],i=0;n.length>i;)o(j,t=n[i++])||t==P||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=L(n?q:C(e)),i=[],a=0;r.length>a;)!o(j,t=r[a++])||n&&!o(V,t)||i.push(j[t]);return i};z||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(q,n),o(this,P)&&o(this[P],e)&&(this[P][e]=!1),U(this,e,S(1,n))};return i&&W&&U(V,e,{configurable:!0,set:t}),K(e)}).prototype,"toString",(function(){return this._k})),E.f=Z,O.f=Y,n(66).f=A.f=Q,n(78).f=J,T.f=ee,i&&!n(62)&&s(V,"propertyIsEnumerable",J,!0),f.f=function(e){return K(p(e))}),a(a.G+a.W+a.F*!z,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=x(p.store),oe=0;re.length>oe;)v(re[oe++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=N(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!z,"Object",{create:function(e,t){return void 0===t?k(e):X(k(e),t)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var ie=l((function(){T.f(1)}));a(a.S+a.F*ie,"Object",{getOwnPropertySymbols:function(e){return T.f(b(e))}}),R&&a(a.S+a.F*(!z||l((function(){var e=N();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(_(t)||void 0!==e)&&!$(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,D.apply(R,r)}}),N.prototype[F]||n(43)(N.prototype,F,N.prototype.valueOf),d(N,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(82)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(63),o=n(84),i=n(78);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),c=i.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(4);r(r.S,"Object",{create:n(65)})},function(e,t,n){var r=n(4);r(r.S+r.F*!n(28),"Object",{defineProperty:n(29).f})},function(e,t,n){var r=n(4);r(r.S+r.F*!n(28),"Object",{defineProperties:n(142)})},function(e,t,n){var r=n(44),o=n(49).f;n(50)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(r(e),t)}}))},function(e,t,n){var r=n(32),o=n(67);n(50)("getPrototypeOf",(function(){return function(e){return o(r(e))}}))},function(e,t,n){var r=n(32),o=n(63);n(50)("keys",(function(){return function(e){return o(r(e))}}))},function(e,t,n){n(50)("getOwnPropertyNames",(function(){return n(143).f}))},function(e,t,n){var r=n(19),o=n(59).onFreeze;n(50)("freeze",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(19),o=n(59).onFreeze;n(50)("seal",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(19),o=n(59).onFreeze;n(50)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(19);n(50)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(19);n(50)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(19);n(50)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(144)})},function(e,t,n){var r=n(4);r(r.S,"Object",{is:n(145)})},function(e,t,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(108).set})},function(e,t,n){"use strict";var r=n(79),o={};o[n(22)("toStringTag")]="z",o+""!="[object z]"&&n(36)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(4);r(r.P,"Function",{bind:n(146)})},function(e,t,n){var r=n(29).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(28)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(19),o=n(67),i=n(22)("hasInstance"),a=Function.prototype;i in a||n(29).f(a,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(4),o=n(148);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){var r=n(4),o=n(149);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){"use strict";var r=n(16),o=n(42),i=n(54),a=n(110),s=n(58),c=n(17),l=n(66).f,u=n(49).f,d=n(29).f,h=n(72).trim,p=r.Number,f=p,v=p.prototype,m="Number"==i(n(65)(v)),g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,o,i=(t=g?t.trim():h(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var a,c=t.slice(2),l=0,u=c.length;l<u;l++)if((a=c.charCodeAt(l))<48||a>o)return NaN;return parseInt(c,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?c((function(){v.valueOf.call(n)})):"Number"!=i(n))?a(new f(y(t)),n,p):y(t)};for(var _,b=n(28)?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;b.length>C;C++)o(f,_=b[C])&&!o(p,_)&&d(p,_,u(f,_));p.prototype=v,v.constructor=p,n(36)(r,"Number",p)}},function(e,t,n){"use strict";var r=n(4),o=n(48),i=n(150),a=n(111),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=c(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=c(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(17)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,c=i(this,u),l=o(e),v="",m="0";if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*f(2,69,1))-69)<0?c*f(2,-t,1):c/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=l;r>=7;)d(1e7,0),r-=7;for(d(f(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),d(1,1),h(2),m=p()}else d(0,n),d(1<<-t,0),m=p()+a.call("0",l);return m=l>0?v+((s=m.length)<=l?"0."+a.call("0",l-s)+m:m.slice(0,s-l)+"."+m.slice(s-l)):v+m}})},function(e,t,n){"use strict";var r=n(4),o=n(17),i=n(150),a=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==a.call(1,void 0)}))||!o((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(4);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(4),o=n(16).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(4);r(r.S,"Number",{isInteger:n(151)})},function(e,t,n){var r=n(4);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(4),o=n(151),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){var r=n(4);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(4);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(4),o=n(149);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(4),o=n(148);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){var r=n(4),o=n(152),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+i(e-1)*i(e+1))}})},function(e,t,n){var r=n(4),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(4),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(4),o=n(112);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(4);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(4),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(4),o=n(113);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(4);r(r.S,"Math",{fround:n(244)})},function(e,t,n){var r=n(112),o=Math.pow,i=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),c=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=Math.abs(e),l=r(e);return o<c?l*(o/c/a+1/i-1/i)*c*a:(n=(t=(1+a/i)*o)-(t-o))>s||n!=n?l*(1/0):l*n}},function(e,t,n){var r=n(4),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,a=0,s=arguments.length,c=0;a<s;)c<(n=o(arguments[a++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(i)}})},function(e,t,n){var r=n(4),o=Math.imul;r(r.S+r.F*n(17)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(4);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(4);r(r.S,"Math",{log1p:n(152)})},function(e,t,n){var r=n(4);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(4);r(r.S,"Math",{sign:n(112)})},function(e,t,n){var r=n(4),o=n(113),i=Math.exp;r(r.S+r.F*n(17)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(4),o=n(113),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){var r=n(4);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(4),o=n(64),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(4),o=n(44),i=n(23);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(72)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(114)(!0);n(115)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(4),o=n(114)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(4),o=n(23),i=n(116),a="".endsWith;r(r.P+r.F*n(118)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),s=void 0===n?r:Math.min(o(n),r),c=String(e);return a?a.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){"use strict";var r=n(4),o=n(116);r(r.P+r.F*n(118)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(4);r(r.P,"String",{repeat:n(111)})},function(e,t,n){"use strict";var r=n(4),o=n(23),i=n(116),a="".startsWith;r(r.P+r.F*n(118)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(37)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(37)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(37)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(37)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(37)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(37)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(37)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(37)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(37)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(37)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(37)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(37)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(37)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(4);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(4),o=n(32),i=n(58);r(r.P+r.F*n(17)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=o(this),n=i(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(4),o=n(279);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,n){"use strict";var r=n(17),o=Date.prototype.getTime,i=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))}))||!r((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:i},function(e,t,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(36)(r,"toString",(function(){var e=i.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,t,n){var r=n(22)("toPrimitive"),o=Date.prototype;r in o||n(43)(o,r,n(282))},function(e,t,n){"use strict";var r=n(18),o=n(58);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!=e)}},function(e,t,n){var r=n(4);r(r.S,"Array",{isArray:n(85)})},function(e,t,n){"use strict";var r=n(46),o=n(4),i=n(32),a=n(154),s=n(119),c=n(23),l=n(120),u=n(121);o(o.S+o.F*!n(86)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,d,h=i(e),p="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,m=void 0!==v,g=0,y=u(h);if(m&&(v=r(v,f>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=c(h.length));t>g;g++)l(n,g,m?v(h[g],g):h[g]);else for(d=y.call(h),n=new p;!(o=d.next()).done;g++)l(n,g,m?a(d,v,[o.value,g],!0):o.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(4),o=n(120);r(r.S+r.F*n(17)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(4),o=n(44),i=[].join;r(r.P+r.F*(n(77)!=Object||!n(45)(i)),"Array",{join:function(e){return i.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(4),o=n(107),i=n(54),a=n(64),s=n(23),c=[].slice;r(r.P+r.F*n(17)((function(){o&&c.call(o)})),"Array",{slice:function(e,t){var n=s(this.length),r=i(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var o=a(e,n),l=a(t,n),u=s(l-o),d=new Array(u),h=0;h<u;h++)d[h]="String"==r?this.charAt(o+h):this[o+h];return d}})},function(e,t,n){"use strict";var r=n(4),o=n(47),i=n(32),a=n(17),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(45)(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(4),o=n(51)(0),i=n(45)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(19),o=n(85),i=n(22)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(4),o=n(51)(1);r(r.P+r.F*!n(45)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(4),o=n(51)(2);r(r.P+r.F*!n(45)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(4),o=n(51)(3);r(r.P+r.F*!n(45)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(4),o=n(51)(4);r(r.P+r.F*!n(45)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(4),o=n(156);r(r.P+r.F*!n(45)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(4),o=n(156);r(r.P+r.F*!n(45)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(4),o=n(83)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(45)(i)),"Array",{indexOf:function(e){return a?i.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(4),o=n(44),i=n(48),a=n(23),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(45)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=o(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(4);r(r.P,"Array",{copyWithin:n(157)}),n(68)("copyWithin")},function(e,t,n){var r=n(4);r(r.P,"Array",{fill:n(122)}),n(68)("fill")},function(e,t,n){"use strict";var r=n(4),o=n(51)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(68)("find")},function(e,t,n){"use strict";var r=n(4),o=n(51)(6),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(68)(i)},function(e,t,n){n(74)("Array")},function(e,t,n){var r=n(16),o=n(110),i=n(29).f,a=n(66).f,s=n(117),c=n(87),l=r.RegExp,u=l,d=l.prototype,h=/a/g,p=/a/g,f=new l(h)!==h;if(n(28)&&(!f||n(17)((function(){return p[n(22)("match")]=!1,l(h)!=h||l(p)==p||"/a/i"!=l(h,"i")})))){l=function(e,t){var n=this instanceof l,r=s(e),i=void 0===t;return!n&&r&&e.constructor===l&&i?e:o(f?new u(r&&!i?e.source:e,t):u((r=e instanceof l)?e.source:e,r&&i?c.call(e):t),n?this:d,l)};for(var v=function(e){e in l||i(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},m=a(u),g=0;m.length>g;)v(m[g++]);d.constructor=l,l.prototype=d,n(36)(r,"RegExp",l)}n(74)("RegExp")},function(e,t,n){"use strict";n(160);var r=n(18),o=n(87),i=n(28),a=/./.toString,s=function(e){n(36)(RegExp.prototype,"toString",e,!0)};n(17)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(18),o=n(23),i=n(125),a=n(88);n(89)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var c=r(e),l=String(this);if(!c.global)return a(c,l);var u=c.unicode;c.lastIndex=0;for(var d,h=[],p=0;null!==(d=a(c,l));){var f=String(d[0]);h[p]=f,""===f&&(c.lastIndex=i(l,o(c.lastIndex),u)),p++}return 0===p?null:h}]}))},function(e,t,n){"use strict";var r=n(18),o=n(32),i=n(23),a=n(48),s=n(125),c=n(88),l=Math.max,u=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(89)("replace",2,(function(e,t,n,f){return[function(r,o){var i=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=f(n,e,this,t);if(o.done)return o.value;var d=r(e),h=String(this),p="function"==typeof t;p||(t=String(t));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}for(var y=[];;){var _=c(d,h);if(null===_)break;if(y.push(_),!m)break;""===String(_[0])&&(d.lastIndex=s(h,i(d.lastIndex),g))}for(var b,C="",w=0,S=0;S<y.length;S++){_=y[S];for(var k=String(_[0]),A=l(u(a(_.index),h.length),0),E=[],T=1;T<_.length;T++)E.push(void 0===(b=_[T])?b:String(b));var O=_.groups;if(p){var x=[k].concat(E,A,h);void 0!==O&&x.push(O);var M=String(t.apply(void 0,x))}else M=v(k,h,A,E,O,t);A>=w&&(C+=h.slice(w,A)+M,w=A+k.length)}return C+h.slice(w)}];function v(e,t,r,i,a,s){var c=r+e.length,l=i.length,u=p;return void 0!==a&&(a=o(a),u=h),n.call(s,u,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var u=+o;if(0===u)return n;if(u>l){var h=d(u/10);return 0===h?n:h<=l?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):n}s=i[u-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(18),o=n(145),i=n(88);n(89)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var u=i(s,c);return o(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,n){"use strict";var r=n(117),o=n(18),i=n(80),a=n(125),s=n(23),c=n(88),l=n(124),u=n(17),d=Math.min,h=[].push,p=!u((function(){RegExp(4294967295,"y")}));n(89)("split",2,(function(e,t,n,u){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(o,e,t);for(var i,a,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,u+"g");(i=l.call(f,o))&&!((a=f.lastIndex)>d&&(c.push(o.slice(d,i.index)),i.length>1&&i.index<o.length&&h.apply(c,i.slice(1)),s=i[0].length,d=a,c.length>=p));)f.lastIndex===i.index&&f.lastIndex++;return d===o.length?!s&&f.test("")||c.push(""):c.push(o.slice(d)),c.length>p?c.slice(0,p):c}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):f.call(String(o),n,r)},function(e,t){var r=u(f,e,this,t,f!==n);if(r.done)return r.value;var l=o(e),h=String(this),v=i(l,RegExp),m=l.unicode,g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(p?"y":"g"),y=new v(p?l:"^(?:"+l.source+")",g),_=void 0===t?4294967295:t>>>0;if(0===_)return[];if(0===h.length)return null===c(y,h)?[h]:[];for(var b=0,C=0,w=[];C<h.length;){y.lastIndex=p?C:0;var S,k=c(y,p?h:h.slice(C));if(null===k||(S=d(s(y.lastIndex+(p?0:C)),h.length))===b)C=a(h,C,m);else{if(w.push(h.slice(b,C)),w.length===_)return w;for(var A=1;A<=k.length-1;A++)if(w.push(k[A]),w.length===_)return w;C=b=S}}return w.push(h.slice(b)),w}]}))},function(e,t,n){var r=n(16),o=n(126).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(54)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(l)}}else n=function(){o.call(r,l)};else{var d=!0,h=document.createTextNode("");new i(l).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(164),o=n(69);e.exports=n(92)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(164),o=n(69);e.exports=n(92)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(16),i=n(51)(0),a=n(36),s=n(59),c=n(144),l=n(165),u=n(19),d=n(69),h=n(69),p=!o.ActiveXObject&&"ActiveXObject"in o,f=s.getWeak,v=Object.isExtensible,m=l.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(u(e)){var t=f(e);return!0===t?m(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},_=e.exports=n(92)("WeakMap",g,y,l,!0,!0);h&&p&&(c((r=l.getConstructor(g,"WeakMap")).prototype,y),s.NEED=!0,i(["delete","has","get","set"],(function(e){var t=_.prototype,n=t[e];a(t,e,(function(t,o){if(u(t)&&!v(t)){this._f||(this._f=new r);var i=this._f[e](t,o);return"set"==e?this:i}return n.call(this,t,o)}))})))},function(e,t,n){"use strict";var r=n(165),o=n(69);n(92)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(4),o=n(93),i=n(127),a=n(18),s=n(64),c=n(23),l=n(19),u=n(16).ArrayBuffer,d=n(80),h=i.ArrayBuffer,p=i.DataView,f=o.ABV&&u.isView,v=h.prototype.slice,m=o.VIEW;r(r.G+r.W+r.F*(u!==h),{ArrayBuffer:h}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||l(e)&&m in e}}),r(r.P+r.U+r.F*n(17)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),i=new(d(this,h))(c(o-r)),l=new p(this),u=new p(i),f=0;r<o;)u.setUint8(f++,l.getUint8(r++));return i}}),n(74)("ArrayBuffer")},function(e,t,n){var r=n(4);r(r.G+r.W+r.F*!n(93).ABV,{DataView:n(127).DataView})},function(e,t,n){n(56)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(56)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(56)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(4),o=n(47),i=n(18),a=(n(16).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(17)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=o(e),c=i(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(4),o=n(65),i=n(47),a=n(18),s=n(19),c=n(17),l=n(146),u=(n(16).Reflect||{}).construct,d=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),h=!c((function(){u((function(){}))}));r(r.S+r.F*(d||h),"Reflect",{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(h&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var c=n.prototype,p=o(s(c)?c:Object.prototype),f=Function.apply.call(e,p,t);return s(f)?f:p}})},function(e,t,n){var r=n(29),o=n(4),i=n(18),a=n(58);o(o.S+o.F*n(17)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){i(e),t=a(t,!0),i(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(4),o=n(49).f,i=n(18);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(4),o=n(18),i=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(153)(i,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,n){var r=n(49),o=n(67),i=n(42),a=n(4),s=n(19),c=n(18);a(a.S,"Reflect",{get:function e(t,n){var a,l,u=arguments.length<3?t:arguments[2];return c(t)===u?t[n]:(a=r.f(t,n))?i(a,"value")?a.value:void 0!==a.get?a.get.call(u):void 0:s(l=o(t))?e(l,n,u):void 0}})},function(e,t,n){var r=n(49),o=n(4),i=n(18);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(4),o=n(67),i=n(18);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){var r=n(4);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(4),o=n(18),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!i||i(e)}})},function(e,t,n){var r=n(4);r(r.S,"Reflect",{ownKeys:n(167)})},function(e,t,n){var r=n(4),o=n(18),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(29),o=n(49),i=n(67),a=n(42),s=n(4),c=n(60),l=n(18),u=n(19);s(s.S,"Reflect",{set:function e(t,n,s){var d,h,p=arguments.length<4?t:arguments[3],f=o.f(l(t),n);if(!f){if(u(h=i(t)))return e(h,n,s,p);f=c(0)}if(a(f,"value")){if(!1===f.writable||!u(p))return!1;if(d=o.f(p,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,r.f(p,n,d)}else r.f(p,n,c(0,s));return!0}return void 0!==f.set&&(f.set.call(p,s),!0)}})},function(e,t,n){var r=n(4),o=n(108);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(342),e.exports=n(26).Array.includes},function(e,t,n){"use strict";var r=n(4),o=n(83)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(68)("includes")},function(e,t,n){n(344),e.exports=n(26).Array.flatMap},function(e,t,n){"use strict";var r=n(4),o=n(345),i=n(32),a=n(23),s=n(47),c=n(155);r(r.P,"Array",{flatMap:function(e){var t,n,r=i(this);return s(e),t=a(r.length),n=c(r,0),o(n,r,r,t,0,1,e,arguments[1]),n}}),n(68)("flatMap")},function(e,t,n){"use strict";var r=n(85),o=n(19),i=n(23),a=n(46),s=n(22)("isConcatSpreadable");e.exports=function e(t,n,c,l,u,d,h,p){for(var f,v,m=u,g=0,y=!!h&&a(h,p,3);g<l;){if(g in c){if(f=y?y(c[g],g,n):c[g],v=!1,o(f)&&(v=void 0!==(v=f[s])?!!v:r(f)),v&&d>0)m=e(t,n,f,i(f.length),m,d-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=f}m++}g++}return m}},function(e,t,n){n(347),e.exports=n(26).String.padStart},function(e,t,n){"use strict";var r=n(4),o=n(168),i=n(91),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(349),e.exports=n(26).String.padEnd},function(e,t,n){"use strict";var r=n(4),o=n(168),i=n(91),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(351),e.exports=n(26).String.trimLeft},function(e,t,n){"use strict";n(72)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){n(353),e.exports=n(26).String.trimRight},function(e,t,n){"use strict";n(72)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){n(355),e.exports=n(104).f("asyncIterator")},function(e,t,n){n(140)("asyncIterator")},function(e,t,n){n(357),e.exports=n(26).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(4),o=n(167),i=n(44),a=n(49),s=n(120);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),c=a.f,l=o(r),u={},d=0;l.length>d;)void 0!==(n=c(r,t=l[d++]))&&s(u,t,n);return u}})},function(e,t,n){n(359),e.exports=n(26).Object.values},function(e,t,n){var r=n(4),o=n(169)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){n(361),e.exports=n(26).Object.entries},function(e,t,n){var r=n(4),o=n(169)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){"use strict";n(161),n(363),e.exports=n(26).Promise.finally},function(e,t,n){"use strict";var r=n(4),o=n(26),i=n(16),a=n(80),s=n(163);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(365),n(366),n(367),e.exports=n(26)},function(e,t,n){var r=n(16),o=n(4),i=n(91),a=[].slice,s=/MSIE .\./.test(i),c=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){var r=n(4),o=n(126);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var r=n(123),o=n(63),i=n(36),a=n(16),s=n(43),c=n(73),l=n(22),u=l("iterator"),d=l("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(p),v=0;v<f.length;v++){var m,g=f[v],y=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[u]||s(b,u,h),b[d]||s(b,d,g),c[g]=h,y))for(m in r)b[m]||i(b,m,r[m],!0)}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,i=Object.create(o.prototype),a=new w(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function u(){}function d(){}function h(){}var p={};p[o]=function(){return this};var f=Object.getPrototypeOf,v=f&&f(f(S([])));v&&v!==t&&n.call(v,o)&&(p=v);var m=h.prototype=u.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=m.constructor=h,h.constructor=d,h[a]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[i]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new y(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),m[a]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(370),e.exports=n(170).global},function(e,t,n){var r=n(371);r(r.G,{global:n(128)})},function(e,t,n){var r=n(128),o=n(170),i=n(372),a=n(374),s=n(381),c=function(e,t,n){var l,u,d,h=e&c.F,p=e&c.G,f=e&c.S,v=e&c.P,m=e&c.B,g=e&c.W,y=p?o:o[t]||(o[t]={}),_=y.prototype,b=p?r:f?r[t]:(r[t]||{}).prototype;for(l in p&&(n=t),n)(u=!h&&b&&void 0!==b[l])&&s(y,l)||(d=u?b[l]:n[l],y[l]=p&&"function"!=typeof b[l]?n[l]:m&&u?i(d,r):g&&b[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&"function"==typeof d?i(Function.call,d):d,v&&((y.virtual||(y.virtual={}))[l]=d,e&c.R&&_&&!_[l]&&a(_,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(373);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(375),o=n(380);e.exports=n(130)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(376),o=n(377),i=n(379),a=Object.defineProperty;t.f=n(130)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(129);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(130)&&!n(171)((function(){return 7!=Object.defineProperty(n(378)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(129),o=n(128).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(129);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){(function(e){!function(e){var t,n=e.babelHelpers={};function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.typeof=r=function(e){return typeof e}:n.typeof=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t,r;function o(t,r){try{var a=e[t](r),s=a.value,c=s instanceof n.AwaitValue;Promise.resolve(c?s.wrapped:s).then((function(e){c?o("next",e):i(a.done?"return":"normal",e)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,a){var s={key:e,arg:n,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,o(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return n.extends=s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e){return n.getPrototypeOf=c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return n.setPrototypeOf=l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,r){return u()?n.construct=d=Reflect.construct:n.construct=d=function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n.setPrototypeOf(i,r.prototype),i},d.apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return n.wrapNativeSuper=h=function(e){if(null===e||!n.isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return n.construct(e,arguments,n.getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n.setPrototypeOf(r,e)},h(e)}function p(e,t,r){return"undefined"!=typeof Reflect&&Reflect.get?n.get=p=Reflect.get:n.get=p=function(e,t,r){var o=n.superPropBase(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(r):i.value}},p(e,t,r||e)}function f(e,t,r,o){return(f="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,o){var i,a=n.superPropBase(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(o,r),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(o,t)){if(!i.writable)return!1;i.value=r,Object.defineProperty(o,t,i)}else n.defineProperty(o,t,r);return!0})(e,t,r,o)}n.typeof=r,n.jsx=function(e,n,r,o){t||(t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(n||0===a||(n={children:void 0}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=new Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:t,type:e,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}},n.asyncIterator=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")},n.AwaitValue=function(e){this.wrapped=e},"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},n.AsyncGenerator=o,n.wrapAsyncGenerator=function(e){return function(){return new n.AsyncGenerator(e.apply(this,arguments))}},n.awaitAsyncGenerator=function(e){return new n.AwaitValue(e)},n.asyncGeneratorDelegate=function(e,t){var n={},r=!1;function o(n,o){return r=!0,o=new Promise((function(t){t(e[n](o))})),{done:!1,value:t(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return r?(r=!1,e):o("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return o("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return o("return",e)}),n},n.asyncToGenerator=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}},n.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n.createClass=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},n.defineEnumerableProperties=function(e,t){for(var n in t){(i=t[n]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++){var i,a=r[o];(i=t[a]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a,i)}return e},n.defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e},n.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},n.extends=s,n.objectSpread=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){n.defineProperty(e,t,r[t])}))}return e},n.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n.setPrototypeOf(e,t)},n.inheritsLoose=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},n.getPrototypeOf=c,n.setPrototypeOf=l,n.construct=d,n.isNativeFunction=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},n.wrapNativeSuper=h,n.instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},n.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},n.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t},n.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},n.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},n.objectWithoutPropertiesLoose=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},n.objectWithoutProperties=function(e,t){if(null==e)return{};var r,o,i=n.objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},n.assertThisInitialized=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},n.possibleConstructorReturn=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?n.assertThisInitialized(e):t},n.superPropBase=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n.getPrototypeOf(e)););return e},n.get=p,n.set=function(e,t,n,r,o){if(!f(e,t,n,r||e)&&o)throw new Error("failed to set property");return n},n.taggedTemplateLiteral=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},n.taggedTemplateLiteralLoose=function(e,t){return t||(t=e.slice(0)),e.raw=t,e},n.temporalRef=function(e,t){if(e===n.temporalUndefined)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},n.readOnlyError=function(e){throw new Error('"'+e+'" is read-only')},n.classNameTDZError=function(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')},n.temporalUndefined={},n.slicedToArray=function(e,t){return n.arrayWithHoles(e)||n.iterableToArrayLimit(e,t)||n.nonIterableRest()},n.slicedToArrayLoose=function(e,t){return n.arrayWithHoles(e)||n.iterableToArrayLimitLoose(e,t)||n.nonIterableRest()},n.toArray=function(e){return n.arrayWithHoles(e)||n.iterableToArray(e)||n.nonIterableRest()},n.toConsumableArray=function(e){return n.arrayWithoutHoles(e)||n.iterableToArray(e)||n.nonIterableSpread()},n.arrayWithoutHoles=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}},n.arrayWithHoles=function(e){if(Array.isArray(e))return e},n.iterableToArray=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)},n.iterableToArrayLimit=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n},n.iterableToArrayLimitLoose=function(e,t){for(var n,r=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!t||r.length!==t););return r},n.nonIterableSpread=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},n.nonIterableRest=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},n.skipFirstGeneratorNext=function(e){return function(){var t=e.apply(this,arguments);return t.next(),t}},n.toPrimitive=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},n.toPropertyKey=function(e){var t=n.toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)},n.initializerWarningHelper=function(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")},n.initializerDefineProperty=function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},n.applyDecoratedDescriptor=function(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i};var v=0;function m(e){var t,r=n.toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var o={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(o.decorators=e.decorators),"field"===e.kind&&(o.initializer=e.value),o}function g(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function y(e){return e.decorators&&e.decorators.length}function _(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function b(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function C(e,t){n.wrapRegExp=C=function(e,t){return new a(e,t)};var r=n.wrapNativeSuper(RegExp),o=RegExp.prototype,i=new WeakMap;function a(e,t){var n=r.call(this,e);return i.set(n,t),n}function s(e,t){var n=i.get(t);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return n.inherits(a,r),a.prototype.exec=function(e){var t=o.exec.call(this,e);return t&&(t.groups=s(t,this)),t},a.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=i.get(this);return o[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof t){var r=this;return o[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(s(e,r)),t.apply(this,e)}))}return o[Symbol.replace].call(this,e,t)},C.apply(this,arguments)}n.classPrivateFieldLooseKey=function(e){return"__private_"+v+++"_"+e},n.classPrivateFieldLooseBase=function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e},n.classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");var n=t.get(e);return n.get?n.get.call(e):n.value},n.classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");var r=t.get(e);if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n},n.classStaticPrivateFieldSpecGet=function(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.value},n.classStaticPrivateFieldSpecSet=function(e,t,n,r){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(!n.writable)throw new TypeError("attempted to set read only private field");return n.value=r,r},n.classStaticPrivateMethodGet=function(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n},n.classStaticPrivateMethodSet=function(){throw new TypeError("attempted to set read only static private field")},n.decorate=function(e,t,r,o){var i=function(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(r){t.forEach((function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var i="static"===o?e:n;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],o={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,o)}),this),e.forEach((function(e){if(!y(e))return n.push(e);var t=this.decorateElement(e,o);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)}),this),!t)return{elements:n,finishers:r};var i=this.decorateConstructor(n,t);return r.push.apply(r,i.finishers),i.finishers=r,i},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],o=e.decorators,i=o.length-1;i>=0;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,o[i])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&r.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);n.push.apply(n,l)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var o=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[r])(o)||o);if(void 0!==i.finisher&&n.push(i.finisher),void 0!==i.elements){e=i.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return n.toArray(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=n.toPropertyKey(e.key),o=String(e.placement);if("static"!==o&&"prototype"!==o&&"own"!==o)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+o+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var a={kind:t,key:r,placement:o,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),a.initializer=e.initializer),a},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:b(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=b(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}();if(o)for(var a=0;a<o.length;a++)i=o[a](i);var s=t((function(e){i.initializeInstanceElements(e,c.elements)}),r),c=i.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},r=0;r<e.length;r++){var o,i=e[r];if("method"===i.kind&&(o=t.find(n)))if(_(i.descriptor)||_(o.descriptor)){if(y(i)||y(o))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");o.descriptor=i.descriptor}else{if(y(i)){if(y(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");o.decorators=i.decorators}g(i,o)}else t.push(i)}return t}(s.d.map(m)),e);return i.initializeClassElements(s.F,c.elements),i.runClassFinishers(s.F,c.finishers)},n.classPrivateMethodGet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n},n.classPrivateMethodSet=function(){throw new TypeError("attempted to reassign private method")},n.wrapRegExp=C}(void 0===e?self:e)}).call(this,n(172))},function(e,t){(function(){"use strict";var e=window.Document.prototype.createElement,t=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,o=window.Document.prototype.append,i=window.DocumentFragment.prototype.prepend,a=window.DocumentFragment.prototype.append,s=window.Node.prototype.cloneNode,c=window.Node.prototype.appendChild,l=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,d=window.Node.prototype.replaceChild,h=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),p=window.Element.prototype.attachShadow,f=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),v=window.Element.prototype.getAttribute,m=window.Element.prototype.setAttribute,g=window.Element.prototype.removeAttribute,y=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,b=window.Element.prototype.removeAttributeNS,C=window.Element.prototype.insertAdjacentElement,w=window.Element.prototype.insertAdjacentHTML,S=window.Element.prototype.prepend,k=window.Element.prototype.append,A=window.Element.prototype.before,E=window.Element.prototype.after,T=window.Element.prototype.replaceWith,O=window.Element.prototype.remove,x=window.HTMLElement,M=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),I=window.HTMLElement.prototype.insertAdjacentElement,L=window.HTMLElement.prototype.insertAdjacentHTML,N=new Set;function R(e){var t=N.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(e){return N.add(e)}));var D=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function P(e){var t=e.isConnected;if(void 0!==t)return t;if(D(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function F(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function H(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function B(e,t,n){e[t]=n}function j(e){var t=document;this.c=e,this.a=t,this.b=void 0,te(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function q(e){e.b&&e.b.disconnect()}function V(){var e=this;this.b=this.a=void 0,this.c=new Promise((function(t){e.b=t,e.a&&t(e.a)}))}function z(e){if(e.a)throw Error("Already resolved.");e.a=void 0,e.b&&e.b(void 0)}function G(e){this.f=new Map,this.g=new Map,this.l=new Map,this.i=!1,this.b=e,this.j=new Map,this.c=function(e){return e()},this.a=!1,this.h=[],this.m=e.f?new j(e):void 0}function W(e,t){if(!R(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if($(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.i)throw Error("A custom element is already being defined.")}function U(e,t,n){var r;e.i=!0;try{var o=function(e){var t=i[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},i=n.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var a=o("connectedCallback"),s=o("disconnectedCallback"),c=o("adoptedCallback"),l=(r=o("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.i=!1}return n={localName:t,constructorFunction:n,connectedCallback:a,disconnectedCallback:s,adoptedCallback:c,attributeChangedCallback:r,observedAttributes:l,constructionStack:[]},e.g.set(t,n),e.l.set(n.constructorFunction,n),n}function K(e){if(!1!==e.a){e.a=!1;for(var t=[],n=e.h,r=new Map,o=0;o<n.length;o++)r.set(n[o],[]);for(te(e.b,document,{upgrade:function(n){if(void 0===n.__CE_state){var o=n.localName,i=r.get(o);i?i.push(n):e.g.has(o)&&t.push(n)}}}),o=0;o<t.length;o++)ne(e.b,t[o]);for(o=0;o<n.length;o++){for(var i=n[o],a=r.get(i),s=0;s<a.length;s++)ne(e.b,a[s]);(i=e.j.get(i))&&z(i)}n.length=0}}function $(e,t){var n=e.g.get(t);if(n)return n;if(n=e.f.get(t)){e.f.delete(t);try{return U(e,t,n())}catch(e){oe(e)}}}function Y(){var e=ce&&ce.noDocumentConstructionObserver,t=ce&&ce.shadyDomFastWalk;this.b=[],this.c=[],this.a=!1,this.shadyDomFastWalk=t,this.f=!e}function X(e,t,n,r){var o=window.ShadyDOM;if(e.shadyDomFastWalk&&o&&o.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=o.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else!function e(t,n,r){for(var o=t;o;){if(o.nodeType===Node.ELEMENT_NODE){var i=o;n(i);var a=i.localName;if("link"===a&&"import"===i.getAttribute("rel")){if(o=i.import,void 0===r&&(r=new Set),o instanceof Node&&!r.has(o))for(r.add(o),o=o.firstChild;o;o=o.nextSibling)e(o,n,r);o=H(t,i);continue}if("template"===a){o=H(t,i);continue}if(i=i.__CE_shadowRoot)for(i=i.firstChild;i;i=i.nextSibling)e(i,n,r)}o=o.firstChild?o.firstChild:H(t,o)}}(t,n,r)}function J(e,t){e.a&&X(e,t,(function(t){return Z(e,t)}))}function Z(e,t){if(e.a&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.b.length;n++)e.b[n](t);for(n=0;n<e.c.length;n++)e.c[n](t)}}function Q(e,t){var n=[];for(X(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state?e.connectedCallback(r):ne(e,r)}}function ee(e,t){var n=[];for(X(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state&&e.disconnectedCallback(r)}}function te(e,t,n){var r=(n=void 0===n?{}:n).s,o=n.upgrade||function(t){return ne(e,t)},i=[];for(X(e,t,(function(t){if(e.a&&Z(e,t),"link"===t.localName&&"import"===t.getAttribute("rel")){var n=t.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var n=t.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var i=new Set;r&&(r.forEach((function(e){return i.add(e)})),i.delete(n)),te(e,n,{s:i,upgrade:o})}}))}else i.push(t)}),r),t=0;t<i.length;t++)o(i[t])}function ne(e,t){try{var n=t.ownerDocument,r=n.__CE_registry,o=r&&(n.defaultView||n.__CE_isImportDocument)?$(r,t.localName):void 0;if(o&&void 0===t.__CE_state){o.constructionStack.push(t);try{try{if(new o.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{o.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=o,o.attributeChangedCallback&&t.hasAttributes()){var i=o.observedAttributes;for(o=0;o<i.length;o++){var a=i[o],s=t.getAttribute(a);null!==s&&e.attributeChangedCallback(t,a,null,s,null)}}P(t)&&e.connectedCallback(t)}}catch(e){oe(e)}}function re(n,r,o,i){var a=r.__CE_registry;if(a&&(null===i||"http://www.w3.org/1999/xhtml"===i)&&(a=$(a,o)))try{var s=new a.constructorFunction;if(void 0===s.__CE_state||void 0===s.__CE_definition)throw Error("Failed to construct '"+o+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==s.namespaceURI)throw Error("Failed to construct '"+o+"': The constructed element's namespace must be the HTML namespace.");if(s.hasAttributes())throw Error("Failed to construct '"+o+"': The constructed element must not have any attributes.");if(null!==s.firstChild)throw Error("Failed to construct '"+o+"': The constructed element must not have any children.");if(null!==s.parentNode)throw Error("Failed to construct '"+o+"': The constructed element must not have a parent node.");if(s.ownerDocument!==r)throw Error("Failed to construct '"+o+"': The constructed element's owner document is incorrect.");if(s.localName!==o)throw Error("Failed to construct '"+o+"': The constructed element's local name is incorrect.");return s}catch(a){return oe(a),r=null===i?e.call(r,o):t.call(r,i,o),Object.setPrototypeOf(r,HTMLUnknownElement.prototype),r.__CE_state=2,r.__CE_definition=void 0,Z(n,r),r}return Z(n,r=null===i?e.call(r,o):t.call(r,i,o)),r}function oe(e){var t=e.message,n=e.sourceURL||e.fileName||"",r=e.line||e.lineNumber||0,o=e.column||e.columnNumber||0,i=void 0;void 0===ErrorEvent.prototype.initErrorEvent?i=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:r,colno:o,error:e}):((i=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,r),i.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===i.error&&Object.defineProperty(i,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(i),i.defaultPrevented||console.error(e)}j.prototype.f=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||q(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,r=0;r<n.length;r++)te(this.c,n[r])},G.prototype.o=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");W(this,e),this.f.set(e,t),this.h.push(e),this.a||(this.a=!0,this.c((function(){return K(n)})))},G.prototype.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");W(this,e),U(this,e,t),this.h.push(e),this.a||(this.a=!0,this.c((function(){return K(n)})))},G.prototype.upgrade=function(e){te(this.b,e)},G.prototype.get=function(e){if(e=$(this,e))return e.constructorFunction},G.prototype.whenDefined=function(e){if(!R(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.j.get(e);if(t)return t.c;t=new V,this.j.set(e,t);var n=this.g.has(e)||this.f.has(e);return e=-1===this.h.indexOf(e),n&&e&&z(t),t.c},G.prototype.polyfillWrapFlushCallback=function(e){this.m&&q(this.m);var t=this.c;this.c=function(n){return e((function(){return t(n)}))}},window.CustomElementRegistry=G,G.prototype.define=G.prototype.define,G.prototype.upgrade=G.prototype.upgrade,G.prototype.get=G.prototype.get,G.prototype.whenDefined=G.prototype.whenDefined,G.prototype.polyfillDefineLazy=G.prototype.o,G.prototype.polyfillWrapFlushCallback=G.prototype.polyfillWrapFlushCallback,Y.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){oe(e)}},Y.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){oe(e)}},Y.prototype.attributeChangedCallback=function(e,t,n,r,o){var i=e.__CE_definition;if(i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(t))try{i.attributeChangedCallback.call(e,t,n,r,o)}catch(e){oe(e)}};var ie=new function(){};function ae(e,t,n){function r(t){return function(n){for(var r=[],o=0;o<arguments.length;++o)r[o]=arguments[o];o=[];for(var i=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&P(s)&&i.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)o.push(s);else o.push(s)}for(t.apply(this,r),r=0;r<i.length;r++)ee(e,i[r]);if(P(this))for(r=0;r<o.length;r++)(i=o[r])instanceof Element&&Q(e,i)}}void 0!==n.prepend&&B(t,"prepend",r(n.prepend)),void 0!==n.append&&B(t,"append",r(n.append))}function se(e){function n(t,n){Object.defineProperty(t,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){var r=this,o=void 0;if(P(this)&&(o=[],X(e,this,(function(e){e!==r&&o.push(e)}))),n.set.call(this,t),o)for(var i=0;i<o.length;i++){var a=o[i];1===a.__CE_state&&e.disconnectedCallback(a)}return this.ownerDocument.__CE_registry?te(e,this):J(e,this),t}})}function r(t,n){B(t,"insertAdjacentElement",(function(t,r){var o=P(r);return t=n.call(this,t,r),o&&ee(e,r),P(t)&&Q(e,r),t}))}function o(t,n){function r(t,n){for(var r=[];t!==n;t=t.nextSibling)r.push(t);for(n=0;n<r.length;n++)te(e,r[n])}B(t,"insertAdjacentHTML",(function(e,t){if("beforebegin"===(e=e.toLowerCase())){var o=this.previousSibling;n.call(this,e,t),r(o||this.parentNode.firstChild,this)}else if("afterbegin"===e)o=this.firstChild,n.call(this,e,t),r(this.firstChild,o);else if("beforeend"===e)o=this.lastChild,n.call(this,e,t),r(o||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");o=this.nextSibling,n.call(this,e,t),r(this.nextSibling,o)}}))}p&&B(Element.prototype,"attachShadow",(function(t){if(t=p.call(this,t),e.a&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.b.length;n++)e.b[n](t)}return this.__CE_shadowRoot=t})),f&&f.get?n(Element.prototype,f):M&&M.get?n(HTMLElement.prototype,M):function(e,t){e.a=!0,e.c.push(t)}(e,(function(e){n(e,{enumerable:!0,configurable:!0,get:function(){return s.call(this,!0).innerHTML},set:function(e){var n="template"===this.localName,r=n?this.content:this,o=t.call(document,this.namespaceURI,this.localName);for(o.innerHTML=e;0<r.childNodes.length;)u.call(r,r.childNodes[0]);for(e=n?o.content:o;0<e.childNodes.length;)c.call(r,e.childNodes[0])}})})),B(Element.prototype,"setAttribute",(function(t,n){if(1!==this.__CE_state)return m.call(this,t,n);var r=v.call(this,t);m.call(this,t,n),n=v.call(this,t),e.attributeChangedCallback(this,t,r,n,null)})),B(Element.prototype,"setAttributeNS",(function(t,n,r){if(1!==this.__CE_state)return _.call(this,t,n,r);var o=y.call(this,t,n);_.call(this,t,n,r),r=y.call(this,t,n),e.attributeChangedCallback(this,n,o,r,t)})),B(Element.prototype,"removeAttribute",(function(t){if(1!==this.__CE_state)return g.call(this,t);var n=v.call(this,t);g.call(this,t),null!==n&&e.attributeChangedCallback(this,t,n,null,null)})),B(Element.prototype,"removeAttributeNS",(function(t,n){if(1!==this.__CE_state)return b.call(this,t,n);var r=y.call(this,t,n);b.call(this,t,n);var o=y.call(this,t,n);r!==o&&e.attributeChangedCallback(this,n,r,o,t)})),I?r(HTMLElement.prototype,I):C&&r(Element.prototype,C),L?o(HTMLElement.prototype,L):w&&o(Element.prototype,w),ae(e,Element.prototype,{prepend:S,append:k}),function(e){function t(t){return function(n){for(var r=[],o=0;o<arguments.length;++o)r[o]=arguments[o];o=[];for(var i=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&P(s)&&i.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)o.push(s);else o.push(s)}for(t.apply(this,r),r=0;r<i.length;r++)ee(e,i[r]);if(P(this))for(r=0;r<o.length;r++)(i=o[r])instanceof Element&&Q(e,i)}}var n=Element.prototype;void 0!==A&&B(n,"before",t(A)),void 0!==E&&B(n,"after",t(E)),void 0!==T&&B(n,"replaceWith",(function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];r=[];for(var o=[],i=0;i<n.length;i++){var a=n[i];if(a instanceof Element&&P(a)&&o.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(i=P(this),T.apply(this,n),n=0;n<o.length;n++)ee(e,o[n]);if(i)for(ee(e,this),n=0;n<r.length;n++)(o=r[n])instanceof Element&&Q(e,o)})),void 0!==O&&B(n,"remove",(function(){var t=P(this);O.call(this),t&&ee(e,this)}))}(e)}var ce=window.customElements;function le(){var t=new Y;!function(t){window.HTMLElement=function(){function n(){var n=this.constructor,r=document.__CE_registry.l.get(n);if(!r)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var o=r.constructionStack;if(0===o.length)return o=e.call(document,r.localName),Object.setPrototypeOf(o,n.prototype),o.__CE_state=1,o.__CE_definition=r,Z(t,o),o;var i=o.length-1,a=o[i];if(a===ie)throw Error("Failed to construct '"+r.localName+"': This element was already constructed.");return o[i]=ie,Object.setPrototypeOf(a,n.prototype),Z(t,a),a}return n.prototype=x.prototype,Object.defineProperty(n.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:n}),n}()}(t),function(e){B(Document.prototype,"createElement",(function(t){return re(e,this,t,null)})),B(Document.prototype,"importNode",(function(t,r){return t=n.call(this,t,!!r),this.__CE_registry?te(e,t):J(e,t),t})),B(Document.prototype,"createElementNS",(function(t,n){return re(e,this,n,t)})),ae(e,Document.prototype,{prepend:r,append:o})}(t),ae(t,DocumentFragment.prototype,{prepend:i,append:a}),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var r=void 0;if(this.firstChild){var o=this.childNodes,i=o.length;if(0<i&&P(this)){r=Array(i);for(var a=0;a<i;a++)r[a]=o[a]}}if(n.set.call(this,t),r)for(t=0;t<r.length;t++)ee(e,r[t])}}})}B(Node.prototype,"insertBefore",(function(t,n){if(t instanceof DocumentFragment){var r=F(t);if(t=l.call(this,t,n),P(this))for(n=0;n<r.length;n++)Q(e,r[n]);return t}return r=t instanceof Element&&P(t),n=l.call(this,t,n),r&&ee(e,t),P(this)&&Q(e,t),n})),B(Node.prototype,"appendChild",(function(t){if(t instanceof DocumentFragment){var n=F(t);if(t=c.call(this,t),P(this))for(var r=0;r<n.length;r++)Q(e,n[r]);return t}return n=t instanceof Element&&P(t),r=c.call(this,t),n&&ee(e,t),P(this)&&Q(e,t),r})),B(Node.prototype,"cloneNode",(function(t){return t=s.call(this,!!t),this.ownerDocument.__CE_registry?te(e,t):J(e,t),t})),B(Node.prototype,"removeChild",(function(t){var n=t instanceof Element&&P(t),r=u.call(this,t);return n&&ee(e,t),r})),B(Node.prototype,"replaceChild",(function(t,n){if(t instanceof DocumentFragment){var r=F(t);if(t=d.call(this,t,n),P(this))for(ee(e,n),n=0;n<r.length;n++)Q(e,r[n]);return t}r=t instanceof Element&&P(t);var o=d.call(this,t,n),i=P(this);return i&&ee(e,n),r&&ee(e,t),i&&Q(e,t),o})),h&&h.get?t(Node.prototype,h):function(e,t){e.a=!0,e.b.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)u.call(this,this.firstChild);null!=e&&""!==e&&c.call(this,document.createTextNode(e))}})}))}(t),se(t),t=new G(t),document.__CE_registry=t,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:t})}ce&&!ce.forcePolyfill&&"function"==typeof ce.define&&"function"==typeof ce.get||le(),window.__CE_installPolyfill=le}).call(self)},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(20),o=n(442),i=n(446),a=n(447),s=n(455),c=n(469),l=n(482),u=n(178),d=n(484),h={default:n(486),zero:n(487),commonmark:n(488)},p=/^(vbscript|javascript|file|data):/,f=/^data:image\/(gif|png|jpeg|webp);/;function v(e){var t=e.trim().toLowerCase();return!p.test(t)||!!f.test(t)}var m=["http:","https:","mailto:"];function g(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||m.indexOf(t.protocol)>=0))try{t.hostname=d.toASCII(t.hostname)}catch(e){}return u.encode(u.format(t))}function y(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||m.indexOf(t.protocol)>=0))try{t.hostname=d.toUnicode(t.hostname)}catch(e){}return u.decode(u.format(t))}function _(e,t){if(!(this instanceof _))return new _(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new c,this.block=new s,this.core=new a,this.renderer=new i,this.linkify=new l,this.validateLink=v,this.normalizeLink=g,this.normalizeLinkText=y,this.utils=r,this.helpers=r.assign({},o),this.options={},this.configure(e),t&&this.set(t)}_.prototype.set=function(e){return r.assign(this.options,e),this},_.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=h[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},_.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},_.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},_.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},_.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},_.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},_.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},_.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=_},function(e){e.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},function(e,t,n){"use strict";var r={};function o(e,t,n){var i,a,s,c,l,u="";for("string"!=typeof t&&(n=t,t=o.defaultChars),void 0===n&&(n=!0),l=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?o.push(n):o.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)o[e.charCodeAt(t)]=e[t];return o}(t),i=0,a=e.length;i<a;i++)if(s=e.charCodeAt(i),n&&37===s&&i+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3)))u+=e.slice(i,i+3),i+=2;else if(s<128)u+=l[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<a&&(c=e.charCodeAt(i+1))>=56320&&c<=57343){u+=encodeURIComponent(e[i]+e[i+1]),i++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[i]);return u}o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",e.exports=o},function(e,t,n){"use strict";var r={};function o(e,t){var n;return"string"!=typeof t&&(t=o.defaultChars),n=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),o.push(n);for(t=0;t<e.length;t++)o[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return o}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,r,o,i,a,s,c,l="";for(t=0,r=e.length;t<r;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?l+=n[o]:192==(224&o)&&t+3<r&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(l+=(c=o<<6&1984|63&i)<128?"":String.fromCharCode(c),t+=3):224==(240&o)&&t+6<r&&(i=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&a))?(l+=(c=o<<12&61440|i<<6&4032|63&a)<2048||c>=55296&&c<=57343?"":String.fromCharCode(c),t+=6):240==(248&o)&&t+9<r&&(i=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),s=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&a)&&128==(192&s))?((c=o<<18&1835008|i<<12&258048|a<<6&4032|63&s)<65536||c>1114111?l+="":(c-=65536,l+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),t+=9):l+="";return l}))}o.defaultChars=";/?:@&=+$,#",o.componentChars="",e.exports=o},function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(s),l=["%","/","?",";","#"].concat(c),u=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,i,s,c,v=e;if(v=v.trim(),!t&&1===e.split("#").length){var m=a.exec(v);if(m)return this.pathname=m[1],m[2]&&(this.search=m[2]),this}var g=o.exec(v);if(g&&(i=(g=g[0]).toLowerCase(),this.protocol=g,v=v.substr(g.length)),(t||g||v.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(c="//"===v.substr(0,2))||g&&p[g]||(v=v.substr(2),this.slashes=!0)),!p[g]&&(c||g&&!f[g])){var y,_,b=-1;for(n=0;n<u.length;n++)-1!==(s=v.indexOf(u[n]))&&(-1===b||s<b)&&(b=s);for(-1!==(_=-1===b?v.lastIndexOf("@"):v.lastIndexOf("@",b))&&(y=v.slice(0,_),v=v.slice(_+1),this.auth=y),b=-1,n=0;n<l.length;n++)-1!==(s=v.indexOf(l[n]))&&(-1===b||s<b)&&(b=s);-1===b&&(b=v.length),":"===v[b-1]&&b--;var C=v.slice(0,b);v=v.slice(b),this.parseHost(C),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w){var S=this.hostname.split(/\./);for(n=0,r=S.length;n<r;n++){var k=S[n];if(k&&!k.match(d)){for(var A="",E=0,T=k.length;E<T;E++)k.charCodeAt(E)>127?A+="x":A+=k[E];if(!A.match(d)){var O=S.slice(0,n),x=S.slice(n+1),M=k.match(h);M&&(O.push(M[1]),x.unshift(M[2])),x.length&&(v=x.join(".")+v),this.hostname=O.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var I=v.indexOf("#");-1!==I&&(this.hash=v.substr(I),v=v.slice(0,I));var L=v.indexOf("?");return-1!==L&&(this.search=v.substr(L),v=v.slice(0,L)),v&&(this.pathname=v),f[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},function(e,t,n){"use strict";t.Any=n(179),t.Cc=n(180),t.Cf=n(441),t.P=n(133),t.Z=n(181)},function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},function(e,t,n){"use strict";t.parseLinkLabel=n(443),t.parseLinkDestination=n(444),t.parseLinkTitle=n(445)},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i,a,s=-1,c=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<c;){if(93===(i=e.src.charCodeAt(e.pos))&&0===--r){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===i)if(a===e.pos-1)r++;else if(n)return e.pos=l,-1}return o&&(s=e.pos),e.pos=l,s}},function(e,t,n){"use strict";var r=n(20).unescapeAll;e.exports=function(e,t,n){var o,i,a=t,s={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(o=e.charCodeAt(t)))return s;if(62===o)return s.pos=t+1,s.str=r(e.slice(a+1,t)),s.ok=!0,s;92===o&&t+1<n?t+=2:t++}return s}for(i=0;t<n&&32!==(o=e.charCodeAt(t))&&!(o<32||127===o);)if(92===o&&t+1<n)t+=2;else{if(40===o&&i++,41===o){if(0===i)break;i--}t++}return a===t?s:0!==i?s:(s.str=r(e.slice(a,t)),s.lines=0,s.pos=t,s.ok=!0,s)}},function(e,t,n){"use strict";var r=n(20).unescapeAll;e.exports=function(e,t,n){var o,i,a=0,s=t,c={ok:!1,pos:0,lines:0,str:""};if(t>=n)return c;if(34!==(i=e.charCodeAt(t))&&39!==i&&40!==i)return c;for(t++,40===i&&(i=41);t<n;){if((o=e.charCodeAt(t))===i)return c.pos=t+1,c.lines=a,c.str=r(e.slice(s+1,t)),c.ok=!0,c;10===o?a++:92===o&&t+1<n&&(t++,10===e.charCodeAt(t)&&a++),t++}return c}},function(e,t,n){"use strict";var r=n(20).assign,o=n(20).unescapeAll,i=n(20).escapeHtml,a={};function s(){this.rules=r({},a)}a.code_inline=function(e,t,n,r,o){var a=e[t];return"<code"+o.renderAttrs(a)+">"+i(e[t].content)+"</code>"},a.code_block=function(e,t,n,r,o){var a=e[t];return"<pre"+o.renderAttrs(a)+"><code>"+i(e[t].content)+"</code></pre>\n"},a.fence=function(e,t,n,r,a){var s,c,l,u,d=e[t],h=d.info?o(d.info).trim():"",p="";return h&&(p=h.split(/\s+/g)[0]),0===(s=n.highlight&&n.highlight(d.content,p)||i(d.content)).indexOf("<pre")?s+"\n":h?(c=d.attrIndex("class"),l=d.attrs?d.attrs.slice():[],c<0?l.push(["class",n.langPrefix+p]):l[c][1]+=" "+n.langPrefix+p,u={attrs:l},"<pre><code"+a.renderAttrs(u)+">"+s+"</code></pre>\n"):"<pre><code"+a.renderAttrs(d)+">"+s+"</code></pre>\n"},a.image=function(e,t,n,r,o){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,n,r),o.renderToken(e,t,n)},a.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(e,t){return i(e[t].content)},a.html_block=function(e,t){return e[t].content},a.html_inline=function(e,t){return e[t].content},s.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+i(e.attrs[t][0])+'="'+i(e.attrs[t][1])+'"';return r},s.prototype.renderToken=function(e,t,n){var r,o="",i=!1,a=e[t];return a.hidden?"":(a.block&&-1!==a.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===a.nesting?"</":"<")+a.tag,o+=this.renderAttrs(a),0===a.nesting&&n.xhtmlOut&&(o+=" /"),a.block&&(i=!0,1===a.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden?i=!1:-1===r.nesting&&r.tag===a.tag&&(i=!1))),o+=i?">\n":">")},s.prototype.renderInline=function(e,t,n){for(var r,o="",i=this.rules,a=0,s=e.length;a<s;a++)void 0!==i[r=e[a].type]?o+=i[r](e,a,t,n,this):o+=this.renderToken(e,a,t);return o},s.prototype.renderInlineAsText=function(e,t,n){for(var r="",o=0,i=e.length;o<i;o++)"text"===e[o].type?r+=e[o].content:"image"===e[o].type&&(r+=this.renderInlineAsText(e[o].children,t,n));return r},s.prototype.render=function(e,t,n){var r,o,i,a="",s=this.rules;for(r=0,o=e.length;r<o;r++)"inline"===(i=e[r].type)?a+=this.renderInline(e[r].children,t,n):void 0!==s[i]?a+=s[e[r].type](e,r,t,n,this):a+=this.renderToken(e,r,t,n);return a},e.exports=s},function(e,t,n){"use strict";var r=n(134),o=[["normalize",n(448)],["block",n(449)],["inline",n(450)],["linkify",n(451)],["replacements",n(452)],["smartquotes",n(453)]];function i(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1])}i.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},i.prototype.State=n(454),e.exports=i},function(e,t,n){"use strict";var r=/\r\n?|\n/g,o=/\0/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(o,""),e.src=t}},function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,o=e.tokens;for(n=0,r=o.length;n<r;n++)"inline"===(t=o[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},function(e,t,n){"use strict";var r=n(20).arrayReplaceAt;function o(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,i,a,s,c,l,u,d,h,p,f,v,m,g,y,_,b,C=e.tokens;if(e.md.options.linkify)for(n=0,i=C.length;n<i;n++)if("inline"===C[n].type&&e.md.linkify.pretest(C[n].content))for(v=0,t=(a=C[n].children).length-1;t>=0;t--)if("link_close"!==(c=a[t]).type){if("html_inline"===c.type&&(b=c.content,/^<a[>\s]/i.test(b)&&v>0&&v--,o(c.content)&&v++),!(v>0)&&"text"===c.type&&e.md.linkify.test(c.content)){for(d=c.content,_=e.md.linkify.match(d),l=[],f=c.level,p=0,u=0;u<_.length;u++)m=_[u].url,g=e.md.normalizeLink(m),e.md.validateLink(g)&&(y=_[u].text,y=_[u].schema?"mailto:"!==_[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(h=_[u].index)>p&&((s=new e.Token("text","",0)).content=d.slice(p,h),s.level=f,l.push(s)),(s=new e.Token("link_open","a",1)).attrs=[["href",g]],s.level=f++,s.markup="linkify",s.info="auto",l.push(s),(s=new e.Token("text","",0)).content=y,s.level=f,l.push(s),(s=new e.Token("link_close","a",-1)).level=--f,s.markup="linkify",s.info="auto",l.push(s),p=_[u].lastIndex);p<d.length&&((s=new e.Token("text","",0)).content=d.slice(p),s.level=f,l.push(s)),C[n].children=a=r(a,t,l)}}else for(t--;a[t].level!==c.level&&"link_open"!==a[t].type;)t--}},function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,a={c:"",r:"",p:"",tm:""};function s(e,t){return a[t.toLowerCase()]}function c(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(i,s)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function l(e){var t,n,o=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||o||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2")),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(o.test(e.tokens[t].content)&&c(e.tokens[t].children),r.test(e.tokens[t].content)&&l(e.tokens[t].children))}},function(e,t,n){"use strict";var r=n(20).isWhiteSpace,o=n(20).isPunctChar,i=n(20).isMdAsciiPunct,a=/['"]/,s=/['"]/g;function c(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function l(e,t){var n,a,l,u,d,h,p,f,v,m,g,y,_,b,C,w,S,k,A,E,T;for(A=[],n=0;n<e.length;n++){for(a=e[n],p=e[n].level,S=A.length-1;S>=0&&!(A[S].level<=p);S--);if(A.length=S+1,"text"===a.type){d=0,h=(l=a.content).length;e:for(;d<h&&(s.lastIndex=d,u=s.exec(l));){if(C=w=!0,d=u.index+1,k="'"===u[0],v=32,u.index-1>=0)v=l.charCodeAt(u.index-1);else for(S=n-1;S>=0&&("softbreak"!==e[S].type&&"hardbreak"!==e[S].type);S--)if("text"===e[S].type){v=e[S].content.charCodeAt(e[S].content.length-1);break}if(m=32,d<h)m=l.charCodeAt(d);else for(S=n+1;S<e.length&&("softbreak"!==e[S].type&&"hardbreak"!==e[S].type);S++)if("text"===e[S].type){m=e[S].content.charCodeAt(0);break}if(g=i(v)||o(String.fromCharCode(v)),y=i(m)||o(String.fromCharCode(m)),_=r(v),(b=r(m))?C=!1:y&&(_||g||(C=!1)),_?w=!1:g&&(b||y||(w=!1)),34===m&&'"'===u[0]&&v>=48&&v<=57&&(w=C=!1),C&&w&&(C=!1,w=y),C||w){if(w)for(S=A.length-1;S>=0&&(f=A[S],!(A[S].level<p));S--)if(f.single===k&&A[S].level===p){f=A[S],k?(E=t.md.options.quotes[2],T=t.md.options.quotes[3]):(E=t.md.options.quotes[0],T=t.md.options.quotes[1]),a.content=c(a.content,u.index,T),e[f.token].content=c(e[f.token].content,f.pos,E),d+=T.length-1,f.token===n&&(d+=E.length-1),h=(l=a.content).length,A.length=S;continue e}C?A.push({token:n,pos:u.index,single:k,level:p}):w&&k&&(a.content=c(a.content,u.index,""))}else k&&(a.content=c(a.content,u.index,""))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&a.test(e.tokens[t].content)&&l(e.tokens[t].children,e)}},function(e,t,n){"use strict";var r=n(135);function o(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}o.prototype.Token=r,e.exports=o},function(e,t,n){"use strict";var r=n(134),o=[["table",n(456),["paragraph","reference"]],["code",n(457)],["fence",n(458),["paragraph","reference","blockquote","list"]],["blockquote",n(459),["paragraph","reference","blockquote","list"]],["hr",n(460),["paragraph","reference","blockquote","list"]],["list",n(461),["paragraph","reference","blockquote"]],["reference",n(462)],["heading",n(463),["paragraph","reference","blockquote"]],["lheading",n(464)],["html_block",n(465),["paragraph","reference","blockquote"]],["paragraph",n(467)]];function i(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1],{alt:(o[e][2]||[]).slice()})}i.prototype.tokenize=function(e,t,n){for(var r,o=this.ruler.getRules(""),i=o.length,a=t,s=!1,c=e.md.options.maxNesting;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=c){e.line=n;break}for(r=0;r<i&&!o[r](e,a,n,!1);r++);e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(a=e.line)<n&&e.isEmpty(a)&&(s=!0,a++,e.line=a)}},i.prototype.parse=function(e,t,n,r){var o;e&&(o=new this.State(e,t,n,r),this.tokenize(o,o.line,o.lineMax))},i.prototype.State=n(468),e.exports=i},function(e,t,n){"use strict";var r=n(20).isSpace;function o(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function i(e){var t,n=[],r=0,o=e.length,i=0,a=0,s=!1,c=0;for(t=e.charCodeAt(r);r<o;)96===t?s?(s=!1,c=r):i%2==0&&(s=!0,c=r):124!==t||i%2!=0||s||(n.push(e.substring(a,r)),a=r+1),92===t?i++:i=0,++r===o&&s&&(s=!1,r=c+1),t=e.charCodeAt(r);return n.push(e.substring(a)),n}e.exports=function(e,t,n,a){var s,c,l,u,d,h,p,f,v,m,g,y;if(t+2>n)return!1;if(d=t+1,e.sCount[d]<e.blkIndent)return!1;if(e.sCount[d]-e.blkIndent>=4)return!1;if((l=e.bMarks[d]+e.tShift[d])>=e.eMarks[d])return!1;if(124!==(s=e.src.charCodeAt(l++))&&45!==s&&58!==s)return!1;for(;l<e.eMarks[d];){if(124!==(s=e.src.charCodeAt(l))&&45!==s&&58!==s&&!r(s))return!1;l++}for(h=(c=o(e,t+1)).split("|"),v=[],u=0;u<h.length;u++){if(!(m=h[u].trim())){if(0===u||u===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;58===m.charCodeAt(m.length-1)?v.push(58===m.charCodeAt(0)?"center":"right"):58===m.charCodeAt(0)?v.push("left"):v.push("")}if(-1===(c=o(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=(h=i(c.replace(/^\||\|$/g,""))).length)>v.length)return!1;if(a)return!0;for((f=e.push("table_open","table",1)).map=g=[t,0],(f=e.push("thead_open","thead",1)).map=[t,t+1],(f=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<h.length;u++)(f=e.push("th_open","th",1)).map=[t,t+1],v[u]&&(f.attrs=[["style","text-align:"+v[u]]]),(f=e.push("inline","",0)).content=h[u].trim(),f.map=[t,t+1],f.children=[],f=e.push("th_close","th",-1);for(f=e.push("tr_close","tr",-1),f=e.push("thead_close","thead",-1),(f=e.push("tbody_open","tbody",1)).map=y=[t+2,0],d=t+2;d<n&&!(e.sCount[d]<e.blkIndent)&&-1!==(c=o(e,d).trim()).indexOf("|")&&!(e.sCount[d]-e.blkIndent>=4);d++){for(h=i(c.replace(/^\||\|$/g,"")),f=e.push("tr_open","tr",1),u=0;u<p;u++)f=e.push("td_open","td",1),v[u]&&(f.attrs=[["style","text-align:"+v[u]]]),(f=e.push("inline","",0)).content=h[u]?h[u].trim():"",f.children=[],f=e.push("td_close","td",-1);f=e.push("tr_close","tr",-1)}return f=e.push("tbody_close","tbody",-1),f=e.push("table_close","table",-1),g[1]=y[1]=d,e.line=d,!0}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;o=++r}return e.line=o,(i=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!0),i.map=[t,e.line],!0}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o,i,a,s,c,l,u,d=!1,h=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(h+3>p)return!1;if(126!==(o=e.src.charCodeAt(h))&&96!==o)return!1;if(c=h,(i=(h=e.skipChars(h,o))-c)<3)return!1;if(u=e.src.slice(c,h),a=e.src.slice(h,p),96===o&&a.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;for(s=t;!(++s>=n)&&!((h=c=e.bMarks[s]+e.tShift[s])<(p=e.eMarks[s])&&e.sCount[s]<e.blkIndent);)if(e.src.charCodeAt(h)===o&&!(e.sCount[s]-e.blkIndent>=4||(h=e.skipChars(h,o))-c<i||(h=e.skipSpaces(h))<p)){d=!0;break}return i=e.sCount[t],e.line=s+(d?1:0),(l=e.push("fence","code",0)).info=a,l.content=e.getLines(t+1,s,i,!0),l.markup=u,l.map=[t,e.line],!0}},function(e,t,n){"use strict";var r=n(20).isSpace;e.exports=function(e,t,n,o){var i,a,s,c,l,u,d,h,p,f,v,m,g,y,_,b,C,w,S,k,A=e.lineMax,E=e.bMarks[t]+e.tShift[t],T=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(E++))return!1;if(o)return!0;for(c=p=e.sCount[t]+E-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(E)?(E++,c++,p++,i=!1,b=!0):9===e.src.charCodeAt(E)?(b=!0,(e.bsCount[t]+p)%4==3?(E++,c++,p++,i=!1):i=!0):b=!1,f=[e.bMarks[t]],e.bMarks[t]=E;E<T&&(a=e.src.charCodeAt(E),r(a));)9===a?p+=4-(p+e.bsCount[t]+(i?1:0))%4:p++,E++;for(v=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(b?1:0),u=E>=T,y=[e.sCount[t]],e.sCount[t]=p-c,_=[e.tShift[t]],e.tShift[t]=E-e.bMarks[t],w=e.md.block.ruler.getRules("blockquote"),g=e.parentType,e.parentType="blockquote",k=!1,h=t+1;h<n&&(e.sCount[h]<e.blkIndent&&(k=!0),!((E=e.bMarks[h]+e.tShift[h])>=(T=e.eMarks[h])));h++)if(62!==e.src.charCodeAt(E++)||k){if(u)break;for(C=!1,s=0,l=w.length;s<l;s++)if(w[s](e,h,n,!0)){C=!0;break}if(C){e.lineMax=h,0!==e.blkIndent&&(f.push(e.bMarks[h]),v.push(e.bsCount[h]),_.push(e.tShift[h]),y.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}f.push(e.bMarks[h]),v.push(e.bsCount[h]),_.push(e.tShift[h]),y.push(e.sCount[h]),e.sCount[h]=-1}else{for(c=p=e.sCount[h]+E-(e.bMarks[h]+e.tShift[h]),32===e.src.charCodeAt(E)?(E++,c++,p++,i=!1,b=!0):9===e.src.charCodeAt(E)?(b=!0,(e.bsCount[h]+p)%4==3?(E++,c++,p++,i=!1):i=!0):b=!1,f.push(e.bMarks[h]),e.bMarks[h]=E;E<T&&(a=e.src.charCodeAt(E),r(a));)9===a?p+=4-(p+e.bsCount[h]+(i?1:0))%4:p++,E++;u=E>=T,v.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(b?1:0),y.push(e.sCount[h]),e.sCount[h]=p-c,_.push(e.tShift[h]),e.tShift[h]=E-e.bMarks[h]}for(m=e.blkIndent,e.blkIndent=0,(S=e.push("blockquote_open","blockquote",1)).markup=">",S.map=d=[t,0],e.md.block.tokenize(e,t,h),(S=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=A,e.parentType=g,d[1]=e.line,s=0;s<_.length;s++)e.bMarks[s+t]=f[s],e.tShift[s+t]=_[s],e.sCount[s+t]=y[s],e.bsCount[s+t]=v[s];return e.blkIndent=m,!0}},function(e,t,n){"use strict";var r=n(20).isSpace;e.exports=function(e,t,n,o){var i,a,s,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(i=e.src.charCodeAt(l++))&&45!==i&&95!==i)return!1;for(a=1;l<u;){if((s=e.src.charCodeAt(l++))!==i&&!r(s))return!1;s===i&&a++}return!(a<3)&&(!!o||(e.line=t+1,(c=e.push("hr","hr",0)).map=[t,e.line],c.markup=Array(a+1).join(String.fromCharCode(i)),!0))}},function(e,t,n){"use strict";var r=n(20).isSpace;function o(e,t){var n,o,i,a;return o=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],42!==(n=e.src.charCodeAt(o++))&&45!==n&&43!==n?-1:o<i&&(a=e.src.charCodeAt(o),!r(a))?-1:o}function i(e,t){var n,o=e.bMarks[t]+e.tShift[t],i=o,a=e.eMarks[t];if(i+1>=a)return-1;if((n=e.src.charCodeAt(i++))<48||n>57)return-1;for(;;){if(i>=a)return-1;if(!((n=e.src.charCodeAt(i++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-o>=10)return-1}return i<a&&(n=e.src.charCodeAt(i),!r(n))?-1:i}e.exports=function(e,t,n,r){var a,s,c,l,u,d,h,p,f,v,m,g,y,_,b,C,w,S,k,A,E,T,O,x,M,I,L,N,R=!1,D=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(r&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(R=!0),(O=i(e,t))>=0){if(h=!0,M=e.bMarks[t]+e.tShift[t],y=Number(e.src.substr(M,O-M-1)),R&&1!==y)return!1}else{if(!((O=o(e,t))>=0))return!1;h=!1}if(R&&e.skipSpaces(O)>=e.eMarks[t])return!1;if(g=e.src.charCodeAt(O-1),r)return!0;for(m=e.tokens.length,h?(N=e.push("ordered_list_open","ol",1),1!==y&&(N.attrs=[["start",y]])):N=e.push("bullet_list_open","ul",1),N.map=v=[t,0],N.markup=String.fromCharCode(g),b=t,x=!1,L=e.md.block.ruler.getRules("list"),S=e.parentType,e.parentType="list";b<n;){for(T=O,_=e.eMarks[b],d=C=e.sCount[b]+O-(e.bMarks[t]+e.tShift[t]);T<_;){if(9===(a=e.src.charCodeAt(T)))C+=4-(C+e.bsCount[b])%4;else{if(32!==a)break;C++}T++}if((u=(s=T)>=_?1:C-d)>4&&(u=1),l=d+u,(N=e.push("list_item_open","li",1)).markup=String.fromCharCode(g),N.map=p=[t,0],E=e.tight,A=e.tShift[t],k=e.sCount[t],w=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[t]=s-e.bMarks[t],e.sCount[t]=C,s>=_&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!x||(D=!1),x=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=w,e.tShift[t]=A,e.sCount[t]=k,e.tight=E,(N=e.push("list_item_close","li",-1)).markup=String.fromCharCode(g),b=t=e.line,p[1]=b,s=e.bMarks[t],b>=n)break;if(e.sCount[b]<e.blkIndent)break;if(e.sCount[t]-e.blkIndent>=4)break;for(I=!1,c=0,f=L.length;c<f;c++)if(L[c](e,b,n,!0)){I=!0;break}if(I)break;if(h){if((O=i(e,b))<0)break}else if((O=o(e,b))<0)break;if(g!==e.src.charCodeAt(O-1))break}return(N=h?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(g),v[1]=b,e.line=b,e.parentType=S,D&&function(e,t){var n,r,o=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===o&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,m),!0}},function(e,t,n){"use strict";var r=n(20).normalizeReference,o=n(20).isSpace;e.exports=function(e,t,n,i){var a,s,c,l,u,d,h,p,f,v,m,g,y,_,b,C,w=0,S=e.bMarks[t]+e.tShift[t],k=e.eMarks[t],A=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(S))return!1;for(;++S<k;)if(93===e.src.charCodeAt(S)&&92!==e.src.charCodeAt(S-1)){if(S+1===k)return!1;if(58!==e.src.charCodeAt(S+1))return!1;break}for(l=e.lineMax,b=e.md.block.ruler.getRules("reference"),v=e.parentType,e.parentType="reference";A<l&&!e.isEmpty(A);A++)if(!(e.sCount[A]-e.blkIndent>3||e.sCount[A]<0)){for(_=!1,d=0,h=b.length;d<h;d++)if(b[d](e,A,l,!0)){_=!0;break}if(_)break}for(k=(y=e.getLines(t,A,e.blkIndent,!1).trim()).length,S=1;S<k;S++){if(91===(a=y.charCodeAt(S)))return!1;if(93===a){f=S;break}10===a?w++:92===a&&++S<k&&10===y.charCodeAt(S)&&w++}if(f<0||58!==y.charCodeAt(f+1))return!1;for(S=f+2;S<k;S++)if(10===(a=y.charCodeAt(S)))w++;else if(!o(a))break;if(!(m=e.md.helpers.parseLinkDestination(y,S,k)).ok)return!1;if(u=e.md.normalizeLink(m.str),!e.md.validateLink(u))return!1;for(s=S=m.pos,c=w+=m.lines,g=S;S<k;S++)if(10===(a=y.charCodeAt(S)))w++;else if(!o(a))break;for(m=e.md.helpers.parseLinkTitle(y,S,k),S<k&&g!==S&&m.ok?(C=m.str,S=m.pos,w+=m.lines):(C="",S=s,w=c);S<k&&(a=y.charCodeAt(S),o(a));)S++;if(S<k&&10!==y.charCodeAt(S)&&C)for(C="",S=s,w=c;S<k&&(a=y.charCodeAt(S),o(a));)S++;return!(S<k&&10!==y.charCodeAt(S))&&(!!(p=r(y.slice(1,f)))&&(!!i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:C,href:u}),e.parentType=v,e.line=t+w+1,!0)))}},function(e,t,n){"use strict";var r=n(20).isSpace;e.exports=function(e,t,n,o){var i,a,s,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(i=e.src.charCodeAt(l))||l>=u)return!1;for(a=1,i=e.src.charCodeAt(++l);35===i&&l<u&&a<=6;)a++,i=e.src.charCodeAt(++l);return!(a>6||l<u&&!r(i))&&(!!o||(u=e.skipSpacesBack(u,l),(s=e.skipCharsBack(u,35,l))>l&&r(e.src.charCodeAt(s-1))&&(u=s),e.line=t+1,(c=e.push("heading_open","h"+String(a),1)).markup="########".slice(0,a),c.map=[t,e.line],(c=e.push("inline","",0)).content=e.src.slice(l,u).trim(),c.map=[t,e.line],c.children=[],(c=e.push("heading_close","h"+String(a),-1)).markup="########".slice(0,a),!0))}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i,a,s,c,l,u,d,h,p=t+1,f=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(c=e.bMarks[p]+e.tShift[p])<(l=e.eMarks[p])&&(45===(d=e.src.charCodeAt(c))||61===d)&&(c=e.skipChars(c,d),(c=e.skipSpaces(c))>=l)){u=61===d?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,i=0,a=f.length;i<a;i++)if(f[i](e,p,n,!0)){o=!0;break}if(o)break}}return!!u&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(s=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(d),s.map=[t,e.line],(s=e.push("inline","",0)).content=r,s.map=[t,e.line-1],s.children=[],(s=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(d),e.parentType=h,!0)}},function(e,t,n){"use strict";var r=n(466),o=n(182).HTML_OPEN_CLOSE_TAG_RE,i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var o,a,s,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(l))return!1;for(c=e.src.slice(l,u),o=0;o<i.length&&!i[o][0].test(c);o++);if(o===i.length)return!1;if(r)return i[o][2];if(a=t+1,!i[o][1].test(c))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(l=e.bMarks[a]+e.tShift[a],u=e.eMarks[a],c=e.src.slice(l,u),i[o][1].test(c)){0!==c.length&&a++;break}return e.line=a,(s=e.push("html_block","",0)).map=[t,a],s.content=e.getLines(t,a,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,i,a,s,c=t+1,l=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(s=e.parentType,e.parentType="paragraph";c<u&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3||e.sCount[c]<0)){for(r=!1,o=0,i=l.length;o<i;o++)if(l[o](e,c,u,!0)){r=!0;break}if(r)break}return n=e.getLines(t,c,e.blkIndent,!1).trim(),e.line=c,(a=e.push("paragraph_open","p",1)).map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=s,!0}},function(e,t,n){"use strict";var r=n(135),o=n(20).isSpace;function i(e,t,n,r){var i,a,s,c,l,u,d,h;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",h=!1,s=c=u=d=0,l=(a=this.src).length;c<l;c++){if(i=a.charCodeAt(c),!h){if(o(i)){u++,9===i?d+=4-d%4:d++;continue}h=!0}10!==i&&c!==l-1||(10!==i&&c++,this.bMarks.push(s),this.eMarks.push(c),this.tShift.push(u),this.sCount.push(d),this.bsCount.push(0),h=!1,u=0,d=0,s=c+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(e,t,n){var o=new r(e,t,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o},i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),o(t));e++);return e},i.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!o(this.src.charCodeAt(--e)))return e+1;return e},i.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,n,r){var i,a,s,c,l,u,d,h=e;if(e>=t)return"";for(u=new Array(t-e),i=0;h<t;h++,i++){for(a=0,d=c=this.bMarks[h],l=h+1<t||r?this.eMarks[h]+1:this.eMarks[h];c<l&&a<n;){if(s=this.src.charCodeAt(c),o(s))9===s?a+=4-(a+this.bsCount[h])%4:a++;else{if(!(c-d<this.tShift[h]))break;a++}c++}u[i]=a>n?new Array(a-n+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return u.join("")},i.prototype.Token=r,e.exports=i},function(e,t,n){"use strict";var r=n(134),o=[["text",n(470)],["newline",n(471)],["escape",n(472)],["backticks",n(473)],["strikethrough",n(183).tokenize],["emphasis",n(184).tokenize],["link",n(474)],["image",n(475)],["autolink",n(476)],["html_inline",n(477)],["entity",n(478)]],i=[["balance_pairs",n(479)],["strikethrough",n(183).postProcess],["emphasis",n(184).postProcess],["text_collapse",n(480)]];function a(){var e;for(this.ruler=new r,e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1]);for(this.ruler2=new r,e=0;e<i.length;e++)this.ruler2.push(i[e][0],i[e][1])}a.prototype.skipToken=function(e){var t,n,r=e.pos,o=this.ruler.getRules(""),i=o.length,a=e.md.options.maxNesting,s=e.cache;if(void 0===s[r]){if(e.level<a)for(n=0;n<i&&(e.level++,t=o[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,s[r]=e.pos}else e.pos=s[r]},a.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),o=r.length,i=e.posMax,a=e.md.options.maxNesting;e.pos<i;){if(e.level<a)for(n=0;n<o&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},a.prototype.parse=function(e,t,n,r){var o,i,a,s=new this.State(e,t,n,r);for(this.tokenize(s),a=(i=this.ruler2.getRules("")).length,o=0;o<a;o++)i[o](s)},a.prototype.State=n(481),e.exports=a},function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},function(e,t,n){"use strict";var r=n(20).isSpace;e.exports=function(e,t){var n,o,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;for(n=e.pending.length-1,o=e.posMax,t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;i<o&&r(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},function(e,t,n){"use strict";for(var r=n(20).isSpace,o=[],i=0;i<256;i++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){o[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,i=e.pos,a=e.posMax;if(92!==e.src.charCodeAt(i))return!1;if(++i<a){if((n=e.src.charCodeAt(i))<256&&0!==o[n])return t||(e.pending+=e.src[i]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),i++;i<a&&(n=e.src.charCodeAt(i),r(n));)i++;return e.pos=i,!0}}return t||(e.pending+="\\"),e.pos++,!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,i,a,s,c=e.pos;if(96!==e.src.charCodeAt(c))return!1;for(n=c,c++,r=e.posMax;c<r&&96===e.src.charCodeAt(c);)c++;for(o=e.src.slice(n,c),i=a=c;-1!==(i=e.src.indexOf("`",a));){for(a=i+1;a<r&&96===e.src.charCodeAt(a);)a++;if(a-i===o.length)return t||((s=e.push("code_inline","code",0)).markup=o,s.content=e.src.slice(c,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=a,!0}return t||(e.pending+=o),e.pos+=o.length,!0}},function(e,t,n){"use strict";var r=n(20).normalizeReference,o=n(20).isSpace;e.exports=function(e,t){var n,i,a,s,c,l,u,d,h,p="",f=e.pos,v=e.posMax,m=e.pos,g=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(c=e.pos+1,(s=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((l=s+1)<v&&40===e.src.charCodeAt(l)){for(g=!1,l++;l<v&&(i=e.src.charCodeAt(l),o(i)||10===i);l++);if(l>=v)return!1;for(m=l,(u=e.md.helpers.parseLinkDestination(e.src,l,e.posMax)).ok&&(p=e.md.normalizeLink(u.str),e.md.validateLink(p)?l=u.pos:p=""),m=l;l<v&&(i=e.src.charCodeAt(l),o(i)||10===i);l++);if(u=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<v&&m!==l&&u.ok)for(h=u.str,l=u.pos;l<v&&(i=e.src.charCodeAt(l),o(i)||10===i);l++);else h="";(l>=v||41!==e.src.charCodeAt(l))&&(g=!0),l++}if(g){if(void 0===e.env.references)return!1;if(l<v&&91===e.src.charCodeAt(l)?(m=l+1,(l=e.md.helpers.parseLinkLabel(e,l))>=0?a=e.src.slice(m,l++):l=s+1):l=s+1,a||(a=e.src.slice(c,s)),!(d=e.env.references[r(a)]))return e.pos=f,!1;p=d.href,h=d.title}return t||(e.pos=c,e.posMax=s,e.push("link_open","a",1).attrs=n=[["href",p]],h&&n.push(["title",h]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=l,e.posMax=v,!0}},function(e,t,n){"use strict";var r=n(20).normalizeReference,o=n(20).isSpace;e.exports=function(e,t){var n,i,a,s,c,l,u,d,h,p,f,v,m,g="",y=e.pos,_=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(l=e.pos+2,(c=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((u=c+1)<_&&40===e.src.charCodeAt(u)){for(u++;u<_&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);if(u>=_)return!1;for(m=u,(h=e.md.helpers.parseLinkDestination(e.src,u,e.posMax)).ok&&(g=e.md.normalizeLink(h.str),e.md.validateLink(g)?u=h.pos:g=""),m=u;u<_&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);if(h=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<_&&m!==u&&h.ok)for(p=h.str,u=h.pos;u<_&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);else p="";if(u>=_||41!==e.src.charCodeAt(u))return e.pos=y,!1;u++}else{if(void 0===e.env.references)return!1;if(u<_&&91===e.src.charCodeAt(u)?(m=u+1,(u=e.md.helpers.parseLinkLabel(e,u))>=0?s=e.src.slice(m,u++):u=c+1):u=c+1,s||(s=e.src.slice(l,c)),!(d=e.env.references[r(s)]))return e.pos=y,!1;g=d.href,p=d.title}return t||(a=e.src.slice(l,c),e.md.inline.parse(a,e.md,e.env,v=[]),(f=e.push("image","img",0)).attrs=n=[["src",g],["alt",""]],f.children=v,f.content=a,p&&n.push(["title",p])),e.pos=u,e.posMax=_,!0}},function(e,t,n){"use strict";var r=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,o=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;e.exports=function(e,t){var n,i,a,s,c,l,u=e.pos;return 60===e.src.charCodeAt(u)&&(!((n=e.src.slice(u)).indexOf(">")<0)&&(o.test(n)?(s=(i=n.match(o))[0].slice(1,-1),c=e.md.normalizeLink(s),!!e.md.validateLink(c)&&(t||((l=e.push("link_open","a",1)).attrs=[["href",c]],l.markup="autolink",l.info="auto",(l=e.push("text","",0)).content=e.md.normalizeLinkText(s),(l=e.push("link_close","a",-1)).markup="autolink",l.info="auto"),e.pos+=i[0].length,!0)):!!r.test(n)&&(s=(a=n.match(r))[0].slice(1,-1),c=e.md.normalizeLink("mailto:"+s),!!e.md.validateLink(c)&&(t||((l=e.push("link_open","a",1)).attrs=[["href",c]],l.markup="autolink",l.info="auto",(l=e.push("text","",0)).content=e.md.normalizeLinkText(s),(l=e.push("link_close","a",-1)).markup="autolink",l.info="auto"),e.pos+=a[0].length,!0))))}},function(e,t,n){"use strict";var r=n(182).HTML_TAG_RE;e.exports=function(e,t){var n,o,i,a=e.pos;return!!e.md.options.html&&(i=e.posMax,!(60!==e.src.charCodeAt(a)||a+2>=i)&&(!(33!==(n=e.src.charCodeAt(a+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(o=e.src.slice(a).match(r))&&(t||(e.push("html_inline","",0).content=e.src.slice(a,a+o[0].length)),e.pos+=o[0].length,!0))))}},function(e,t,n){"use strict";var r=n(177),o=n(20).has,i=n(20).isValidEntityCode,a=n(20).fromCodePoint,s=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,c=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,l,u=e.pos,d=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1<d)if(35===e.src.charCodeAt(u+1)){if(l=e.src.slice(u).match(s))return t||(n="x"===l[1][0].toLowerCase()?parseInt(l[1].slice(1),16):parseInt(l[1],10),e.pending+=i(n)?a(n):a(65533)),e.pos+=l[0].length,!0}else if((l=e.src.slice(u).match(c))&&o(r,l[1]))return t||(e.pending+=r[l[1]]),e.pos+=l[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},function(e,t,n){"use strict";function r(e,t){var n,r,o,i,a,s,c,l,u={},d=t.length;for(n=0;n<d;n++)if((o=t[n]).length=o.length||0,o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1]),a=u[o.marker][o.length%3],s=-1,r=n-o.jump-1;r>a;r-=i.jump+1)if((i=t[r]).marker===o.marker&&(-1===s&&(s=r),i.open&&i.end<0&&i.level===o.level&&(c=!1,(i.close||o.open)&&(i.length+o.length)%3==0&&(i.length%3==0&&o.length%3==0||(c=!0)),!c))){l=r>0&&!t[r-1].open?t[r-1].jump+1:0,o.jump=n-r+l,o.open=!1,i.end=n,i.jump=l,i.close=!1,s=-1;break}-1!==s&&(u[o.marker][(o.length||0)%3]=s)}}e.exports=function(e){var t,n=e.tokens_meta,o=e.tokens_meta.length;for(r(0,e.delimiters),t=0;t<o;t++)n[t]&&n[t].delimiters&&r(0,n[t].delimiters)}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,o=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)o[t].nesting<0&&r--,o[t].level=r,o[t].nesting>0&&r++,"text"===o[t].type&&t+1<i&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}},function(e,t,n){"use strict";var r=n(135),o=n(20).isWhiteSpace,i=n(20).isPunctChar,a=n(20).isMdAsciiPunct;function s(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}s.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},s.prototype.push=function(e,t,n){this.pending&&this.pushPending();var o=new r(e,t,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(i),o},s.prototype.scanDelims=function(e,t){var n,r,s,c,l,u,d,h,p,f=e,v=!0,m=!0,g=this.posMax,y=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;f<g&&this.src.charCodeAt(f)===y;)f++;return s=f-e,r=f<g?this.src.charCodeAt(f):32,d=a(n)||i(String.fromCharCode(n)),p=a(r)||i(String.fromCharCode(r)),u=o(n),(h=o(r))?v=!1:p&&(u||d||(v=!1)),u?m=!1:d&&(h||p||(m=!1)),t?(c=v,l=m):(c=v&&(!m||d),l=m&&(!v||p)),{can_open:c,can_close:l,length:s}},s.prototype.Token=r,e.exports=s},function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function o(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===o(e)}function a(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]?0:t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function u(e){var t=e.re=n(483)(e.__opts__),r=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");var c=[];function l(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===o(n))return!function(e){return"[object RegExp]"===o(e)}(n.validate)?i(n.validate)?r.validate=n.validate:l(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?l(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===o(e)}(n)?l(t,n):c.push(t)}})),c.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(a).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function h(e,t){var n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||s.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,o,i,a,s,c;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(o=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(h(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(h(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(179).source,t.src_Cc=n(180).source,t.src_Z=n(181).source,t.src_P=n(133).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t,n){(function(e,r){var o;!function(i){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function v(e){throw new RangeError(h[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function _(e){return m(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function C(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))}function w(e){var t,n,r,o,i,a,s,l,u,d,h,f=[],m=e.length,g=0,y=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),f.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<m;){for(i=g,a=1,s=36;o>=m&&v("invalid-input"),((l=(h=e.charCodeAt(o++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||l>p((c-g)/a))&&v("overflow"),g+=l*a,!(l<(u=s<=b?1:s>=b+26?26:s-b));s+=36)a>p(c/(d=36-u))&&v("overflow"),a*=d;b=C(g-i,t=f.length+1,0==i),p(g/t)>c-y&&v("overflow"),y+=p(g/t),g%=t,f.splice(g++,0,y)}return _(f)}function S(e){var t,n,r,o,i,a,s,l,u,d,h,m,g,_,w,S=[];for(m=(e=y(e)).length,t=128,n=0,i=72,a=0;a<m;++a)(h=e[a])<128&&S.push(f(h));for(r=o=S.length,o&&S.push("-");r<m;){for(s=c,a=0;a<m;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>p((c-n)/(g=r+1))&&v("overflow"),n+=(s-t)*g,t=s,a=0;a<m;++a)if((h=e[a])<t&&++n>c&&v("overflow"),h==t){for(l=n,u=36;!(l<(d=u<=i?1:u>=i+26?26:u-i));u+=36)w=l-d,_=36-d,S.push(f(b(d+w%_,0))),l=p(w/_);S.push(f(b(l,0))),i=C(n,g,r==o),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:_},decode:w,encode:S,toASCII:function(e){return g(e,(function(e){return u.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(485)(e),n(172))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e){e.exports=JSON.parse('{"grinning":"","smiley":"","smile":"","grin":"","laughing":"","satisfied":"","sweat_smile":"","joy":"","blush":"","innocent":"","wink":"","relieved":"","heart_eyes":"","kissing_heart":"","kissing":"","kissing_smiling_eyes":"","kissing_closed_eyes":"","yum":"","stuck_out_tongue_winking_eye":"","stuck_out_tongue_closed_eyes":"","stuck_out_tongue":"","sunglasses":"","smirk":"","unamused":"","disappointed":"","pensive":"","worried":"","confused":"","persevere":"","confounded":"","tired_face":"","weary":"","angry":"","rage":"","pout":"","no_mouth":"","neutral_face":"","expressionless":"","hushed":"","frowning":"","anguished":"","open_mouth":"","astonished":"","dizzy_face":"","flushed":"","scream":"","fearful":"","cold_sweat":"","cry":"","disappointed_relieved":"","sob":"","sweat":"","sleepy":"","sleeping":"","mask":"","smiling_imp":"","smiley_cat":"","smile_cat":"","joy_cat":"","heart_eyes_cat":"","smirk_cat":"","kissing_cat":"","scream_cat":"","crying_cat_face":"","pouting_cat":"","fist_raised":"","fist":"","v":"","point_up":"","hand":"","raised_hand":"","cat":"","mouse":"","cow":"","monkey_face":"","star":"","sparkles":"","zap":"","sunny":"","cloud":"","snowflake":"","umbrella":"","coffee":"","airplane":"","anchor":"","watch":"","phone":"","telephone":"","hourglass":"","email":"","envelope":"","scissors":"","black_nib":"","pencil2":"","heart":"","aries":"","taurus":"","gemini":"","cancer":"","leo":"","virgo":"","libra":"","scorpius":"","sagittarius":"","capricorn":"","aquarius":"","pisces":"","eight_pointed_black_star":"","x":"","hotsprings":"","exclamation":"","heavy_exclamation_mark":"","grey_exclamation":"","question":"","grey_question":"","bangbang":"","interrobang":"","part_alternation_mark":"","warning":"","recycle":"","white_check_mark":"","sparkle":"","eight_spoked_asterisk":"","negative_squared_cross_mark":"","m":"","wheelchair":"","information_source":"","heavy_plus_sign":"","heavy_minus_sign":"","heavy_division_sign":"","heavy_multiplication_x":"","tm":"","copyright":"","registered":"","wavy_dash":"","curly_loop":"","loop":"","heavy_check_mark":"","ballot_box_with_check":"","white_circle":"","black_circle":"","black_small_square":"","white_small_square":"","black_medium_small_square":"","white_medium_small_square":"","black_medium_square":"","white_medium_square":"","black_large_square":"","white_large_square":"","black_joker":"","mahjong":""}')},function(e,t,n){"use strict";e.exports={angry:[">:(",">:-("],blush:[':")',':-")'],broken_heart:["</3","<\\3"],confused:[":/",":-/"],cry:[":'(",":'-(",":,(",":,-("],frowning:[":(",":-("],heart:["<3"],imp:["]:(","]:-("],innocent:["o:)","O:)","o:-)","O:-)","0:)","0:-)"],joy:[":')",":'-)",":,)",":,-)",":'D",":'-D",":,D",":,-D"],kissing:[":*",":-*"],laughing:["x-)","X-)"],neutral_face:[":|",":-|"],open_mouth:[":o",":-o",":O",":-O"],rage:[":@",":-@"],smile:[":D",":-D"],smiley:[":)",":-)"],smiling_imp:["]:)","]:-)"],sob:[":,'(",":,'-(",";(",";-("],stuck_out_tongue:[":P",":-P"],sunglasses:["8-)","B-)"],sweat:[",:(",",:-("],sweat_smile:[",:)",",:-)"],unamused:[":s",":-S",":z",":-Z",":$",":-$"],wink:[";)",";-)"]}},function(e,t,n){"use strict";e.exports=function(e,t){return e[t].content}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){var i=e.utils.arrayReplaceAt,a=e.utils.lib.ucmicro,s=new RegExp([a.Z.source,a.P.source,a.Cc.source].join("|"));function c(e,r,i){var a,c=0,l=[];return e.replace(o,(function(r,o,u){var d;if(n.hasOwnProperty(r)){if(d=n[r],o>0&&!s.test(u[o-1]))return;if(o+r.length<u.length&&!s.test(u[o+r.length]))return}else d=r.slice(1,-1);o>c&&((a=new i("text","",0)).content=e.slice(c,o),l.push(a)),(a=new i("emoji","",0)).markup=d,a.content=t[d],l.push(a),c=o+r.length})),c<e.length&&((a=new i("text","",0)).content=e.slice(c),l.push(a)),l}return function(e){var t,n,o,a,s,l=e.tokens,u=0;for(n=0,o=l.length;n<o;n++)if("inline"===l[n].type)for(t=(a=l[n].children).length-1;t>=0;t--)"link_open"!==(s=a[t]).type&&"link_close"!==s.type||"auto"===s.info&&(u-=s.nesting),"text"===s.type&&0===u&&r.test(s.content)&&(l[n].children=a=i(a,t,c(s.content,s.level,e.Token)))}}},function(e,t,n){"use strict";e.exports=function(e){var t,n=e.defs;e.enabled.length&&(n=Object.keys(n).reduce((function(t,r){return e.enabled.indexOf(r)>=0&&(t[r]=n[r]),t}),{})),t=Object.keys(e.shortcuts).reduce((function(t,r){return n[r]?Array.isArray(e.shortcuts[r])?(e.shortcuts[r].forEach((function(e){t[e]=r})),t):(t[e.shortcuts[r]]=r,t):t}),{});var r=Object.keys(n).map((function(e){return":"+e+":"})).concat(Object.keys(t)).sort().reverse().map((function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")})).join("|"),o=RegExp(r),i=RegExp(r,"g");return{defs:n,shortcuts:t,scanRE:o,replaceRE:i}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(0),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=void 0===n?"":n,o=t.serverPrefix,i=void 0===o?e.SERVER_PREFIX||"":o,a=t.type,s=void 0===a?"POST":a,c=t.headers,l=void 0===c?[]:c,u=t.handleError,d=void 0===u?null:u,h=t.handleSuccess,p=void 0===h?null:h,f=t.isJson,v=void 0===f||f,m=t.withCredentials,g=void 0===m||m;babelHelpers.classCallCheck(this,e),this._o={target:r,type:s,headers:l,serverPrefix:i,handleError:d,handleSuccess:p,isJson:v,withCredentials:g}}return babelHelpers.createClass(e,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isFormData,r=void 0!==n&&n,o=this._o,i=new XMLHttpRequest;if(i.open(o.type,o.serverPrefix+o.target,!0),i.withCredentials=o.withCredentials,o.headers.forEach((function(e){return i.setRequestHeader(e[0],e[1])})),i.onerror=function(t){console.error("got ajax error",t,i,e,o),o.handleError&&o.handleError(i.status,{},i)},i.onload=function(){if(200===i.status){if(o.handleSuccess){var e=i.responseText;o.isJson&&(e=JSON.parse(e)),o.handleSuccess(e,i)}}else if(o.handleError){var t=i.responseText;0,o.handleError(i.status,t,i)}},!r)if(Array.isArray(e)){var a=e.map((function(e){return"".concat(e[0],"=").concat(e[1])}));e=a.join("&")}else"object"==babelHelpers.typeof(e)&&(e=JSON.stringify(e));i.send(e)}}]),e}(),a=n(11),s=n(21),c=n(14);function l(e){if(!e)return{};var t=e.getBoundingClientRect(),n=t.top,r=t.bottom,o=t.left,i=t.right,a=t.height,s=t.width,c=getComputedStyle(e,null),l=parseInt(c.getPropertyValue("border-left-width"),10),u=parseInt(c.getPropertyValue("border-top-width"),10),d=parseInt(c.getPropertyValue("border-right-width"),10);return{left:o+=l,top:n+=u,bottom:r-=parseInt(c.getPropertyValue("border-bottom-width"),10),right:i-=d,width:s,height:a}}var u=n(12);n(384);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var h=new a.a("drag-and-drop"),p=[],f=[];function v(e){Object(u.b)(e),p.forEach((function(t){t._handleUp(e)}))}function m(e){Object(u.b)(e),f.forEach((function(t){t._handleMove(e)}))}var g=function(e){babelHelpers.inherits(n,e);var t=d(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),(r=t.call(this)).config=e,"center"in r.config||(r.config.center=!0),r._delegate=new c.a,r._showMovementEnabled=!0,r._attachEvents(),r}return babelHelpers.createClass(n,[{key:"destroy",value:function(){var e=this;this._delegate.destroy(),this.boundHandleDown&&this.config.container.removeEventListener(Object(u.a)("pointerdown"),this.boundHandleDown),(f=(f=f.filter((function(t){return t!=e}))).filter((function(t){return t!=e}))).length||(document.removeEventListener(Object(u.a)("pointerup"),v),document.removeEventListener(Object(u.a)("pointermove"),m))}},{key:"_attachEvents",value:function(){this.config.rightOnly&&(this.boundHandleContext=this._handleContext.bind(this),this.config.container.addEventListener("contextmenu",this.boundHandleContext)),this.config.childSelector?this._delegate.delegate(this.config.container,Object(u.a)("pointerdown"),this.config.childSelector,this._handleDown,this):(this.boundHandleDown=this._handleDown.bind(this),this.config.container.addEventListener(Object(u.a)("pointerdown"),this.boundHandleDown)),0==f.length&&(h.log({pointerUpType:Object(u.a)("pointerup"),pointerMoveType:Object(u.a)("pointermove")},"event types"),document.addEventListener(Object(u.a)("pointerup"),v),document.addEventListener(Object(u.a)("pointermove"),m)),f.push(this),p.push(this)}},{key:"setShowMovement",value:function(e){this._showMovementEnabled=e}},{key:"_handleDown",value:function(e){var t=this;if(Object(u.b)(e),void 0!==e.button){if(this.config.rightOnly&&2!=e.button)return!0;if(this.config.leftOnly&&0!=e.button)return!0}if(this.config.dragHandleSelector&&!c.a.findMatchingParent(e.target,this.config.dragHandleSelector,e.currentTarget))return!0;e.preventDefault();var n=null;if(n=e.currentTarget==this.config.container?l(e.currentTarget):l(e.currentTarget.offsetParent),this._startX=e.clientX-n.left,this._startY=e.clientY-n.top,this._cachedOffsets=null,e.startX=this._startX,e.startY=this._startY,e.dragNode=e.currentTarget,!1!==this.fire("dragStart",e)){this._draggingInProgress=!0,this._dragNode=e.currentTarget,this._origX=e.clientX,this._origY=e.clientY,this._diffX=e.clientX-this._dragNode.offsetLeft,this._diffY=e.clientY-this._dragNode.offsetTop;e.clientX,e.currentTarget.offsetLeft,e.clientY,e.currentTarget.offsetTop;this._startNodeX=this._dragNode.clientLeft,this._startNodeY=this._dragNode.clientTop;var r=e.currentTarget.getBoundingClientRect();e.clientX,r.left,this._dragNode.clientLeft,this._dragNode.scrollLeft,e.clientY,r.top,this._dragNode.clientTop,this._dragNode.scrollTop;this._firstMove=!0,this._hasMoved=!1,this._origZindex=getComputedStyle(this._dragNode).zIndex;this._animId=requestAnimationFrame((function n(r){if(!t.config.dontMove){if(t._firstMove){if(t._hasMoved){var o=t._dragNode.offsetLeft,i=t._dragNode.offsetTop;if(!t.config.dontMove){var a=t._dragNode.getBoundingClientRect(),s=e.clientX-a.left-t._dragNode.clientLeft+t._dragNode.scrollLeft,c=e.clientY-a.top-t._dragNode.clientTop+t._dragNode.scrollTop,l=i+(c-t._dragNode.offsetHeight/2);t.config.constrainTop&&(l=Math.max(l,0)),t._centerLeft=o+(s-t._dragNode.offsetWidth/2),t._centerTop=l,t.config.center&&(t._dragNode.style.left=t._centerLeft+"px",t._dragNode.style.top=t._centerTop+"px")}t._dragNode.style["z-index"]=t._origZindex?parseInt(t._origZindex)+1:9e3;var u=t.config.center&&!t.config.dontMove?(a.x||a.left)-t._centerLeft+s:e.clientX-o,d=t.config.center&&!t.config.dontMove?(a.y||a.top)-t._centerTop+c:e.clientY-i;t._diffX=u,t._diffY=d,t._firstMove=!1}}else{t._dragNode.style.left=t._lastClientX-t._diffX+"px";var h=t._lastClientY-t._diffY;t.config.constrainTop&&(h=Math.max(h,0)),t._dragNode.style.top=h+"px"}t._draggingInProgress&&(t._animId=requestAnimationFrame(n))}}))}}},{key:"cancelDrag",value:function(){this._draggingInProgress&&(this._draggingInProgress=!1,cancelAnimationFrame(this._animId),this._dragNode.style["z-index"]=this._origZindex||"")}},{key:"_handleContext",value:function(e){e.preventDefault()}},{key:"_handleUp",value:function(e){if(void 0!==e.button){if(this.config.rightOnly&&2!=e.button)return;if(this.config.leftOnly&&0!=e.button)return}if(this._draggingInProgress)if(this.cancelDrag(),this._dragNode&&this._dragNode.offsetParent){e.dragNode=this._dragNode,e.dragNodeStartX=e._startNodeX,e.dragNodeStartY=e._startNodeY,e.dragNodeEndX=parseInt(e.dragNode.clientLeft),e.dragNodeEndY=parseInt(e.dragNode.clientTop);var t=null;t=this._dragNode==this.config.container?l(this._dragNode):l(this._dragNode.offsetParent),e.endX=e.clientX-t.left,e.endY=e.clientY-t.top,e.startX=this._startX,e.startY=this._startY,this.fire("dragEnd",e)}else h.error({node:this._dragNode},"no offset parent")}},{key:"_handleMove",value:function(e){if(this._showMovementEnabled&&this._draggingInProgress)if(this._dragNode&&this._dragNode.parentNode){if(!this.config.dontFireMoveEvents){var t=null;if(t=this._dragNode==this.config.container?l(this._dragNode):l(this._dragNode.parentNode),e.moveX=e.clientX-t.left,e.moveY=e.clientY-t.top,!1===this.fire("dragMove",e))return}this._hasMoved=!0,this._lastClientX=e.clientX,this._lastClientY=e.clientY}else h.error({dragNode:this._dragNode},"no parent or drag node in handle move")}}]),n}(s.a),y=new a.a("tap"),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];babelHelpers.classCallCheck(this,e),this._rightOnly=t,document.documentElement.addEventListener(Object(u.a)("pointerdown"),this._down.bind(this));var n=!1;try{var r={get passive(){n=!0}};window.addEventListener("test",r,r),window.removeEventListener("test",r,r)}catch(e){n=!1}document.documentElement.addEventListener(Object(u.a)("pointerup"),this._up.bind(this),!!n&&{passive:!1})}return babelHelpers.createClass(e,[{key:"_down",value:function(e){if(Object(u.b)(e),void 0!==e.button){if(this._rightOnly&&2!=e.button)return;if(!this._rightOnly&&0!=e.button)return}this._lastDown=e.target,this._startX=e.clientX,this._startY=e.clientY,y.log({e:e},"tap down")}},{key:"_up",value:function(t){if(Object(u.b)(t),void 0!==t.button){if(this._rightOnly&&2!=t.button)return;if(!this._rightOnly&&0!=t.button)return}y.log({e:t,lastDown:this._lastDown},"tap up"),this._lastUp=t;var n=t.target==this._lastDown,r=!1;if(!n&&this._lastDown&&(r=this._isParentOf(this._lastDown,t.target)),n||r){if(n&&(Math.abs(t.clientX-this._startX)>10||Math.abs(t.clientY-this._startY)>10))return void y.log({startX:this._startX,startY:this._startY,clientX:t.clientX,clientY:t.clientY,e:t},"Ignore tap, tap point moved too far");y.log({target:t.target},"got tap on");var o=this._createEvent(this._rightOnly?"tapRight":"tap");o.origEvent=t,o.preventDefault&&(o.oldPreventDefault=o.preventDefault),o.preventDefault=function(){o.oldPreventDefault&&o.oldPreventDefault(),o.origEvent&&o.origEvent.preventDefault&&o.origEvent.preventDefault()},o.origLastDown=this._lastDown,e.COPIED_EVENTS.forEach((function(e){return o[e]=t[e]}));r?(y.log({lastDown:this._lastDown},"trigger tap on last parent"),this._lastDown.dispatchEvent(o)):t.target.dispatchEvent(o)}else y.warn({target:t.target,lastDown:this._lastDown},"last down not match target");this._lastDown=null}},{key:"_isParentOf",value:function(e,t){for(;t&&t!=e;)t=t.parentNode;return!!t}},{key:"_createEvent",value:function(e){var t=window.document.createEvent("HTMLEvents");return t.initEvent(e,!0,!0),t.eventName=e,t}}]),e}();_.COPIED_EVENTS=["clientX","clientY","shiftKey","button","altKey","metaKey","pageX","pageY"];new _;var b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.COLOUR_UNSET,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;babelHelpers.classCallCheck(this,e),this.pieceType=t,this.colour=n,this.column=r,this.row=o}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"clone",value:function(){return new e(this.pieceType,this.colour,this.column,this.row)}},{key:"moveTo",value:function(e,t){this.column=e,this.row=t}},{key:"getAccessibleText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fide";return Object(o.d)(e.presentationNames[this.pieceType])+" "+A.columnToChar(this.column,t)+(this.row+1)}},{key:"getFenLetter",value:function(){var t=e.pieceTypeToChar(this.pieceType);return this.colour!=e.WHITE?t.toLowerCase():t}},{key:"getMoveTargets",value:function(){var t=[];switch(this.pieceType){case e.KING:t=[[1,0],[1,1],[1,-1],[-1,0],[-1,1],[-1,-1],[0,1],[0,-1],[2,0],[-2,0]];break;case e.KNIGHT:t=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];break;case e.BISHOP:for(var n=0;n<8;n++)t.push([1+n,1+n]),t.push([1+n,-1-n]),t.push([-1-n,1+n]),t.push([-1-n,-1-n]);break;case e.QUEEN:for(var r=0;r<8;r++)t.push([1+r,0]),t.push([1+r,1+r]),t.push([1+r,-1-r]),t.push([-1-r,0]),t.push([-1-r,1+r]),t.push([-1-r,-1-r]),t.push([0,-1-r]),t.push([0,1+r]);break;case e.ROOK:for(var o=0;o<8;o++)t.push([1+o,0]),t.push([-1-o,0]),t.push([0,-1-o]),t.push([0,1+o]);break;case e.PAWN:this.colour==e.BLACK?(t=[[0,-1],[1,-1],[-1,-1]],6==this.row&&t.push([0,-2])):(t=[[0,1],[1,1],[-1,1]],1==this.row&&t.push([0,2]))}return t}}]),e}();b.pieceNames=["pawn","bishop","knight","rook","queen","king"],b.presentationNames=[Object(o.d)("Pawn"),Object(o.d)("Bishop"),Object(o.d)("Knight"),Object(o.d)("Rook"),Object(o.d)("Queen"),Object(o.d)("King")],b.pieceNameToType=function(e){return b.pieceNames.findIndex((function(t){return t==e}))},b.PAWN=0,b.BISHOP=1,b.KNIGHT=2,b.ROOK=3,b.QUEEN=4,b.KING=5,b.MATERIAL_VALUES=[1,3,3,5,9,0],b.BACK_RANK=[0,7],b.WHITE=0,b.BLACK=1,b.COLOUR_UNSET=2,b.PIECE_TYPES=[b.QUEEN,b.ROOK,b.KNIGHT,b.BISHOP,b.KING,b.PAWN],b.PROMOTION_PIECES=[b.QUEEN,b.ROOK,b.KNIGHT,b.BISHOP],b.colourToText=function(e){switch(e){case b.WHITE:return Object(o.d)("White");case b.BLACK:return Object(o.d)("Black");default:return"?"}},b.letterToColour=function(e){return"w"==e?b.WHITE:"b"==e?b.BLACK:b.COLOUR_UNSET},b.colourToLetter=function(e){switch(e){case b.WHITE:return"w";case b.BLACK:return"b";default:return"?"}},b.createFromChar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.COLOUR_UNSET,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;switch(e=e.toLowerCase()){case"b":return new b(b.BISHOP,t,n,r);case"n":return new b(b.KNIGHT,t,n,r);case"r":return new b(b.ROOK,t,n,r);case"q":return new b(b.QUEEN,t,n,r);case"k":return new b(b.KING,t,n,r);case"p":return new b(b.PAWN,t,n,r);default:return null}},b.pieceTypeToChar=function(e,t,n){if("fide"==n||"nato"==n){var r=b.presentationNames[e];return r?" "+Object(o.d)(r)+" ":"?"}switch(e){case b.KING:return t?Object(o.d)("K"):"K";case b.QUEEN:return t?Object(o.d)("Q"):"Q";case b.ROOK:return t?Object(o.d)("R"):"R";case b.BISHOP:return t?Object(o.d)("B"):"B";case b.KNIGHT:return t?Object(o.d)("N"):"N";case b.PAWN:return t?Object(o.d)("P"):"P"}return"?"},b.create=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return new b(e,t,n,r)};var C=function(){function e(t){babelHelpers.classCallCheck(this,e),this.finished=!0,this._boardPieces=null,this._enpassantSquare=null,this._castlingStatus=[[!0,!0],[!0,!0]],this.toMove=b.WHITE,this.plyNumber=1,this.halfMoveNumber=0,this._boardPieces=new Array(8);for(var n=0;n<8;n++)this._boardPieces[n]=new Array(8);t&&this.initFromFen(t)}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"_clearPieces",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++)this._boardPieces[e][t]=null}},{key:"initFromFen",value:function(t){for(var n=this,r=(t=t.trim()).split(" "),o=r[0].split("/"),i=["w","-","-","0","1"];r.length<6&&r.length>0;){var a=r.length;r.push(i[a-1])}this.halfMoveNumber=parseInt(r[4]);var s=2*parseInt(r[5]),c=0,l=8;this.board_xy=null;var u=r[2];if(this._castlingStatus=[[!1,!1],[!1,!1]],"-"!=u){var d={K:[b.WHITE,e.KING_SIDE_CASTLE],Q:[b.WHITE,e.QUEEN_SIDE_CASTLE],k:[b.BLACK,e.KING_SIDE_CASTLE],q:[b.BLACK,e.QUEEN_SIDE_CASTLE]};u.split("").forEach((function(e){return n._castlingStatus[d[e][0]][d[e][1]]=!0}))}"w"==r[1]?(this.toMove=b.WHITE,s--):this.toMove=b.BLACK;var h=r[3];this.setEnpassantFromFenSquare(h),this._clearPieces();for(var p=0;p<8;p++){var f=o[p];l--,c=0;for(var v=0;v<f.length;v++){var m=f.charAt(v),g=f.charCodeAt(v)-e.ZERO_ASCII;g>0&&g<9?c+=g:(this._boardPieces[c][l]=b.createFromChar(m,m.toLowerCase()==m?b.BLACK:b.WHITE,c,l),c++)}}this.plyNumber=s}},{key:"getCastlingStatus",value:function(){return this._castlingStatus}},{key:"getEnpassantSquare",value:function(){return this._enpassantSquare}},{key:"isIllegal",value:function(){var t=this,n=this.getPieces(b.KING,b.WHITE).length,r=this.getPieces(b.KING,b.BLACK).length;if(0==n&&0==r)return Object(o.d)("No kings on board");if(0==n)return Object(o.d)("No white king on board");if(0==r)return Object(o.d)("No black king on board");if(n>1)return Object(o.d)("Too many white kings on board");if(r>1)return Object(o.d)("Too many black kings on board");if(!this.isKingSafe(e.flipToMove(this.toMove)))return this.toMove==b.WHITE?Object(o.d)("White to move, but black already in check"):Object(o.d)("Black to move, but white already in check");if(this._enpassantSquare){var i=this._enpassantSquare[1];if(2==i){if(this.toMove==b.WHITE)return Object(o.d)("En-passant square does not match colour to move")}else{if(5!=i)return Object(o.d)("Impossible en-passant square");if(this.toMove==b.BLACK)return Object(o.d)("En-passant square does not match colour to move")}}var a=function(n,r,i){if(t._castlingStatus[n][e.KING_SIDE_CASTLE]){var a=t.get(7,i),s=t.get(4,i);if(!a||a.pieceType!=b.ROOK||!s||s.pieceType!=b.KING)return Object(o.b)("Impossible king side castling for {COLOUR}",{subs:[["COLOUR",r]]})}return!1},s=function(n,r,i){if(t._castlingStatus[n][e.QUEEN_SIDE_CASTLE]){var a=t.get(0,i),s=t.get(4,i);if(!a||a.pieceType!=b.ROOK||!s||s.pieceType!=b.KING)return Object(o.b)("Impossible queen side castling for {COLOUR}",{subs:[["COLOUR",r]]})}return!1},c=a(b.WHITE,Object(o.d)("White"),0);return c||((c=a(b.BLACK,Object(o.d)("Black"),7))?c:(c=s(b.WHITE,Object(o.d)("White"),0))?c:(c=s(b.BLACK,Object(o.d)("Black"),7))||!1)}},{key:"setEnpassantFromFenSquare",value:function(e){if("-"!=e&&2==e.length){var t=e[0].charCodeAt(0),n=parseInt(e[1])-1;this._enpassantSquare=[t-"a".charCodeAt(0),n]}else this._enpassantSquare=null}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.column,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.row;this._boardPieces[t][n]=e}},{key:"get",value:function(e,t){return this._boardPieces[e][t]}},{key:"clear",value:function(e,t){this._boardPieces[e][t]=null}},{key:"clone",value:function(t){t&&t.finished||(t=new e);var n=t;n.finished=!1;for(var r=0;r<8;r++)for(var o=this._boardPieces[r],i=n._boardPieces[r],a=0;a<8;a++)o[a]?i[a]=o[a].clone():i[a]=null;return this._enpassantSquare&&(n._enpassantSquare=[this._enpassantSquare[0],this._enpassantSquare[1]]),n._castlingStatus=[[this._castlingStatus[0][0],this._castlingStatus[0][1]],[this._castlingStatus[1][0],this._castlingStatus[1][1]]],n.plyNumber=this.plyNumber,n.halfMoveNumber=this.halfMoveNumber,n.toMove=this.toMove,n}},{key:"toFen",value:function(){for(var t="",n=7;n>=0;n--){var r=0,o="";n<7&&(o="/");for(var i=0;i<8;i++){var a=this.get(i,n);if(a){var s="";r>0&&(s=r+""),o+=s+a.getFenLetter(),r=0}else r++}r>0&&(o+=r+""),t+=o}var c=t,l=" w ";this.toMove!=b.WHITE&&(l=" b "),c+=l;var u="";u+=this._castlingStatus[b.WHITE][e.KING_SIDE_CASTLE]?"K":"",u+=this._castlingStatus[b.WHITE][e.QUEEN_SIDE_CASTLE]?"Q":"",u+=this._castlingStatus[b.BLACK][e.KING_SIDE_CASTLE]?"k":"",c+=""==(u+=this._castlingStatus[b.BLACK][e.QUEEN_SIDE_CASTLE]?"q":"")?"- ":u+" ";var d="- ",h=this._enpassantSquare;return h&&(d=A.columnToChar(h[0])+(h[1]+1)+" "),c+=d,c+=this.halfMoveNumber+" "+parseInt((this.plyNumber+1)/2)}},{key:"getMaterialCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.excludePawns,n=void 0!==t&&t,r=e.colour,o=void 0===r?b.COLOUR_UNSET:r,i=this.getPieces(-1,o);return i.reduce((function(e,t){return e+(n&&t.pieceType==b.PAWN?0:b.MATERIAL_VALUES[t.pieceType])}),0)}},{key:"getMaterialBalance",value:function(){return this.getMaterialCount({colour:b.WHITE})-this.getMaterialCount({colour:b.BLACK})}},{key:"getMaterialBalanceNoPawns",value:function(){return this.getMaterialCount({excludePawns:!0,colour:b.WHITE})-this.getMaterialCount({excludePawns:!0,colour:b.BLACK})}},{key:"countDifferences",value:function(e){for(var t=0,n=0,r=0;r<8;r++)for(var o=0;o<8;o++){var i=this.get(o,r),a=e.get(o,r);a&&(i&&i.colour==a.colour&&i.pieceType==a.pieceType?n++:t++)}return{same:n,different:t}}},{key:"getPieces",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.COLOUR_UNSET,n=[],r=0;r<8;r++)for(var o=0;o<8;o++){var i=this.get(o,r);i&&(-1!=e&&i.pieceType!=e||t!=b.COLOUR_UNSET&&i.colour!=t||n.push(i))}return n}},{key:"isCastleKingSide",value:function(e,t){return 6==e.toColumn&&4==e.fromColumn&&(t||this.get(7,e.toRow))&&(0==e.toRow||7==e.toRow)}},{key:"isCastleQueenSide",value:function(e,t){return 2==e.toColumn&&4==e.fromColumn&&(t||this.get(0,e.toRow))&&(0==e.toRow||7==e.toRow)}},{key:"getStateAfterMove",value:function(e){var t=this.clone();return t.playMove(e.clone(),{copyState:!1}),t}},{key:"canMove",value:function(t,n,r,o){var i=t.fromColumn,a=t.fromRow,s=t.toColumn,c=t.toRow;if(s>7||s<0||c>7||c<0)return!1;var l=this.get(i,a),u=this.get(s,c);if(null==l)return!1;if(!r){if(u&&u.colour==l.colour)return!1;if(l.colour!=this.toMove&&!o)return!1}var d=!1,h=!0;if((d=l.pieceType==b.PAWN?this._canMovePawn(i,a,s,c,r):l.pieceType==b.KNIGHT?this._canMoveKnight(i,a,s,c):this._canMoveStraight(i,a,s,c,r))&&!n){e.canMoveStraightTmpState||(e.canMoveStraightTmpState=e.canMoveTmpState=new e);var p=this.clone(e.canMoveTmpState);p.playMove(t.clone(),{copyState:!1}),h=p.isKingSafe(l.colour,t),p.finished=!0}return d&&h}},{key:"_canMoveKnight",value:function(e,t,n,r){var o=Math.abs(e-n),i=Math.abs(t-r);return 2==o&&1==i||1==o&&2==i}},{key:"_canMovePawn",value:function(e,t,n,r,o){var i=this.get(n,r),a=this.get(e,t);if(o){if(1==Math.abs(e-n)){if(a.colour==b.WHITE){if(t==r-1)return!0}else if(t==r+1)return!0}else if(e==n)if(a.colour==b.WHITE){if(1==t){if(2==r||3==r)return!0}else if(t+1==r)return!0}else if(6==t){if(5==r||4==r)return!0}else if(t-1==r)return!0;return!1}if(this._enpassantSquare&&n==this._enpassantSquare[0]&&r==this._enpassantSquare[1]&&1==Math.abs(e-n)&&(4==t&&5==r&&a.colour==b.WHITE||3==t&&2==r&&a.colour==b.BLACK))return!0;if(i){if(1==Math.abs(e-n))if(a.colour==b.WHITE){if(t==r-1)return!0}else if(t==r+1)return!0}else if(e==n)if(a.colour==b.WHITE){if(1==t){if(2==r)return!0;if(3==r&&null==this.get(n,2))return!0}else if(t+1==r)return!0}else if(6==t){if(5==r)return!0;if(4==r&&null==this.get(n,5))return!0}else if(t-1==r)return!0;return!1}},{key:"_canMoveStraight",value:function(t,n,r,o,i){this.get(r,o);var a=this.get(t,n),s=a.pieceType,c=t,l=n,u=0,d=0;if(r>t?u=1:r<t&&(u=-1),o>n?d=1:o<n&&(d=-1),s==b.ROOK&&0!=u&&0!=d)return!1;if(s==b.BISHOP&&Math.abs(o-n)!=Math.abs(r-t))return!1;if(s==b.QUEEN&&0!=u&&0!=d&&Math.abs(o-n)!=Math.abs(r-t))return!1;for(var h=0;;){if(t+=u,n+=d,++h>1&&s==b.KING){if(2!=h)return!1;if(0!=d)return!1;if(a.colour==b.WHITE){if(0!=n)return!1}else if(7!=n)return!1;if(2==r){if(!i&&(this.get(1,n)||this.get(2,n)||this.get(3,n)))return!1;if(!this._castlingStatus[a.colour][e.QUEEN_SIDE_CASTLE])return!1}else{if(6!=r)return!1;if(!i&&(this.get(5,n)||this.get(6,n)))return!1;if(!this._castlingStatus[a.colour][e.KING_SIDE_CASTLE])return!1}if(!i){var p=new A(c,l,c+u,l+d);e.canMoveStraightTmpState||(e.canMoveStraightTmpState=e.canMoveTmpState=new e);var f=this.clone(e.canMoveStraightTmpState);f.playMove(p,{copyState:!1});var v=f.isKingSafe(a.colour);if(f.finished=!0,!v)return!1;if(!(v=this.isKingSafe(a.colour)))return!1}}if(t==r&&n==o)return!0;if(t<0||t>7||n<0||n>7)return!1;if(!i&&null!=this.get(t,n))return!1}}},{key:"isCheckmate",value:function(){return this.isKingMated()&&!this.isKingSafe()}},{key:"isStalemate",value:function(){return this.isKingSafe()&&0==this.getCandidateMoves(this.toMove,!0)}},{key:"getCandidateMoves",value:function(e,t,n){void 0!==e&&null!=e||(e=this.toMove);for(var r=new Array,o=0;o<8;o++)for(var i=0;i<8;i++){var a,s=this.get(o,i);if(s&&s.colour==e&&(!n||s.pieceType!=b.KING)){a=s.getMoveTargets();for(var c=0;c<a.length;c++){var l=new A(s.column,s.row,s.column+a[c][0],s.row+a[c][1]);if(this.canMove(l,!1,!1,!0)){if(s.pieceType!=b.PAWN||7!=l.toRow&&0!=l.toRow)r.push(l);else for(var u=0;u<b.PROMOTION_PIECES.length;u++){var d=b.PROMOTION_PIECES[u];new A(l.fromColumn,l.fromRow,l.toColumn,l.toRow,b.create(d,s.colour));r.push(l)}if(t)return r}}}}return r}},{key:"isKingMated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toMove,t=this.getPieces(b.KING,e);if(1!=t.length)return!1;for(var n=t[0],r=[[1,0],[1,1],[1,-1],[-1,0],[-1,1],[-1,-1],[0,1],[0,-1],[2,0],[-2,0]],o=n,i=0;i<r.length;i++)if(this.canMove(new A(o.column,o.row,o.column+r[i][0],o.row+r[i][1]),!1,!1,!0))return!1;var a=this.getCandidateMoves(e,!0);return!(a.length>0)}},{key:"isKingSafe",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toMove,t=null,n=0;n<8;n++)for(var r=0;r<8;r++){if(null!=(a=this.get(n,r))&&a.pieceType==b.KING&&a.colour==e){t=[n,r];break}}if(!t)return!0;for(var o=0;o<8;o++)for(var i=0;i<8;i++){var a;if(null!=(a=this.get(o,i))&&a.colour!=e){var s=new A(o,i,t[0],t[1]);if(this.canMove(s,!0,!1,!0))return!1}}return!0}},{key:"playMove",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,o=void 0===r||r,i=t.fromColumn,a=t.fromRow,s=t.toColumn,c=t.toRow;o&&t.setBoardState(this.clone());var l=!1;if(!t.emptyMove){var u=this.get(i,a);this.clear(i,a);var d=this.get(s,c);if(u.moveTo(s,c),this.set(u),u.pieceType==b.KING)if(this.isCastleKingSide(t))(h=this.get(7,a)).moveTo(5,a),this.set(h),this.clear(7,a),this._castlingStatus[this.toMove]=[!1,!1];else if(this.isCastleQueenSide(t)){var h;(h=this.get(0,a)).moveTo(3,a),this.set(h),this.clear(0,a),this._castlingStatus[this.toMove]=[!1,!1]}if(t.promotionPiece){var p=t.promotionPiece;p.colour=this.toMove;var f=new b(p.pieceType,p.colour,s,c);this.set(f)}if(u.pieceType==b.PAWN){if(Math.abs(a-c)>1)this._enpassantSquare=a-c>0?[i,c+1]:[i,c-1];else if(this._enpassantSquare=null,t.toColumn!=t.fromColumn&&!d&&(u.colour==b.WHITE&&5==t.toRow||u.colour==b.BLACK&&2==t.toRow)){var v=this.get(t.toColumn,t.fromRow);v&&v.pieceType==b.PAWN&&(this.clear(t.toColumn,a),t.takenPiece=v)}l=!0}else this._enpassantSquare=null;u.pieceType==b.KING&&(this._castlingStatus[this.toMove]=[!1,!1]),u.pieceType==b.ROOK&&(u.colour==b.WHITE&&0==a||u.colour==b.BLACK&&7==a)&&(0==i?this._castlingStatus[this.toMove][e.QUEEN_SIDE_CASTLE]=!1:7==i&&(this._castlingStatus[this.toMove][e.KING_SIDE_CASTLE]=!1)),d&&d.pieceType==b.ROOK&&(this.toMove==b.BLACK&&0==c||this.toMove==b.WHITE&&7==c)&&(0==s?this._castlingStatus[e.flipToMove(this.toMove)][e.QUEEN_SIDE_CASTLE]=!1:7==s&&(this._castlingStatus[e.flipToMove(this.toMove)][e.KING_SIDE_CASTLE]=!1)),d&&(l=!0,t.takenPiece=d)}return l?this.halfMoveNumber=0:this.halfMoveNumber+=1,this.plyNumber+=1,this.toMove=e.flipToMove(this.toMove),this}},{key:"movePieceFromTo",value:function(e,t,n,r){var o=this.get(e,t);return this.set(o,n,r),this.clear(e,t),o.moveTo(n,r),o}},{key:"reverseMove",value:function(t){if(!t.emptyMove){var n=t.fromColumn,r=t.fromRow,o=t.toColumn,i=t.toRow,a=this.movePieceFromTo(o,i,n,r);if(a.pieceType==b.KING&&(this.isCastleKingSide(t,!0)?(this.movePieceFromTo(5,r,7,r),this._castlingStatus[this.toMove]=[!1,!1]):this.isCastleQueenSide(t,!0)&&(this.movePieceFromTo(3,r,0,r),this._castlingStatus[this.toMove]=[!1,!1])),t.promotionPiece)t.promotionPiece.colour=e.flipToMove(this.toMove),a.pieceType=b.PAWN,this.set(a,n,r);if(t.takenPiece){var s=t.takenPiece,c=s.column,l=s.row;this.set(t.takenPiece.clone(),c,l)}}this._setStatusFromState(t.getBoardState()),this.toMove=e.flipToMove(this.toMove)}},{key:"_setStatusFromState",value:function(e){e&&(e._enpassantSquare?this._enpassantSquare=[e._enpassantSquare[0],e._enpassantSquare[1]]:this._enpassantSquare=null,this._castlingStatus=[[e._castlingStatus[0][0],e._castlingStatus[0][1]],[e._castlingStatus[1][0],e._castlingStatus[1][1]]],this.plyNumber=e.plyNumber,this.halfMoveNumber=e.halfMoveNumber)}},{key:"beforeState",value:function(e){return!!e&&(this.plyNumber<e.plyNumber||this.plyNumber==e.plyNumber&&this.toMove==b.WHITE&&e.toMove==b.BLACK)}},{key:"getGameStageScores",value:function(){var t=this.getPieces(),n=0==t.map((function(e){return e==b.QUEEN?1:0})).reduce((function(e,t){return e+t}),0),r=t.map((function(e){return e.row==b.BACK_RANK[e.colour]?1:0})).reduce((function(e,t){return e+t}),0),o=this.getPieces(b.PAWN),i=t.length-o.length,a=this.getMaterialCount({excludePawns:!0,colour:b.WHITE}),s=this.getMaterialCount({excludePawns:!0,colour:b.BLACK}),c=this.countDifferences(new e(e.INITIAL_FEN)),l=c.same,u=(c.different,0);a<6&&s<6?u+=.9:a<10&&s<10?u+=.8:a<14&&s<14&&(u+=.7),i<=6&&(u+=.25),n&&(u+=.15);var d=0;return d+=1*(1-r/16),{middlegameScore:d+=1*(1-l/32),endgameScore:u}}},{key:"getAccessibleDescription",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fide",n=function(n,r){return"<h2>".concat(r,"</h2>\n                  <p>").concat(e.getPieces(-1,n).sort((function(e,t){return e.pieceType-t.pieceType||e.row-t.row||e.column-t.column})).map((function(e){return"<span>".concat(e.getAccessibleText(t),"</span><br>")})).join(""),"\n                  </p>")};return"<div><h1>".concat(Object(o.d)("Accessible board description"),"</h1>\n               <h2>FEN: ").concat(this.toFen(),"</h2>\n               ").concat(n(b.WHITE,Object(o.d)("White pieces")),"\n               ").concat(n(b.BLACK,Object(o.d)("Black pieces")),"\n               <p>").concat(Object(o.b)("{PIECE_COLOUR} to move",{subs:[["PIECE_COLOUR",b.colourToText(this.toMove)]]}),"</p>\n                    \n             </div>")}}]),e}();C.flipToMove=function(e){return e==b.COLOUR_UNSET?e:e==b.WHITE?b.BLACK:b.WHITE},C.toMoveFromFen=function(e){return"w"==e.split(" ")[1]?b.WHITE:b.BLACK},C.fenSamePosition=function(e,t,n){if(!e||!t)return!1;var r=null,o=null;return n?(r=C.fenPositionOnly(e),o=C.fenPositionOnly(t)):(r=C.fenStripMoveClock(e),o=C.fenStripMoveClock(t)),r==o},C.fenPositionOnly=function(e){var t=e.split(" ");return t[0]+" "+t[1]},C.fenStripMoveClock=function(e){var t=e.split(" ");return t[0]+" "+t[1]+" "+t[2]+" "+t[3]},C.fenStripMoveClockEP=function(e){var t=e.split(" ");C._eps=C._eps||new C;var n=C._eps;if(n.initFromFen(e),"-"!=t[3]){var r=A.squareToColumnRow(t[3]),o=r.column,i=r.row,a=t[3],s=a,c="w"==t[1]?-1:1;[a=o>0?A.columnToChar(o-1)+""+(i+c+1)+a:null,s=o<7?A.columnToChar(o+1)+""+(i+c+1)+s:null].some((function(e){if(!e)return!1;var t=A.createFromLalg(e),r=n.get(t.fromColumn,t.fromRow);return!(!r||r.pieceType!=b.PAWN||!n.canMove(t))}))||(t[3]="-")}return t[0]+" "+t[1]+" "+t[2]+" "+t[3]},C.moveNumFromFen=function(e){return e.split(" ")[5]},C.resetFENMoveCounter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.split(" ");return r.length>5&&(r[5]=t),n&&r.length>4&&(r[4]="0"),r.join(" ")},C.isStringFEN=function(e){if(!e)return!1;for(var t=0,n=0,r=e.length,o={R:1,N:1,B:1,Q:1,K:1,r:1,b:1,n:1,q:1,k:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1};t++<r;){var i=e.charAt(t);if(" "==i)break;if("/"!=i){if(!o[i])return!1}else n++}return 7==n},C.getInitialBoardState=function(){return C._INIT_BOARD_STATE||(C._INIT_BOARD_STATE=new C(C.INITIAL_FEN)),C._INIT_BOARD_STATE},C.KING_SIDE_CASTLE=0,C.QUEEN_SIDE_CASTLE=1,C.ZERO_ASCII="0".charCodeAt(0),C.INITIAL_FEN="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",C.EMPTY_BOARD_FEN="8/8/8/8/8/8/8/8 w - - 0 1",C.defaultStats={movesAnalysed:0,movesAnalysedForGoodness:0,movesAlreadyGood:0,movesAlreadyGreat:0,movesIsDubious:0,movesIsMistake:0,movesIsBlunder:0,movesIsSpeculative:0,movesAnalysedGood:0,movesAnalysedCorrectlyGood:0,movesAnalysedCorrectlyGreat:0,movesAnalysedCorrectlyGoodPlyIdxMet:0,movesAnalysedCorrectlyGoodLateWinningMet:0,movesAnalysedCorrectlyGoodTotalPlyIdx:0,movesAnalysedCorrectlyGoodTotalFirstWinningIndex:0,movesAnalysedCorrectlyGoodAsSecondBestIsNotEasilyWinning:0,movesAnalysedCorrectlyGoodAsBestIsMassivelyBetterThanSecondBest:0,movesAnalysedCorrectlyGoodAsBestIsLateKnown:0,movesAnalysedCorrectlyGoodAsBestIsVeryLateKnown:0,movesAnalysedCorrectlyGoodAsBestIsMuchBetterThanSecondBest:0,movesAnalysedCorrectlyGoodAsSecondBestLateWinning:0,movesAnalysedCorrectlyGoodAsBestIsMuchBetterThanWorstPlyOfBest:0,movesAnalysedCorrectlyGoodAsSecondBestLateLosing:0,movesAnalysedCorrectlyGoodAsFirstDrawingMet:0,movesAnalysedCorrectlyGoodOnlyPlyIdxMet:0,movesAnalysedCorrectlyGoodOnlyLateWinningMet:0,movesAnalysedCorrectlyGoodOnlyLateWinningMetMassive:0,movesAnalysedCorrectlyGoodOnlyBestIsVeryLateKnown:0,movesAnalysedCorrectlyGoodOnlyFirstDrawingMet:0,movesAnalysedCorrectlyGoodOnlyBestIsMuchBetterThanSecondBest:0,movesAnalysedCorrectlyGoodOnlySecondBestLateWinning:0,movesAnalysedCorrectlyGoodOnlyLateWinningCheck1Met:0,movesAnalysedCorrectlyGoodOnlyLateWinningCheck1MetMassive:0,movesAnalysedCorrectlyGoodOnlyBestIsMuchBetterThanWorstPlyOfBest:0,movesAnalysedCorrectlyGoodOnlySecondBestLateLosing:0,movesAnalysedCorrectlyGoodOnlyBestIsVeryLateKnownCheck12:0,movesAnalysedIncorrectlyGoodOnlyBestIsMuchBetterThanSecondBest:0,movesAnalysedIncorrectlyGoodOnlySecondBestLateWinning:0,movesAnalysedIncorrectlyGoodOnlyLateWinningCheck1Met:0,movesAnalysedIncorrectlyGoodOnlyLateWinningCheck1MetMassive:0,movesAnalysedIncorrectlyGoodOnlyBestIsMuchBetterThanWorstPlyOfBest:0,movesAnalysedIncorrectlyGoodOnlySecondBestLateLosing:0,movesAnalysedIncorrectlyGoodOnlyBestIsVeryLateKnownCheck12:0,movesAnalysedIncorrectlyGoodTotalPlyIdx:0,movesAnalysedIncorrectlyGoodTotalFirstWinningIndex:0,movesAnalysedIncorrectlyGood:0,movesAnalysedIncorrectlyGoodWasDubious:0,movesAnalysedIncorrectlyGoodWasMistake:0,movesAnalysedIncorrectlyGoodWasBlunder:0,movesAnalysedIncorrectlyGoodWasSpeculative:0,movesAnalysedMissedGood:0,movesAnalysedMissedGreat:0,movesAnalysedMissedGreatNotDeemedGood:0,movesAnalysedMissedGreatNotBest:0,movesAnalysedMissedGreatButGaveOnlyMove:0,movesAnalysedMissedGoodNoSecond:0,movesAnalysedMissedGoodNotBest:0,movesAnalysedMissedGoodNotDeemedGood:0,movesAnalysedMissedGoodButGaveOnlyMove:0,movesAnalysedMissedGoodAsBestNotMuchBetterThanWorstPly:0,movesAnalysedMissedGoodAsBestNotMuchBetterThanSecondBestAndNotSecondBestLateWinningAndNotLateWinningMet:0,movesAnalysedMissedGoodAsBestNotBetterThanLosing:0,movesAnalysedMissedGoodAsBestNotVeryLateKnown:0,movesAnalysedMissedGoodAsSecondBestIsEasilyWinningAndBestNotMassivelyBetterThanSecondAndNotLateKnown:0,movesAnalysedMissedGoodAsBestNotFoundSignificantlyBetterAtAnyPly:0,movesAnalysedIncorrectlyGoodAsPlyIdxMet:0,movesAnalysedIncorrectlyGoodAsLateWinningMet:0,movesAnalysedIncorrectlyGoodAsSecondBestIsNotEasilyWinning:0,movesAnalysedIncorrectlyGoodAsBestIsMassivelyBetterThanSecondBest:0,movesAnalysedIncorrectlyGoodAsBestIsLateKnown:0,movesAnalysedIncorrectlyGoodAsBestIsVeryLateKnown:0,movesAnalysedIncorrectlyGoodAsBestIsMuchBetterThanSecondBest:0,movesAnalysedIncorrectlyGoodAsSecondBestLateWinning:0,movesAnalysedIncorrectlyGoodAsBestIsMuchBetterThanWorstPlyOfBest:0,movesAnalysedIncorrectlyGoodAsSecondBestLateLosing:0,movesAnalysedIncorrectlyGoodAsFirstDrawingMet:0,movesAnalysedIncorrectlyGoodOnlyPlyIdxMet:0,movesAnalysedIncorrectlyGoodOnlyLateWinningMet:0,movesAnalysedIncorrectlyGoodOnlyLateWinningMetMassive:0,movesAnalysedIncorrectlyGoodOnlyBestIsVeryLateKnown:0,movesAnalysedIncorrectlyGoodOnlyFirstDrawingMet:0,movesAnalysedMissedGoodAsPlyIdxNotMet:0,movesAnalysedMissedGoodAsLateWinningNotMet:0},C.resetStats=function(){C.anStats=Object.assign({},C.defaultStats)},C.resetStats();var w=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}}]),e}();w.nags={1:{glyph:"!",description:Object(o.d)("Good Move"),moveAssessment:!0},2:{glyph:"?",description:Object(o.d)("Mistake"),moveAssessment:!0,moveClass:"ct-nag-mistake"},3:{glyph:"!!",description:Object(o.d)("Brilliant Move"),moveAssessment:!0},4:{glyph:"??",description:Object(o.d)("Blunder"),moveAssessment:!0,moveClass:"ct-nag-blunder"},5:{glyph:"!?",description:Object(o.d)("Speculative Move"),moveAssessment:!0},6:{glyph:"?!",description:Object(o.d)("Questionable Move"),moveAssessment:!0,moveClass:"ct-nag-questionable"},7:{glyph:"",description:Object(o.d)("Forced , or only Move"),moveAssessment:!0},8:{glyph:"",description:Object(o.d)("Singular Move (no reasonable alternatives)"),moveAssessment:!0},9:{glyph:"",description:Object(o.d)("Worst move"),moveAssessment:!0},10:{glyph:"=",description:Object(o.d)("Drawish Position or Even")},11:{glyph:"=",description:Object(o.d)("Equal Chances, Quiet Position")},12:{glyph:"=",description:Object(o.d)("Equal Chances , Active position")},13:{glyph:"",description:Object(o.d)("Unclear Position")},14:{glyph:"",description:Object(o.d)("White Slight Advantage")},15:{glyph:"",description:Object(o.d)("Black Slight Advantage")},16:{glyph:"",description:Object(o.d)("White Moderate Advantage")},17:{glyph:"",description:Object(o.d)("Black Moderate Advantage")},18:{glyph:"+-",description:Object(o.d)("White clear advantage")},19:{glyph:"-+",description:Object(o.d)("Black clear Advantage")},20:{glyph:"+--",description:Object(o.d)("White has crushing advantage")},21:{glyph:"--+",description:Object(o.d)("Black has crushing advantage")},22:{glyph:"",description:Object(o.d)("White is in Zugzwang"),colourNeutralDescription:Object(o.d)("Zugzwang"),blackVersion:23},23:{glyph:"",description:Object(o.d)("Black is in Zugzwang"),whiteVersion:22},32:{glyph:"",description:Object(o.d)("White has a moderate time/development advantage"),colourNeutralDescription:Object(o.d)("With moderate time/development advantage"),blackVersion:33},33:{glyph:"",description:Object(o.d)("Black has a moderate time/development advantage"),whiteVersion:32},36:{glyph:"",description:Object(o.d)("White has the initiative"),colourNeutralDescription:Object(o.d)("With the initiative"),blackVersion:37},37:{glyph:"",description:Object(o.d)("Black has the initiative"),whiteVersion:36},40:{glyph:"",description:Object(o.d)("White has the attack"),colourNeutralDescription:Object(o.d)("With the attack"),blackVersion:41},41:{glyph:"",description:Object(o.d)("Black has the attack"),whiteVersion:40},44:{glyph:"=",description:Object(o.d)("White has sufficient compensation for material"),colourNeutralDescription:Object(o.d)("With sufficient compensation for material"),blackVersion:45},45:{glyph:"=",description:Object(o.d)("Black has sufficient compensation for material"),whiteVersion:44},132:{glyph:"",description:Object(o.d)("White has moderate counterplay"),colourNeutralDescription:Object(o.d)("With moderate counterplay"),blackVersion:133},133:{glyph:"",description:Object(o.d)("Black has moderate counterplay"),whiteVersion:132},140:{glyph:"",description:Object(o.d)("With the idea..."),preNag:!0},142:{glyph:"",description:Object(o.d)("Better is..."),preNag:!0},143:{glyph:"<",description:Object(o.d)("Worse is..."),preNag:!0},144:{glyph:"=",description:Object(o.d)("Equivalent is..."),preNag:!0},145:{glyph:"RR",description:Object(o.d)("Editorial comment")},146:{glyph:"N",description:Object(o.d)("Novelty")}},w.getNag=function(e){var t=w.nags[e];return t||(t={glyph:"",description:Object(o.d)("Unknown NAG"),unknown:!0}),t},w.preNags={140:!0,141:!0,142:!0,143:!0,144:!0};var S=function e(){babelHelpers.classCallCheck(this,e)};function k(e){var t=Math.floor(e),n=Math.floor(t/3600);t-=3600*n;var r=Math.floor(t/60);return t-=60*r,n<10&&(n="0"+n),r<10&&(r="0"+r),t<10&&(t="0"+t),n+":"+r+":"+t}S.getExpectedTime=function(e,t,n){for(var r=e,o=0;o<40;o++)r=Math.max(r+t,n);return r},S.isCorrespondence=function(e,t,n){return S.getExpectedTime(e,t,n)/3600>=12},S.isBullet=function(e,t,n){return S.getRatingTypeString(e,t,n)==Object(o.d)("Bullet")},S.isBlitz=function(e,t,n){return S.getRatingTypeString(e,t,n)==Object(o.d)("Blitz")},S.isRapid=function(e,t,n){return S.getRatingTypeString(e,t,n)==Object(o.d)("Rapid")},S.isLong=function(e,t,n){return S.getRatingTypeString(e,t,n)==Object(o.d)("Long")},S.getRatingTypeString=function(e,t,n,r){var i=S.getExpectedTime(e,t,n);return i<180?Object(o.d)("Bullet"):i<900?Object(o.d)("Blitz"):i<3600?Object(o.d)("Rapid"):i<43200?Object(o.d)("Long"):r?Object(o.d)("Corres."):Object(o.d)("Correspondence")},S.getPGNTimeControl=function(e,t,n,r){return e+(t?"+"+t:"")+(n?"<"+n:"")},S.getTimeControlString=function(e,t,n,r){if(e==t&&t==n)return r?Object(o.b)("1 m/{TIME_PERIOD}",{subs:[["TIME_PERIOD",S.getTimeString(e,!0,!1,!0)]]}):Object(o.b)("1 Move/{TIME_PERIOD}",{subs:[["TIME_PERIOD",S.getTimeString(e,!0)]]});var i=S.getTimeString(e,!1,!1,r);return t&&0!=t&&(i+="+"+S.getTimeString(t,!1,!1,r)),n&&(i+="<"+S.getTimeString(n,!1,!1,r)),i},S.parseHourMinSec=function(e){var t=e.split(":"),n=0,r=0,o=0;switch(t.length){case 3:n=parseInt(t[0],10),r=parseInt(t[1],10),o=parseFloat(t[2],10);break;case 2:r=parseInt(t[0],10),o=parseFloat(t[1],10);break;case 1:o=parseFloat(t[0],10)}return o+60*r+3600*n},S.getDigitalTimeString=function(e,t,n,r,i,a){if(0!==e&&!e)return"--:--";e<0&&(e=0);var s=e,c=Math.floor(s/31536e6);s-=31536e6*c;var l=Math.floor(s/864e5);s-=864e5*l;var u=Math.floor(s/36e5);s-=36e5*u;var d=Math.floor(s/6e4);s-=6e4*d;var h=Math.floor(s/1e3),p=-1;if(h<10&&(h="0"+h),(p=0==e||e>1e4||n?-1:parseFloat(s/1e3%1))>=0){var f=0;f=s<1e3?s<100?p.toFixed(3).substring(2):p.toFixed(2).substring(2):p.toFixed(1).substring(2),h+=a?'<span class="ct-clock-fractional-secs">.'.concat(f,"</span>"):"."+f}if(d<10&&(d="0"+d),0==c){if(0==l){if(0==u){var v="";return r&&(v="00:"),v+d+":"+h}var m="",g=Object(o.d)("m");return i&&(m=":"+h,g=""),u<10&&(u="0"+u),u+":"+d+g+m}var y=l+u/24;return t?Object(o.a)("{NUMBER_DAYS} d","{NUMBER_DAYS} d",y.toFixed(1),{subs:[["NUMBER_DAYS",y.toFixed(1)]]}):Object(o.a)("{NUMBER_DAYS} day","{NUMBER_DAYS} days",y.toFixed(1),{subs:[["NUMBER_DAYS",y.toFixed(1)]]})}var _=c+l/365;return t?Object(o.a)("{NUMBER_YEARS} y","{NUMBER_YEARS} y",_.toFixed(1),{subs:[["NUMBER_YEARS",_.toFixed(1)]]}):Object(o.a)("{NUMBER_YEARS} year","{NUMBER_YEARS} years",_.toFixed(1),{subs:[["NUMBER_YEARS",_.toFixed(1)]]})},S.getFractionalShortTime=function(e){return e=e<=90?Math.round(10*e)/10+Object(o.d)("s"):e<3600?Math.round(10*e/60)/10+Object(o.d)("m"):Math.round(10*e/3600)/10+Object(o.e)("hour-abbreviation","h")},S.getTimeString=function(e,t,n,r){var i=e,a=Math.floor(i/31536e3);i-=31536e3*a;var s=Math.floor(i/86400);i-=86400*s;var c=Math.floor(i/3600);i-=3600*c;var l=Math.floor(i/60),u=i-=60*l;if(u)if(u=parseFloat(u),e<20){var d=1;e<1&&(d=2);var h=u.toFixed(d);u=parseFloat(h)==Math.floor(parseFloat(h))?Math.floor(u):h}else u=Math.round(u);var p="",f=!1,v=!1,m=!1;return n&&(l>10&&(f=!0),c>10&&(v=!0,f=!0),s>10&&(m=!0,v=!0,f=!0),a>10&&(!0,m=!0,v=!0,f=!0)),u&&!f&&(p=r?Object(o.b)("{SECONDS}s",{subs:[["SECONDS",u]]})+p:Object(o.a)("{SECONDS} sec","{SECONDS} secs",u,{subs:[["SECONDS",u]]})+p),l&&!v&&(p=!t||p||s||c||1!=l?r?Object(o.b)("{MINUTES}m",{subs:[["MINUTES",l]]})+" "+p:Object(o.a)("{MINUTES} min","{MINUTES} mins",l,{subs:[["MINUTES",l]]})+" "+p:r?Object(o.e)("short-minute","Min"):Object(o.d)("Minute")),c&&!m&&(p=!t||p||s||1!=c?r?Object(o.c)("short mobile version of hours output","{HOURS}h",{subs:[["HOURS",c]]})+" "+p:Object(o.a)("{HOURS} hour","{HOURS} hours",c,{subs:[["HOURS",c]]})+" "+p:r?Object(o.e)("hour-short","H"):Object(o.d)("Hour")),s&&(p=t&&!p&&1==s?r?Object(o.e)("short-hour","D"):Object(o.d)("Day"):r?Object(o.b)("{DAYS}d",{subs:[["DAYS",s]]})+" "+p:Object(o.a)("{DAYS} day","{DAYS} days",s,{subs:[["DAYS",s]]})+" "+p),a&&(p=t&&!p&&1==a?r?Object(o.e)("short-year","Y"):Object(o.d)("Year"):r?Object(o.b)("{YEARS}y",{subs:[["YEARS",a]]})+" "+p:Object(o.a)("{YEARS} year","{YEARS} years",s,{subs:[["YEARS",a]]})+" "+p),p.trim()};var A=function(){function e(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;babelHelpers.classCallCheck(this,e),this.fromColumn=t,this.fromRow=n,this.toColumn=r,this.toRow=o,this.promotionPiece=i,this._boardState=null,this._formats={}}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"equals",value:function(e){if(!e)return!1;var t=e.fromColumn,n=e.fromRow,r=e.toColumn,o=e.toRow,i=e.promotionPiece;return t==this.fromColumn&&n==this.fromRow&&r==this.toColumn&&o==this.toRow&&(!i&&!this.promotionPiece||!(!this.promotionPiece||!i||this.promotionPiece.pieceType!=i.pieceType))}},{key:"copyAnnotationsFromMove",value:function(e){var t=function(e){return e&&e.length?e.map((function(e){return e})):null};e&&(this.preArrows=t(e.preArrows),this.preSquares=t(e.preSquares),this.postArrows=t(e.postArrows),this.postSquares=t(e.postSquares))}},{key:"setBoardAnnotationsFromJson",value:function(t){var n=this;if(t){["preArrows","preSquares","postArrows","postSquares"].forEach((function(r){if(t[r]&&t[r].length){n[r]=t[r].map((function(e){return Object.assign({},e)}));for(var o=t[r],i=function(t){var i=o[t],a=n[r][t],s=function(t,n){if(t[n]){var r=t[n];if("object"==babelHelpers.typeof(r))if(r.lalg)r=r.lalg;else if("fromColumn"in r){r=new e(r.fromColumn,r.fromRow,r.toColumn,r.toRow,r.promotionPiece).toLALG()}else console.error("dummy anno used"),r="a1a1";else"string"!=typeof r&&(console.error("dummy anno used"),r="a1a1");a[n]=e.createFromLalg(r)}};s(i,"arrowMove"),s(i,"squareMove")},a=0;a<o.length;a++)i(a)}}))}}},{key:"getBoardAnnotationsJson",value:function(){var e=this,t={},n=!1;return["preArrows","preSquares","postArrows","postSquares"].forEach((function(r){if(e[r]&&e[r].length){t[r]=e[r].map((function(e){return Object.assign({},e)})),n=!0;for(var o=0;o<e[r].length;o++){var i=e[r][o];i.arrowMove&&(t[r][o].arrowMove=i.arrowMove.toLALG()),i.squareMove&&(t[r][o].squareMove=i.squareMove.toLALG())}}})),n?t:null}},{key:"hasBoardAnnotations",value:function(e){return e?this.preArrows&&this.preArrows.length||this.preSquares&&this.preSquares.length:this.postArrows&&this.postArrows.length||this.postSquares&&this.postSquares.length}},{key:"isMainLine",value:function(){return!this.varLevel}},{key:"_copyArray",value:function(e,t,n){if(e&&e.length>0){t[n]=[];for(var r=0;r<e.length;r++)t[n].push(e[r])}}},{key:"copyCommentsToMove",value:function(e){this._copyArray(this.preCommentArray,e,"preCommentArray"),this._copyArray(this.postCommentArray,e,"postCommentArray"),this._copyArray(this.preArrows,e,"preArrows"),this._copyArray(this.postArrows,e,"postArrows"),this._copyArray(this.preSquares,e,"preSquares"),this._copyArray(this.postSquares,e,"postSquares")}},{key:"clone",value:function(t,n,r,o){var i=new e(this.fromColumn,this.fromRow,this.toColumn,this.toRow,this.promotionPiece);if(i.emptyMove=this.emptyMove,n&&this._copyArray(this.nags,i,"nags"),t&&this.copyCommentsToMove(i),r){var a=this.getBoardState();a&&i.setBoardState(a.clone()),this.takenPiece&&(i.takenPiece=this.takenPiece.clone())}return this._copyArray(this.classes,i,"classes"),this.eval&&(i.eval={isMate:this.eval.isMate,score:this.eval.score,depth:this.eval.depth}),i}},{key:"getBoardState",value:function(){return this._boardState}},{key:"setBoardState",value:function(e){this._boardState=e}},{key:"toLALG",value:function(){if(this.emptyMove)return"--";var t=e.columnToChar(this.fromColumn)+""+(this.fromRow+1)+e.columnToChar(this.toColumn)+(this.toRow+1);return this.promotionPiece&&(t+=b.pieceTypeToChar(this.promotionPiece.pieceType).toLowerCase()),t}},{key:"initFromLalg",value:function(e){var t=0,n=null,r=e.charCodeAt(t++),o=e.charCodeAt(t++);"x"==e.charAt(t)&&t++;var i=e.charCodeAt(t++),a=e.charCodeAt(t++);t<e.length&&(n=e.charAt(t)),this.fromColumn=r-"a".charCodeAt(0),this.fromRow=o-"1".charCodeAt(0),this.toColumn=i-"a".charCodeAt(0),this.toRow=a-"1".charCodeAt(0),n&&(this.promotionPiece=b.createFromChar(n),this.promotionPiece.column=this.toColumn,this.promotionPiece.row=this.toRow),this.lalg=e}},{key:"variationLength",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.variations||!this.variations.length||t>=this.variations.length)return 0;var n=this.variations[t];return e.lineLength(n)}},{key:"findVariationIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this.variations&&this.variations.length>0)for(var n=0;n<this.variations.length;n++)if(t){if(e.equals(this.variations[n]))return n}else if(e==this.variations[n])return n;return-1}},{key:"findVariationHead",value:function(e){if(e&&this.variations&&this.variations.length>0)for(var t=0;t<this.variations.length;t++)if(e.equals(this.variations[t]))return this.variations[t];return null}},{key:"getPlyNumber",value:function(){return this._boardState.plyNumber}},{key:"getMoveNumber",value:function(){return parseInt((this._boardState.plyNumber+1)/2)}},{key:"toMove",value:function(){return this._boardState.toMove}},{key:"addClass",value:function(e){this.classes||(this.classes=[]),this.classes.find((function(t){return t==e}))||this.classes.push(e)}},{key:"removeClass",value:function(e){this.classes&&this.classes.length>0&&(this.classes=this.classes.filter((function(t){return t!=e})))}},{key:"getThinkTime",value:function(){return this.hasMoveTime()?this.thinkTime:null}},{key:"getEvalScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteViewEval,n=void 0===t||t,r=e.centiPawn,o=void 0===r||r,i=o?100:1;if(this.atEnd){var a=this.prev;if(a&&a.eval){a.eval;if(this.getBoardState().isCheckmate())return this.getBoardState().toMove==b.BLACK?29999:-29999;var s=a.getEvalScore(!0);return s>2e4?s+=1:s<2e4&&(s-=1),s}return 0}if(this.eval){var c=this.eval.isMate?this.eval.score:this.eval.score/i,l=1;n&&this.toMove()==b.BLACK&&(l=-1);var u=1;return this.eval.isMate&&this.eval.score<0&&(u=-1),this.eval.isMate?l*u*(29999-Math.abs(c)):l*c}return 0}},{key:"hasQuestionNag",value:function(){var e={2:!0,4:!0,5:!0,6:!0};return!(!this.nags||!this.nags.length)&&this.nags.find((function(t){return e[t]}))}},{key:"hasNag",value:function(e){return!(!this.nags||!this.nags.length)&&this.nags.find((function(t){return t==e}))}},{key:"getNags",value:function(){return this.nags}},{key:"setNags",value:function(e){this.nags=e}},{key:"toPGN",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.forceMoveNumber,r=void 0!==n&&n,o=t.ignoreNags,i=void 0!==o&&o,a=t.outputMoveTimes,s=void 0!==a&&a,c=t.outputBoardAnnotations,l=void 0!==c&&c,u=t.outputEvals,d=void 0!==u&&u,h=t.trimSpaceOnComments,p=void 0!==h&&h,f=t.outputNumericalNag,v=void 0===f||f,m=t.noMoveNumber,g=void 0!==m&&m,y=t.i18n,_=void 0!==y&&y,C=t.ignoreComments,S=void 0!==C&&C,A=t.strictPGN,E=void 0===A||A,T=t.zeroHack,O=void 0!==T&&T;if(!this._boardState)return"NO_STATE";var x=this.toSAN({i18n:_,strictPGN:E}),M=this.getMoveNumber();if(0==M&&O&&(M=1),g||(this._boardState.toMove==b.WHITE?x=M+"."+x:r&&(x=M+"..."+x)),this.nags&&!i){var I="";this.nags.sort((function(e,t){return e-t}));for(var L=0;L<this.nags.length;L++)I+=v?" $"+this.nags[L]:w.getNag(this.nags[L]).glyph;x+=I}var N="",R="";if(!S){if(this.preCommentArray){for(L=0;L<this.preCommentArray.length;L++)!s&&this.preCommentArray[L].indexOf("%clk")>=0||(N+="{ "+e.escapeComment(this.preCommentArray[L],p)+" } ");x=N+x}if(this.postCommentArray){for(L=0;L<this.postCommentArray.length;L++)!s&&this.postCommentArray[L].indexOf("%clk")>=0||(R+=" { "+e.escapeComment(this.postCommentArray[L],p)+" }");x+=R}}if(s&&(this.hasMoveTime()&&(x+=" {[%emt ".concat(this.thinkTime,"]}")),this.hasTimeRemaining()&&(x+=" {[%clk ".concat(k(this.timeRemaining),"]}"))),d&&this.hasEval()&&(x+=" {".concat(e.outputPGNEval(this.eval,this.toMove()),"}")),l){var D=this.toBoardAnno(!0),P=this.toBoardAnno(!1);D&&(x="{".concat(D,"} ").concat(x)),P&&(x+=" {".concat(P,"}"))}return x}},{key:"toSAN",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.i18n,r=void 0!==n&&n,i=t.strictPGN,a=void 0!==i&&i,s=t.avoidCheckCheckmateMarker,c=void 0!==s&&s,l=t.notationStyle,u=void 0===l?"standard":l,d=t.alwaysShowSource,h=void 0!==d&&d;if(this.emptyMove)return"--";if(!this._boardState)return"?";if(this.atEnd)return"END";if(this.atStart)return"START";var p=this._boardState.get(this.fromColumn,this.fromRow);if(!p)return"?";var f="standard"!=u?" "+Object(o.d)("takes")+" ":"x",v=p.pieceType,m=b.pieceTypeToChar(v,r,u),g="",y=this._boardState.get(this.toColumn,this.toRow);if(v==b.PAWN)this.fromColumn==this.toColumn?g=e.columnToChar(this.fromColumn,u)+""+(this.toRow+1):(g=e.columnToChar(this.fromColumn,u)+f+e.columnToChar(this.toColumn,u)+""+(this.toRow+1),y||a||(g+=" e.p."));else if(v==b.KING){var _=Math.abs(this.fromColumn-this.toColumn);1==_||0==_?(g=m,y&&(g+=f),g+=e.columnToChar(this.toColumn,u)+""+(this.toRow+1)):g=6==this.toColumn?"standard"!=u?Object(o.d)("castle king side"):"O-O":"standard"!=u?Object(o.d)("castle queen side"):"O-O-O"}else{for(var w=[],S=this._boardState.getPieces(v,p.colour),k=0;k<S.length;k++){var A=S[k];p.column==A.column&&p.row==A.row||this._boardState.canMove(new e(A.column,A.row,this.toColumn,this.toRow,this.promotionPiece))&&w.push(A)}if(g=m,h)g+=e.columnToChar(this.fromColumn,u),g+=""+(this.fromRow+1);else if(w.length>0){var E=!1,T=!1;for(k=0;k<w.length;k++)w[k].row==this.fromRow&&(T=!0),w[k].column==this.fromColumn&&(E=!0);(T||!T&&!E)&&(g+=e.columnToChar(this.fromColumn,u)),E&&(g+=""+(this.fromRow+1))}y&&(g+=f),g+=e.columnToChar(this.toColumn,u)+""+(this.toRow+1)}var O="",x="",M=this._boardState.clone(),I=C.flipToMove(this._boardState.toMove);if(M.playMove(this,!0),c||M.isKingSafe(I)||(O="standard"!=u?" "+Object(o.d)("check")+" ":"+",M.isKingMated(I)&&(O="standard"!=u?" "+Object(o.d)("checkmate")+" ":"#")),this.promotionPiece){var L="standard"!=u?" "+Object(o.d)("promote")+" ":"=";x=L+b.pieceTypeToChar(this.promotionPiece.pieceType,r,u)}return g+=x+O}},{key:"isPromotion",value:function(e){return e.pieceType==b.PAWN&&(e.colour==b.BLACK&&1==this.fromRow&&0==this.toRow||e.colour==b.WHITE&&6==this.fromRow&&7==this.toRow)}},{key:"getTakenPiece",value:function(){return this._boardState.get(this.toColumn,this.toRow)}},{key:"getPiece",value:function(){return this._boardState.get(this.fromColumn,this.fromRow)}},{key:"isCapture",value:function(){return!!this._boardState.get(this.toColumn,this.toRow)}},{key:"isRecapture",value:function(){return!this.prev.atStart&&(this.prev.isCapture()&&this.toColumn==this.prev.toColumn&&this.toRow==this.toRow)}},{key:"isCastling",value:function(){if(void 0===this.fromColumn||void 0===this.fromRow)return console.log("isCastling bad col,row this:",this),!1;var e=this._boardState.get(this.fromColumn,this.fromRow);return!!e&&(e.pieceType==b.KING&&2==Math.abs(this.fromColumn-this.toColumn))}},{key:"getCastlingType",value:function(){return this.isCastling()?6==this.toColumn?e.KING_SIDE_CASTLE:e.QUEEN_SIDE_CASTLE:e.NOT_CASTLING}},{key:"getPreMoveBoardState",value:function(){if(this.atEnd){var e=this.prev;return e.atStart?e._boardState:e.getBoardState().clone().playMove(e,!0)}return this._boardState}},{key:"getPostMoveBoardState",value:function(){return this.getBoardState().clone().playMove(this,!0)}},{key:"setPostCommentArray",value:function(e){this.postCommentArray=e,this.updateCommentCommands(1)}},{key:"setPreCommentArray",value:function(e){this.preCommentArray=e,this.updateCommentCommands(-1)}},{key:"addPreComment",value:function(e){this.preCommentArray=this.preCommentArray||[],this.preCommentArray.push(e)}},{key:"addPostComment",value:function(e){this.postCommentArray=this.postCommentArray||[],this.postCommentArray.push(e)}},{key:"updateCommentCommands",value:function(e){if(this.preCommentArray&&this.preCommentArray.length>0&&(!e||e<0)){this.prev&&this.prev.atStart&&(this.preCommentArray=this._getCommentEvals(this.preCommentArray));var t=this._getArrowsAndSquares(this.preCommentArray);(t.arrows&&t.arrows.length||t.squares&&t.squares.length)&&(this.preArrows=t.arrows,this.preSquares=t.squares,this.preCommentArray=t.newCommentArray)}if(this.postCommentArray&&this.postCommentArray.length>0&&(!e||e>0)){this.postCommentArray=this._getCommentClocks(this.postCommentArray),this.postCommentArray=this._getCommentEvals(this.postCommentArray);var n=this._getArrowsAndSquares(this.postCommentArray);(n.arrows&&n.arrows.length||n.squares&&n.squares.length)&&(this.postArrows=n.arrows,this.postSquares=n.squares,this.postCommentArray=n.newCommentArray)}}},{key:"_getCommentEvals",value:function(t){var n=this,r=[];return t&&t.forEach((function(t){n._getCommentEval(t)&&(t=t.replace(e.evalRegex," ").trim()),(t=t.replace(e.eval2Regex," ").trim())&&r.push(t)})),r}},{key:"_getCommentEval",value:function(t){if(!this._boardState)return!1;var n=null,r=1,o=!1;for(this._boardState.toMove==b.BLACK&&(r=-1);null!=(n=e.evalRegex.exec(t));){o=!0;var i=n[1];if(i.indexOf("mate")>=0){s=(s=i.split(" "))[1].split(","),this.eval={isMate:!0,score:parseInt(s[0])*r},s.length>1&&(this.eval.depth=parseInt(s[1]))}else{var a=!1,s=i.split(","),c=parseInt(1*parseFloat(s[0]));c>31e3?(c=32767-c,a=!0):c>29e3&&(c=29999-c,a=!0),this.eval={isMate:a,score:c*r},s.length>1&&(this.eval.depth=parseInt(s[1]))}}return o}},{key:"stripCommentsMatchingRegex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&-1!=t||(this.preCommentArray=this._stripCommentArrayMatchingRegexp(e,this.preCommentArray)),t&&1!=t||(this.postCommentArray=this._stripCommentArrayMatchingRegexp(e,this.postCommentArray))}},{key:"_stripCommentArrayMatchingRegexp",value:function(e,t){var n=[];return t&&t.forEach((function(t){(t=t.replace(e," ").trim())&&n.push(t)})),n}},{key:"_getCommentClocks",value:function(t){var n=this,r=[];return t&&t.forEach((function(t){var o=n._getCommentClock(t);o[0]&&(t=t.replace(e.clockRegex," ").trim()),o[1]&&(t=t.replace(e.elapsedTimeRegex," ").trim()),t&&r.push(t)})),r}},{key:"_getCommentClock",value:function(t){for(var n=null,r=[!1,!1];null!=(n=e.clockRegex.exec(t));){var o=n[1],i=S.parseHourMinSec(o);this.timeRemaining=i,r[0]=!0}for(;null!=(n=e.elapsedTimeRegex.exec(t));){var a=n[1];i=S.parseHourMinSec(a);this.thinkTime=i,r[1]=!0}return r}},{key:"arrowsAndSquaresToCodeString",value:function(){var e="",t="";function n(e,t,n){e||(e=[]);var r=e.reduce((function(e,t){return e&&(e+=","),e+=t.code}),t);return r&&n&&(r="["+n+" "+r+"]"),r}return e=n(this.preArrows,e),e=n(this.postArrows,e,"%cal"),t=n(this.preSquares,t),(t=n(this.postSquares,t,"%csl"))+e}},{key:"removeCommentsMatchingString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var r=t?this.preCommentArray:this.postCommentArray,o=[];if(r)for(var i=0;i<r.length;i++)(n?e==r[i]:r[i].indexOf(e)>=0)&&o.push(i);for(var a=o.length-1;a>=0;a--)this.deleteComment(o[a],t)}}},{key:"replaceCommentMatchingString",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=n?this.preCommentArray:this.postCommentArray,i=-1;if(o)for(var a=0;a<o.length;a++)if(r?e==o[a]:o[a].indexOf(e)>=0){i=a;break}i>=0&&(o[i]=t)}}},{key:"hasMoveTime",value:function(){return"thinkTime"in this}},{key:"hasEval",value:function(){return this.eval&&void 0!==this.eval.score}},{key:"hasTimeRemaining",value:function(){return"timeRemaining"in this}},{key:"hasAnnotations",value:function(){return this.preArrows&&this.preArrows.length||this.postArrows&&this.postArrows.length||this.preSquares&&this.preSquares.length||this.postSquares&&this.postSquares.length}},{key:"hasComments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.includeBoardAnnotations,r=void 0!==n&&n;if((!e||-1==e)&&this.preCommentArray&&this.preCommentArray.length>0)return!0;if((!e||1==e)&&this.postCommentArray&&this.postCommentArray.length>0)return!0;if(r){if((!e||-1==e)&&(this.preArrows&&this.preArrows.length>0||this.preSquares&&this.preSquares.length>0))return!0;if((!e||1==e)&&(this.postArrows&&this.postArrows.length>0||this.postSquares&&this.postSquares.length>0))return!0}return!1}},{key:"getAllComments",value:function(){return[].concat(babelHelpers.toConsumableArray(this.preCommentArray||[]),babelHelpers.toConsumableArray(this.postCommentArray||[]))}},{key:"changeCommentAtIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t?(this.preCommentArray[n]=e,this.updateCommentCommands(-1)):(this.postCommentArray[n]=e,this.updateCommentCommands(1))}},{key:"deleteComment",value:function(e,t){t?(this.preCommentArray.splice(e,1),this.updateCommentCommands(-1)):(this.postCommentArray.splice(e,1),this.updateCommentCommands(1))}},{key:"removeAllComments",value:function(e){e?(this.removeCommentsMatchingString(e,!1),this.removeCommentsMatchingString(e,!0)):(this.setPreCommentArray([]),this.setPostCommentArray([]))}},{key:"toBoardAnno",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n="",r=t?this.preArrows:this.postArrows,o=t?this.preSquares:this.postSquares;return r&&r.length&&(n+="[%cal ".concat(r.map((function(t){return e.outputArrowComment(t)})).join(","),"]")),o&&o.length&&(n+="[%csl ".concat(o.map((function(t){return e.outputSquareComment(t)})).join(","),"]")),n}},{key:"toFen",value:function(){return this._boardState.toFen()}},{key:"toAfterMoveFen",value:function(){return this._boardState.getStateAfterMove(this).toFen()}},{key:"toCT",value:function(){var t={};if(this.emptyMove)t.e=!0,t.m="0000";else{var n="";this.promotionPiece&&(n=b.pieceTypeToChar(this.promotionPiece.pieceType).toLowerCase()),t.m=this.fromColumn+""+this.fromRow+this.toColumn+this.toRow+n}var r=function(e,t,n){e&&e.length&&(t[n]=Array.from(e))},o=function(e,t,n){t[n]=t[n]||[],t[n].push(e)};r(this.nags,t,"n"),r(this.preCommentArray,t,"pc"),r(this.postCommentArray,t,"ac"),this.hasMoveTime()&&o("[%emt ".concat(this.thinkTime,"]"),t,"ac"),this.hasTimeRemaining()&&o("[%clk ".concat(k(this.timeRemaining),"]"),t,"ac"),this.hasEval()&&o(e.outputPGNEval(this.eval,this.toMove()),t,"ac");var i=this.toBoardAnno(!0),a=this.toBoardAnno(!1);return i&&o(i,t,"pc"),a&&o(a,t,"ac"),t}},{key:"_getArrowsAndSquares",value:function(t){for(var n=[],r=[],o=[],i=0;t&&i<t.length;i++){for(var a=t[i],s=e.parseCommentArrows(a),c=e.parseCommentSquares(a),l=0;l<s.length;l++)n.push(s[l]);for(var u=0;u<c.length;u++)r.push(c[u]);s.length&&(a=a.replace(e.arrowRegex," ").trim()),c.length&&(a=a.replace(e.squareRegex," ").trim()),a&&o.push(a)}return{squares:r,arrows:n,newCommentArray:o}}}]),e}();A.columnToChar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard",n=A.notationStyleColumnNames[t];return n?" "+Object(o.d)(n[e]||"?")+" ":String.fromCharCode("a".charCodeAt(0)+e)},A.notationStyleColumnNames={fide:["anna","bella","cesar","david","eva","felix","gustav","hector"],nato:["alpha","bravo","charlie","delta","echo","foxtrot","golf","hotel"]},A.charToColumn=function(e){return e.charCodeAt(0)-"a".charCodeAt(0)},A.createFromLalg=function(e,t){var n=new A;return n.initFromLalg(e),t&&n.setBoardState(new C(t)),n},A.squareToColumnRow=function(e){return{column:e.charCodeAt(0)-"a".charCodeAt(0),row:e.charCodeAt(1)-"1".charCodeAt(0)}},A.parseCommentArrows=function(e){for(var t=[],n=null;null!=(n=A.arrowRegex.exec(e));)for(var r=n[1].split(","),o=0;o<r.length;o++){var i=r[o].trim();if(5==i.length){var a=A.createFromLalg(i.substring(1));switch(c=i[0]){case"B":c="#00f";break;case"G":c="#0f0";break;case"Y":c="#ff0";break;default:case"R":c="#f00"}t.push({arrowMove:a,arrowColour:c,code:i})}else if("#"==i[0]){var s=i.substring(7);if(4==s.length){a=A.createFromLalg(s);var c=i.substring(0,7);t.push({arrowMove:a,arrowColour:c,code:i})}}}return t},A.parseCommentSquares=function(e){for(var t=[],n=null;null!=(n=A.squareRegex.exec(e));)for(var r=n[1].split(","),o=0;o<r.length;o++){var i=r[o].trim();if(3==i.length){var a=A.createFromLalg(i.substring(1)+i.substring(1)),s=i[0],c={B:"#00f",G:"#0f0",Y:"#ff0",R:"#f00"};s=c[s]||c.R,t.push({squareMove:a,squareColour:s,code:i})}else if("#"==i[0]){var l=i.substring(7);if(2==l.length){var u=A.createFromLalg(l+l),d=i.substring(0,7);t.push({squareMove:u,squareColour:d,code:i})}}}return t},A.makeEvalFromNextEval=function(e,t){var n=t.pv.slice();n.unshift(e);var r=-1*t.score;return t.isMate&&(r<0||r++),{pv:n,score:r,isMate:t.isMate,depth:t.depth}},A.arrowSquareColours={red:"R",green:"G",blue:"B",yellow:"Y","#f00":"R","#0f0":"G","#00f":"B","#ff0":"Y"},A.outputArrowComment=function(e){return(A.arrowSquareColours[e.arrowColour]||e.arrowColour)+e.arrowMove.toLALG()},A.outputSquareComment=function(e){return(A.arrowSquareColours[e.squareColour]||e.squareColour)+e.squareMove.toLALG().substring(0,2)},A.outputPGNEval=function(e,t){var n=1;t==b.BLACK&&(n=-1);var r=e.score*n;e.depth&&(r+=","+e.depth);var o="";return o=e.isMate?"mate "+r:r,"[%eval ".concat(o,"]")},A.escapeComment=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(e=e.replace(/}/g,"%@%"),t&&(e=e.trim())),e},A.unescapeComment=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(e=e.replace(/%@%/g,"}"),t&&(e=e.trim())),e},A.lineLength=function(e){for(var t=0;e&&!e.atEnd;)t++,e=e.next;return t},A.evalToString=function(e,t,n){if(!e)return null;var r=e.score;if(n&&t==b.BLACK&&(r*=-1),e.isMate)return Object(o.d)("mate")+" "+r;var i=(parseFloat(r)/100).toFixed(2)+"";return r>0?"+"+i:i},A.fromCT=function(e){var t=parseInt(e.m[0]),n=parseInt(e.m[1]),r=parseInt(e.m[2]),o=parseInt(e.m[3]),i=5==e.m.length?e.m[4]:null;i&&(i=b.createFromChar(i));var a=new A(t,n,r,o,i),s=function(e,t,n){e&&e.length&&(t[n]=Array.from(e))};return e.e&&(a.emptyMove=!0),s(e.n,a,"nags"),s(e.pc,a,"preCommentArray"),s(e.ac,a,"postCommentArray"),a},A.eval2Regex=/\[%evp\s+([\s\S]*?)\]/g,A.evalRegex=/\[%eval\s+([\s\S]*?)\]/g,A.bothEvalRegex=/\[%(eval|evp)\s+([\s\S]*?)\]/g,A.miniBoardRegex=/\[#\]/g,A.miniBoardOrEvpRegex=/(\[%(evp)\s+([\s\S]*?)\])|(\[#\])/g,A.arrowRegex=/\[%cal\s+([\s\S]*?)\]/g,A.squareRegex=/\[%csl\s+([\s\S]*?)\]/g,A.clockRegex=/\[%clk\s+([\s\S]*?)\]/g,A.formatRegex=/\[%fmt\s+([\s\S]*?)\]/g,A.elapsedTimeRegex=/\[%emt\s+([\s\S]*?)\]/g,A.NOT_CASTLING=0,A.KING_SIDE_CASTLE=1,A.QUEEN_SIDE_CASTLE=2;var E=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};babelHelpers.classCallCheck(this,e),this.board=t,this.piece=n,this.options=r}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this._node.parentNode.removeChild(this._node),this._node.ct=null,this._node=null,this._destroyed=!0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"moveTo",value:function(e,t){this.piece.moveTo(e,t),this.setToCurrentPosition()}},{key:"setVisualPosition",value:function(e,t){var n=(e=this.board.isFlipped()?7-e:e)/8*100,r=(7-(t=this.board.isFlipped()?7-t:t))/8*100;this._node.style.left=n+"%",this._node.style.top=r+"%"}},{key:"setToCurrentPosition",value:function(){this.setVisualPosition(this.piece.column,this.piece.row)}},{key:"getImgClassName",value:function(){return e.CLASS_PIECE+" ct-piece-"+["white","black"][this.piece.colour]+b.pieceNames[this.piece.pieceType]}},{key:"getHTML",value:function(){return this.options.usePNG?'<img class="pngPieceContainer" src="'+(e.IMAGE_PATH+"/pieces/png/merida/"+colours[this.piece.colour]+b.pieceNames[this.piece.pieceType]+"296.vers1.png")+'">':'<img class="svgPieceContainer" src="'+(e.IMAGE_PATH+"/pieces/svg/merida/"+colours[this.piece.colour]+b.pieceNames[this.piece.pieceType]+".vers1.svg")+'">'}},{key:"createNode",value:function(){var e=this.getImgClassName(),t=document.createElement("div");t.ct={piece:this},t.setAttribute("class",e),this._node=t,this.setToCurrentPosition(),this.board.getSquaresContainer().appendChild(t)}},{key:"getNode",value:function(){return this._node}},{key:"changePiece",value:function(e){this.piece=e,this.getNode().setAttribute("class",this.getImgClassName())}}]),e}();function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}E.styles=[{name:"merida-gradient",label:Object(o.d)("Merida - Shaded")},{name:"merida",label:Object(o.d)("Merida")},{name:"goodcomp-gradient",label:Object(o.d)("Good Companion - Shaded")},{name:"goodcomp",label:Object(o.d)("Good Companion")},{name:"alpha",label:Object(o.d)("Alpha")},{name:"blindfold1",label:Object(o.d)("Blindfold - Level 1")},{name:"blindfold2",label:Object(o.d)("Blindfold - Level 2")},{name:"blindfold3",label:Object(o.d)("Blindfold - Level 3")},{name:"blindfold4",label:Object(o.d)("Blindfold - Level 4")},{name:"case",label:Object(o.d)("Case")},{name:"celtic",label:Object(o.d)("Celtic")},{name:"eyes",label:Object(o.d)("Eyes")},{name:"fantasy",label:Object(o.d)("Fantasy")},{name:"kingdom",label:Object(o.d)("Kingdom")},{name:"kosal",label:Object(o.d)("Kosal")},{name:"leipzig",label:Object(o.d)("Leipzig")},{name:"maya",label:Object(o.d)("Maya")},{name:"skulls",label:Object(o.d)("Skulls")},{name:"spatial",label:Object(o.d)("Spatial")},{name:"wiki",label:Object(o.d)("Wiki")}],E.CLASS_PIECE="ct-pieceClass",E.IMAGE_PATH="/images";var O=new a.a("board-piece-movement"),x=function(e){babelHelpers.inherits(n,e);var t=T(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(babelHelpers.classCallCheck(this,n),(r=t.call(this))._dragAndDrop=i,r._clickAndClick=a,!e.eventHub)throw new Error("PieceMovement: No event hub on board.");r._del=new c.a,r.board=e;var s=r.board.getSquaresContainer();r.dd=new g({container:s,dontFireMoveEvents:!0,leftOnly:!0,childSelector:"."+E.CLASS_PIECE}),r.dd.setShowMovement(r._dragAndDrop),r._del.delegate(s,"tap",".ct-square",r._squareClicked,babelHelpers.assertThisInitialized(r)),r.dd.on("dragStart",r._pieceDragStart,babelHelpers.assertThisInitialized(r)),r.dd.on("dragEnd",r._pieceDragEnd,babelHelpers.assertThisInitialized(r)),r.dd.on("dragMove",r._pieceDragMove,babelHelpers.assertThisInitialized(r));var l=r.board.getMoveTextMakeMoveForm();return l&&(r._textMakeMoveHandler=function(e){e.preventDefault();var t=r.board.getMoveTextEntryField().value;if(t)if(4==(t=t.trim().toLowerCase()).length||5==t.length){var n=A.createFromLalg(t.toLowerCase()),i=r.board.getDisplayPieceAt(n.fromColumn,n.fromRow);i?(O.log("moving:"+n.toLALG()),r.board.eventHub.fire("pieceMoved",{move:n,piece:i})?(r.board.clearMoveEntryError(),r.board.clearMoveEntry()):(O.log("could not move due to vetoe"),r.board.canMove(n)?r.board.showMoveEntryError(Object(o.d)("Move not allowed")):r.board.showMoveEntryError(Object(o.d)("Illegal move")))):r.board.showMoveEntryError(Object(o.d)("No piece at source square"))}else r.board.showMoveEntryError(Object(o.d)("Move must be 4 or 5 characters long"));else r.board.showMoveEntryError(Object(o.d)("Enter move before clicking make move button"))},l.addEventListener("submit",r._textMakeMoveHandler)),r}return babelHelpers.createClass(n,[{key:"destroy",value:function(){this._del.destroy(),this.dd.destroy(),this._textMakeMoveHandler&&this.board.getMoveTextMakeMoveButton().removeEventListener("tap",this._textMakeMoveHandler)}},{key:"getClickAndClick",value:function(){return this._clickAndClick}},{key:"getDragAndDrop",value:function(){return this._dragAndDrop}},{key:"changeClickAndClick",value:function(e){this._clickAndClick=e}},{key:"changeDragAndDrop",value:function(e){this._dragAndDrop=e,this.dd.setShowMovement(e)}},{key:"reset",value:function(){this._unselectSquare(),this.board.resetPreMove()}},{key:"_unselectSquare",value:function(e,t){this._selectedSquare&&(this.board.eventHub.fire("squareUnselected",this._selectedSquare),this._selectedSquare=null)}},{key:"_selectSquare",value:function(e,t){this._selectedSquare&&this.board.eventHub.fire("squareUnselected",this._selectedSquare),this.board.eventHub.fire("squareSelected",this._selectedSquare={column:e,row:t})}},{key:"_processSquareClick",value:function(e,t,n){if(this.board.resetPreMove(),this.board.eventHub.fire("squareClicked",{column:e,row:t}))if(this._clickAndClick)if(O.log({column:e,row:t},"process square click"),this._selectedSquare)if(O.log({selSquare:this._selectedSquare},"processing square in process square click where square already selected"),this._selectedSquare.column==e&&this._selectedSquare.row==t)O.log("unselecting same square click in process square click"),this._unselectSquare();else{var r=this.board.getDisplayPieceAt(this._selectedSquare.column,this._selectedSquare.row);if(O.log({piece:r},"process different square click in process square click with piece:"),r)if(this._clickedPiece=r,this._processPieceMove(r,e,t,!1,n))this._unselectSquare();else{var o=this.board.getDisplayPieceAt(e,t);o&&o.piece.colour==r.piece.colour&&(this._selectSquare(e,t),this._oct=(new Date).getTime())}else O.log("Got previously selected square with no piece, remove select, and selecting clicked square"),this._unselectSquare(),this.board.getDisplayPieceAt(e,t)&&(O.log("selecting square with piece when previous selected square had no piece"),this._selectSquare(e,t),this._oct=(new Date).getTime())}else O.log("selecting square without a previous selection made"),this.board.getDisplayPieceAt(e,t)&&(O.log("selecting square"),this._selectSquare(e,t),this._oct=(new Date).getTime());else O.log("ignoring process square click as clickAndClick disabled")}},{key:"_squareDown",value:function(e){O.log({e:e},"SQUARE DOWN")}},{key:"_squareUp",value:function(e){O.log({e:e},"SQUARE UP")}},{key:"_squareContext",value:function(e){O.log({e:e},"SQUARE context"),e.preventDefault()}},{key:"_squareClicked",value:function(e){O.log({e:e},"SQUARE CLICK");var t=e.currentTarget.getAttribute("data-square-id"),n=A.squareToColumnRow(t),r=n.column,o=n.row;O.log({column:r,row:o}," squarefromrowcol:"+A.columnToChar(r)+(o+1)+" square:"+t),this._processSquareClick(r,o,e)}},{key:"cancelMovement",value:function(){this.dd.cancelDrag(),this._draggedPiece?(this._draggedPiece.isDestroyed()||this._draggedPiece.setToCurrentPosition(),this._draggedPiece=null):this._clickedPiece&&(this._clickedPiece.isDestroyed()||this._clickedPiece.setToCurrentPosition(),this._clickedPiece=null)}},{key:"_pieceDragStart",value:function(e){return!e.dragNode.hasAttribute("data-promote-char")&&(e.dragNode.ct?(this._draggedPiece=e.dragNode.ct.piece,this._dst=(new Date).getTime(),!0):(O.error({e:e},"piece drag start got dragNode with no .ct"),!1))}},{key:"_processPieceMove",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e.setVisualPosition(t,n);var i=new A(e.piece.column,e.piece.row,t,n);return r?this._dst&&(i.dt=(new Date).getTime()-this._dst,this._dst=0):this._oct&&(i.ct=(new Date).getTime()-this._oct,this._oct=0),this.board.eventHub.fire("pieceMoved",{move:i,piece:e,e:o})?(this._draggedPiece=null,this._clickedPiece=null,!0):(O.log({draggedPiece:this._draggedPiece},"piece moved handling returned false with draggedPiece"),(this._draggedPiece||this._clickedPiece)&&e.setToCurrentPosition(),this._draggedPiece=null,this._clickedPiece=null,this._unselectSquare(),!1)}},{key:"_pieceDragEnd",value:function(e){var t=e.dragNode.ct.piece,n=this._pixelsToColumnRow(e.endX,e.endY),r=n.column,o=n.row;if(O.log({endX:e.endX,endY:e.endY,endColumn:r,endRow:o,piece:t}),r>7||r<0||o>7||o<0){t.setToCurrentPosition(),this._draggedPiece=null;var i=new A(t.piece.column,t.piece.row,r,o);return this.board.eventHub.fire("pieceMovedOffBoard",{move:i,piece:t,e:e}),!1}var a=t.piece,s=a.column,c=a.row;return O.log({origRow:c,origColumn:s}),s==r&&c==o?(this._draggedPiece=null,t.setToCurrentPosition(),O.log("process square clicked in start drag handler"),this._processSquareClick(s,c,e),!1):this._dragAndDrop?(this._unselectSquare(),this._processPieceMove(t,r,o,!0,e)):(this._draggedPiece=null,!0)}},{key:"_pieceDragMove",value:function(e){}},{key:"_pixelsToColumnRow",value:function(e,t){return this.board.pixelsToColumnRow(e,t)}}]),n}(s.a);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var I=function(e){babelHelpers.inherits(n,e);var t=M(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),(r=t.call(this)).board=e,r.board.eventHub=new s.a,r}return babelHelpers.createClass(n,[{key:"destroy",value:function(){this.board.eventHub.destroy()}}]),n}(s.a),L=function(e,t){return e.concat(t)},N=function(e){return function(t){return t.map(e).reduce(L,[])}},R=(N((function(e){return e})),N((function(e){return Array.isArray(e)?R(e):e}))),D=new a.a("square-highlighter"),P=function(){function e(t){if(babelHelpers.classCallCheck(this,e),this._highlightedSquares=[],this._countUserSquares=0,!t.eventHub)throw new Error("SquareHighlighter: No event hub on board.");if(this.board=t,this.board.eventHub.on("squareSelected",this._squareSelected,this),this.board.eventHub.on("squareUnselected",this._squareUnselected,this),this.board.getAllowDrawing()){var n=this.board.getSquaresContainer();this._bw=n,this._boundBoardTap=this._boardTap.bind(this),n.addEventListener("tap",this._boundBoardTap),this.dd=new g({container:n,rightOnly:!0,dontMove:!0,center:!1}),this.dd.on("dragStart",this._boardDragStart,this),this.dd.on("dragEnd",this._boardDragEnd,this)}}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this.dd&&this.dd.destroy(),this.board.eventHub.unsubscribe("squareSelected",this._squareSelected),this.board.eventHub.unsubscribe("squareUnselected",this._squareSelected),this._boundBoardTap&&this._bw.removeEventListener("tap",this._boundBoardTap)}},{key:"_boardDragStart",value:function(e){D.log({e:e},"bds"),this.board.isDrawingDisabled()||(this._startEvent=e,this._startDragLocation=this.board.pixelsToColumnRow(e.startX,e.startY),D.log({startDragLoc:this._startDragLocation},"start loc"),this._lastColumn=null,this._lastRow=null,this._drawColour="green",e.shiftKey&&(this._drawColour="red"),e.ctrlKey&&(this._drawColour="yellow"),e.ctrlKey&&e.shiftKey&&(this._drawColour="blue"))}},{key:"_boardDragEnd",value:function(e){if(D.log({e:e},"bde"),!this.board.isDrawingDisabled()){var t=this.board.pixelsToColumnRow(e.endX,e.endY),n=t.column,r=t.row;n==this._startDragLocation.column&&r==this._startDragLocation.row&&(this.hasHighlightsForTypeAndLocation(n,r,"drawnMarkers")?this.removeHighlightsForTypeAndLocation(n,r,"drawnMarkers"):this.hasHighlightsForTypeAndLocation(n,r,"markers")?this.removeHighlightsForTypeAndLocation(n,r,"markers"):this.highlightSquare(n,r,this._drawColour,"drawnMarkers"))}}},{key:"saveBoardAnnotationsToMove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.preSquares=[];var n=this.getHighlightsOfType("markers"),r=this.getHighlightsOfType("drawnMarkers"),o=R([n,r]),i=o.map((function(e){return{squareMove:new A(e.column,e.row,e.column,e.row),squareColour:e.colour}}));t?(e.postSquares=i,D.log({squareMoves:i},"post squares save")):(e.preSquares=i,D.log({squareMoves:i},"pre squares save"))}},{key:"_boardTap",value:function(e){this._countUserSquares>0&&(this._countUserSquares=0,this.removeHighlightsForType("drawnMarkers"))}},{key:"removeAll",value:function(){var e=this;this._countUserSquares=0,Object.keys(this._highlightedSquares).forEach((function(t){e._highlightedSquares[t]&&e.removeHighlightsForType(t)}))}},{key:"redrawAll",value:function(){var e=this;Object.keys(this._highlightedSquares).forEach((function(t){var n=e._highlightedSquares[t];n&&(e.removeHighlightsForType(t),n.map((function(n){return e.highlightSquare(n.column,n.row,n.colour,t)})))}))}},{key:"_squareSelected",value:function(e){this.highlightSquare(e.column,e.row,null,"selected")}},{key:"_squareUnselected",value:function(e){this.removeHighlightsForType("selected")}},{key:"getHighlightsOfType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this._highlightedSquares[e]||[];return this._highlightedSquares[e]=t,t}},{key:"removeHighlightsForType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";"drawnMarkers"==e&&(this._countUserSquares=0);var t=this._highlightedSquares[e];t&&(t.forEach((function(e){e.square.classList.remove(e.className)})),this._highlightedSquares[e]=null)}},{key:"removeHighlightsForTypeAndLocation",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=this._highlightedSquares[r],i=[];o&&(o.forEach((function(o){o.column==e&&o.row==t?(o.square.classList.remove(o.className),"drawnMarkers"==r&&n._countUserSquares--):i.push(o)})),this._highlightedSquares[r]=i)}},{key:"hasHighlightsForTypeAndLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=this._highlightedSquares[n];return!!r&&r.some((function(n){return n.column==e&&n.row==t}))}},{key:"highlightMoveSquares",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removeHighlightsForType("markers");var n=this,r=function(e){for(var t=0;t<e.length;t++){var r=e[t].squareMove,o=r.fromColumn,i=r.fromRow;n.highlightSquare(o,i,e[t].squareColour,"markers")}};t&&e.preSquares&&r(e.preSquares),e.postSquares&&r(e.postSquares),!t&&e.next&&e.next.preSquares&&r(e.next.preSquares)}},{key:"highlightSquare",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i=this.board.getSquareAt(t,n);"drawnMarkers"==o&&this._countUserSquares++;var a="ct-colour-square-red";if(r){var s=r.substring(1),c="ct-board-square-colour-style-"+s;a="ct-colour-square-"+s;var l=document.getElementById(c);l||((l=document.createElement("style")).type="text/css",l.id=c,l.innerHTML="chess-board .ct-board-holder .ct-board-squares ."+a+" { background:none;background-color:"+r+";} chess-board .ct-board-holder .ct-board-squares ."+a+".ct-square-light { opacity: 0.7; }",document.getElementsByTagName("head")[0].appendChild(l))}var u=e.typeClasses[o];u&&(a=u),i.classList.add(a);var d=this._highlightedSquares[o]||[];d.push({square:i,className:a,colour:r,column:t,row:n}),this._highlightedSquares[o]=d}},{key:"highlightFromTo",value:function(e){this.removeHighlightFromTo(),this.highlightSquare(e.fromColumn,e.fromRow,null,"fromSquare"),this.highlightSquare(e.toColumn,e.toRow,null,"toSquare")}},{key:"removeHighlightFromTo",value:function(){this.removeHighlightsForType("fromSquare"),this.removeHighlightsForType("toSquare")}},{key:"highlightPreMove",value:function(e){this.removeHighlightPreMove(),this.highlightSquare(e.fromColumn,e.fromRow,null,"fromPreMoveSquare"),this.highlightSquare(e.toColumn,e.toRow,null,"toPreMoveSquare")}},{key:"removeHighlightPreMove",value:function(){this.removeHighlightsForType("fromPreMoveSquare"),this.removeHighlightsForType("toPreMoveSquare")}},{key:"highlightSquaresFromMove",value:function(e){}}]),e}();P.typeClasses={selected:"ct-board-square-selected",fromSquare:"ct-from-square",toSquare:"ct-to-square",fromPreMoveSquare:"ct-pre-move-from-square",toPreMoveSquare:"ct-pre-move-to-square"};var F=n(5),H=n(38),B=n(39),j=n(96),q=(n(175),n(57)),V=n(31),z=n(7);n(24),n(395);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var W=new a.a("dialog"),U=function(e){babelHelpers.inherits(i,e);var t,n=G(i);function i(){return babelHelpers.classCallCheck(this,i),n.call(this)}return babelHelpers.createClass(i,null,[{key:"properties",get:function(){return{id:{type:Number,default:Object(F.a)()},title:{type:String,default:""},content:{type:String,default:""},buttons:{type:Array,default:[]},closeButton:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},dimming:{type:Boolean,default:!0},onlyOne:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},verticalCenter:{type:Boolean,default:!0},closeCallback:{type:Function},precloseCallback:{type:Function},submitCallback:{type:Function},width:{type:String},formJson:{type:Object},dialogClass:{type:String},classes:{type:String}}}}]),babelHelpers.createClass(i,[{key:"firstUpdated",value:function(){var e=this,t=this._o,n=t.draggable,o=t.dialogClass,i=(t.verticalCenter,t.formJson),a=t.submitCallback,s=t.onlyOne;if(V.a.isNativeApp()&&V.a.isAndroid()&&(n=!1),n&&(this._drag=new g({center:!1,constrainTop:!0,container:document.body,childSelector:"#"+this.id,dragHandleSelector:".ct-dialog-header"}),this._drag.on("dragEnd",(function(){r.a.layoutOnNeeded(e)}))),o&&o.split(" ").forEach((function(t,n){if(0==n&&s){var r=document.querySelector("."+t);r&&r.close()}e.classList.add(t)})),this.classList.add("ct-elev--z24"),this.setAttribute("tabindex","0"),this.setAttribute("role","dialog"),this.setAttribute("aria-labelledby",this._titleId),this.show(),this.layout(),i&&a){var l=this.querySelector("form");l&&l.addEventListener("submit",(function(t){e._o.submitCallback({dialog:e,e:t});t.preventDefault()}))}this.setAttribute("touch-action","auto"),this._del=new c.a;var u=V.a.isNativeApp()&&V.a.isAndroid()?"click":"tap";this._del.delegate(this,u,"ct-button.ct-dialog-action-button",this._handleButtonClick,this),this._del.delegate(this,u,".ct-dialog-close",this.close,this),this._del.delegate(this,"change",".ct-dialog-buttons ct-select",this._selectChange,this)}},{key:"layout",value:function(){this.style.left=Math.max(0,window.innerWidth/2-this.offsetWidth/2)+"px",this._o.verticalCenter&&!V.a.isNativeApp()&&(this.style.top=Math.max(0,window.innerHeight/2-this.offsetHeight/2)+"px")}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,c,l,u,d,h,p,f,v,m,g,y=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._o=t,(n=this._o).id,r=n.title,i=n.content,a=n.dimming,s=n.modal,c=n.buttons,l=n.closeButton,n.width,n.closeCallback,n.submitCallback,n.precloseCallback,n.onlyOne,n.veriticalCenter,u=n.formJson,n.draggable,n.dialogClass,!u){e.next=13;break}d=function(){i='<ct-form>\n                   <script type="application/json" class="ct-config-data">\n                      '.concat(Object(q.a)(JSON.stringify(u)),"\n                   <\/script>\n                 </ct-form>")},e.next=12;break;case 8:e.sent,d(),e.next=13;break;case 12:d();case 13:this._buttonsByIds={},h=c.map((function(e){return e.id=e.id||Object(F.a)(),W.log({id:e.id,b:e},"CREATED DIALOG BUTTON"),y._buttonsByIds[e.id]=e,e.choices?H.a.create(e):B.a.create(e,"ct-dialog-action-button")})).join(""),p=a?"":"ct-dialog-no-dimming",f=s?"":"ct-dialog-no-modal",v=Object(F.a)(),m=Object(F.a)(),this._titleId=v,g='<div id="'.concat(m,'" tabindex="0" class="ct-dialog-container ').concat(p," ").concat(f,'">\n               ').concat(j.a.create({titleClasses:"ct-dialog-header",classes:"ct-dialog-card",titleText:r,titleId:v,titleIconLabel:Object(o.d)("Close dialog"),titleIcon:"close",titleIconClasses:(l?"":"ct-hidden")+" ct-dialog-close",bodyContent:i,bodyContentClasses:"ct-dialog-body",actionsClasses:"ct-dialog-buttons mdc-card__action-icons ct-card--border",actionsContent:h}),"\n             </div>"),this.innerHTML=g;case 22:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"createDialog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;void 0===t&&Object(F.a)(),e.title,e.content,e.buttons,e.closeButton,e.dimming,e.modal,e.closeCallback,e.precloseCallback,e.submitCallback,e.width,e.formJson,e.dialogClass,e.draggable,e.verticalCenter,e.onlyOne}},{key:"getForm",value:function(){return this.querySelector("ct-form")}},{key:"getFormJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getForm().getFormJSON(e)}},{key:"destroy",value:function(){this._del.destroy(),this.parentNode?this.parentNode.removeChild(this):(W.warn("in destroy parent node was null"),W.trace())}},{key:"_getContainer",value:function(){return this}},{key:"_setContainerOpacity",value:function(e){var t=this._getContainer();t&&(t.style.opacity=e)}},{key:"hide",value:function(e){this._setContainerOpacity(0),e&&this.classList.add("ct-hidden")}},{key:"show",value:function(e){var t=this;e&&this.classList.remove("ct-hidden"),this._setContainerOpacity(1),requestAnimationFrame((function(){requestAnimationFrame((function(){var e=t.querySelector(".ct-initial-focus-target");e?e.focus():t.focus()}))}))}},{key:"_selectChange",value:function(e){var t=e.currentTarget,n=e.currentTarget.getAttribute("id");W.log({e:e,val:t.value,name:t.getAttribute("name"),id:n},"dialog select change");var r=this._buttonsByIds[n];r.action({dialog:this,button:r,select:!0,value:t.value,name:t.getAttribute("name")})}},{key:"triggerButton",value:function(e){var t=this._buttonsByIds[e];W.log({id:e,button:t},"dialog button trigger with id"),t.action({dialog:this,button:t})}},{key:"_handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("id");this.triggerButton(t)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this._o.precloseCallback||!1!==this._o.precloseCallback(this)){this.hide();var t=this;this._o.closeCallback&&this._o.closeCallback(this),this.closed=!0,setTimeout((function(){t.destroy()}),420)}}}],[{key:"toHtml",value:function(e){return""}}]),i}(z.a);U._showBasicDialog=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return U.create({title:t,content:'<div class="'.concat(n,'">').concat(e,"</div>"),buttons:r,closeCallback:o},i)},U.showChoices=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return U._showBasicDialog(e,t,r,n,null,"ct-dialog-choices-message")},U.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return U._showBasicDialog(e,t,"",[{label:Object(o.d)("Ok"),action:function(e){e.dialog.close()}}],null,"ct-dialog-error-message")},U.showInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return U._showBasicDialog(e,t,"",[{label:Object(o.d)("Ok"),action:function(e){e.dialog.close()}}],null,"ct-dialog-info-message")},U.showConfirm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return U.showChoices(e,t,[{label:Object(o.d)("Cancel"),action:function(e){e.dialog.close()}},{label:Object(o.d)("Confirm"),action:function(e){e.dialog.close(),n()}}],r)},U.showTextInput=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inputLabel,n=void 0===t?null:t,r=e.inputName,i=void 0===r?null:r,a=e.title,s=void 0===a?"":a,c=e.comment,l=void 0===c?null:c,u=e.okCallback,d=e.defaultValue,h=void 0===d?null:d,p={children:[{type:"TextField",name:i,label:n,comment:l,nameAsId:!0,value:h||""}]},f='<ct-form>\n             <script type="application/json" class="ct-config-data">\n                 '.concat(Object(q.a)(JSON.stringify(p)),"\n             <\/script>\n            </ct-form>"),v=[{label:Object(o.d)("Cancel"),action:function(e){e.dialog.close()}},{label:Object(o.d)("Ok"),action:function(e){var t=e.dialog;u&&u(t),t.close()}}];return U._showBasicDialog(f,s,"ct-dialog-info-message",v)},U.closeAllOpen=function(){var e=!1;return Array.prototype.forEach.call(document.querySelectorAll("ct-dialog"),(function(t){t.closed||(t.close(),e=!0)})),e},U.create=function(e,t){e.deferConfig=!0;var n=U.createElement(e,t);return n.tagName!=U.componentName.toUpperCase()&&(n=n.firstChild),n.setAttribute("tabindex","0"),n.setAttribute("role","dialog"),document.body.appendChild(n),n.setConfig(e),W.log({params:e,elem:n},"created dialog"),n},U.componentName="ct-dialog",r.a.define(U);var K=n(34),$=new a.a("legal-move-handler"),Y=function(){function e(t,n){var r=this;if(babelHelpers.classCallCheck(this,e),this.board=t,this.moveList=n,!this.board.eventHub)throw new Error("LegalMoveHandler: No event hub on board.");if(!this.board.getBoardState)throw new Error("LegalMoveHandler: No getBoardState on board.");this.board.eventHub.on("pieceMoved",this._pieceMoved,this),this.board.eventHub.on("toMoveUpdated",this._toMoveUpdated,this),this._del=new c.a,this._del.delegate(this.board,"tap",".ct-promotion-selector .ct-pieceClass",(function(e){if(r._lastPromotionData){var t=r._lastPromotionData,n=t.piece,o=t.move,i=t.displayPiece,a=(t.promotionPanel,t.preMove);o.promotionPiece=b.createFromChar(e.currentTarget.getAttribute("data-promote-char"),n.colour,o.toRow,o.toColumn),r._performPromotion(o,a,n,i)}})),this._del.delegate(this.board,"tap",".ct-promotion-selector",(function(e){if($.log("TAPPED ON PROMO SELECTOR"),r._lastPromotionData){var t=r._lastPromotionData;t.piece,t.move,t.displayPiece,t.promotionPanel;r._cleanupPromotionData(!0)}}))}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this.board.eventHub.unsubscribe("pieceMoved",this._pieceMoved),this.board.eventHub.unsubscribe("toMoveUpdated",this._toMoveUpdated)}},{key:"_performPromotion",value:function(e,t,n,r){this._cleanupPromotionData(!1),t?(this.board.addPreMove({move:e,colour:n.colour}),r.moveTo(e.fromColumn,e.fromRow)):this._playMove(e)||r.moveTo(e.fromColumn,e.fromRow)}},{key:"_promptPromotionPiece",value:function(e,t,n,r,o){var i=!1;$.log({e:o},"PROMOTE EVENT"),o&&o.e&&(o.e.ctrlKey||o.e.altKey)&&(i=!0);var a=this.board.getAutoPromote();if(!i&&("always"==a||r&&"premove"==a))return e.promotionPiece=b.createFromChar("q",t.colour,e.toRow,e.toColumn),void this._performPromotion(e,r,t,n);var s=t.colour==b.BLACK?"black":"white",c=t.colour==b.WHITE;this.board.isFlipped()&&(c=!c);var l=0,u=12.5,d=e.toColumn;c||(l=87.5,u=-12.5),this.board.isFlipped()&&(d=7-d);var h=12.5*d,p='<div class="ct-promotion-selector ct-promotion-colour-'.concat(s,'">\n                  ').concat([{piece:"queen",letter:"q"},{piece:"knight",letter:"n"},{piece:"rook",letter:"r"},{piece:"bishop",letter:"b"}].map((function(e){var t='<div class="ct-promotion-piece-holder" style="top:'.concat(l,"%;left:").concat(h,'%"><div data-promote-char="').concat(e.letter,'" class="ct-pieceClass ct-piece-').concat(s).concat(e.piece,'"> </div></div>');return l+=u,t})).join(""),"\n                 </div>\n                 "),f=this.board.getSquaresContainer(),v=Object(K.a)(p);$.log({promotionPanelHTML:p,panelFirstChild:v.firstChild},"PROMOTION PANEL"),this._lastPromotionData={promotionPanel:v.firstChild,displayPiece:n,piece:t,move:e,preMove:r},f.appendChild(this._lastPromotionData.promotionPanel)}},{key:"_toMoveUpdated",value:function(e){this._cleanupPromotionData(!0)}},{key:"_cleanupPromotionData",value:function(e){if(this._lastPromotionData){var t=this._lastPromotionData,n=(t.piece,t.move),r=t.displayPiece,o=t.promotionPanel;this.board.getSquaresContainer().removeChild(o),this._lastPromotionData=null,e&&r.getNode()&&r.moveTo(n.fromColumn,n.fromRow)}}},{key:"_pieceMoved",value:function(e){var t=e.move,n=e.e;if(this.board.moveList&&!this.board.moveList.areMovesAllowed())return $.log({board:this.board,moveList:this.board.moveList},"move vetoed by move list moves allowed setting"),!1;this.board.resetPreMove();var r=t.fromColumn,o=t.fromRow,i=(t.toColumn,t.toRow,this.board.getDisplayPieceAt(r,o));return this.board.getBoardState().toMove!=i.piece.colour?this.board.getBoardState().canMove(t,!0,!0)?($.log("WRONG colour to move:"+t.toSAN()+" trying pre move"),t.isPromotion(i.piece)&&!t.promotionPiece?($.log("prompting for promotion pre-move"),this._promptPromotionPiece(t,i.piece,i,!0,e),!0):(this.board.addPreMove({move:t,colour:i.piece.colour}),$.log("added pre move"),!1)):($.log("piece move check, piece can't pre-move"),!1):this.board.getBoardState().canMove(t)?t.isPromotion(i.piece)&&!t.promotionPiece?(this._promptPromotionPiece(t,i.piece,i,!1,e),!0):this._playMove(t,n):($.log({boardStateFen:this.board.getBoardState().toFen()},"CAN MOVE False with board state fen"),!1)}},{key:"_playMove",value:function(e,t){return(this.board.getTemporaryConfirmMoves()||this.board.getConfirmMoves())&&this.board.controls?(e.setBoardState(this.board.getBoardState().clone()),this.board.controls.showConfirmMove(e),$.log({move:e},"confirming move so returning false from playmove"),!1):this.board.playMoveWithEventFiring(e,!0,t)}}]),e}();function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var J=new(function(e){babelHelpers.inherits(n,e);var t=X(n);function n(){var e;babelHelpers.classCallCheck(this,n),(e=t.call(this))._keyboardAllowed="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element;var r=["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],o=r;return[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError",""]].some((function(e){return e[1]in document&&(o=e,!0)})),e._api={},r.forEach((function(t,n){return e._api[t]=o[n]})),e.available()&&(e._boundChangeListener=e._changeListener.bind(babelHelpers.assertThisInitialized(e)),document.addEventListener(e._api.fullscreenchange,e._boundChangeListener)),e}return babelHelpers.createClass(n,[{key:"destroy",value:function(){babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"destroy",this).call(this),this.available()&&document.removeEventListener(this._api.fullscreenchange,this._boundChangeListener)}},{key:"_changeListener",value:function(e){this.fire("fullscreenChanged",{isFullscreen:this.isFullscreen()})}},{key:"available",value:function(){return!!(this._api.fullscreenEnabled in document)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=this._api.requestFullscreen;/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](this._keyboardAllowed?Element.ALLOW_KEYBOARD_INPUT:{})}},{key:"exit",value:function(){document[this._api.exitFullscreen]()}},{key:"isFullscreen",value:function(){return!!document[this._api.fullscreenElement]}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;this.isFullscreen()?this.exit():this.request(e)}}]),n}(s.a)),Z=n(1),Q=n(10),ee=n(25),te={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},ne={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},re={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},oe=n(8),ie=te.OPENING,ae=te.OPEN,se=te.CLOSING,ce=ne.REASON_ACTION,le=ne.REASON_DISMISS,ue=function(e){function t(n){var r=e.call(this,Z.a({},t.defaultAdapter,n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.autoDismissTimer_=0,r.autoDismissTimeoutMs_=re.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,r.closeOnEscape_=!0,r}return Z.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return te},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ne},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return re},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(ie),this.adapter_.removeClass(ae),this.adapter_.removeClass(se)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(se),this.adapter_.addClass(ie),this.adapter_.announce(),this.runNextAnimationFrame_((function(){e.adapter_.addClass(ae),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter_.notifyOpened(),t!==re.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(le)}),t))}),re.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(te.CLOSING),this.adapter_.removeClass(te.OPEN),this.adapter_.removeClass(te.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)}),re.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=re.MIN_AUTO_DISMISS_TIMEOUT_MS,n=re.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(e===re.INDETERMINATE||e<=n&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+""+n+"\n        (or "+re.INDETERMINATE+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(le)},t.prototype.handleActionButtonClick=function(e){this.close(ce)},t.prototype.handleActionIconClick=function(e){this.close(le)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(te.OPENING),this.adapter_.removeClass(te.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(oe.a),de=re.ARIA_LIVE_DELAY_MS,he=ne.ARIA_LIVE_LABEL_TEXT_ATTR;function pe(e,t){void 0===t&&(t=e);var n=e.getAttribute("aria-live"),r=t.textContent.trim();r&&n&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(he,r),setTimeout((function(){e.setAttribute("aria-live",n),t.removeAttribute(he),t.textContent=r}),de))}var fe=ne.SURFACE_SELECTOR,ve=ne.LABEL_SELECTOR,me=ne.ACTION_SELECTOR,ge=ne.DISMISS_SELECTOR,ye=ne.OPENING_EVENT,_e=ne.OPENED_EVENT,be=ne.CLOSING_EVENT,Ce=ne.CLOSED_EVENT,we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(){return pe}),this.announce_=e()},t.prototype.initialSyncWithDOM=function(){var e=this;this.surfaceEl_=this.root_.querySelector(fe),this.labelEl_=this.root_.querySelector(ve),this.actionEl_=this.root_.querySelector(me),this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.handleSurfaceClick_=function(t){var n=t.target;e.isActionButton_(n)?e.foundation_.handleActionButtonClick(t):e.isActionIcon_(n)&&e.foundation_.handleActionIconClick(t)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation_.close(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new ue({addClass:function(t){return e.root_.classList.add(t)},announce:function(){return e.announce_(e.labelEl_)},notifyClosed:function(t){return e.emit(Ce,t?{reason:t}:{})},notifyClosing:function(t){return e.emit(be,t?{reason:t}:{})},notifyOpened:function(){return e.emit(_e,{})},notifyOpening:function(){return e.emit(ye,{})},removeClass:function(t){return e.root_.classList.remove(t)}})},Object.defineProperty(t.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(e){this.foundation_.setTimeoutMs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(e){this.foundation_.setCloseOnEscape(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(e){this.labelEl_.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(e){this.actionEl_.textContent=e},enumerable:!0,configurable:!0}),t.prototype.registerKeyDownHandler_=function(e){this.listen("keydown",e)},t.prototype.deregisterKeyDownHandler_=function(e){this.unlisten("keydown",e)},t.prototype.registerSurfaceClickHandler_=function(e){this.surfaceEl_.addEventListener("click",e)},t.prototype.deregisterSurfaceClickHandler_=function(e){this.surfaceEl_.removeEventListener("click",e)},t.prototype.isActionButton_=function(e){return Boolean(Object(ee.a)(e,me))},t.prototype.isActionIcon_=function(e){return Boolean(Object(ee.a)(e,ge))},t}(Q.a);n(396),n(397);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var ke=function(e){babelHelpers.inherits(r,e);var t,n=Se(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,[{key:"firstUpdated",value:function(){var e=this;this._component.listen("MDCSnackbar:closing",(function(t){"action"==t.detail.reason&&e._actionHandler&&e._actionHandler()}))}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.classList.add("mdc-snackbar"),this.innerHTML='<div class="mdc-snackbar__surface">\n                 <div class="mdc-snackbar__label"\n                   role="status"\n                   aria-live="polite">\n                 </div>\n                 <div class="ct-snackbar__actions mdc-snackbar__actions">\n                   <button type="button" class="ct-snackbar__action mdc-button mdc-snackbar__action"></button>\n                 </div>\n                </div>',this._component=new we(this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"showSnackBar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.actionHandler,r=void 0===n?null:n,o=t.actionText,i=void 0===o?null:o,a=t.timeout,s=void 0===a?4e3:a;this._component.labelText=e,this._component.actionButtonText=i,this._component.timeoutMs=Math.max(Math.min(s,1e4),4e3),this._actionHandler=r,this._component.open()}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;this._component.labelText=e,this._component.actionButtonText=null,this._component.timeoutMs=Math.max(Math.min(t,1e4),4e3),this._actionHandler=null,this._component.open()}}]),r}(z.a);ke.componentName="ct-snackbar",r.a.define(ke),ke.ERROR_TIMEOUT=6e3,ke.INFO_TIMEOUT=4e3;var Ae=document.querySelector("ct-snackbar");Ae||(document.body?(document.body.appendChild(ke.createElement({})),Ae=document.querySelector("ct-snackbar")):console.error("document body not defined when setting up snackbar:",document));var Ee=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"setAttributeParent",value:function(e){this._attributeParent=e,e.parent.addAttachmentProxy({child:this,prefix:e.prefix})}},{key:"setupAttributeParent",value:function(e){var t=this.getAttribute("attribute-parent-id");if(t){var n=document.querySelector("*[attribute-controller-id='"+t+"']");n&&this.setAttributeParent({parent:n,prefix:e})}}},{key:"unprefixAttr",value:function(e){if(!this._attributeParent||!this._attributeParent.prefix)return e;var t=e.split(this._attributeParent.prefix);return t.length>1?t[1]:t[0]}},{key:"getAttr",value:function(e){var t=e;return this._attributeParent?(this._attributeParent.prefix&&(e=this._attributeParent.prefix+"-"+e),this._attributeParent.parent.hasAttribute(e)?this._attributeParent.parent.getAttribute(e):this.getAttribute(t)):this.getAttribute(e)}}]),e}(),Te=n(30);n(398);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var xe=function(e){babelHelpers.inherits(n,e);var t=Oe(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"destroy",value:function(){this._del.destroy(),this._docClickHandler&&document.removeEventListener("tap",this._docClickHandler)}},{key:"_render",value:function(){this.innerHTML='<nav class="ct-fab-menu">\n          </nav>'}},{key:"_getMenuOpenHTML",value:function(){Object(F.a)();return'<span class="ct-fab-menu-open-button" aria-label="'.concat(Object(o.d)("Open menu"),'" role="button">\n             <span class="ct-fab-hamburger ct-fab-hamburger-1"></span>\n             <span class="ct-fab-hamburger ct-fab-hamburger-2"></span>\n             <span class="ct-fab-hamburger ct-fab-hamburger-3"></span>\n            </span>')}},{key:"_navClicked",value:function(e){console.log("nav was clicked",e),this._menuOpen||this.toggleMenu()}},{key:"_itemClicked",value:function(e){var t=e.currentTarget.getAttribute("data-nav-cmd");this.fire("menuSelected",{cmd:t}),this.toggleMenu(),e.preventDefault();var n=document.querySelector(".ct-default-tooltip");n&&n.classList.add("ct-hidden")}},{key:"close",value:function(){this._menuOpen&&this.toggleMenu()}},{key:"toggleMenu",value:function(e){var t=this;e&&e.origEvent&&e.origEvent.stopPropagation&&e.origEvent.stopPropagation();var r=this.querySelector(".ct-fab-menu-open-button");if(this._menuOpen){this.classList.remove("ct-fab-menu-open"),r.classList.remove("ct-fab-menu-is-active"),Array.prototype.filter.call(this.querySelectorAll("nav .ct-fab-menu-item"),(function(e,t){return!0})).forEach((function(e,t){e.style.cssText+=";transform:translate3d(0,0,0);\n                             transition:transform ease-out 200ms;"}))}else{this._lastTime=Date.now(),this.classList.add("ct-fab-menu-open"),r.classList.add("ct-fab-menu-is-active");var o=Array.prototype.filter.call(this.querySelectorAll("nav .ct-fab-menu-item"),(function(e,t){return!e.classList.contains("ct-hidden")})),i=null;o.forEach((function(e,r){i=e;var a,s,c,l=(Math.PI-t._openingAngle)/2+t._openingAngle/o.length*r;switch(t._menuType){case n.TYPE_FLOW_RIGHT:a=t._firstOpenDistance?0==r?t._firstOpenDistance:r*t._openDistance+t._firstOpenDistance:(r+1)*t._openDistance,a+="px",s=0,c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_FLOW_LEFT:a=-1*(r+1)*t._openDistance+"px",s=0,c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_FLOW_UP:a=0,s=-1*(r+1)*(t._openDistance+e.clientHeight)+"px",c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_FLOW_DOWN:a=0,s=(r+1)*(t._openDistance+e.clientHeight)+"px",c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_UNDER:var u=1*(o.length-1)+o.length*e.clientWidth;a=u*(r/o.length)-(u/2-e.clientWidth/2)+"px",s=t._openDistance+"px",c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_GRID_ABOVE:var d=t._gridWidth*(e.clientWidth+t._openDistance)*1;a=d*(r%t._gridWidth/t._gridWidth)-(d/2-(e.clientWidth+t._openDistance)/2)+"px",s=-1*(t._openDistance+e.clientHeight)*(1+Math.floor(r/t._gridWidth))+"px",c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_GRID_BELOW:var h=t._gridWidth*(e.clientWidth+t._openDistance)*1;a=h*(r%t._gridWidth/t._gridWidth)-(h/2-(e.clientWidth+t._openDistance)/2)+"px",s=1*(t._openDistance+e.clientHeight)*(1+Math.floor(r/t._gridWidth))+"px",c="cubic-bezier(0.165, 0.840, 0.440, 1.000)";break;case n.TYPE_ROTARY:default:a=Math.round(Math.cos(l)*t._openDistance)+"px",s=Math.round(Math.sin(l)*t._openDistance)+"px",c="cubic-bezier(0.935, 0.000, 0.340, 1.330)"}var p="transition-timing-function:".concat(c,";\n                         transition-duration:").concat(t._baseTimingGap+t._timingGap*(r+1),"ms;\n                         transform:scale(").concat(t._openScale,",").concat(t._openScale,") translate3d(").concat(a,",").concat(s,",0);");e.style.cssText+=";"+p})),i&&"true"==this.getAttribute("scroll-to-last")&&setTimeout((function(){i.scrollIntoView()}),300)}this._menuOpen=!this._menuOpen,this.fire("fabMenuToggled",{fab:this,open:this._menuOpen})}},{key:"_renderMenuItem",value:function(e){var t=e.icon?'<i class="material-icons">'.concat(e.icon,"</i>"):"",n=this._useLabels?'<span class="ct-fab-menu-item-label">'.concat(e.label).concat(e.shortcut?'<span class="ct-fab-menu-shortcut"> - '.concat(e.shortcut,"</span>"):"","</span>"):"";return"<span ".concat(this._useTooltips?"data-tooltip":"",' aria-label="').concat(e.label,'" data-nav-cmd="').concat(e.name,'" class="ct-fab-menu-item ').concat(this._useLabels?"ct-fab-menu-item-with-label":""," ").concat(e.className?e.className:"",'">').concat(t," ").concat(n,"</span>")}},{key:"addMenuItems",value:function(e,t){this.setMenuItems([].concat(babelHelpers.toConsumableArray(this._menuItems),babelHelpers.toConsumableArray(e)))}},{key:"setMenuItems",value:function(e){var t=this;this._menuItems=e;var n=e.map((function(e){return t._renderMenuItem(e)})).join("");this.querySelector("nav").innerHTML=this._getMenuOpenHTML()+n}},{key:"destroy",value:function(){}},{key:"connectedCallback",value:function(){var e=this;if(!this._initialised){if(this._initialised=!0,this.initAggregator(),this._isMobile=!!document.querySelector(".ct-mobile"),this._menuOpen=!1,this._openingAngle=2*Math.PI,this._openDistance=40,this._gridWidth=3,this._firstOpenDistance=0,this._openScale=1.5,this._useTooltips=!0,this._menuType=n.TYPE_FLOW_UP,this._menuType=n.TYPE_ROTARY,this._baseTimingGap=40,this._timingGap=45,this._useLabels="true"==this.getAttribute("use-labels"),this.hasAttribute("grid-width")&&(this._gridWidth=parseInt(this.getAttribute("grid-width"))),this.hasAttribute("spacing")&&(this._openDistance=parseInt(this.getAttribute("spacing"))),this.hasAttribute("first-spacing")&&(this._firstOpenDistance=parseInt(this.getAttribute("first-spacing"))),this.hasAttribute("use-tooltips")&&(this._useTooltips="false"!=this.getAttribute("use-tooltips")),this.hasAttribute("open-scaling")&&(this._openScale=parseFloat(this.getAttribute("open-scaling"))),this.hasAttribute("type"))switch(this.getAttribute("type")){case"right":this._menuType=n.TYPE_FLOW_RIGHT;break;case"left":this._menuType=n.TYPE_FLOW_LEFT;break;case"up":this._menuType=n.TYPE_FLOW_UP;break;case"down":this._menuType=n.TYPE_FLOW_DOWN;break;case"under":this._menuType=n.TYPE_UNDER;break;case"grid-above":this._menuType=n.TYPE_GRID_ABOVE;break;case"grid-below":this._menuType=n.TYPE_GRID_BELOW;break;case"rotary":default:this._menuType=n.TYPE_ROTARY}this._render(),this._del=new c.a,this._del.delegate(this,(this._isMobile,"tap"),".ct-fab-menu-open-button",this.toggleMenu,this),this._isMobile,this._del.delegate(this,"tap",".ct-fab-menu-item",this._itemClicked,this),this.hasAttribute("doc-click-close")&&(this._docClickHandler=function(t){return Date.now()-(e._lastTime||0)<350||(e._menuOpen&&(e.contains(t.target)||e.toggleMenu()),!0)},document.addEventListener("tap",this._docClickHandler,!1))}}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}xe.TYPE_ROTARY=0,xe.TYPE_FLOW_RIGHT=1,xe.TYPE_FLOW_LEFT=2,xe.TYPE_FLOW_UP=3,xe.TYPE_FLOW_DOWN=4,xe.TYPE_UNDER=5,xe.TYPE_GRID_ABOVE=6,xe.TYPE_GRID_BELOW=7,Object(Te.a)(xe,s.a),window.customElements.define("fab-menu",xe);var Ie=function(e){babelHelpers.inherits(n,e);var t=Me(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_render",value:function(){this.hasAttribute("shadow-depth")&&this.classList.add("ct-elev--z".concat(this.getAttribute("shadow-depth"))),this.setIcon(this.getAttribute("name"))}},{key:"setIcon",value:function(e){this.innerHTML='<i class="material-icons">'.concat(e,"</i>")}},{key:"destroy",value:function(){}},{key:"connectedCallback",value:function(){this._render()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));window.customElements.define("ct-icon",Ie);var Le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;babelHelpers.classCallCheck(this,e),this._ns=t,this._ephemeral=n,this._useMem=!1,this._mem={},this._version=r,this._usingLocal=this._isLocaleStorageAvailable(),this._usingLocal||(this._useMem=!0);var o=this.getObject(e.META_NAME);o?(o.v!=r&&this.clear(),this.setObject(e.META_NAME,{ns:t,eph:n,v:r})):this.setObject(e.META_NAME,{ns:t,eph:n,v:r})}return babelHelpers.createClass(e,[{key:"_isLocaleStorageAvailable",value:function(){try{return localStorage.setItem("a","a"),localStorage.removeItem("a"),!0}catch(e){try{return localStorage.clear(),localStorage.setItem("a","a"),localStorage.removeItem("a"),!0}catch(e){return!1}}}},{key:"clear",value:function(t){var n=this.getObject(e.META_NAME);if(this._usingLocal)for(var r=localStorage.length,o=0;o<r;o++){var i=localStorage.key(o);if(null!==i){var a=i.split(":");if(2==a.length)if(a[0]==this._ns){a[1];localStorage.removeItem(i)}}}this._mem={},t||this.setObject(e.META_NAME,n)}},{key:"_removeItem",value:function(e){var t=this._ns+":"+e;this._usingLocal&&localStorage.removeItem(t),this._useMem&&delete this._mem[t]}},{key:"_setItem",value:function(t,n){var r=this._ns+":"+t;if(this._usingLocal)try{localStorage.setItem(r,n)}catch(t){e.clearEphemeral();try{localStorage.setItem(r,n)}catch(t){this.clear();try{localStorage.setItem(r,n)}catch(t){localStorage.clear();try{this.setObject(e.META_NAME,{ns:this._namespace,eph:this._ephemeral,v:this._version}),localStorage.setItem(r,n)}catch(e){this._useMem=!0,this._usingLocal=!1,this._mem[r]=n}}}}else this._mem[r]=n}},{key:"_getItem",value:function(e){var t=this._ns+":"+e,n=null;return this._usingLocal&&(n=localStorage.getItem(t)),n||(n=this._mem[t]),n}},{key:"removeObject",value:function(e){this._removeItem(e)}},{key:"setObject",value:function(e,t){this._setItem(e,JSON.stringify(t))}},{key:"getObject",value:function(e){var t=this._getItem(e);return t&&(t=JSON.parse(t)),t}}]),e}();Le.META_NAME="S_META",Le.clearEphemeral=function(){for(var e={},t=localStorage.length,n=0;n<t;n++){var r=localStorage.key(n),o=r.split(":");if(2==o.length){var i=o[0],a=e[i];a||(a=localStorage.getItem(i+":"+Le.META_NAME),e[i]=a),a&&a.eph&&localStorage.removeItem(r)}}this._mem={}};var Ne=new a.a("widnow-resize-persistence"),Re=new(function(){function e(){babelHelpers.classCallCheck(this,e),this._sizeStorage=new Le("win-size"),window._windowResizeName?(Ne.log({windowResizeName:window._windowResizeName},"RESIZE binding"),this._boundResize=this._resize.bind(this),window.addEventListener("resize",function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=r||this;clearTimeout(n),n=setTimeout((function(){return e.apply(s,i)}),t)}}(this._boundResize,350))):Ne.log("NO RESIZE BINDING")}return babelHelpers.createClass(e,[{key:"_resize",value:function(e){var t=window.outerWidth||e.target.outerWidth,n=window.outerHeight||e.target.outerHeight;Ne.log({resizeName:window._windowResizeName},"RESIZE with resize name"),window._windowResizeName&&this._sizeStorage.setObject(window._windowResizeName,{width:t,height:n})}},{key:"getSize",value:function(e){var t=this._sizeStorage.getObject(e);return Ne.log({winName:e,size:t},"RESIZE attempting to get size for name"),t}},{key:"destroy",value:function(){this._boundResize&&window.removeEventListener("resize",this._boundAutoSize)}}]),e}());n(191),n(132);function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Pe=function(e){babelHelpers.inherits(n,e);var t=De(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"destroy",value:function(){this._del.destroy()}},{key:"_initEvents",value:function(){this._del||(this._del=new c.a,this._del.delegate(this,"tap",".ct-annotate-nag-cell",this._glyphClicked,this),this._del.delegate(this,"tap",".ct-annotate-reset-nag-button",this._resetGlyphs,this))}},{key:"render",value:function(){for(var e='<div><table class="ct-annotate-nag-table"><tr><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>',t=0,n=0;n<256;n++){t%8==0&&(e+="</tr><tr>");var r=w.getNag(n);if(""!=r.glyph){var i=Object(F.a)();this.nagnodeidmap[n]=i,this.nagidmap[i]=n;var a=r.description;r.blackVersion&&r.colourNeutralDescription&&(a=r.colourNeutralDescription),r.whiteVersion||(e+='<td id="'+i+'" data-tooltip class="ct-annotate-nag-cell" role="button" aria-label="'+a+'">'+r.glyph+"</td>",t++)}}e+='</tr></table><ct-button data-tooltip aria-label="'+Object(o.d)("Clear all Annotation Symbols")+'" class="ct-annotate-reset-nag-button" raised>'+Object(o.d)("Reset")+"</ct-button></div>",this.innerHTML=e}},{key:"_glyphClicked",value:function(e){e.currentTarget.classList.toggle("ct-annotate-nag-selected"),this.fire("glyphsChanged",{glyphs:this.getGlyphs()})}},{key:"setGlyphs",value:function(e){if(this._resetGlyphs(!1),this._nonGlyphNags=[],e)for(var t=0;t<e.length;t++){var n=this.nagnodeidmap[e[t]];n?this.querySelector("#"+n).classList.add("ct-annotate-nag-selected"):this._nonGlyphNags.push(e[t])}}},{key:"getGlyphs",value:function(){var e=this,t=Array.prototype.map.call(this.querySelectorAll(".ct-annotate-nag-selected"),(function(t){return e.nagidmap[t.getAttribute("id")]}));return[].concat(babelHelpers.toConsumableArray(t),babelHelpers.toConsumableArray(this._nonGlyphNags))}},{key:"_resetGlyphs",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Array.prototype.forEach.call(this.querySelectorAll(".ct-annotate-nag-selected"),(function(e){return e.classList.remove("ct-annotate-nag-selected")})),e&&this.fire("glyphsChanged",{glyphs:this.getGlyphs()})}},{key:"connectedCallback",value:function(){this.initAggregator(),this._initEvents(),this.nagidmap={},this.nagnodeidmap={},this._nonGlyphNags=[],this.render()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));Object(Te.a)(Pe,s.a),window.customElements.define("move-glyph-entry",Pe);var Fe=n(33),He=n(97),Be=n(52);function je(e,t){return e.reduce((function(e,n){var r=t(n);return Array.isArray(e[r])?e[r].push(n):e[r]=[n],e}),{})}n(433);var qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.ignoreFormFields,o=void 0===r||r;babelHelpers.classCallCheck(this,e),this._listeners={},this._pending={},this._boundDownListener=this._keyDown.bind(this),this._boundUpListener=this._keyUp.bind(this),this._boundPressListener=this._keyPress.bind(this),this._ignoreFormFields=o,"string"==typeof t&&(t=document.querySelector(t)),t.addEventListener("keydown",this._boundDownListener)}return babelHelpers.createClass(e,[{key:"destroy",value:function(){document.removeEventListener(this._boundDownListener)}},{key:"enableHelpKey",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?";this._helpKeyAdded||(this.on(t,(function(){e._helpKeyDisabled||e.toggleHelp()}),this,{text:Object(o.d)("Toggle list of keyboard shortcuts"),group:Object(o.d)("Help")}),this._helpKeyAdded=!0)}},{key:"setHelpKeyDisabled",value:function(){this._helpKeyDisabled=!0}},{key:"hideHelp",value:function(){}},{key:"toggleHelp",value:function(){var t=this,n=document.querySelector(".ct-help-shortcuts-panel");if(!n||n.classList.contains("ct-hidden")){var r=Object(o.d)("Other"),i=je([].concat.apply([],Object.keys(this._listeners).map((function(e){return t._listeners[e]}))).filter((function(e){return e.desc})),(function(e){return e.desc.group||r}));i=(i=Object.keys(i).map((function(e){return{groupName:e,group:je(i[e],(function(e){return e.desc.text}))}}))).reduce((function(e,t){return e[t.groupName]=t.group,e}),{});var a=Object.keys(i).map((function(e){return c({groupName:e,group:i[e]})})).join(" ");n||((n=document.createElement("div")).classList.add("ct-help-shortcuts-panel"),document.body.appendChild(n)),n.innerHTML=a,n.classList.remove("ct-hidden")}else n.classList.add("ct-hidden");function s(t){var n="";function r(t){n&&(n+='<span class="ct-key-combo-seperator">+</span>',!0),n+="<kbd>"+e.convertToKeyDisplay(t)+"</kbd>"}return Object.keys(t.mods).forEach(r),t.keys.forEach(r),n}function c(e){return"<h3>"+e.groupName+"</h3>"+Object.keys(e.group).map((function(t){return n=e.group[t],r="",n.forEach((function(e){var t=e.seq.map(s).join(" ");r?r+=", ":r='<div class="ct-help-shortcut">',r+=t})),r+=' : <span class="ct-help-shortcut-desc">'+n[0].desc.text+"</span></div>";var n,r})).join(" ")}}},{key:"_keyPress",value:function(e){}},{key:"_keyUp",value:function(e){}},{key:"_keyDown",value:function(e){this._processKey(e),e.ANYKEY=!0,this._processKey(e)}},{key:"_processKey",value:function(t){var n=this;if(this._ignoreFormFields&&/input|textarea|select/i.test(t.target.tagName)){if(!/input/i.test(t.target.tagName))return;if(/text|number|password|email/i.test(t.target.type))return}var r="true"==t.target.getAttribute("contenteditable");if(!e.ignoreAllContentEditable&&!e.ignoreContentEditable||!r){var o=t.ANYKEY?"ANYKEY":this._eventToKey(t),i=Date.now(),a=[];t.shiftKey&&(e.isShifted(o)||a.push("Shift")),t.ctrlKey&&a.push("Control"),t.metaKey&&a.push("Meta"),t.altKey&&a.push("Alt"),a=a.join("+");var s=o;a&&s!=a&&(s=a+"+"+s);this._pending[s];var c=[];Object.keys(this._pending).forEach((function(r){n._pending[r].forEach((function(a){r!=s?(e.mods[o]&&!e.mods[a.seq[a.upto].lookup]||(a.seq.length>1&&s==a.seq[0].lookup?a.upto=1:"ANYKEY"!=o&&(a.upto=0)),c.push(a)):0!=a.upto&&a.t+e.INTER_KEY_GAP<i?(a.upto=0,c.push(a)):a.upto==a.seq.length-1?(a.e=t,n._notify(a),a.upto=0,c.push(a)):(a.upto=a.upto+1,c.push(a))}))})),this._pending={},c.forEach((function(e){n._addPending(e)}))}}},{key:"_notify",value:function(e){e.fn.bind(e.ctx)(e)}},{key:"_addPending",value:function(e){var t=e.seq[e.upto].lookup;this._pending[t]||(this._pending[t]=[]);var n=this._pending[t];e.t=Date.now(),n.push(e)}},{key:"_eventToKey",value:function(t){return void 0!==t.key?e.normaliseKey(t.key):e.eventToKey(t)}},{key:"detatch",value:function(e,t,n){var r=this._listeners[e];r&&(this._listeners[e]=r.filter((function(e){return!(e.fn==t&&e.ctx)})))}},{key:"on",value:function(e,t,n,r){var o=this;this._listeners[e]||(this._listeners[e]=[]);var i=this._parseDef(e);return i.fn=t,i.ctx=n,i.desc=r,i.detatch=function(){return o.detatch(e,t,n)},this._addPending(i),this._listeners[e].push(i),i}},{key:"_parseCombo",value:function(t){var n;n="+"!=(t=t.replace(/\+\+/g,"ESCPLUS"))?t.split("+"):[t];var r={},o=[];n.forEach((function(t){var n=e.nameToKey(t);e.mods[n]?r[n]=!0:o.push(n)}));var i=[];r.Shift&&i.push("Shift"),r.Control&&i.push("Control"),r.Meta&&i.push("Meta"),r.Alt&&i.push("Alt"),i=i.join("+");var a=o.join("+");return i&&(a=a?i+"+"+a:i),{keys:o,mods:r,lookup:a}}},{key:"_parseDef",value:function(e){var t=this;return{seq:(e=e.replace(/\s+/g," ")).split(" ").map((function(e){return t._parseCombo(e)})),upto:0,keyDef:e}}}]),e}();qe.INTER_KEY_GAP=1500,qe.namesLookup={ESCPLUS:"+",Space:" "},qe.nameToKey=function(e){var t=qe.namesLookup[e];return t||e},qe.normaliseKey=function(e){var t=qe.normalisedLookup[e];return t||e},qe.normalisedLookup={MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackprevious",Nonconvert:"NonConvert",Spacebar:" ",Esc:"Escape",Del:"Delete",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Win:"OS",Apps:"ContextMenu",Menu:"ContextMenu",Multiply:"*",Subtract:"-",Decimal:".",Divide:"/",Add:"+",Scroll:"ScrollLock",Zoom:"ZoomToggle"},qe.keyCodeLookup={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",47:"Help",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],58:"Alt",59:[";",":"],60:"Shift",61:["=","+"],62:"Control",63:"Fn",64:"F17",91:"OS",92:"OS",93:"ContextMenu",95:"Standby",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",108:",",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",166:"BrowserBack",167:"BrowserForward",168:"BrowserRefresh",169:"BrowserStop",170:"BrowserSearch",171:"BrowserFavorites",172:"BrowserHome",173:["-","_"],174:"VolumeDown",175:"VolumeUp",176:"MediaTrackNext",177:"MediaTrackPrevious",178:"MediaStop",179:"MediaPlayPause",180:"LaunchMail",181:"MediaSelect",182:"LaunchApplication1",183:"LaunchApplication2",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",250:"Play",251:"ZoomToggle",254:"Clear"},qe.mods={Shift:!0,Ctrl:!0,Meta:!0,Alt:!0},qe.eventToKey=function(e){var t=e.keyCode;if(t>=65&&t<=90){var n=String.fromCharCode(t);return e.shiftKey?n:n.toLowerCase()}var r=qe.keyCodeLookup[t+""];return r?Array.isArray(r)?r[e.shiftKey?1:0]:r:"Unidentified"},qe.shiftedLookup={"~":1,"!":1,"@":1,"#":1,$:1,"%":1,"^":1,"&":1,"*":1,"(":1,")":1,_:1,"+":1,"{":1,"}":1,":":1,'"':1,"<":1,">":1,"?":1},qe.isShifted=function(e){return"1"==e.length&&(e.toLowerCase()!=e||qe.shiftedLookup[e])},qe.convertLookup={ArrowLeft:"&larr;",ArrowRight:"&rarr;",ArrowDown:"&darr;",ArrowUp:"&uarr;"," ":Object(o.d)("Space"),Shift:"&#8679; "+Object(o.d)("Shift"),Enter:"&crarr; "+Object(o.d)("Enter"),Return:"&crarr; "+Object(o.d)("Return"),Escape:Object(o.d)("Esc"),Control:Object(o.d)("Ctrl")},qe.convertToKeyDisplay=function(e){if("OS"==e){var t=navigator.platform.indexOf("Mac")>=0,n=navigator.platform.indexOf("Win")>=0;if(t)return"&#8984; "+Object(o.d)("Cmd");if(n)return"&#8862; "+Object(o.d)("Win")}return qe.convertLookup[e]||e};var Ve=new qe;Ve.enableHelpKey();var ze=n(99);function Ge(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];"string"==typeof o?e.setAttribute(r,o):null!=o&&(e[r]=o)}t++}for(;t<arguments.length;t++)We(e,arguments[t]);return e}function We(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)We(e,t[n])}}var Ue=n(13),Ke=n(2),$e=n(3);function Ye(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Xe(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function Je(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ze(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Qe(e,t){var n,r=e.selection,o=r instanceof $e.NodeSelection;if(o){if(r.node.isTextblock||!Object(Ue.e)(e.doc,r.from))return!1;n=r.from}else if(null==(n=Object(Ue.i)(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection($e.NodeSelection.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}function et(e,t){var n,r=e.selection;if(r instanceof $e.NodeSelection){if(r.node.isTextblock||!Object(Ue.e)(e.doc,r.to))return!1;n=r.to}else if(null==(n=Object(Ue.i)(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0}function tt(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&Object(Ue.j)(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}function nt(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function rt(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=nt(i.contentMatchAt(a));if(!i.canReplaceWith(a,a,s))return!1;if(t){var c=r.after(),l=e.tr.replaceWith(c,c,s.createAndFill());l.setSelection($e.Selection.near(l.doc.resolve(c),1)),t(l.scrollIntoView())}return!0}function ot(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof $e.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(Ue.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof $e.TextSelection&&a.deleteSelection();var s=0==r.depth?null:nt(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&s?[{type:s}]:null,l=Object(Ue.f)(a.doc,a.mapping.map(r.pos),1,c);c||l||!Object(Ue.f)(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])||(c=[{type:s}],l=!0),l&&(a.split(a.mapping.map(r.pos),1,c),i||r.parentOffset||r.parent.type==s||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),Ke.Fragment.from(s.create(),r.parent))||a.setNodeMarkup(a.mapping.map(r.before()),s)),t(a.scrollIntoView())}return!0}function it(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection($e.NodeSelection.create(e.doc,n))),!0)}function at(e,t,n){var r,o,i=t.nodeBefore,a=t.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Object(Ue.e)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var s=t.pos+a.nodeSize,c=Ke.Fragment.empty,l=r.length-1;l>=0;l--)c=Ke.Fragment.from(r[l].create(null,c));c=Ke.Fragment.from(i.copy(c));var u=e.tr.step(new Ue.b(t.pos-1,s,t.pos,s,new Ke.Slice(c,1,0),r.length,!0)),d=s+2*r.length;Object(Ue.e)(u.doc,d)&&u.join(d),n(u.scrollIntoView())}return!0}var h=$e.Selection.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),f=p&&Object(Ue.j)(p);return null!=f&&f>=t.depth&&(n&&n(e.tr.lift(p,f).scrollIntoView()),!0)}function st(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=s&&Object(Ue.h)(s,e,t);return!!c&&(r&&r(n.tr.wrap(s,c).scrollIntoView()),!0)}}function ct(e,t){return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,e)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,e,t).scrollIntoView()),!0)}}function lt(e,t){return function(n,r){var o=n.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,a=o.$to,s=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,s,e))return!1;if(r)if(a)e.isInSet(n.storedMarks||a.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=n.tr,u=0;!c&&u<s.length;u++){var d=s[u],h=d.$from,p=d.$to;c=n.doc.rangeHasMark(h.pos,p.pos,e)}for(var f=0;f<s.length;f++){var v=s[f],m=v.$from,g=v.$to;c?l.removeMark(m.pos,g.pos,e):l.addMark(m.pos,g.pos,e.create(t))}r(l.scrollIntoView())}return!0}}function ut(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var dt=ut(Ye,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var o=Je(r);if(!o){var i=r.blockRange(),a=i&&Object(Ue.j)(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(!s.type.spec.isolating&&at(e,o,t))return!0;if(0==r.parent.content.size&&(Xe(s,"end")||$e.NodeSelection.isSelectable(s))){if(t){var c=e.tr.deleteRange(r.before(),r.after());c.setSelection(Xe(s,"end")?$e.Selection.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):$e.NodeSelection.create(c.doc,o.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Je(o)}var a=i&&i.nodeBefore;return!(!a||!$e.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection($e.NodeSelection.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)})),ht=ut(Ye,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=Ze(r);if(!o)return!1;var i=o.nodeAfter;if(at(e,o,t))return!0;if(0==r.parent.content.size&&(Xe(i,"start")||$e.NodeSelection.isSelectable(i))){if(t){var a=e.tr.deleteRange(r.before(),r.after());a.setSelection(Xe(i,"start")?$e.Selection.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):$e.NodeSelection.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Ze(o)}var a=i&&i.nodeAfter;return!(!a||!$e.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection($e.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)})),pt={Enter:ut((function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=nt(r.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection($e.TextSelection.create(s.doc,a+1)),t(s.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Object(Ue.f)(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Object(Ue.j)(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}),ot),"Mod-Enter":rt,Backspace:dt,"Mod-Backspace":dt,Delete:ht,"Mod-Delete":ht,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new $e.AllSelection(e.doc))),!0}},ft={"Ctrl-h":pt.Backspace,"Alt-Backspace":pt["Mod-Backspace"],"Ctrl-d":pt.Delete,"Ctrl-Alt-Backspace":pt["Mod-Delete"],"Alt-Delete":pt["Mod-Delete"],"Alt-d":pt["Mod-Delete"]};for(var vt in pt)ft[vt]=pt[vt];var mt=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?ft:pt,gt=function(){};gt.prototype.append=function(e){return e.length?(e=gt.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},gt.prototype.prepend=function(e){return e.length?gt.from(e).append(this):this},gt.prototype.appendInner=function(e){return new _t(this,e)},gt.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?gt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},gt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},gt.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},gt.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},gt.from=function(e){return e instanceof gt?e:e&&e.length?new yt(e):gt.empty};var yt=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(gt);gt.empty=new yt([]);var _t=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(gt),bt=gt,Ct=function(e,t){this.items=e,this.eventCount=t};Ct.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var a,s,c=e.tr,l=[],u=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void u.push(e);if(r){u.push(new wt(e.map));var d,h=e.step.map(r.slice(o));h&&c.maybeStep(h).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],l.push(new wt(d,null,null,l.length+u.length))),o--,d&&r.appendMap(d,o)}else c.maybeStep(e.step);return e.selection?(a=r?e.selection.map(r.slice(o)):e.selection,s=new Ct(n.items.slice(0,i).append(u.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:c,selection:a}},Ct.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null,c=0;c<e.steps.length;c++){var l,u=e.steps[c].invert(e.docs[c]),d=new wt(e.mapping.maps[c],u,t);(l=s&&s.merge(d))&&(d=l,c?o.pop():a=a.slice(0,a.length-1)),o.push(d),t&&(i++,t=null),r||(s=d)}var h,p,f,v=i-n.depth;return v>kt&&(p=v,(h=a).forEach((function(e,t){if(e.selection&&0==p--)return f=t,!1})),a=h.slice(f),i-=v),new Ct(a.append(o),i)},Ct.prototype.remapping=function(e,t){var n=new Ue.a;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)}),e,t),n},Ct.prototype.addMaps=function(e){return 0==this.eventCount?this:new Ct(this.items.append(e.map((function(e){return new wt(e)}))),this.eventCount)},Ct.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach((function(e){e.selection&&a--}),r);var s=t;this.items.forEach((function(t){var r=o.getMirror(--s);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(t.step){var l=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(s+1,r));u&&a++,n.push(new wt(c,l,u))}else n.push(new wt(c))}}),r);for(var c=[],l=t;l<i;l++)c.push(new wt(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),d=new Ct(u,a);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},Ct.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},Ct.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((function(i,a){if(a>=e)r.push(i),i.selection&&o++;else if(i.step){var s=i.step.map(t.slice(n)),c=s&&s.getMap();if(n--,c&&t.appendMap(c,n),s){var l=i.selection&&i.selection.map(t.slice(n));l&&o++;var u,d=new wt(c.invert(),s,l),h=r.length-1;(u=r.length&&r[h].merge(d))?r[h]=u:r.push(d)}}else i.map&&n--}),this.items.length,0),new Ct(bt.from(r.reverse()),o)},Ct.empty=new Ct(bt.empty,0);var wt=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};wt.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new wt(t.getMap().invert(),t,this.selection)}};var St=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},kt=20;function At(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function Et(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function Tt(e,t,n,r){var o=Mt(t),i=It.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,o);if(a){var s=a.selection.resolve(a.transform.doc),c=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,o),l=new St(r?c:a.remaining,r?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(It,{redo:r,historyState:l}).scrollIntoView())}}var Ot=!1,xt=null;function Mt(e){var t=e.plugins;if(xt!=t){Ot=!1,xt=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ot=!0;break}}return Ot}var It=new $e.PluginKey("history"),Lt=new $e.PluginKey("closeHistory");function Nt(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new $e.Plugin({key:It,state:{init:function(){return new St(Ct.empty,Ct.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(It);if(i)return i.historyState;n.getMeta(Lt)&&(e=new St(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(It))return a.getMeta(It).redo?new St(e.done.addTransform(n,null,r,Mt(t)),e.undone,At(n.mapping.maps[n.steps.length-1]),e.prevTime):new St(e.done,e.undone.addTransform(n,null,r,Mt(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new St(e.done.rebased(n,o),e.undone.rebased(n,o),Et(e.prevRanges,n.mapping),e.prevTime):new St(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Et(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),c=a?Et(e.prevRanges,n.mapping):At(n.mapping.maps[n.steps.length-1]);return new St(e.done.addTransform(n,s?t.selection.getBookmark():null,r,Mt(t)),Ct.empty,c,n.time)}(n,r,t,e)}},config:e})}function Rt(e,t){var n=It.getState(e);return!(!n||0==n.done.eventCount)&&(t&&Tt(n,e,t,!1),!0)}function Dt(e,t){var n=It.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&Tt(n,e,t,!0),!0)}var Pt="http://www.w3.org/2000/svg",Ft="ProseMirror-icon";function Ht(e){var t=document.createElement("div");if(t.className=Ft,e.path){var n="pm-icon-"+function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.path).toString(16);document.getElementById(n)||function(e,t){var n=document.getElementById(Ft+"-collection");n||((n=document.createElementNS(Pt,"svg")).id=Ft+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(Pt,"symbol");r.id=e,r.setAttribute("viewBox","0 0 "+t.width+" "+t.height),r.appendChild(document.createElementNS(Pt,"path")).setAttribute("d",t.path),n.appendChild(r)}(n,e);var r=t.appendChild(document.createElementNS(Pt,"svg"));r.style.width=e.width/e.height+"em",r.appendChild(document.createElementNS(Pt,"use")).setAttributeNS("http://www.w3.org/1999/xlink","href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else e.dom?t.appendChild(e.dom.cloneNode(!0)):(t.appendChild(document.createElement("span")).textContent=e.text||"",e.css&&(t.firstChild.style.cssText=e.css));return t}var Bt="ProseMirror-menu",jt=function(e){this.spec=e};function qt(e,t){return e._props.translate?e._props.translate(t):t}jt.prototype.render=function(e){var t=this.spec,n=t.render?t.render(e):t.icon?Ht(t.icon):t.label?Ge("div",null,qt(e,t.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(t.title){var r="function"==typeof t.title?t.title(e.state):t.title;n.setAttribute("title",qt(e,r))}return t.class&&n.classList.add(t.class),t.css&&(n.style.cssText+=t.css),n.addEventListener("mousedown",(function(r){r.preventDefault(),n.classList.contains(Bt+"-disabled")||t.run(e.state,e.dispatch,e,r)})),{dom:n,update:function(e){if(t.select){var r=t.select(e);if(n.style.display=r?"":"none",!r)return!1}var o=!0;if(t.enable&&(o=t.enable(e)||!1,rn(n,Bt+"-disabled",!o)),t.active){var i=o&&t.active(e)||!1;rn(n,Bt+"-active",i)}return!0}}};var Vt={time:0,node:null};function zt(e){Vt.time=Date.now(),Vt.node=e.target}function Gt(e){return Date.now()-100<Vt.time&&Vt.node&&e.contains(Vt.node)}var Wt=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};function Ut(e,t){for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o].render(t),a=i.dom,s=i.update;n.push(Ge("div",{class:Bt+"-dropdown-item"},a)),r.push(s)}return{dom:n,update:Kt(r,n)}}function Kt(e,t){return function(n){for(var r=!1,o=0;o<e.length;o++){var i=e[o](n);t[o].style.display=i?"":"none",i&&(r=!0)}return r}}Wt.prototype.render=function(e){var t=this,n=Ut(this.content,e),r=Ge("div",{class:Bt+"-dropdown "+(this.options.class||""),style:this.options.css},qt(e,this.options.label));this.options.title&&r.setAttribute("title",qt(e,this.options.title));var o=Ge("div",{class:Bt+"-dropdown-wrap"},r),i=null,a=null,s=function(){i&&i.close()&&(i=null,window.removeEventListener("mousedown",a))};return r.addEventListener("mousedown",(function(e){e.preventDefault(),zt(e),i?s():(i=t.expand(o,n.dom),window.addEventListener("mousedown",a=function(){Gt(o)||s()}))})),{dom:o,update:function(e){var t=n.update(e);return o.style.display=t?"":"none",t}}},Wt.prototype.expand=function(e,t){var n=Ge("div",{class:Bt+"-dropdown-menu "+(this.options.class||"")},t),r=!1;return e.appendChild(n),{close:function(){if(!r)return r=!0,e.removeChild(n),!0},node:n}};var $t=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};$t.prototype.render=function(e){var t=Ut(this.content,e),n=Ge("div",{class:Bt+"-submenu-label"},qt(e,this.options.label)),r=Ge("div",{class:Bt+"-submenu-wrap"},n,Ge("div",{class:Bt+"-submenu"},t.dom)),o=null;return n.addEventListener("mousedown",(function(e){e.preventDefault(),zt(e),rn(r,Bt+"-submenu-wrap-active"),o||window.addEventListener("mousedown",o=function(){Gt(r)||(r.classList.remove(Bt+"-submenu-wrap-active"),window.removeEventListener("mousedown",o),o=null)})})),{dom:r,update:function(e){var n=t.update(e);return r.style.display=n?"":"none",n}}};var Yt={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},Xt=new jt({title:"Join with above block",run:Qe,select:function(e){return Qe(e)},icon:Yt.join}),Jt=new jt({title:"Lift out of enclosing block",run:tt,select:function(e){return tt(e)},icon:Yt.lift}),Zt=new jt({title:"Select parent node",run:it,select:function(e){return it(e)},icon:Yt.selectParentNode}),Qt=new jt({title:"Undo last change",run:Rt,enable:function(e){return Rt(e)},icon:Yt.undo}),en=new jt({title:"Redo last undone change",run:Dt,enable:function(e){return Dt(e)},icon:Yt.redo});function tn(e,t){var n={run:function(n,r){return st(e,t.attrs)(n,r)},select:function(n){return st(e,t.attrs instanceof Function?null:t.attrs)(n)}};for(var r in t)n[r]=t[r];return new jt(n)}function nn(e,t){var n=ct(e,t.attrs),r={run:n,enable:function(e){return n(e)},active:function(n){var r=n.selection,o=r.$from,i=r.to,a=r.node;return a?a.hasMarkup(e,t.attrs):i<=o.end()&&o.parent.hasMarkup(e,t.attrs)}};for(var o in t)r[o]=t[o];return new jt(r)}function rn(e,t,n){n?e.classList.add(t):e.classList.remove(t)}var on="ProseMirror-menubar";function an(e){return new $e.Plugin({view:function(t){return new sn(t,e)}})}var sn=function(e,t){var n=this;this.editorView=e,this.options=t,this.wrapper=Ge("div",{class:on+"-wrapper"}),this.menu=this.wrapper.appendChild(Ge("div",{class:on})),this.menu.className=on,this.spacer=null,e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var r=function(e,t){for(var n=document.createDocumentFragment(),r=[],o=[],i=0;i<t.length;i++){for(var a=t[i],s=[],c=[],l=0;l<a.length;l++){var u=a[l].render(e),d=u.dom,h=u.update,p=Ge("span",{class:Bt+"item"},d);n.appendChild(p),c.push(p),s.push(h)}s.length&&(r.push(Kt(s,c)),i<t.length-1&&o.push(n.appendChild(Ge("span",{class:Bt+"separator"}))))}return{dom:n,update:function(e){for(var t=!1,n=!1,i=0;i<r.length;i++){var a=r[i](e);i&&(o[i-1].style.display=n&&a?"":"none"),n=a,a&&(t=!0)}return t}}}(this.editorView,this.options.content),o=r.dom,i=r.update;if(this.contentUpdate=i,this.menu.appendChild(o),this.update(),t.floating&&!function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return!/Edge\/\d/.test(e)&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e)}()){this.updateFloat();var a=function(e){for(var t=[window],n=e.parentNode;n;n=n.parentNode)t.push(n);return t}(this.wrapper);this.scrollFunc=function(e){var t=n.editorView.root;(t.body||t).contains(n.wrapper)?n.updateFloat(e.target.getBoundingClientRect&&e.target):a.forEach((function(e){return e.removeEventListener("scroll",n.scrollFunc)}))},a.forEach((function(e){return e.addEventListener("scroll",n.scrollFunc)}))}};sn.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},sn.prototype.updateScrollCursor=function(){var e=this.editorView.root.getSelection();if(e.focusNode){var t=e.getRangeAt(0).getClientRects(),n=t[function(e){if(e.anchorNode==e.focusNode)return e.anchorOffset>e.focusOffset;return e.anchorNode.compareDocumentPosition(e.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(e)?0:t.length-1];if(n){var r=this.menu.getBoundingClientRect();if(n.top<r.bottom&&n.bottom>r.top){var o=function(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}(this.wrapper);o&&(o.scrollTop-=r.bottom-n.top)}}}},sn.prototype.updateFloat=function(e){var t=this.wrapper,n=t.getBoundingClientRect(),r=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(n.top>=r||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var o=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=n.left+o+"px",this.menu.style.display=n.top>window.innerHeight?"none":"",e&&(this.menu.style.top=r+"px")}else if(n.top<r&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;var i=this.menu.getBoundingClientRect();this.menu.style.left=i.left+"px",this.menu.style.width=i.width+"px",e&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=Ge("div",{class:on+"-spacer",style:"height: "+i.height+"px"}),t.insertBefore(this.spacer,this.menu)}},sn.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)};function cn(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;var u=n.doc.resolve(s.start-2);l=new Ke.NodeRange(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new Ke.NodeRange(i,n.doc.resolve(a.end(s.depth)),s.depth)),c=!0}var d=Object(Ue.h)(l,e,t,s);return!!d&&(r&&r(function(e,t,n,r,o){for(var i=Ke.Fragment.empty,a=n.length-1;a>=0;a--)i=Ke.Fragment.from(n[a].type.create(n[a].attrs,i));e.step(new Ue.b(t.start-(r?2:0),t.end,t.start,t.end,new Ke.Slice(i,0,0),n.length,!0));for(var s=0,c=0;c<n.length;c++)n[c].type==o&&(s=c+1);for(var l=n.length-s,u=t.start+n.length-(r?2:0),d=t.parent,h=t.startIndex,p=t.endIndex,f=!0;h<p;h++,f=!1)!f&&Object(Ue.f)(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}(n.tr,s,d,c,e).scrollIntoView()),!0)}}function ln(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=r.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(i))return!1;var s=o.node(-1);if(s.type!=e)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var c=Ke.Fragment.empty,l=o.index(-1)>0,u=o.depth-(l?1:2);u>=o.depth-3;u--)c=Ke.Fragment.from(o.node(u).copy(c));c=c.append(Ke.Fragment.from(e.createAndFill()));var d=t.tr.replace(o.before(l?null:-1),o.after(-3),new Ke.Slice(c,l?3:2,2));d.setSelection(t.selection.constructor.near(d.doc.resolve(o.pos+(l?3:2)))),n(d.scrollIntoView())}return!0}var h=i.pos==o.end()?s.contentMatchAt(0).defaultType:null,p=t.tr.delete(o.pos,i.pos),f=h&&[null,{type:h}];return!!Object(Ue.f)(p.doc,o.pos,2,f)&&(n&&n(p.split(o.pos,2,f).scrollIntoView()),!0)}}function un(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));return!!a&&(!n||(o.node(a.depth-1).type==e?function(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new Ue.b(i-1,a,i,a,new Ke.Slice(Ke.Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ke.NodeRange(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));return t(o.lift(r,Object(Ue.j)(r)).scrollIntoView()),!0}(t,n,e,a):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var c=r.doc.resolve(n.start),l=c.nodeAfter,u=0==n.startIndex,d=n.endIndex==o.childCount,h=c.node(-1),p=c.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?Ke.Fragment.empty:Ke.Fragment.from(o))))return!1;var f=c.pos,v=f+l.nodeSize;return r.step(new Ue.b(f-(u?1:0),v+(d?1:0),f+1,v-1,new Ke.Slice((u?Ke.Fragment.empty:Ke.Fragment.from(o.copy(Ke.Fragment.empty))).append(d?Ke.Fragment.empty:Ke.Fragment.from(o.copy(Ke.Fragment.empty))),u?0:1,d?0:1),u?0:1)),t(r.scrollIntoView()),!0}(t,n,a)))}}function dn(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var c=a.parent,l=c.child(s-1);if(l.type!=e)return!1;if(n){var u=l.lastChild&&l.lastChild.type==c.type,d=Ke.Fragment.from(u?e.create():null),h=new Ke.Slice(Ke.Fragment.from(e.create(null,Ke.Fragment.from(c.type.create(null,d)))),u?3:1,0),p=a.start,f=a.end;n(t.tr.step(new Ue.b(p-(u?3:1),f,p,f,h,1,!0)).scrollIntoView())}return!0}}var hn=n(137),pn=n(41);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}function vn(e){var t=document.body.appendChild(document.createElement("div"));t.className="ProseMirror-prompt";var n=function(e){t.contains(e.target)||r()};setTimeout((function(){return window.addEventListener("mousedown",n)}),50);var r=function(){window.removeEventListener("mousedown",n),t.parentNode&&t.parentNode.removeChild(t)},o=[];for(var i in e.fields)o.push(e.fields[i].render());var a=document.createElement("button");a.type="submit",a.className="ProseMirror-prompt-submit",a.textContent="OK";var s=document.createElement("button");s.type="button",s.className="ProseMirror-prompt-cancel",s.textContent="Cancel",s.addEventListener("click",r);var c=t.appendChild(document.createElement("form"));e.title&&(c.appendChild(document.createElement("h5")).textContent=e.title),o.forEach((function(e){c.appendChild(document.createElement("div")).appendChild(e)}));var l=c.appendChild(document.createElement("div"));l.className="ProseMirror-prompt-buttons",l.appendChild(a),l.appendChild(document.createTextNode(" ")),l.appendChild(s);var u=t.getBoundingClientRect();t.style.top=(window.innerHeight-u.height)/2+"px",t.style.left=(window.innerWidth-u.width)/2+"px";var d=function(){var t=function(e,t){var n=Object.create(null),r=0;for(var o in e){var i=e[o],a=t[r++],s=i.read(a),c=i.validate(s);if(c)return mn(a,c),null;n[o]=i.clean(s)}return n}(e.fields,o);t&&(r(),e.callback(t))};c.addEventListener("submit",(function(e){e.preventDefault(),d()})),c.addEventListener("keydown",(function(e){27==e.keyCode?(e.preventDefault(),r()):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey?9==e.keyCode&&window.setTimeout((function(){t.contains(document.activeElement)||r()}),500):(e.preventDefault(),d())}));var h=c.elements[0];h&&h.focus()}function mn(e,t){var n=e.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=e.offsetLeft+e.offsetWidth+2+"px",r.style.top=e.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=t,setTimeout((function(){return n.removeChild(r)}),1500)}var gn=function(){function e(t){babelHelpers.classCallCheck(this,e),this.options=t}return babelHelpers.createClass(e,[{key:"read",value:function(e){return e.value}},{key:"validateType",value:function(e){}},{key:"validate",value:function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)}},{key:"clean",value:function(e){return this.options.clean?this.options.clean(e):e}}]),e}(),yn=function(e){babelHelpers.inherits(n,e);var t=fn(n);function n(){return babelHelpers.classCallCheck(this,n),t.apply(this,arguments)}return babelHelpers.createClass(n,[{key:"render",value:function(){var e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e}}]),n}(gn);function _n(e,t){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);try{if(n.node(r).canReplaceWith(o,o,t))return!0}catch(e){}}return!1}function bn(e){return new jt({title:"Insert image",label:"Image",enable:function(t){return _n(t,e)},run:function(t,n,r){var o=t.selection,i=o.from,a=o.to,s=null;t.selection instanceof $e.NodeSelection&&t.selection.node.type==e&&(s=t.selection.node.attrs),vn({title:"Insert image",fields:{src:new yn({label:"Location",required:!0,value:s&&s.src}),title:new yn({label:"Title",value:s&&s.title}),alt:new yn({label:"Description",value:s?s.alt:t.doc.textBetween(i,a," ")})},callback:function(t){r.dispatch(r.state.tr.replaceSelectionWith(e.createAndFill(t))),r.focus()}})}})}function Cn(e){return console.error("insert table item menu create"),new jt({title:"Insert table",label:"Table",enable:function(t){return _n(t,e)},run:function(e,t,n){var r=Object(hn.createTable)(e.schema);console.error("about to try to insert table:",r);var o=n.state.tr.replaceSelectionWith(r);o=o.setSelection($e.Selection.near(o.doc.resolve(n.state.selection.from))),n.dispatch(o.scrollIntoView()),n.focus()}})}function wn(e,t){var n={label:t.title,run:e};for(var r in t)n[r]=t[r];return t.enable&&!0!==t.enable||t.select||(n[t.enable?"enable":"select"]=function(t){return e(t)}),new jt(n)}function Sn(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)}function kn(e,t){var n={active:function(t){return Sn(t,e)},enable:!0};for(var r in t)n[r]=t[r];return t.useApply?wn(function(e,t){return function(n,r){var o=n.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,a=o.$to,s=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if("object"===babelHelpers.typeof(i))return i.v}return!1}(n.doc,s,e))return!1;if(r)if(a)e.isInSet(n.storedMarks||a.marks())&&r(n.tr.removeStoredMark(e)),r(n.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=n.tr,u=0;!c&&u<s.length;u++){var d=s[u],h=d.$from,p=d.$to;c=n.doc.rangeHasMark(h.pos,p.pos,e)}for(var f=0;f<s.length;f++){var v=s[f],m=v.$from,g=v.$to;c&&l.removeMark(m.pos,g.pos,e),l.addMark(m.pos,g.pos,e.create(t))}r(l.scrollIntoView())}return!0}}(e,t.attrs||{}),n):wn(lt(e,t.attrs||{}),n)}function An(e){return new jt({title:"Add or remove link",icon:Yt.link,active:function(t){return Sn(t,e)},enable:function(e){return!e.selection.empty},run:function(t,n,r){if(Sn(t,e))return lt(e)(t,n),!0;vn({title:"Create a link",fields:{href:new yn({label:"Link target",required:!0}),title:new yn({label:"Title"})},callback:function(t){lt(e,t)(r.state,r.dispatch),r.focus()}})}})}function En(e,t){return wn(cn(e,t.attrs),t)}function Tn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},o=1;if("firstHeadingLevel"in n&&(o=n.firstHeadingLevel),t=e.marks.fontSize){var i=[8,10,12,14,16,18,22,26,36,48,72,96],a=i.map((function(e){return kn(t,{title:e+"px",label:e+"px",useApply:!0,attrs:{fontSize:e}})}));a.length&&(r.fontMenu=new Wt(a,{label:"Size"}))}if((t=e.marks.strong)&&(r.toggleStrong=kn(t,{title:"Toggle strong style",icon:Yt.strong})),(t=e.marks.em)&&(r.toggleEm=kn(t,{title:"Toggle emphasis",icon:Yt.em})),(t=e.marks.link)&&(r.toggleLink=An(t)),(t=e.nodes.image)&&(n.noImageInsert||(r.insertImage=bn(t))),(t=e.nodes.bullet_list)&&(r.wrapBulletList=En(t,{title:"Wrap in bullet list",icon:Yt.bulletList})),(t=e.nodes.ordered_list)&&(r.wrapOrderedList=En(t,{title:"Wrap in ordered list",icon:Yt.orderedList})),(t=e.nodes.blockquote)&&(r.wrapBlockQuote=tn(t,{title:"Wrap in block quote",icon:Yt.blockquote})),(t=e.nodes.paragraph)&&(r.makeParagraph=nn(t,{title:"Change to paragraph",label:"Plain"})),t=e.nodes.heading)for(var s=o;s<=10;s++)r["makeHead"+s]=nn(t,{title:"Change to heading "+s,label:"Level "+s,attrs:{level:s}});if(t=e.nodes.horizontal_rule){var c=t;r.insertHorizontalRule=new jt({title:"Insert horizontal rule",label:"Horizontal rule",enable:function(e){return _n(e,c)},run:function(e,t){t(e.tr.replaceSelectionWith(c.create()))}})}(t=e.nodes.table)&&(r.insertTable=Cn(t)),(t=e.nodes.table_row)&&(r.addRowBefore=wn(pn.addRowBefore,{title:"Add row before"}),r.addRowAfter=wn(pn.addRowAfter,{title:"Add row after"}),r.deleteRow=wn(pn.deleteRow,{title:"Delete row"}),r.addColumnBefore=wn(pn.addColumnBefore,{title:"Add column before"}),r.addColumnAfter=wn(pn.addColumnAfter,{title:"Add column after"}),r.deleteColumn=wn(pn.deleteColumn,{title:"Delete column"}),r.splitCell=wn(pn.splitCell,{title:"Split cell"}),r.mergeCells=wn(pn.mergeCells,{title:"Merge cell"}),r.deleteTable=wn(pn.deleteTable,{title:"Delete table"}));var l=function(e){return e.filter((function(e){return e}))},u=l([r.makeHead1,r.makeHead2,r.makeHead3,r.makeHead4,r.makeHead5,r.makeHead6]),d=l([r.addRowBefore,r.addRowAfter,r.addColumnBefore,r.addColumnAfter,r.mergeCells,r.splitCell,r.deleteRow,r.deleteColumn,r.deleteTable]);console.error("Table items:",d),d.length&&(r.tableMenu=new Wt(d,{label:"Table"}));var h=n.extraInsertMenus||[],p=l(h.concat([r.insertImage,r.insertMoveList,r.insertTable,r.insertHorizontalRule]));r.insertMenu=new Wt(p,{label:"Insert"}),r.typeMenu=new Wt(l([r.makeParagraph,r.makeCodeBlock,u.length&&new $t(u,{label:"Heading"})]),{label:"Type..."}),r.inlineMenu=[l([r.toggleStrong,r.toggleEm,r.toggleUnderline,r.toggleCode,r.toggleLink])],r.blockMenu=[l([r.wrapBulletList,r.wrapOrderedList,r.tableMenu,r.wrapBlockQuote,Xt,Jt,Zt])];var f=n.extraTopLevelMenus||[];return console.error("extraTopLevelMenus:",f," block menu:",r.blockMenu),r.fullMenu=r.inlineMenu.concat([l([r.fontMenu,r.insertMenu,r.typeMenu])],[[Qt,en]],r.blockMenu,f),r}Yt.underline={dom:Object(K.a)('<span class="material-icons">\n                  format_underlined\n               </span>')},Yt.strong={dom:Object(K.a)('<span class="material-icons">\n                  format_bold\n               </span>')},Yt.em={dom:Object(K.a)('<span class="material-icons">\n                  format_italic\n               </span>')},Yt.link={dom:Object(K.a)('<span class="material-icons">\n                  insert_link\n               </span>')},Yt.undo={dom:Object(K.a)('<span class="material-icons">\n                  undo\n               </span>')},Yt.redo={dom:Object(K.a)('<span class="material-icons">\n                  redo\n               </span>')},Yt.selectParentNode={dom:Object(K.a)('<span class="material-icons">\n                  select_all\n               </span>')},Yt.bulletList={dom:Object(K.a)('<span class="material-icons">\n                  format_list_bulleted\n               </span>')},Yt.orderedList={dom:Object(K.a)('<span class="material-icons">\n                  format_list_numbered\n               </span>')},Yt.blockquote={dom:Object(K.a)('<span class="material-icons">\n                  format_quote\n               </span>')},en.spec.icon=Yt.redo,Qt.spec.icon=Yt.undo,Zt.spec.icon=Yt.selectParentNode;var On=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){var i=n;if(t[1]){var a=t[0].lastIndexOf(t[1]);i+=t[0].slice(a+t[1].length);var s=(r+=a)-o;s>0&&(i=t[0].slice(a-s,a)+i,r=o)}return e.tr.insertText(i,r,o)}):t};function xn(e){var t=e.rules,n=new $e.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,o,i){return Mn(e,r,o,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection.$cursor;r&&Mn(e,r.pos,r.pos,"",t,n)}))}}},isInputRules:!0});return n}function Mn(e,t,n,r,o,i){if(e.composing)return!1;var a=e.state,s=a.doc.resolve(t);if(s.parent.type.spec.code)return!1;for(var c=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,null,"")+r,l=0;l<o.length;l++){var u=o[l].match.exec(c),d=u&&o[l].handler(a,u,t-(u[0].length-r.length),n);if(d)return e.dispatch(d.setMeta(i,{transform:d,from:t,to:n,text:r})),!0}return!1}function In(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){for(var a=e.tr,s=i.transform,c=s.steps.length-1;c>=0;c--)a.step(s.steps[c].invert(s.docs[c]));var l=a.doc.resolve(i.from).marks();t(a.replaceWith(i.from,i.to,e.schema.text(i.text,l)))}return!0}}return!1}var Ln=new On(/--$/,""),Nn=new On(/\.\.\.$/,""),Rn=[new On(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new On(/"$/,""),new On(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new On(/'$/,"")];function Dn(e,t,n,r){return new On(e,(function(e,o,i,a){var s=n instanceof Function?n(o):n,c=e.tr.delete(i,a),l=c.doc.resolve(i).blockRange(),u=l&&Object(Ue.h)(l,t,s);if(!u)return null;c.wrap(l,u);var d=c.doc.resolve(i-1).nodeBefore;return d&&d.type==t&&Object(Ue.e)(c.doc,i-1)&&(!r||r(o,d))&&c.join(i-1),c}))}function Pn(e,t,n){return new On(e,(function(e,r,o,i){var a=e.doc.resolve(o),s=n instanceof Function?n(r):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,s):null}))}var Fn="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Hn(e,t){var n,r={};function o(e,n){if(t){var o=t[e];if(!1===o)return;o&&(e=o)}r[e]=n}if(o("Mod-z",Rt),o("Shift-Mod-z",Dt),o("Backspace",In),Fn||o("Mod-y",Dt),o("Alt-ArrowUp",Qe),o("Alt-ArrowDown",et),o("Mod-BracketLeft",tt),o("Escape",it),(n=e.marks.strong)&&(o("Mod-b",lt(n)),o("Mod-B",lt(n))),(n=e.marks.em)&&(o("Mod-i",lt(n)),o("Mod-I",lt(n))),(n=e.marks.code)&&o("Mod-`",lt(n)),(n=e.nodes.bullet_list)&&o("Shift-Ctrl-8",cn(n)),(n=e.nodes.ordered_list)&&o("Shift-Ctrl-9",cn(n)),(n=e.nodes.blockquote)&&o("Ctrl->",st(n)),n=e.nodes.hard_break){var i=n,a=ut(rt,(function(e,t){return t(e.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0}));o("Mod-Enter",a),o("Shift-Enter",a),Fn&&o("Ctrl-Enter",a)}if((n=e.nodes.list_item)&&(o("Enter",ln(n)),o("Mod-[",un(n)),o("Mod-]",dn(n))),(n=e.nodes.paragraph)&&o("Shift-Ctrl-0",ct(n)),(n=e.nodes.code_block)&&o("Shift-Ctrl-\\",ct(n)),n=e.nodes.heading)for(var s=1;s<=6;s++)o("Shift-Ctrl-"+s,ct(n,{level:s}));if(n=e.nodes.horizontal_rule){var c=n;o("Mod-_",(function(e,t){return t(e.tr.replaceSelectionWith(c.create()).scrollIntoView()),!0}))}return r}function Bn(e){var t,n=Rn.concat(Nn,Ln);return(t=e.nodes.blockquote)&&n.push(Dn(/^\s*>\s$/,t)),(t=e.nodes.ordered_list)&&n.push(function(e){return Dn(/^(\d+)\.\s$/,e,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order==+e[1]}))}(t)),(t=e.nodes.bullet_list)&&n.push(function(e){return Dn(/^\s*([-+*])\s$/,e)}(t)),(t=e.nodes.code_block)&&n.push(function(e){return Pn(/^```$/,e)}(t)),(t=e.nodes.heading)&&n.push(function(e,t){return Pn(new RegExp("^(#{1,"+t+"})\\s$"),e,(function(e){return{level:e[1].length}}))}(t,6)),xn({rules:n})}var jn=["p",0],qn=["blockquote",0],Vn=["hr"],zn=["pre",["code",0]],Gn=["br"],Wn={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return jn}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return qn}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return Vn}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return zn}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){var t=e.attrs;return["img",{src:t.src,alt:t.alt,title:t.title}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return Gn}}},Un=["em",0],Kn=["strong",0],$n=["code",0],Yn={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return Un}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return Kn}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return $n}}},Xn=(new Ke.Schema({nodes:Wn,marks:Yn}),n(40));function Jn(e){return void 0===e&&(e={}),new $e.Plugin({view:function(t){return new Zn(t,e)}})}var Zn=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};Zn.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},Zn.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},Zn.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},Zn.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var a=this.editorView.coordsAtPos(this.cursorPos);e={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!s||s==document.body&&"static"==getComputedStyle(s).position?{left:-pageXOffset,top:-pageYOffset}:s.getBoundingClientRect();this.element.style.left=e.left-c.left+"px",this.element.style.top=e.top-c.top+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},Zn.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},Zn.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(Ue.g)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=t.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},Zn.prototype.dragend=function(){this.scheduleRemoval(20)},Zn.prototype.drop=function(){this.scheduleRemoval(20)},Zn.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};var Qn=n(53),er=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return Ke.Slice.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new tr(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){i=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=n;var c=e.doc.resolve(o);if(t.valid(c))return c}for(;;){var l=n>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!$e.NodeSelection.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=l,o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}return null}},t}($e.Selection);er.prototype.visible=!1,$e.Selection.jsonID("gapcursor",er);var tr=function(e){this.pos=e};tr.prototype.map=function(e){return new tr(e.map(this.pos))},tr.prototype.resolve=function(e){var t=e.resolve(this.pos);return er.valid(t)?new er(t):$e.Selection.near(t)};var nr=function(){return new $e.Plugin({props:{decorations:ar,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&er.valid(n))return new er(n)},handleClick:ir,handleKeyDown:rr}})},rr=Object(Xn.a)({ArrowLeft:or("horiz",-1),ArrowRight:or("horiz",1),ArrowUp:or("vert",-1),ArrowDown:or("vert",1)});function or(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof $e.TextSelection){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var c=er.findFrom(a,t,s);return!!c&&(r&&r(e.tr.setSelection(new er(c))),!0)}}function ir(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!er.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&$e.NodeSelection.isSelectable(e.state.doc.nodeAt(o)))&&(e.dispatch(e.state.tr.setSelection(new er(r))),!0)}function ar(e){if(!(e.selection instanceof er))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Qn.b.create(e.doc,[Qn.a.widget(e.selection.head,t,{key:"gapcursor"})])}var sr=n(98),cr=n.n(sr),lr=new Ke.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return{params:e.getAttribute("data-params")||""}}}],toDOM:function(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(e){return{tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(e){return"italic"==e&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){return["a",e.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});var ur=function(e,t){this.schema=e,this.stack=[{type:e.topNodeType,content:[]}],this.marks=Ke.Mark.none,this.tokenHandlers=t};function dr(e,t){return e.getAttrs?e.getAttrs(t):e.attrs instanceof Function?e.attrs(t):e.attrs}function hr(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function pr(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function fr(){}ur.prototype.top=function(){return this.stack[this.stack.length-1]},ur.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},ur.prototype.addText=function(e){if(e){var t,n=this.top().content,r=n[n.length-1],o=this.schema.text(e,this.marks);r&&(t=function(e,t){if(e.isText&&t.isText&&Ke.Mark.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(r,o))?n[n.length-1]=t:n.push(o)}},ur.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},ur.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},ur.prototype.parseTokens=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n)}},ur.prototype.addNode=function(e,t,n){var r=e.createAndFill(t,n,this.marks);return r?(this.push(r),r):null},ur.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},ur.prototype.closeNode=function(){this.marks.length&&(this.marks=Ke.Mark.none);var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)};var vr=function(e,t,n){this.tokens=n,this.schema=e,this.tokenizer=t,this.tokenHandlers=function(e,t){var n=Object.create(null),r=function(r){var o=t[r];if(o.block){var i=e.nodeType(o.block);hr(o,r)?n[r]=function(e,t){e.openNode(i,dr(o,t)),e.addText(pr(t.content)),e.closeNode()}:(n[r+"_open"]=function(e,t){return e.openNode(i,dr(o,t))},n[r+"_close"]=function(e){return e.closeNode()})}else if(o.node){var a=e.nodeType(o.node);n[r]=function(e,t){return e.addNode(a,dr(o,t))}}else if(o.mark){var s=e.marks[o.mark];hr(o,r)?n[r]=function(e,t){e.openMark(s.create(dr(o,t))),e.addText(pr(t.content)),e.closeMark(s)}:(n[r+"_open"]=function(e,t){return e.openMark(s.create(dr(o,t)))},n[r+"_close"]=function(e){return e.closeMark(s)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));hr(o,r)?n[r]=fr:(n[r+"_open"]=fr,n[r+"_close"]=fr)}};for(var o in t)r(o);return n.text=function(e,t){return e.addText(t.content)},n.inline=function(e,t){return e.parseTokens(t.children)},n.softbreak=n.softbreak||function(e){return e.addText("\n")},n}(e,n)};vr.prototype.parse=function(e){var t,n=new ur(this.schema,this.tokenHandlers);n.parseTokens(this.tokenizer.parse(e,{}));do{t=n.closeNode()}while(n.stack.length);return t};var mr=new vr(lr,cr()("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(e){return{order:+e.attrGet("start")||1}}},heading:{block:"heading",getAttrs:function(e){return{level:+e.tag.slice(1)}}},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}},noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}},code_inline:{mark:"code",noCloseToken:!0}}),gr=function(e,t){this.nodes=e,this.marks=t};gr.prototype.serialize=function(e,t){var n=new Cr(this.nodes,this.marks,t);return n.renderContent(e),n.out};var yr=new gr({blockquote:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},code_block:function(e,t){e.write("```"+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},heading:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},horizontal_rule:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list:function(e,t){e.renderList(t,"  ",(function(){return(t.attrs.bullet||"*")+" "}))},ordered_list:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,(function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "}))},list_item:function(e,t){e.renderContent(t)},paragraph:function(e,t){e.renderInline(t),e.closeBlock(t)},image:function(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")")},hard_break:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type)return void e.write("\\\n")},text:function(e,t){e.text(t.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function(e,t,n,r){return br(t,n,r,1)?"<":"["},close:function(e,t,n,r){return br(t,n,r,-1)?">":"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},code:{open:function(e,t,n,r){return _r(n.child(r),-1)},close:function(e,t,n,r){return _r(n.child(r-1),1)},escape:!1}});function _r(e,t){var n,r=/`+/g,o=0;if(e.isText)for(;n=r.exec(e.text);)o=Math.max(o,n[0].length);for(var i=o>0&&t>0?" `":"`",a=0;a<o;a++)i+="`";return o>0&&t<0&&(i+=" "),i}function br(e,t,n,r){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;var o=t.child(n+(r<0?-1:0));if(!o.isText||o.text!=e.attrs.href||o.marks[o.marks.length-1]!=e)return!1;if(n==(r<0?1:t.childCount-1))return!0;var i=t.child(n+(r<0?-2:1));return!e.isInSet(i.marks)}var Cr=function(e,t,n){this.nodes=e,this.marks=t,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)};Cr.prototype.flushClose=function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var r=1;r<e;r++)this.out+=t+"\n"}this.closed=!1}},Cr.prototype.wrapBlock=function(e,t,n,r){var o=this.delim;this.write(t||e),this.delim+=e,r(),this.delim=o,this.closeBlock(n)},Cr.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},Cr.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},Cr.prototype.write=function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)},Cr.prototype.closeBlock=function(e){this.closed=e},Cr.prototype.text=function(e,t){for(var n=e.split("\n"),r=0;r<n.length;r++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==t?this.esc(n[r],o):n[r],r!=n.length-1&&(this.out+="\n")}},Cr.prototype.render=function(e,t,n){if("number"==typeof t)throw new Error("!");this.nodes[e.type.name](this,e,t,n)},Cr.prototype.renderContent=function(e){var t=this;e.forEach((function(n,r,o){return t.render(n,e,o)}))},Cr.prototype.renderInline=function(e){var t=this,n=[],r="",o=function(o,i,a){var s=o?o.marks:[];o&&"hard_break"===o.type.name&&(s=s.filter((function(t){if(a+1==e.childCount)return!1;var n=e.child(a+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))})));var c=r;if(r="",o&&o.isText&&s.some((function(e){var n=t.marks[e.type.name];return n&&n.expelEnclosingWhitespace}))){var l=/^(\s*)(.*?)(\s*)$/m.exec(o.text),u=(l[0],l[1]),d=l[2],h=l[3];c+=u,r=h,(u||h)&&((o=d?o.withText(d):null)||(s=n))}var p=s.length&&s[s.length-1],f=p&&!1===t.marks[p.type.name].escape,v=s.length-(f?1:0);e:for(var m=0;m<v;m++){var g=s[m];if(!t.marks[g.type.name].mixable)break;for(var y=0;y<n.length;y++){var _=n[y];if(!t.marks[_.type.name].mixable)break;if(g.eq(_)){m>y?s=s.slice(0,y).concat(g).concat(s.slice(y,m)).concat(s.slice(m+1,v)):y>m&&(s=s.slice(0,m).concat(s.slice(m+1,y)).concat(g).concat(s.slice(y,v)));continue e}}}for(var b=0;b<Math.min(n.length,v)&&s[b].eq(n[b]);)++b;for(;b<n.length;)t.text(t.markString(n.pop(),!1,e,a),!1);if(c&&t.text(c),o){for(;n.length<v;){var C=s[n.length];n.push(C),t.text(t.markString(C,!0,e,a),!1)}f&&o.isText?t.text(t.markString(p,!0,e,a)+o.text+t.markString(p,!1,e,a+1),!1):t.render(o,e,a)}};e.forEach(o),o(null,0,e.childCount)},Cr.prototype.renderList=function(e,t,n){var r=this;this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,e.forEach((function(i,a,s){s&&o&&r.flushClose(1),r.wrapBlock(t,n(s),e,(function(){return r.render(i,e,s)}))})),this.inTightList=i},Cr.prototype.esc=function(e,t){return e=e.replace(/[`*\\~\[\]]/g,"\\$&"),t&&(e=e.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),e},Cr.prototype.quote=function(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]},Cr.prototype.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},Cr.prototype.markString=function(e,t,n,r){var o=this.marks[e.type.name],i=t?o.open:o.close;return"string"==typeof i?i:i(this,e,n,r)},Cr.prototype.getEnclosingWhitespace=function(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}};var wr=function(e){this.options=e};wr.prototype.read=function(e){return e.value},wr.prototype.validateType=function(e){},wr.prototype.validate=function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)},wr.prototype.clean=function(e){return this.options.clean?this.options.clean(e):e};"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);n(489),n(490),n(491);function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}new a.a("move-comment-editor");var kr=function(){function e(t,n,r){babelHelpers.classCallCheck(this,e),this._editor=r,this._guid=Object(F.a)(),this._target=t,t.innerHTML=Fe.a.create({fieldType:"textarea",rows:5,cols:40,label:Object(o.d)("Comment")}),this.textarea=t.querySelector("text-field"),this.textarea.value=n,this._del=new c.a,this._del.delegate(t,"keyup","textarea",this._textareaKeyup,this)}return babelHelpers.createClass(e,[{key:"_textareaKeyup",value:function(e){var t=this;this._textEntryTimer?(clearTimeout(this._textEntryTimer),this._textEntryTimer=null):this._editor.fire("commentChanged",{comment:this.content}),this._textEntryTimer=setTimeout((function(){t._editor.fire("commentChanged",{comment:t.content}),t._textEntryTimer=null}),250)}},{key:"focus",value:function(){this.hasAttribute("no-auto-focus")||this.textarea.querySelector("textarea").focus()}},{key:"destroy",value:function(){this._textEntryTimer&&clearTimeout(this._textEntryTimer),this._del.detach(this._target,"keyup","textarea"),this._del.destroy(),this.textarea.remove()}},{key:"content",get:function(){return this.textarea.value},set:function(e){this.textarea.value=e}}]),e}(),Ar=function(){function e(t,n,r){var o;babelHelpers.classCallCheck(this,e),this._editor=r,this._view=new Qn.c(t,{state:$e.EditorState.create({doc:mr.parse(n),plugins:(o={schema:lr},[Bn(o.schema),Object(Xn.b)(Hn(o.schema,o.mapKeys)),Object(Xn.b)(mt),Jn(),nr(),an({floating:!0,content:Tn(o.schema,{firstHeadingLevel:2}).fullMenu}),Nt(),new $e.Plugin({props:{attributes:{class:"ct-move-comment-editor-style"}}})])}),handleDOMEvents:{focus:function(e,t){return qe.ignoreContentEditable=!0,!1},blur:function(e,t){return qe.ignoreContentEditable=!1,!1}},dispatchTransaction:function(e){var t=this.state.applyTransaction(e),n=t.state;t.transactions;if(this.updateState(n),e.docChanged){var o=yr.serialize(e.doc).replace(/\\([#[\]])/g,"$1");r.fire("commentChanged",{comment:o})}}})}return babelHelpers.createClass(e,[{key:"focus",value:function(){this._view.focus()}},{key:"destroy",value:function(){this._view.destroy(),qe.ignoreContentEditable=!1}},{key:"content",get:function(){return yr.serialize(this._view.state.doc).replace(/\\([#[\]])/g,"$1")},set:function(e){var t=mr.parse(e);this._view.dispatch(this._view.state.tr.setSelection(new $e.AllSelection(this._view.state.doc))),this._view.dispatch(this._view.state.tr.replaceSelectionWith(t))}}]),e}(),Er=function(e){babelHelpers.inherits(r,e);var t,n=Sr(r);function r(){var e;return babelHelpers.classCallCheck(this,r),(e=n.call(this)).initAggregator(),e}return babelHelpers.createClass(r,[{key:"getComment",value:function(){return this._view.content}},{key:"setComment",value:function(e){var t="markdown"==this._o.viewType?kr:Ar;this._reloadView(t,e)}},{key:"_reloadView",value:function(e,t){var n=this.querySelector(".ct-move-comment-editor-container");this._view&&this._view.destroy(),this._view=new e(n,t,this),this.focus()}},{key:"firstUpdated",value:function(){var e=this;this.querySelector(".ct-wysiwyg-toggle input").addEventListener("change",(function(t){var n=t.target.checked?Ar:kr;e._view instanceof n||(e._o.viewType=n==kr?"markdown":"wysiwyg",e.prefStorage.setObject("options",e._o),e._reloadView(n,e._view.content))}))}},{key:"layout",value:function(){}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.prefStorage=new Le("move-comment-editor"),this._o=this.prefStorage.getObject("options")||{viewType:"markdown"},this.innerHTML='<div class="ct-move-comment-editor-container" style="margin-bottom: 0"></div>\n              <div style="text-align: center">\n                 '.concat(ze.a.create({label:Object(o.d)("WYSIWYG"),checked:"wysiwyg"==this._o.viewType,classes:"ct-wysiwyg-toggle"}),'\n              </div>\n\n             <div style="display: none"><textarea id="content">This is a comment written in [Markdown](http://commonmark.org). *You* may know the syntax for inserting a link, but does your whole audience?&#13;&#13;So you can give people the **choice** to use a more familiar, discoverable interface.</textarea></div>');case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){qe.ignoreContentEditable=!1}}]),r}(z.a);function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}Object(Te.a)(Er,s.a),Er.componentName="move-comment-editor",r.a.define(Er);var Or=function(e){babelHelpers.inherits(n,e);var t=Tr(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_initEvents",value:function(){var e=this;this._del||(this._del=new c.a,this._del.delegate(this,"tap",".ct-annotate-nag-cell",this._glyphClicked,this),this._del.delegate(this,"tap",".ct-annotate-reset-nag-button",this._resetGlyphs,this),this._del.delegate(this,"change","input[name='commentPosition']",this._commentPositionChanged,this),this.querySelector("move-comment-editor").on("commentChanged",(function(t){e.fire("commentChanged",{comment:e._getCommentChangePayload(t.comment)})})))}},{key:"_commentPositionChanged",value:function(e){this.setComment(this._preComments,this._postComments,!0)}},{key:"_isPreComment",value:function(){return!!this.querySelector("input[name='commentPosition'][value='0']:checked")}},{key:"_getCommentChangePayload",value:function(e){e&&(e=e.trim());var t=this._isPreComment();return t?this._preComments=[e]:this._postComments=[e],{comment:e,preComment:t}}},{key:"getComment",value:function(){this.querySelector("move-comment-editor").getComment();return this._getCommentChangePayload()}},{key:"_textareaKeyup",value:function(e){var t=this;null==this._textEntryTimer?this.fire("commentChanged",{comment:this.getComment()}):(clearTimeout(this._textEntryTimer),this._textEntryTimer=null),this._textEntryTimer=setTimeout((function(){t.fire("commentChanged",{comment:t.getComment()}),t._textEntryTimer=null}),450)}},{key:"destroy",value:function(){this._del.destroy()}},{key:"render",value:function(){var e=Fe.a.create({fieldType:"textarea",rows:5,cols:40,label:Object(o.d)("Comment")}),t=He.a.create({label:"",name:"commentPosition",classes:"ct-before-after-radio-group",choices:[{value:0,label:Object(o.d)("Before move")},{value:1,label:Object(o.d)("After move"),checked:!0}]});e="<move-comment-editor ".concat(this.hasAttribute("no-auto-focus")?'no-auto-focus="true"':"","></move-comment-editor>"),this.innerHTML="".concat(e,"\n             ").concat(t,"\n            ")}},{key:"setComment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._preComments=e,this._postComments=t,null!==r&&(0==r?Be.a.getComponentFromInput(this.querySelector("input[name='commentPosition'][value='0']")).checked=!0:Be.a.getComponentFromInput(this.querySelector("input[name='commentPosition'][value='1']")).checked=!0);var o=this._isPreComment()?this._preComments.join(" "):this._postComments.join(" ");o=o.trim(),n||o||(this._postComments.length?(o=this._postComments.join(" ").trim(),Be.a.getComponentFromInput(this.querySelector("input[name='commentPosition'][value='1']")).checked=!0):this._preComments.length&&(o=this._preComments.join(" ").trim(),Be.a.getComponentFromInput(this.querySelector("input[name='commentPosition'][value='0']")).checked=!0)),this.querySelector("move-comment-editor").setComment(o)}},{key:"connectedCallback",value:function(){this.initAggregator(),this.render(),this._initEvents()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));Object(Te.a)(Or,s.a),window.customElements.define("move-comment-entry",Or);var xr=n(193),Mr=n.n(xr),Ir=(n(497),new a.a("markdown")),Lr=function(e,t){if(91!==e.src.charCodeAt(e.pos))return!1;var n=e.src.slice(e.pos).match(Fr);if(!n||0!==n.index)return!1;if(e.pos+=n[0].length,t)return!0;var r="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";Ir.log({match:n},"markdown move inliner parser match");var o=n[1].indexOf("flip=true")>=0,i=n[1].match(/start=(.*)$/);i&&(r=i[1]);var a=e.push("moves-inline","");return a.level=e.level,a.moves=n[2],a.startPosition=r,a.flip=o,!0},Nr=function(e,t,n,r){var o=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],a=e.src.slice(o,i);if(91!==e.src.charCodeAt(o))return!1;var s=a.match(Hr);if(!s||0!==s.index)return!1;if(r)return!0;var c=s[1].indexOf("flip=true")>=0,l=t+1;if(!Br.test(a))for(;l<n;l++)if(o=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],a=e.src.slice(o,i),Br.test(a)){0!==a.length&&l++;break}e.line=l;var u=e.getLines(t,l,e.blkIndent,!0),d=u.match(jr),h=e.push("pgn-block","",0);return h.map=[t,l],h.pgn=(d&&d[2]||"").trim(),Ir.log({pgn:u,pgnBody:h.pgn,flip:c},"markdown pgn"),h.flip=c,!0},Rr=function(e,t){if(91!==e.src.charCodeAt(e.pos))return!1;var n=e.src.slice(e.pos).match(qr);if(!n||0!==n.index)return!1;if(e.pos+=n[0].length,t)return!0;var r=n[1].indexOf("flip=true")>=0,o=e.push("fen-inline","");return o.level=e.level,o.moves="*",o.startPosition=n[2],o.flip=r,!0},Dr=function(e,t,n,r,o){var i=e[t];Ir.log({token:i},"markdown move renderer");var a=Object(F.a)(),s='[SetUp "1"]\n[FEN "'+Vr.utils.escapeHtml(i.startPosition)+'"]\n\n'+Vr.utils.escapeHtml(i.moves),c=C.toMoveFromFen(i.startPosition)==b.BLACK;return i.flip&&(c=!c),'<pgn-viewer controls-menu-orientation="left" board-dont-start-active="true" controls-tooltip-nav-disabled="true" board-size="100%" board-auto-height="true" class="ct-hidden" move-list-persistId="comm2" board-enable-markers="true" board-persistId="comm2" flip="'.concat(c?"true":"false",'" use-game-header="false" data-id="').concat(a,'" buttons-above-moves="true">').concat(s,"</pgn-viewer>")},Pr=function(e,t,n,r,o){var i=e[t];Ir.log({token:i},"markdown pgn renderer");var a=Object(F.a)(),s=i.pgn;i.escapePgn&&(s=Vr.utils.escapeHtml(s));var c=i.flip;return'<pgn-viewer controls-menu-orientation="left" board-dont-start-active="true" board-enable-markers="true" controls-tooltip-nav-disabled="true" class="" move-list-persistId="blog2" board-persistId="blog2" flip="'.concat(c?"true":"false",'" use-game-header="false" data-id="').concat(a,'" >').concat(s,"</pgn-viewer>")};(Vr=new cr.a({html:!1,linkify:!0,typographer:!0})).use(Mr.a);var Fr=/\[moves(.*?)\](.*?)\[\/moves\]/,Hr=/^\[pgn(.*?)\]/i,Br=/\[\/pgn\]/i,jr=/\[pgn(.*?)\]([\s\S]*?)\[\/pgn\]/i,qr=/\[fen(.*?)\](.*?)\[\/fen\]/;Vr.use((function(e){e.renderer.rules["moves-inline"]=Dr,e.renderer.rules["fen-inline"]=Dr,e.renderer.rules["pgn-block"]=Pr,e.inline.ruler.before("emphasis","moves-inline",Lr),e.inline.ruler.before("emphasis","fen-inline",Rr),e.block.ruler.before("html_block","pgn-block",Nr)}));var Vr,zr=Vr.renderer.rules.link_open||function(e,t,n,r,o){return o.renderToken(e,t,n)};Vr.renderer.rules.link_open=function(e,t,n,r,o){var i=e[t].attrIndex("target");return i<0?e[t].attrPush(["target","_blank"]):e[t].attrs[i][1]="_blank",e[t].attrPush(["rel","noopener nofollow"]),zr(e,t,n,r,o)};var Gr=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"render",value:function(e){return Vr.render(e)}}]),e}(),Wr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.INITIAL_FEN;babelHelpers.classCallCheck(this,e),this.fen=t,this.reset()}return babelHelpers.createClass(e,[{key:"reset",value:function(){this._nextMoveId=1,this._moves={},this._listStart=new A,this._listStart.varLevel=0,this._listStart.atStart=!0,this._listEnd=new A,this._listEnd.varLevel=0,this._listEnd.atEnd=!0,this._listStart.next=this._listEnd,this._listEnd.prev=this._listStart,this._addMoveMap(this._listEnd),this._addMoveMap(this._listStart),this._currentMove=this._listEnd,this._startBoardState=new C(this.fen),this._listStart._boardState=this._listEnd._boardState=this._startBoardState}},{key:"destroy",value:function(){}},{key:"isFromInitialPosition",value:function(){return this.fen==C.INITIAL_FEN}},{key:"getStartPlyNumber",value:function(){return this._startBoardState.plyNumber}},{key:"initFromFen",value:function(e){this.fen=e,this.reset()}},{key:"insertMoveSequence",value:function(e){for(var t=null;e&&!e.atEnd;){var n=this.playMove(e.clone(!0,!0),{addDuplicateAsVariation:!0});t||(t=n),e=e.next}return t}},{key:"clone",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e(this.fen),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._listStart.next;if(this._listStart.variations){var o=n.getCurrentMove(),i=n.getListStart();n.setCurrentMove(i);var a=function e(t){for(var r=!0,o=function(){r?(n.insertAsVariation(t.clone(!0,!0),{ignoreIfDuplicate:!1}),r=!1):n.insertNewMove(t.clone(!0,!0),{addDuplicateAsVariation:!0});var o=n.getCurrentMove();t.variations&&t.variations.length&&t.variations.forEach((function(t){n.backMove(),e(t),n.setCurrentMove(o)})),t=t.next};t&&!t.atEnd;)o()};this._listStart.variations.forEach((function(e){a(e),n.setCurrentMove(i)})),n.setCurrentMove(o)}for(var s=this.getCurrentMove();!r.atEnd;)n.playMove(r.clone(!0,!0),{addDuplicateAsVariation:!0}),r==s&&(n._savedCurrentMove=n.getCurrentMove().prev),r.variations&&function(){var e=n.getCurrentMove();r.variations.forEach((function(r){n.backMove(),t.clone(n,r),n.setCurrentMove(e)}))}(),r=r.next;var c=function(e,t,n){t[n]&&t[n].length&&(e[n]=t[n].map((function(e){return e})))};return c(n._listStart,this._listStart,"preCommentArray"),c(n._listStart,this._listStart,"preArrows"),c(n._listStart,this._listStart,"preSquares"),r&&r.atEnd&&(c(n._listEnd,r,"preCommentArray"),c(n._listEnd,r,"preArrows"),c(n._listEnd,r,"preSquares")),r==s&&(n._savedCurrentMove=n.getCurrentMove()),n._savedCurrentMove&&n.setCurrentMove(n._savedCurrentMove),n}},{key:"_addMoveMap",value:function(e){e.id||(e.id=this._nextMoveId++,this._moves[e.id]=e)}},{key:"resetIds",value:function(){var e=this;this._nextMoveId=1,this._moves={};!function t(n){for(;n;)n.id=null,e._addMoveMap(n),n.variations&&n.variations.forEach((function(e){t(e)})),n=n.next}(this._listStart)}},{key:"collectPositions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stripClockEp,n=void 0!==t&&t,r={},o=function e(t){for(;t;){var o=t.toFen();n&&(o=C.fenStripMoveClockEP(o)),r[o]=t,t.variations&&t.variations.forEach((function(t){e(t)})),t=t.next}};return o(this.getFirstMove()),r}},{key:"isCurrentMove",value:function(e){return e.equals(this._currentMove)}},{key:"playMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.addDuplicateAsVariation,r=void 0!==n&&n;return this.isCurrentMove(e)&&!r?this.forwardMove():this.insertNewMove(e,{addDuplicateAsVariation:r})}},{key:"isEmpty",value:function(){return this._listStart.next==this._listEnd}},{key:"atGameEnd",value:function(){return this.atEnd()&&(this.isEmpty()||0==this._currentMove.prev.varLevel)}},{key:"atEnd",value:function(){return this._currentMove.atEnd}},{key:"toMove",value:function(){return this._currentMove.getBoardState().toMove}},{key:"jumpToStart",value:function(){var e=this.getFirstMove();e.atEnd||this.gotoMoveId(e.id)}},{key:"jumpToEnd",value:function(){var e=this.getLastMove();e.atEnd||this.gotoMoveId(e.id)}},{key:"forwardMove",value:function(){var e=this._currentMove;return e.atEnd?e:(this._currentMove=e.next,e)}},{key:"toPGN",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startMv,n=void 0===t?this.getFirstMove():t,r=e.numMoves,o=void 0===r?0:r,i=e.matchIndexes,a=void 0===i?null:i,s=e.outputBoardAnnotations,c=void 0!==s&&s,l=e.trimSpaceOnComments,u=void 0!==l&&l,d=e.outputLalg,h=void 0!==d&&d,p=e.ignoreVariations,f=void 0!==p&&p,v=e.outputMoveTimes,m=void 0!==v&&v,g=e.outputEvals,y=void 0!==g&&g,_=e.ignoreNags,b=void 0!==_&&_,C=e.strictPGN,w=void 0===C||C,S=e.ignoreNullMoves,k=void 0!==S&&S,E=e.ignoreComments,T=void 0!==E&&E,O=e.zeroMoveHack,x=void 0!==O&&O,M=0,I=n,L="",N=!0,R=I.prev&&I.prev.atStart,D=function(e){if(e.preCommentArray&&e.preCommentArray.length>0){for(var t=" ",n=0;n<e.preCommentArray.length;n++){var r=e.preCommentArray[n];r&&u&&(r=r.trim()),t+="{ "+r+" } "}L+=t}},P=function(e){[e.toBoardAnno(!0),e.toBoardAnno(!1)].filter((function(e){return e})).forEach((function(e){L+=" {".concat(e,"}")}))};if(T||R&&D(I.prev),c&&R&&P(I.prev),R&&this._listStart.variations&&this._listStart.variations.length)for(var F=0;F<this._listStart.variations.length;F++)a&&!a[this._listStart.id]||(L+=" ( "+this.toPGN({ignoreComments:T,outputBoardAnnotations:c,trimSpaceOnComments:u,outputLalg:h,ignoreNags:b,strictPGN:w,ignoreNullMoves:k,outputEvals:y,outputMoveTimes:m,startMv:this._listStart.variations[F],matchIndexes:a})+" ) ");for(;(0==o||M<o)&&!I.atEnd&&(!a||a[I.id]);)if(I.emptyMove&&k)I=I.next;else{if(!T&&I.preCommentArray&&I.preCommentArray.length>0&&(N=!0),h?(!T&&I.preCommentArray&&I.preCommentArray.length&&(L+=I.preCommentArray.map((function(e){return"{ "+A.escapeComment(e)+" }"})).join(" ")+" "),L+=I.toLALG(),!T&&I.postCommentArray&&I.postCommentArray.length&&(L+=I.postCommentArray.map((function(e){return"{ "+A.escapeComment(e)+" }"})).join(" ")+" ")):L+=I.toPGN({forceMoveNumber:N,outputBoardAnnotations:c,outputEvals:y,trimSpaceOnComments:u,ignoreNags:b,strictPGN:w,ignoreComments:T,outputMoveTimes:m,zeroHack:x}),N=!1,(!T&&I.postCommentArray&&I.postCommentArray.length>0||m&&(I.hasTimeRemaining()||I.hasMoveTime()))&&(N=!0),!f&&I.variations)for(F=0;F<I.variations.length;F++)a&&!a[I.id]||(L+=" ( "+this.toPGN({ignoreComments:T,outputBoardAnnotations:c,trimSpaceOnComments:u,outputLalg:h,ignoreNags:b,strictPGN:w,ignoreNullMoves:k,outputEvals:y,outputMoveTimes:m,startMv:I.variations[F],matchIndexes:a})+" )",N=!0);M++,!(I=I.next).atEnd&&(0==o||M<o)&&(L+=" ")}return T||I.atEnd&&D(I),c&&I.atEnd&&P(I),L}},{key:"backMove",value:function(){var e=this._currentMove;return e.atStart?e:e.prev.atStart?e.varLevel>0?(this._currentMove=e.variationParent,this._currentMove.prev):e.prev:(this._currentMove=e.prev,e.prev)}},{key:"getListStart",value:function(){return this._listStart}},{key:"isMoveMainLineEnd",value:function(e){return e==this._listEnd}},{key:"getFirstMove",value:function(){return this._listStart.next}},{key:"getLastMove",value:function(){return this._listEnd.prev}},{key:"insertNewMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.addDuplicateAsVariation,r=void 0!==n&&n;if(this.isEmpty())if(this._listStart.variations&&this._listStart.variations.length&&this._currentMove.varLevel>0){var o=this._currentMove.prev;this._currentMove.prev=e,e.prev=o,o.next=e,e.next=this._currentMove,e.varLevel=o.varLevel}else e.next=this._listStart.next,e.next.prev=e,e.prev=this._listStart,e.varLevel=0,this._listStart.next=e,this._currentMove=e.next;else{if(!this.atEnd())return this.insertAsVariation(e,{ignoreIfDuplicate:!r});o=this._currentMove.prev;this._currentMove.prev=e,e.prev=o,o.next=e,e.next=this._currentMove,e.varLevel=o.varLevel}return this._setStateFromPrev(e),this._addMoveMap(e),e}},{key:"insertAsVariation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreIfDuplicate,r=void 0===n||n,o=this._currentMove,i=o.variations;if(i){if(r&&o){var a=o.findVariationHead(e);if(a)return this._currentMove=a.next,a}}else i=[];o.variations=i,e.isVariationHead=!0,e.variationParent=o;var s=new A;return e.next=s,this._addMoveMap(s),s.atEnd=!0,s.prev=e,s.varLevel=o.varLevel+1,e.varLevel=o.varLevel+1,e.prev=o.prev,this._setStateFromPrev(e),i.push(e),this._currentMove=e.next,this._addMoveMap(e),e}},{key:"_setStateFromPrev",value:function(e){var t=e.prev;if(!t||t.atStart)e.setBoardState(this._startBoardState.clone());else{var n=t.getBoardState().clone().playMove(t,{copyState:!1});e.setBoardState(n)}e.next&&e.next.atEnd&&this._setStateFromPrev(e.next)}},{key:"getHeadOfMove",value:function(e,t){for(e.varLevel;!e.atStart&&(!e.isVariationHead||!t&&e.varLevel>1);)e=e.prev;return e}},{key:"_replaceVariation",value:function(e,t,n){for(var r=[],o=0;o<e.variations.length;o++)e.variations[o]!=t?r.push(e.variations[o]):r.push(n);e.variations=r}},{key:"_removeVariation",value:function(e,t){for(var n=[],r=0;r<e.variations.length;r++)e.variations[r]!=t&&n.push(e.variations[r]);e.variations=n}},{key:"foldMoves",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getFirstMove(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=0;n!=r&&!n.atEnd;)t=e(t,n,o++),n=n.next;return t}},{key:"movesMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getFirstMove(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.foldMoves((function(n,r){return r.next&&n.push(e.apply(r,t)),n}),[],n,r)}},{key:"hasMoveTimes",value:function(){return this.findAny((function(e){return e.hasMoveTime()||e.hasTimeRemaining()}))}},{key:"addPreCommentsToCurrentMove",value:function(e){this._currentMove.setPreCommentArray(e)}},{key:"addPostCommentsToCurrentMove",value:function(e){this._currentMove.setPostCommentArray(e)}},{key:"hasComments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.includeBoardAnnotations,n=void 0!==t&&t;return this.findAny((function(e){return e.hasComments(0,{includeBoardAnnotations:n})}),this._listStart,null,!0)}},{key:"findAny",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t&&t!=n&&(!r||!t.atEnd);){if(e(t))return!0;t=t.next}return!1}},{key:"fillEvalsFromAnalysis",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove(),n=[{totalDeviation:0,count:0,bestMatches:0,secondBestMatches:0},{totalDeviation:0,count:0,bestMatches:0,secondBestMatches:0}];this.foldMoves((function(t,r,o){var i=r.toLALG(),a=e[o].evals,s=a.find((function(e){return e.pv[0]==i}));if(s){if(s.isMateOrStalemateEnd){var c=r.getPostMoveBoardState();c.isCheckmate()?s.isMate=!0:c.isStalemate()&&(s.isStaleMate=!0,s.isMate=!1,s.score=0)}var l=Object.assign({},s);r.eval=l,r.eval.bestEval=a[0]==s?l:Object.assign({},a[0]),a.length>1&&(r.eval.secondBestEval=a[1]==s?l:Object.assign({},a[1]));var u=n[r.toMove()],d=function(e){return e.isMate?1e3*(e.score<0?-1:1):e.score},h=Math.max(Math.min(d(r.eval.bestEval),1e3),-1e3),p=Math.max(Math.min(d(r.eval),1e3),-1e3),f=Math.max(h-p,0);u.totalDeviation+=f,u.count++,r.eval==r.eval.bestEval?u.bestMatches++:r.eval==r.eval.secondBestEval&&u.secondBestMatches++}}),[],t),this.deviations=n}},{key:"getEvals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getFirstMove();return this.foldMoves((function(e,t){return e.push(t.eval),e}),[],e)}},{key:"movesMapAfterState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getFirstMove();return this.foldMoves((function(n,r){return r.next&&n.push(e.apply(r.next.getBoardState(),t)),n}),[],n)}},{key:"getMaterialBalances",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getFirstMove();return this.movesMapAfterState(C.prototype.getMaterialBalance,[],e)}},{key:"getGameStageScores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getFirstMove();return this.movesMapAfterState(C.prototype.getGameStageScores,[],e)}},{key:"getGameStages",value:function(){for(var e=this.getGameStageScores(),t=-1,n=-1,r=0,o=e.length;r<o;r++){var i=e[r];if(t<0&&i.middlegameScore>1&&(t=r+1),n<0&&i.endgameScore>1){n=r+1;break}}return{middlegamePly:t,endgamePly:n}}},{key:"getPGNArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove();return this.movesMap(A.prototype.toPGN,[e],t)}},{key:"getEvalScores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove();return this.movesMap(A.prototype.getEvalScore,[e],t)}},{key:"getThinkTimes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove();return this.movesMap(A.prototype.getThinkTime,[e],t)}},{key:"setThinkTimes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFirstMove();this.foldMoves((function(t,n,r){var o=e[r];null!=o&&(n.thinkTime=o)}),[],t)}},{key:"getFenArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getFirstMove(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.movesMap(A.prototype.toFen,[],e,t)}},{key:"getLalgArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getFirstMove(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.movesMap(A.prototype.toLALG,[],e,t)}},{key:"setFromLalgArray",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.INITIAL_FEN;this.initFromFen(n),e.forEach((function(e){t.insertNewMove(A.createFromLalg(e))}))}},{key:"getMoveForPly",value:function(e){for(var t=this.getFirstMove(),n=0;!t.atEnd&&n<e;)t=t.next,n++;return t}},{key:"getMoveFromId",value:function(e){return this._moves[e]}},{key:"gotoMoveId",value:function(e){var t=this.getMoveFromId(e);return this.setCurrentMove(t),t}},{key:"setCurrentMove",value:function(e){this._currentMove=e}},{key:"getCurrentMove",value:function(e){return this._currentMove}},{key:"findFen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startMove,n=void 0===t?null:t,r=e.fen,o=e.fallbackToStrippedFen,i=void 0===o||o,a=e.mainLineOnly,s=void 0!==a&&a,c=e.mainLineFirst,l=void 0===c||c;n||(n=this.getFirstMove());var u=this._findFen2(n,r,s,l);if(u.move)return u.usePrev?u.move.prev:u.move;if(i){if(u.clockStrip)return u.usePrev?u.clockStrip.prev:u.clockStrip;if(u.fullStrip)return u.usePrev?u.fullStrip.prev:u.fullStrip}return null}},{key:"_findFen2",value:function(e,t,n,r){var o=Object(),i=null,a=null,s=!0;o.move=null;var c=[];function l(e){e.clockStrip?(i=e.clockStrip,s=e.usePrev):e.fullStrip&&(a=e.fullStrip,s=e.usePrev)}for(;e;){var u=e.toFen();if(u==t)return o.move=e,o.clockStrip=null,o.fullStrip=null,o.usePrev=!0,o;if(C.fenSamePosition(t,u)?i=e:C.fenSamePosition(t,u,!0)&&(a=e),!n&&e.variations&&e.variations.length>0)for(var d=0;d<e.variations.length;d++){if(r)c.push(e.variations[d]);else if(h=this._findFen2(e.variations[d],t,n,r)){if(h.move)return h;l(h)}}e,e=e.next}for(d=c.length-1;d>=0;d--){var h;if(h=this._findFen2(c[d],t,n,r)){if(h.move)return h;l(h)}}return i&&(o.clockStrip=i),a&&(o.fullStrip=a),s&&(o.usePrev=s),o}},{key:"getPathToMove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentMove(),t=[];e&&!e.atStart;)e.atEnd||e.isEmpty||t.push(e),e=e.prev;return t=t.reverse()}},{key:"deleteLineToEnd",value:function(e){if(!e.atEnd)if(e.isVariationHead)this._removeVariation(e.variationParent,e),this.setCurrentMove(e.variationParent.next);else{var t=new A;this._addMoveMap(t),t.atEnd=!0,t.varLevel=e.varLevel,e.prev.next=t,t.prev=e.prev,0==e.varLevel&&(this._listEnd=t),this._setStateFromPrev(t),this.setCurrentMove(t)}}},{key:"promoteVariation",value:function(e){if(0!=e.varLevel){var t=this.getHeadOfMove(e,!0),n=t.variationParent,r=t.varLevel;t.isVariationHead=n.isVariationHead,n.isVariationHead=!0,t.variationParent=n.variationParent,n.variationParent=t,!t.isVariationHead&&n.prev&&(n.prev.next=t),t.variations||(t.variations=[]),t.variations.push(n),t.isVariationHead&&t.variationParent&&this._replaceVariation(t.variationParent,n,t),this._removeVariation(n,t),this._updateVariationLevels(t,r-1),this.setCurrentMove(e)}}},{key:"_updateVariationLevels",value:function(e,t){for(var n=e;null!=n;){if(n.varLevel=t,n.variations)for(var r=0;r<n.variations.length;r++)this._updateVariationLevels(n.variations[r],t+1);n=n.next}}},{key:"toCT",value:function(){var e={v:[]},t=e.v,n=function e(t,n){for(var r=function(){var r=t.toCT();n.push(r),t.variations&&t.variations.length&&(r.v=[],t.variations.forEach((function(t){var n=[];r.v.push(n),e(t,n)}))),t=t.next};t&&!t.atEnd;)r()};return n(this.getFirstMove(),t),(this._listStart.preCommentArray&&this._listStart.preCommentArray.length||this._listStart.preArrows&&this._listStart.preArrows.length||this._listStart.preSquares&&this._listStart.preSquares.length||this._listStart.variations&&this._listStart.variations.length)&&(e.ds=this._listStart.toCT(),this._listStart.variations&&this._listStart.variations.length&&(e.ds.v=[],this._listStart.variations.forEach((function(t){var r=[];e.ds.v.push(r),n(t,r)})))),(this._listEnd.preCommentArray&&this._listEnd.preCommentArray.length||this._listEnd.preArrows&&this._listEnd.preArrows.length||this._listEnd.preSquares&&this._listEnd.preSquares.length)&&(e.de=this._listEnd.toCT()),e}}]),e}();function Ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}Wr.fromCT=function(e){var t=new Wr(e.h.FEN||C.INITIAL_FEN),n=function e(n,r){if(n&&n.length)for(var o=0;o<n.length;o++){var i=n[o],a=A.fromCT(i);a.updateCommentCommands(),t.playMove(a,{addDuplicateAsVariation:!0}),a.updateCommentCommands(0),i.v&&function(){var n=t.getCurrentMove();i.v.forEach((function(o){t.backMove(),e(o,r+1),t.setCurrentMove(n)}))}()}};if(n(e.ml.v,0),e.ml.ds){var r=A.fromCT(e.ml.ds);if(r.updateCommentCommands(-1),t._listStart.preCommentArray=r.preCommentArray,t._listStart.preArrows=r.preArrows,t._listStart.preSquares=r.preSquares,e.ml.ds.v&&e.ml.ds.v.length){var o=t.getCurrentMove();t.setCurrentMove(t._listStart),e.ml.ds.v.forEach((function(e){t.backMove(),n(e,0),t.setCurrentMove(t._listStart)})),t.setCurrentMove(o)}}if(e.ml.de){var i=A.fromCT(e.ml.de);i.updateCommentCommands(-1),t._listEnd.preCommentArray=i.preCommentArray,t._listEnd.preArrows=i.preArrows,t._listEnd.preSquares=i.preSquares}return t};var Kr=function(e){babelHelpers.inherits(n,e);var t=Ur(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.element,i=void 0===o?null:o,a=r.from,s=void 0===a?null:a,c=r.to,l=void 0===c?null:c,u=r.duration,d=void 0===u?null:u,h=r.units,p=void 0===h?"":h,f=r.propName,v=void 0===f?null:f,m=r.elemAtt,g=void 0!==m&&m,y=r.setterFunction,_=void 0===y?null:y,b=r.easingFunction,C=void 0===b?null:b,w=r.completedFunction,S=void 0===w?null:w;if(babelHelpers.classCallCheck(this,n),(e=t.call(this))._o={from:s,to:l,element:i,duration:d,units:p,propName:v,setterFunction:_,easingFunction:C,completedFunction:S},i&&(e._o.setterFunction=function(e){Array.isArray(e)?e.forEach((function(e){(e.elemAtt?i:i.style)[e.propName]=e.value+(e.units||p)})):(g?i:i.style)[v]=e+p},!s))if(Array.isArray(l)){var k=[];l.forEach((function(e){e.units||(e.units=p);var t=e.elemAtt?i:i.style;k.push({value:parseFloat(t[e.propName]),propName:e.propName,units:e.units})})),e._o.from=k}else{var A=g?i:i.style;A[v];e._o.from=parseFloat(A[v])}return e}return babelHelpers.createClass(n,[{key:"destroy",value:function(){babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"destroy",this).call(this),this.stop()}},{key:"_finishedRunning",value:function(){this._o.element&&this._o.element.classList.remove("ct-animating")}},{key:"_startedRunning",value:function(){this._o.element&&this._o.element.classList.add("ct-animating")}},{key:"start",value:function(){var e=!0;if(Array.isArray(this._o.to)){for(var t=0;t<this._o.to.length;t++)if(this._o.to[t].value!=this._o.from[t].value){e=!1;break}}else e=this._o.to==this._o.from;return this._startedRunning(),e?(this._running=!1,this._finishedRunning(),this._o.completedFunction&&this._o.completedFunction(),this.fire("completed",{})):this._animate(this._o.from,this._o.to,this._o.duration,this._o.setterFunction,this._o.easingFunction,this._o.completedFunction),this}},{key:"_createValueArray",value:function(e,t,n,r,o){for(var i=[],a=0;a<t.length;a++)i.push({value:o(e,t[a].value,n[a],r),propName:t[a].propName,units:t[a].units});return i}},{key:"_animate",value:function(e,t,r,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(this._running=!0,a?"string"==typeof a&&(a=n.easing[a]):a=n.easing.linear,Array.isArray(t)){i=[];for(var c=0;c<t.length;c++)i.push(t[c].value-e[c].value)}else i=t-e;var l=this;function u(){var n=Date.now()-d;Array.isArray(t)?o(l._createValueArray(n,e,i,r,a)):o(a(n,e,i,r)),n>=r?(l._running=!1,o(t),l._finishedRunning(),s&&(s(),l.fire("completed",{}))):l._running&&(l._animId=requestAnimationFrame(u))}var d=Date.now();this._animId=requestAnimationFrame(u)}},{key:"isRunning",value:function(){return this._running}},{key:"complete",value:function(){this._running&&(this.stop(),this._o.setterFunction(this._o.to),this._o.completedFunction&&this._o.completedFunction(),this.fire("completed",{}))}},{key:"stop",value:function(){this._running&&(cancelAnimationFrame(this._animId),this._running=!1),this._finishedRunning()}}]),n}(s.a);Kr.easing={},Kr.easing.linear=function(e,t,n,r){return n*e/r+t},Kr.easing.easeInQuad=function(e,t,n,r){return n*(e/=r)*e+t},Kr.easing.easeOutQuad=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},Kr.easing.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},Kr.easing.easeInOutQuint=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t};var $r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";babelHelpers.classCallCheck(this,e),t||(t=window._ctImgPath||""),this.imagePath=t,this.versString=".vers"+e.version}return babelHelpers.createClass(e,[{key:"getImagePath",value:function(e,t){var n="svg";t&&(n=t);var r=this.imagePath+"/images/"+n+"/"+e.name;return r+=this.versString+".svg"}},{key:"getImageHtml",value:function(e){var t="";e.imgClass&&(t=e.imgClass);var n=this.getImagePath(e),r="<img";return""!=t&&(r+=' class="'+t+'"'),e.title&&(r+=' title="'+e.title+'"',r+=' alt="'+e.title+'"'),e.id&&(r+=' id="'+e.id+'"'),e.width?r+=' width="'+e.width+'px"':r+=' width="'+e.height+'px"',e.height?r+=' height="'+e.height+'px"':r+=' height="'+e.width+'px"',r+=' src="'+n+'"',r+="></img>"}}]),e}();$r.version=1;n(185),new a.a("move-list-renderer");var Yr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useFigurineNotation:!0,ignoreComments:!1,markCommentMoves:!0,commentBoardColourOnBottom:"w",commentBoardStyle:"blue-gradient",commentBoardPieceStyle:"merida-gradient"};babelHelpers.classCallCheck(this,e),this.openTopLevelVariationChar="[",this.closeTopLevelVariationChar="]",this.twoColumnCommentHack=!1,this._o=t}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"setOptions",value:function(e){this._o=Object.assign(this._o,e)}},{key:"setOption",value:function(e,t){this._o[e]=t}},{key:"isMoveDotsRequired",value:function(e,t){return!(!e.forceDots||t.toMove!=b.BLACK)||t.toMove!=b.WHITE&&(!!e.prev.atStart||(!!e.isVariationHead||(!!(e.prev.variations&&e.prev.variations.length>0)||(!!(!this._o.ignoreComments&&e.preCommentArray&&e.preCommentArray.length>0&&this._getCommentsMarkdown(e,e.preCommentArray,!0).s)||(!!(!this._o.ignoreComments&&e.prev.postCommentArray&&e.prev.postCommentArray.length>0&&this._getCommentsMarkdown(e.prev,e.prev.postCommentArray).s)||!!(!this._o.ignoreComments&&this.twoColumnCommentHack&&0==e.varLevel&&e.prev.preCommentArray&&e.prev.preCommentArray.length>0))))))}},{key:"getCommentsMarkDown",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._getCommentsMarkdown(e,t,n,r)}},{key:"_getCommentsMarkdown",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];function i(e){var t=document.createElement("div");t.appendChild(document.createTextNode(e));var n=t.innerHTML;return n&&(n=(n=(n=n.replace(/&gt;/gm,">")).replace(/&amp;mdash;/gm,"")).replace(/&amp;zerowidthspace;/gim,"&ZeroWidthSpace;")),n}var a="",s=!1,c="ct-move-comment";r&&(c+=" ct-expand-handle-comment");for(var l={},u=0;u<t.length;u++){var d=t[u],h=void 0,p=!1,f=!1,v=!1;if(h=d.match(/(\[%(fmt)\s+([\s\S]*?)\](\s)*)+/)){var m=h[3].split(",");m.forEach((function(e){l[e]="true","inline"==e&&(p=!0),"forceBreak"==e&&(f=!0),"forceDoubleBreak"==e&&(v=!0)})),d=d.replace(/(\[%(fmt)\s+([\s\S]*?)\](\s)*)+/g,"")}d=this._escapeMarkdown(d);var g=this._expandBoardCommentFromEscapedMarkdown(this._convertMarkdownComment(i(d)),e,n);if(!s&&e.hasBoardAnnotations(n)){s=!0,g||(g="");var y=new $r;g+=" "+y.getImageHtml({name:"chess-board-bw",height:10,title:Object(o.d)("Move has board annotations")})}if(g){var _=c;p&&(_+=" ct-move-comment-specific-inline"),f&&(_+=" ct-move-comment-specific-force-break"),v&&(_+=" ct-move-comment-specific-force-double-break"),a+='<span data-comment-id="'+(n?"before":"after")+"-"+e.id+"-"+u+'" class="'.concat(_,'">')+g+"</span>"+(u<t.length-1?" ":"")}}return l["lower-alpha-list"]&&(e.lowerAlphaList=!0),l["upper-alpha-list"]&&(e.upperAlphaList=!0),{s:a,formats:l}}},{key:"_convertMarkdownComment",value:function(t){try{return e._md||(e._md=new Gr),e._md.render(t.trim())}catch(e){return console.error("Error outputting mardown comment :",e),t}}},{key:"_getCommentsText",value:function(e,t,n){for(var r,i,a="",s=!1,c=0;c<t.length;c++){var l=t[c],u=this._expandBoardComment((r=l,i=void 0,(i=document.createElement("div")).appendChild(document.createTextNode(r)),i.innerHTML),e);if(!s&&e.hasBoardAnnotations(n))s=!0,u||(u=""),u+=" "+(new $r).getImageHtml({name:"chess-board-bw",height:10,title:Object(o.d)("Move has board annotations")});u&&(a+='<span data-comment-id="'+(n?"before":"after")+"-"+e.id+"-"+c+'" class="'.concat("ct-move-comment",'">')+u+"</span>"+(c<t.length-1?" ":""))}return a}},{key:"_expandBoardCommentFromEscapedMarkdown",value:function(e,t,n){e=(e=(e=(e=(e=e.replace(/(\[%(clk)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(clko)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(emt)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(eval|evp)\s+[\s\S]*?\](\s)*)+/g," ")).replace(/(\[%(cal|csl)\s+[\s\S]*?\](\s)*)+/g,"");var r=t.clone(!1,!1,!0),o="";o=n||t.atStart?r.getBoardState().toFen():r.getBoardState().playMove(r,{dontCopyState:!0}).toFen();var i=t.arrowsAndSquaresToCodeString();i&&(i=' marks="'+i+'"'),e=e.replace(/\\(K|Q|R|B|N|P)/g,'<span class="ct-move-list-comment-figurine">$1</span>');var a={b:1,black:1}[this._o.commentBoardColourOnBottom]?'flipped="true"':"";return e.replace(/BOARD_HASH/g,'<chess-board disable-sound="true" never-active="true" '.concat(a,' disablePieceMovement="true" ').concat(i," ").concat(this._getCommentBoardStyles(),' coords-style="none" fen="').concat(o,'" data-comment-board-id="').concat(t.id,'" class="ct-move-list-comment-board"></chess-board>'))}},{key:"_getCommentBoardStyles",value:function(){return'boardStyle="'.concat(this._o.commentBoardStyle,'" pieceStyle="').concat(this._o.commentBoardPieceStyle,'"')}},{key:"_escapeMarkdown",value:function(e){return e.replace(/(\[#\])|((\s|^)#(?!#))/g,"BOARD_HASH")}},{key:"_expandBoardComment",value:function(e,t,n){e=(e=(e=(e=(e=e.replace(/(\[%(clk)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(clko)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(emt)\s+[\s\S]*?\](\s)*)+/g,"")).replace(/(\[%(eval|evp)\s+[\s\S]*?\](\s)*)+/g," ")).replace(/(\[%(cal|csl)\s+[\s\S]*?\](\s)*)+/g,"");var r=t.clone(!1,!1,!0),o="";o=t.atEnd?r.getBoardState().toFen():r.getBoardState().playMove(r,{dontCopyState:!0}).toFen();var i=t.arrowsAndSquaresToCodeString();return i&&(i=' marks="'+i+'"'),e=e.replace(/\\(K|Q|R|B|N|P)/g,'<span class="ct-move-list-comment-figurine">$1</span>'),console.error("COMMENT BEFORE # replace:",e),e.replace(/(\[#\])|((\s|^)#(?!#))/g,'<chess-board disable-sound="true" never-active="true" disablePieceMovement="true" '+i+" "+this._getCommentBoardStyles()+' coords-style="none" fen="'+o+'" data-comment-board-id="'+t.id+'" class="ct-move-list-comment-board"></chess-board>')}},{key:"_getNAGSHTML",value:function(e,t){if(e.nags){var n="";e.nags.sort((function(e,t){return e-t}));for(var r=0;r<e.nags.length;r++){var o=w.getNag(e.nags[r]);if(o.moveClass&&e.addClass(o.moveClass),!(o.unknown||t&&!o.preNag||!t&&o.preNag)&&o.glyph){var i='<span title="'+o.description+'" class="'+(o.moveAssessment?"ct-move-nag-move":t?"ct-move-nag-prenag":"ct-move-nag-position")+'">',a=o.glyph;o.preNag?a+=" ":o.moveAssessment||(a=" "+a),n+=i+a+"</span>"}}return'<span class="ct-move-nag-list">'+n+"</span>"}return""}},{key:"createHandleMove",value:function(e){var t=e.toSAN({notationStyle:this._o.notationStyle,i18n:!this._o.useFigurineNotation}),n=e.getBoardState(),r=this.getMoveNum(e,n)+" "+t;if(!this._o.ignoreComments&&e.preCommentArray&&e.preCommentArray.length>0){var o=this._getCommentsMarkdown(e,e.preCommentArray,!0,!0),i=o.s,a=o.formats,s="ct-move-comment-nonempty";a.inline&&(s+=" ct-move-comment-inline"),a.forceBreak&&(s+=" ct-move-comment-force-break"),a.forceDoubleBreak&&(s+=" ct-move-comment-force-double-break"),r='<span class="ct-move-pre-comments '+s+'">'+i+"</span>"+" "+r}return r}},{key:"getVariationHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",r=(e.toSAN({notationStyle:this._o.notationStyle,i18n:!this._o.useFigurineNotation}),e.getBoardState()),i=(this.getMoveNum(e,r),"");if(e.classes)for(var a=0;a<e.classes.length;a++)i+=" "+e.classes[a];for(var s=this.createHandleMove(e),c=e.disableFolding,l=!1,u=!1;!e.atEnd;)n+=this.getMoveHTML(e),e.lowerAlphaList&&(l=!0),e.upperAlphaList&&(u=!0),e=e.next;var d="(",h=")";1==e.varLevel&&(t?(d="",h=""):(d=this.openTopLevelVariationChar,h=this.closeTopLevelVariationChar));var p="";c&&(p+=" ct-variation-disable-folding"),l&&(p+=" ct-variation-has-lower-alpha-list"),u&&(p+=" ct-variation-has-upper-alpha-list"),(u||l)&&(p+=" ct-variation-has-list");var f='<span class="ct-variation '.concat(p,'"><span class="ct-variation-handle">\n            <span class="ct-varhandle-expand"><span role="button" aria-label="').concat(Object(o.d)("Expand variation"),'" aria-expanded="false" class="ct-varhandle-expand-marker">+</span>\n            <span class="ct-variation-first-move ').concat(i,'">').concat(s,' </span></span>\n            <span role="button" aria-label="').concat(Object(o.d)("Collapse variation"),'" aria-expanded="true" class="ct-varhandle-collapse">&minus;</span></span>\n            <span class="ct-variation-holder">\n            <span class="ct-variation-start"> ').concat(d," </span>").concat(n,'\n            <span class="ct-variation-end"> ').concat(h," </span></span></span>");return f}},{key:"_getVariationsHTML",value:function(e){if(e.variations){for(var t="",n=0;n<e.variations.length;n++)t+=this.getVariationHTML(e.variations[n]);var r="ct-move-variations";return t.indexOf("ct-variation-has-list")>=0&&(r+=" ct-variations-have-list"),'<span class="'.concat(r,'">').concat(t,"</span>")}return""}},{key:"getEmptyMoveListCommentHtml",value:function(e){if(e.preCommentArray&&e.preCommentArray.length){var t="ct-move-comment-nonempty",n=this._getCommentsMarkdown(e,e.preCommentArray,!0),r=n.s,o=n.formats;if(o.inline&&(t+=" ct-move-comment-inline"),o.forceBreak&&(t+=" ct-move-comment-force-break"),o.forceDoubleBreak&&(t+=" ct-move-comment-force-double-break"),""!=r)return'<span class="ct-move-pre-comments '.concat(t,'">').concat(r,"</span>")}return""}},{key:"getMoveListAsHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="",o=!0,i=e.getFirstMove(),a=e.getListStart(),s="",c="";if(!t&&a&&a.variations&&a.variations.length&&(c=this._getVariationsHTML(a)),i.atEnd)i=i.prev,!this._o.ignoreVariations&&i&&i.atStart&&i.preCommentArray&&i.preCommentArray.length&&(s=this.getEmptyMoveListCommentHtml(i));else{for(;!i.atEnd;){var l=null;o&&n&&n.equals(i)?(l="ct-matches-parent-line",i.addClass(l)):o=!1,r+=this.getMoveHTML(i,t),l&&i.removeClass(l),n&&(n=n.next),i=i.next}i&&i.atEnd&&i.preCommentsArray&&console.error("have empty move comment",i),!this._o.ignoreVariations&&i&&i.atEnd&&i.preCommentArray&&i.preCommentArray.length&&(s=this.getEmptyMoveListCommentHtml(i))}return c+r+'<div class="ct-move-list-empty-list-comment">'.concat(s,'</div><div class="ct-move-list-result"><span class="ct-move-list-result-comment"></span> <span class="ct-move-list-result-resultstring"></span></div>')}},{key:"getMoveHTML",value:function(e,t){var n=e.toSAN({notationStyle:this._o.notationStyle,i18n:!this._o.useFigurineNotation}),r=e.getBoardState(),o=this.getMoveNum(e,r),i="";this.isMoveDotsRequired(e,r)&&(i=" ct-move-number-has-dots ");var a=r.toMove==b.WHITE?"ct-move-white":"ct-move-black",s=this._getNAGSHTML(e),c=this._getNAGSHTML(e,!0),l="",u=t?"":this._getVariationsHTML(e),d="",h="",p="",f="";if(this._o.markCommentMoves&&e.hasComments()&&(l='<span class="ct-move-has-comment">*</span>'),!this._o.ignoreComments){if(e.preCommentArray&&e.preCommentArray.length>0){var v=this._getCommentsMarkdown(e,e.preCommentArray,!0),m=v.s,g=v.formats;p="ct-move-comment-nonempty",d=m,g.inline&&(p+=" ct-move-comment-inline"),g.forceBreak&&(p+=" ct-move-comment-force-break"),g.forceDoubleBreak&&(p+=" ct-move-comment-force-double-break")}if(e.postCommentArray&&e.postCommentArray.length>0){var y=this._getCommentsMarkdown(e,e.postCommentArray,!1),_=y.s,C=y.formats;h=_,f="ct-move-comment-nonempty",C.inline&&(f+=" ct-move-comment-inline"),C.forceBreak&&(f+=" ct-move-comment-force-break"),C.forceDoubleBreak&&(f+=" ct-move-comment-force-double-break")}}e.atEnd&&(o="",n="",i="",a="");var w="",S="";this._o.ignoreComments||(""!=d&&(w='<span class="ct-move-pre-comments '+p+'">'+d+"</span>"),""!=h&&(S='<span class="ct-move-post-comments '+f+'">'+h+"</span>"));var k=e.id,A="";if(e.classes)for(var E=0;E<e.classes.length;E++)A+=" "+e.classes[E];e.emptyMove&&(A+=" ct-null-move"),e.lowerAlphaList&&(A+=" ct-move-lower-alpha-list-item"),e.upperAlphaList&&(A+=" ct-move-upper-alpha-list-item"),(e.lowerAlphaList||e.upperAlphaList)&&(A+=" ct-move-list-item");return'<span  data-move-id="'+k+'" class="ct-move '+A+" "+i+a+'">'+w+'<span class="ct-move-notation"><span class="ct-move-number">'+o+'</span><span class="ct-move-move">'+(e.obscure?"___":c+n+s+l)+" </span></span>"+S+u+"</span>"}},{key:"getMoveNum",value:function(e,t){var n=parseInt((t.plyNumber+1)/2),r=" ";return this.isMoveDotsRequired(e,t)?r+=n+"...":t.toMove==b.WHITE&&(r+=n+"."),r}}]),e}();function Xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Jr=new a.a("annotation-panel"),Zr=function(e){babelHelpers.inherits(n,e);var t=Xr(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_boardStateChanged",value:function(e){Jr.log("annotation panel state changed");var t=this._board.getCurrentMove();t&&this.setCurrentMove(t)}},{key:"setCurrentMove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._glyphEntry){Jr.log("cm:"+e.toSAN()),e&&null===n&&(e=e.prev)&&(e.atStart&&(e=e.next),e.atEnd&&(e=null)),this._move=e,Jr.log("cm2:"+(e?e.toSAN():"null"));var r=e?e.preCommentArray:[],o=e?e.postCommentArray:[];this._glyphEntry.setGlyphs(e?e.getNags():null),this._commentEntry&&this._commentEntry.setComment(r,o,!1,n),this._setOutputMove()}else setTimeout((function(){return t.setCurrentMove(e,n)}),0)}},{key:"render",value:function(){var e=this,t=[];this.hasAttribute("no-comments")||t.push({label:Object(o.d)("Comments"),name:"commentEntryTab",active:!0,children:[{type:"Panel",html:"<move-comment-entry ".concat(this.hasAttribute("no-auto-focus")?'no-auto-focus="true"':"",">\n                                 </move-comment-entry>")}]}),t.push({label:Object(o.d)("Symbols"),name:"annotationSymbolsTab",active:0==t.length,children:[{type:"Panel",html:"<move-glyph-entry></move-glpyh-entry>"}]});var n={children:[{type:"Tabs",tabs:t}]},r='<ct-form>\n                   <script type="application/json" class="ct-config-data">\n                      '.concat(Object(q.a)(JSON.stringify(n)),"\n                   <\/script>\n                 </ct-form>"),i="";this.hasAttribute("no-actions")&&(i="ct-hidden"),this.innerHTML='<div class="ct-annotation-move-output"></div>\n             <div class="ct-annotation-tabs">'.concat(r,'</div>\n             <div class="ct-annotation-actions ').concat(i,'">\n              <icon-button icon-name="publish" data-tooltip aria-label="').concat(Object(o.d)("Promote variation"),'"\n               class="ct-annotation-promote-variation"></icon-button>\n              <icon-button icon-name="delete_forever" data-tooltip aria-label="').concat(Object(o.d)("Delete line to end"),'"\n               class="ct-annotation-delete-variation"></icon-button>\n             </div>\n            '),this.form=this.querySelector("ct-form"),setTimeout((function(){e._glyphEntry=e.querySelector("move-glyph-entry"),e._commentEntry=e.querySelector("move-comment-entry"),e._glyphEntry.on("glyphsChanged",e._glyphsChanged,e),e._commentEntry&&e._commentEntry.on("commentChanged",e._commentChanged,e)}))}},{key:"destroy",value:function(){this._del.destroy(),this._glyphEntry.destroy(),this._commentEntry&&this._commentEntry.destroy(),this._board.eventHub.unsubscribe("toMoveUpdated",this._boardStateChanged)}},{key:"_setOutputMove",value:function(){var e="";this._move&&(this._move.forceDots=!0,e=this._moveListRenderer.getMoveHTML(this._move,!0),this._move.forceDots=!1),this.querySelector(".ct-annotation-move-output").innerHTML=e}},{key:"_commentChanged",value:function(e){if(Jr.log({changedComment:e.comment}),this._move){var t=e.comment.comment?[e.comment.comment]:[];e.comment.preComment?this._move.setPreCommentArray(t):this._move.setPostCommentArray(t),this._board.moveList.refreshMoveNode(this._move),this._setOutputMove()}}},{key:"_glyphsChanged",value:function(e){var t=e.glyphs;Jr.log(t,"glyphs changed"),this._move&&(this._move.setNags(t),this._board.moveList.refreshMoveNode(this._move),this._setOutputMove(),this._board.eventHub.fire("glyphsChanged",{glyphs:t,move:this._move}))}},{key:"connectedCallback",value:function(){var e=this;this._board=document.querySelector("chess-board[data-id='".concat(this.getAttribute("data-board-id"),"']")),this._board.eventHub.on("toMoveUpdated",this._boardStateChanged,this),this._moveListRenderer=new Yr,this.render(),this._del=new c.a,this._del.delegate(this,"tap",".ct-annotation-promote-variation",(function(t){e._board.moveList.promoteVariation()}),this),this._del.delegate(this,"tap",".ct-annotation-delete-variation",(function(t){e._board.moveList.deleteLineToEnd()}),this)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}window.customElements.define("annotation-panel",Zr);var eo=new a.a("board-prefs-component"),to=function(e){babelHelpers.inherits(r,e);var t=Qr(r);function r(){var e;return babelHelpers.classCallCheck(this,r),self=e=t.call(this),babelHelpers.possibleConstructorReturn(e,self)}return babelHelpers.createClass(r,[{key:"_persist",value:function(e,t){Le.setItem(this.board.persistId+"-"+e,t)}},{key:"_hoverOverBoardStyle",value:function(e){this.board.changeBoardStyle(e)}},{key:"_endHoverOverBoardStyle",value:function(){this.board.changeBoardStyle(this.currentBoardStyle)}},{key:"_selectBoardStyle",value:function(e){this.currentBoardStyle=e,this.board.changeBoardStyle(e)}},{key:"_hoverOverPieceStyle",value:function(e){this.board.changePieceStyle(e)}},{key:"_endHoverOverPieceStyle",value:function(){this.board.changePieceStyle(this.currentPieceStyle)}},{key:"_selectPieceStyle",value:function(e){this.currentPieceStyle=e,this.board.changePieceStyle(e)}},{key:"connectedCallback",value:function(){var e=this;this._isApp=!!document.querySelector(".ct-app"),this.board=document.querySelector("chess-board[data-id='".concat(this.getAttribute("data-board-id"),"']")),this.currentBoardStyle=this.board.getBoardStyle(),this.currentPieceStyle=this.board.getPieceStyle(),Promise.all(Bo.styles.map((function(e){n(186)("./".concat(e.name,".scss"))}))).then((function(e){})),Promise.all(E.styles.map((function(e){n(189)("./".concat(e.name,"/pieces.css"))}))).then((function(e){}));var t=this;function r(e,n){return{label:e,value:n,selected:t.board.getAutoPromote()==n}}function i(e,n){return{label:e,value:n,selected:t.board.moveList.getNotationStyle()==n}}function a(e,n){return{label:e,value:n,selected:t.board.moveList.getMoveListStyle()==n}}function s(e,n){return{label:e,value:n,selected:t.board.getCoordsStyle()==n}}function c(e,n){return{label:e,value:n,selected:t.board.getCoordsSize()==n}}function l(e,n){return{label:e,value:n,checked:t.board.getMoveHighlighting()[n]}}function u(e,n){return{label:e,value:n,checked:t.board.getPreMoveHighlighting()[n]}}var d=[s(Object(o.d)("Four sides"),"four-sides"),s(Object(o.d)("Left and bottom"),"left-bottom"),s(Object(o.d)("Internal"),"internal"),s(Object(o.d)("None"),"none")];this._isApp&&(d=d.filter((function(e){return"none"==e.value||"internal"==e.value})));var h={children:[{type:"Tabs",tabs:[{label:Object(o.d)("View"),active:!0,children:[{type:"SelectList",name:"boardStyleSelect",label:Object(o.d)("Board Styles"),hideLabel:!0,height:"200px",flow:!0,choices:Bo.styles.map((function(t){return{label:t.label,value:t.name,selected:t.name==e.currentBoardStyle,content:'<div class="ct-board-squares-sample ct-board-style-'.concat(t.name," ").concat(t.type,'"><div class="ct-board-squares"><div class="ct-board-row"><div data-square-id="a4" class="ct-sample-square ct-square-light"></div><div data-square-id="b4" class="ct-sample-square ct-square-dark"></div></div><div class="ct-board-row"><div data-square-id="a3" class="ct-sample-square ct-square-dark"></div><div data-square-id="b3" class="ct-sample-square ct-square-light"></div></div></div></div>')}}))},{type:"SelectList",name:"pieceStyleSelect",label:Object(o.d)("Piece Styles"),hideLabel:!0,height:"200px",choices:E.styles.map((function(t){return{label:t.label,value:t.name,selected:t.name==e.currentPieceStyle,content:'<div class="ct-piece-samples ct-piece-style-'.concat(t.name,'">\n                                          <div class="ct-piece-samples-colour-set">\n                                           <div class="ct-pieceClass ct-piece-whiteking"></div>\n                                           <div class="ct-pieceClass ct-piece-whitequeen"></div>\n                                           <div class="ct-pieceClass ct-piece-whiterook"></div>\n                                           <div class="ct-pieceClass ct-piece-whitebishop"></div>\n                                           <div class="ct-pieceClass ct-piece-whiteknight"></div>\n                                           <div class="ct-pieceClass ct-piece-whitepawn"></div>\n                                          </div>\n                                          <div class="ct-piece-samples-colour-set">\n                                           <div class="ct-pieceClass ct-piece-blackking"></div>\n                                           <div class="ct-pieceClass ct-piece-blackqueen"></div>\n                                           <div class="ct-pieceClass ct-piece-blackrook"></div>\n                                           <div class="ct-pieceClass ct-piece-blackbishop"></div>\n                                           <div class="ct-pieceClass ct-piece-blackknight"></div>\n                                           <div class="ct-pieceClass ct-piece-blackpawn"></div>\n                                          </div>\n                                         </div>')}}))},{type:"Select",name:"coordsStyle",label:Object(o.d)("Coordinates style"),choices:d},{type:"Select",name:"coordsSize",label:Object(o.d)("Coordinates size"),choices:[c(Object(o.d)("Tiny"),"tiny"),c(Object(o.d)("Small"),"small"),c(Object(o.d)("Medium"),"medium"),c(Object(o.d)("Large"),"large"),c(Object(o.d)("Very large"),"very-large")]}]},{label:Object(o.d)("Moving"),children:[{type:"Toggle",name:"dragAndDrop",checked:this.board.getDragAndDrop(),label:Object(o.d)("Drag and drop moving")},{type:"Toggle",name:"clickAndClick",checked:this.board.getClickAndClick(),label:Object(o.d)("Click-click moving")},{type:"Toggle",name:"confirmMoves",checked:this.board.getConfirmMoves(),label:Object(o.d)("Confirm moves")},{type:"Select",name:"autoPromote",label:Object(o.d)("Auto promote to queen"),choices:[r(Object(o.d)("Disabled"),"disabled"),r(Object(o.d)("Always"),"always"),r(Object(o.d)("On premove"),"premove")]},{type:"SingleRangeSlider",label:Object(o.d)("Piece movement speed"),minLabel:Object(o.d)("Fast"),maxLabel:Object(o.d)("Slow"),name:"pieceMovementSpeed",minimum:0,width:"300px",maximum:1e3,initialValue:this.board.getPieceMovementSpeed(),step:3},{type:"SingleRangeSlider",label:Object(o.d)("Autoplay speed"),minLabel:Object(o.d)("Fast"),maxLabel:Object(o.d)("Slow"),name:"autoplaySpeed",minimum:10,width:"300px",maximum:5e3,initialValue:this.board.moveList.getautoplaySpeed(),step:10},{type:"CheckboxGroup",name:"moveHighlighting",label:Object(o.d)("Move Highlighting"),choices:[l(Object(o.d)("Square Color"),"square-colour"),l(Object(o.d)("Arrows"),"arrow")]},{type:"CheckboxGroup",name:"preMoveHighlighting",label:Object(o.d)("Pre-move Highlighting"),choices:[u(Object(o.d)("Square Color"),"square-colour"),u(Object(o.d)("Arrows"),"arrow")]}]},{label:Object(o.d)("Move list"),children:[{type:"Select",name:"moveListStyle",label:Object(o.d)("Move list style"),choices:[a(Object(o.d)("Indented"),"indented"),a(Object(o.d)("Two Column"),"twocolumn")]},{type:"Toggle",name:"figurineNotation",checked:this.board.moveList.getFigurineNotation(),label:Object(o.d)("Figurine notation")},{type:"Select",name:"notationStyle",label:Object(o.d)("Notation style"),comment:Object(o.d)("Used in accessible board description and move list output.")+" "+Object(o.d)("If not using a screen reader, best left set to standard."),choices:[i(Object(o.d)("Standard (e.g. Na3)"),"standard"),i(Object(o.d)("FIDE (e.g. knight anna 3)"),"fide"),i(Object(o.d)("NATO (.e.g. knight alpha 3)"),"nato")]},{type:"SingleRangeSlider",label:Object(o.d)("Move List Font Size"),minLabel:Object(o.d)("Small"),maxLabel:Object(o.d)("Large"),name:"moveListFontSize",minimum:8,width:"300px",maximum:22,initialValue:this.board.moveList.getMoveListFontSize(),step:1}]},{label:Object(o.d)("Other"),children:[{type:"Toggle",name:"boardSounds",checked:this.board._boardSounds&&this.board._boardSounds.getEnabled(),label:Object(o.d)("Board sounds")}]}]}]},p='<ct-form>\n                   <script type="application/json" class="ct-config-data">\n                      '.concat(Object(q.a)(JSON.stringify(h)),"\n                   <\/script>\n                 </ct-form>");this.innerHTML=p;var f=this.querySelector("ct-form");f.on("inputChange",(function(t){switch(eo.log({e:t},"prefs got input change"),t.name){case"moveHighlighting":e.board.changeMoveHighlighting(t.value,t.checked);break;case"preMoveHighlighting":e.board.changePreMoveHighlighting(t.value,t.checked);break;case"figurineNotation":e.board.moveList.changeFigurineNotation(t.checked);break;case"boardSounds":e.board.changeBoardSounds(t.checked);break;case"clickAndClick":e.board.changeClickAndClick(t.checked);break;case"dragAndDrop":e.board.changeDragAndDrop(t.checked);break;case"confirmMoves":e.board.legalMoveHandler&&e.board.changeConfirmMoves(t.checked);break;case"pieceMovementSpeed":e.board.changePieceMovementSpeed(parseInt(t.value));break;case"autoplaySpeed":e.board.moveList.changeAutoplaySpeed(parseInt(t.value));break;case"moveListFontSize":e.board.moveList.changeFontSize(parseInt(t.value))}})),f.on("selectChange",(function(t){switch(eo.log({e:t},"prefs got select change"),t.name){case"notationStyle":e.board.moveList.changeNotationStyle(t.value);break;case"moveListStyle":e.board.moveList.changeMoveListStyle(t.value);break;case"autoPromote":e.board.changeAutoPromote(t.value);break;case"coordsStyle":e.board.changeCoordsStyle(t.value);break;case"coordsSize":e.board.changeCoordsSize(t.value)}})),f.on("hoverListItem",(function(t){switch(eo.log({e:t},"hover item"),t.name){case"boardStyleSelect":e._hoverOverBoardStyle(t.value);break;case"pieceStyleSelect":e._hoverOverPieceStyle(t.value)}})),f.on("hoverEndListItem",(function(t){switch(t.name){case"boardStyleSelect":e._endHoverOverBoardStyle(t.value);break;case"pieceStyleSelect":e._endHoverOverPieceStyle(t.value)}})),f.on("selectedListItem",(function(t){switch(t.name){case"boardStyleSelect":e._selectBoardStyle(t.value);break;case"pieceStyleSelect":e._selectPieceStyle(t.value)}}))}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}}]),r}(babelHelpers.wrapNativeSuper(HTMLElement));function no(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}window.customElements.define("board-preferences",to);var ro=new a.a("board-controls-component"),oo=function(e){babelHelpers.inherits(n,e);var t=no(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_init",value:function(){this.setupAttributeParent("controls"),this._p="true"===this.getAttr("p"),this._external="true"===this.getAttr("external"),this._menuOrientation=this.getAttr("menu-orientation")||"right",this._menuDirection=this.getAttr("menu-direction")||"up",this._tooltipNavDisabled="true"==this.getAttr("tooltip-nav-disabled"),this.render(),this._del=new c.a,this._setupEventHanlders()}},{key:"_fullscreenChanged",value:function(e){var t="fullscreen_exit";J.isFullscreen()||(t="fullscreen");var n=this.querySelector(".ct-board-action-toggleFullscreen i");n&&(n.innerHTML=t)}},{key:"connectedCallback",value:function(){this.classList.add("ct-noselect"),this._buttonsByName={},J.on("fullscreenChanged",this._fullscreenChanged,this),this._init()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}},{key:"destroy",value:function(){this._del.destroy()}},{key:"_setupEventHanlders",value:function(){var e=V.a.isMobile()?"touchstart":Object(u.a)("pointerdown"),t=V.a.isMobile()?"touchend":Object(u.a)("pointerup"),n=V.a.isMobile()?"touchend":Object(u.a)("pointerout");this._del.delegate(this,"tap",".ct-action-confirm-cancel-button",this._handleNavCancelButton,this),this._del.delegate(this,"tap",".ct-board-nav-action",this._handleNavButton,this),this._del.delegate(this,e,".ct-action-repeatable",this._handleNavButtonRepeat,this),this._del.delegate(this,t,".ct-action-repeatable",this._handleNavButtonRepeatEnd,this),this._del.delegate(this,n,".ct-action-repeatable",this._handleNavButtonRepeatEnd,this),this._del.delegate(this,"tap",".ct-confirm-move-button",this._confirmMove,this),this._del.delegate(this,"tap",".ct-cancel-move-button",this._cancelMove,this)}},{key:"_executeNavCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._buttonsByName[e];this._board&&this._board.moveList&&this._board.moveList.makeActive&&this._board.moveList.makeActive(),this._board.moveList&&n&&n.action?n.action.call(this,t):Ae.showToast("No game selected",ke.INFO_TIMEOUT)}},{key:"_handleNavCancelButton",value:function(e){var t=e.currentTarget;return ro.log({e:e},"nav cancel button clicked"),t.classList.add("ct-hidden"),e.preventDefault(),e.origEvent&&e.origEvent.stopPropagation(),!1}},{key:"closeAllButtons",value:function(){Array.prototype.forEach.call(this.querySelectorAll(".ct-action-confirm-cancel-button"),(function(e){e.classList.add("ct-hidden")}))}},{key:"_handleNavButton",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-nav-cmd"),r=t.parentNode.parentNode.querySelector(".ct-action-confirm-cancel-button");if(ro.log({button:t,confirmCancelButton:r,cmd:n},"handle nav have confirm cancel"),r){if(r.classList.contains("ct-hidden"))return r.classList.remove("ct-hidden"),t.parentNode.classList.add("ct-action-confirming"),!0;t.parentNode.classList.remove("ct-action-confirming"),r.classList.add("ct-hidden")}return this._executeNavCommand(n,e),!0}},{key:"_doActionRepeat",value:function(e){var t=this,n=e.repeatRate;e._repeating?this._executeNavCommand(e.name):(e._repeating=!0,n=void 0!==e.repeatPause?e.repeatPause:600),e._repeatTimer=setTimeout((function(){t._doActionRepeat(e)}),n)}},{key:"_handleNavButtonRepeat",value:function(e){var t=e.currentTarget.getAttribute("data-nav-cmd"),n=this._buttonsByName[t];return n&&(n._repeatTimer&&(clearTimeout(n._repeatTimer),n._repeatTimer=null),n._repeating=!1,this._doActionRepeat(n)),!0}},{key:"_handleNavButtonRepeatEnd",value:function(e){var t=e.currentTarget.getAttribute("data-nav-cmd"),n=this._buttonsByName[t];return n&&n._repeatTimer&&(clearTimeout(n._repeatTimer),n._repeatTimer=null),!0}},{key:"showActions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){var n=e.querySelector(".ct-board-action-"+t);n&&("button"==n.type&&(n=B.a.getComponentFromButton(n)),n.classList.remove("ct-hidden"))}))}},{key:"hideActions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this._rendered)return ro.log("not rendered yet, spinning on hide"),void setTimeout((function(){return e.hideActions(t)}),0);t.forEach((function(t){ro.log("hiding action for h:"+t);var n=e.querySelector(".ct-board-action-"+t);n&&("button"==n.type&&(n=B.a.getComponentFromButton(n)),n.classList.add("ct-hidden"))}))}},{key:"_renderButton",value:function(e){var t=Object(F.a)(),n=e.title||e.label||"";e.icon&&(e.iconName=e.icon,e.iconOnly=!0),e.svgIcon&&(e.svgIconName=0==e.svgIcon.indexOf("/images")?e.svgIcon:"/images/".concat(e.svgIcon,".svg"),e.iconOnly=!0),e.labelAsIcon&&(e.iconOnly=!0),e.attributes=[["data-nav-cmd",e.name]],e.tooltip=e.tooltipDisabled?null:n,e.buttonId=t;var r=void 0!==e.repeatRate;e.buttonClasses="ct-board-nav-action ".concat(r?"ct-action-repeatable":""," ct-board-action-").concat(e.name);var o="";e.confirmable&&(o='<span data-confirm-action="'.concat(e.name,'" class="ct-hidden ct-action-confirm-cancel-button"><i class="material-icons">cancel</i></span>'));var i=B.a.create(e)+o;return this._buttonsByName[e.name]=e,'<div class="ct-board-action-button-holder" data-button-name="'.concat(e.name,'">').concat(i,"</div>")}},{key:"_renderButtons",value:function(e){var t=this,n=(this._tooltipNavDisabled,{showPgn:!0,viewInDb:!0}),r=e.find((function(e){return e.menu}));r=(r=r?r.menu:[]).filter((function(e){if(t._p&&n[e.name])return!1;if(t._external&&"playAgainstComputer"==e.name)return!1;if("toggleFullscreen"==e.name){if(document.querySelector(".ct-no-full-screen"))return!1;if(V.a.isMobile())return!1}return!0}));var i=e.map((function(e){return e.menu||t._p&&n[e.name]||t._external&&"analyse"==e.name?"":t._renderButton(e)})).join(""),a="rotary",s="40";V.a.isMobile()&&(a="down"==this._menuDirection?"grid-below":"grid-above",s="2"),this.innerHTML='<div class="ct-board-control-buttons">'.concat(i,'<fab-menu spacing="').concat(s,'" type="').concat(a,'" aria-label="').concat(Object(o.d)("Board actions menu"),'"></fab-menu></div>\n             <div class="ct-hidden ct-board-control-confirm-ui">\n                <ct-button title="').concat(Object(o.d)("Confirm"),'" class="ct-confirm-move-button">').concat(Object(o.d)("Confirm",{comment:"Label for confirm move button"}),'\n               </ct-button>\n               <span class="ct-confirm-move-output"></span>\n                <ct-button title="').concat(Object(o.d)("Cancel"),'" class="ct-cancel-move-button">').concat(Object(o.d)("Cancel",{comment:"Label for cancel move button"}),"\n               </ct-button>\n             </div>");var c=this.querySelector(".ct-board-control-buttons fab-menu");r.forEach((function(e){t._buttonsByName[e.name]=e})),ro.log({menuButtons:r},"setting up default menu buttons"),c.setMenuItems(r),c.on("menuSelected",(function(e){return t._executeNavCommand(e.cmd)}))}},{key:"render",value:function(){this._rendered=!0,this._renderButtons(n.DEFAULT_BUTTONS)}},{key:"addButtons",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.buttons,r=void 0===n?[]:n,o=t.after,i=void 0===o?null:o,a=t.menu,s=void 0!==a&&a;if(ro.log({buttons:r},"adding extra menu buttons"),s){var c=this.querySelector(".ct-board-control-buttons fab-menu");r.forEach((function(t){e._buttonsByName[t.name]=t})),c.addMenuItems(r,i)}else{var l=this.querySelector(".ct-board-control-buttons"),u=this.querySelector('.ct-board-control-buttons[data-button-name="'.concat(i,'"]'));r.forEach((function(t){var n=document.createElement("div"),r=e._renderButton(t);n.innerHTML=r;var o=n.firstChild;l.insertBefore(o,u?u.nextSibling:null)}))}}},{key:"_hideButtonUI",value:function(){this.querySelector(".ct-board-control-buttons").classList.add("ct-hidden")}},{key:"_hideConfirmUI",value:function(){this.querySelector(".ct-board-control-confirm-ui").classList.add("ct-hidden")}},{key:"_showButtonUI",value:function(){this.querySelector(".ct-board-control-buttons").classList.remove("ct-hidden")}},{key:"_showConfirmUI",value:function(){this.querySelector(".ct-board-control-confirm-ui").classList.remove("ct-hidden")}},{key:"_confirmMove",value:function(){this._hideConfirmUI(),this._showButtonUI(),this._board.moveList.board.playMoveWithEventFiring(this._confirmationMove)}},{key:"_cancelMove",value:function(){this._hideConfirmUI(),this._showButtonUI()}},{key:"showConfirmMove",value:function(e){this._confirmationMove=e,this._hideButtonUI(),this.querySelector(".ct-board-control-confirm-ui").querySelector(".ct-confirm-move-output").innerHTML=e.toSAN({i18n:!this._board.moveList.getFigurineNotation()}),this._showConfirmUI()}},{key:"setBoard",value:function(e){this._board=e}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));oo.DEFAULT_BUTTONS=[{title:Object(o.d)("Jump to start"),name:"jumpToStart",icon:"skip_previous",action:function(e){this._board.moveList.jumpToStart()}},{title:Object(o.d)("Move back. Shift-click/Middle-click jump to start"),name:"back",icon:"navigate_before",repeatRate:10,tooltipDisabled:!0,action:function(e){this._board.moveList.atStart()&&this._repeatTimer&&(clearTimeout(this._repeatTimer),this._repeatTimer=null),e.shiftKey||e.button==oo.MIDDLE_BUTTON?this._board.moveList.jumpToStart():this._board.moveList.backMove()}},{title:Object(o.d)("Move forward. Shift-click/Middle-click jump to end"),name:"forward",icon:"navigate_next",repeatRate:10,tooltipDisabled:!0,action:function(e){this._board.moveList.atEnd()&&this._repeatTimer&&(clearTimeout(this._repeatTimer),this._repeatTimer=null),e.shiftKey||e.button==oo.MIDDLE_BUTTON?this._board.moveList.jumpToEnd():this._board.moveList.forwardMove()}},{title:Object(o.d)("Jump to end"),name:"jumpToEnd",icon:"skip_next",action:function(e){this._board.moveList.jumpToEnd()}},{name:"analyse",label:Object(o.d)("Analyse"),icon:"find_in_page",action:function(e){if(V.a.isMobile())ro.log("firing launch mobile analysis event"),this._board.eventHub.fire("launchMobileAnalysisBoard",{board:this._board,moveList:this._board.moveList});else{var t=Re.getSize("an-win")||{width:900,height:600};ro.log({size:t},"RESIZE GOT analysis size"),window.parentBoard=this._board,window.open("/windows/analyse.html","analysisWindow","width="+t.width+",height="+t.height+",resizable=1,scrollbars=1,location=0,copyhistory=0,status=0,toolbar=0,menubar=0").focus()}}},{title:Object(o.d)("Show board menu"),name:"menu",icon:"more_vert",menu:[{name:"showPgn",label:Object(o.d)("Show PGN"),icon:"folder",className:"ct-board-action-showPgn",action:function(e){this._board.moveList.showPGN()}},{name:"viewInDb",label:Object(o.d)("View in database"),icon:"storage",className:"ct-board-action-viewInDb",action:function(e){this._board.viewInDb()}},{name:"annotate",label:Object(o.d)("Annotate"),icon:"edit",className:"ct-board-action-annotate",action:function(e){this._board.launchAnnotatePanel()}},{name:"toggleAutoplay",label:Object(o.d)("Toggle autoplay"),icon:"play_circle_outline",className:"ct-board-action-toggleAutoplay",action:function(e){this._board.moveList.toggleAutoPlay()}},{name:"toggleFolding",label:Object(o.d)("Toggle folding"),icon:"playlist_add",className:"ct-board-action-toggleFolding",action:function(e){this._board.moveList.toggleFolding()}},{name:"toggleShowVariations",label:Object(o.d)("Toggle variations"),icon:"format_align_right",className:"ct-board-action-toggleShowVariations",action:function(e){this._board.moveList.toggleShowVariations()}},{name:"toggleFullscreen",label:Object(o.d)("Toggle fullscreen"),icon:J.isFullscreen()?"fullscreen_exit":"fullscreen",className:"ct-board-action-toggleFullscreen",action:function(e){J.isFullscreen()?J.exit():J.request(this._board.fullscreenElement)}},{name:"settings",label:Object(o.d)("Board settings"),icon:"settings",className:"ct-board-action-settings",action:function(e){var t=this._board.getAttribute("data-id");this.dialog=U.create({dimming:!1,verticalCenter:!1,title:Object(o.d)("Board Settings"),content:'<board-preferences data-board-id="'.concat(t,'"></board-preferences>'),buttons:[{label:Object(o.d)("Ok"),action:function(e){e.dialog.close()}}]})}},{name:"playAgainstComputer",label:Object(o.d)("Play vs computer"),icon:"computer",className:"ct-board-action-playAgainstComputer",action:function(e){if(V.a.isMobile())this._board.eventHub.fire("launchMobileAnalysisBoard",{board:this._board,moveList:this._board.moveList,playComp:!0});else{var t=Re.getSize("play-comp-win")||{width:900,height:600};ro.log({size:t},"RESIZE GOT play comp size"),window.parentBoard=this._board,window.open("/windows/play-against-computer.html","analysisWindow","width="+t.width+",height="+t.height+",resizable=1,scrollbars=1,location=0,copyhistory=0,status=0,toolbar=0,menubar=0").focus()}}},{name:"rotate",label:Object(o.d)("Rotate board"),icon:"cached",className:"ct-board-action-rotate",action:function(e){this._board.flipBoard()}}]}],oo.MIDDLE_BUTTON=1,Object(Te.a)(oo,Ee),window.customElements.define("board-controls",oo);n(528);var io,ao,so=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.coordsStyle,o=void 0===r?"four-sides":r,i=n.useSvg,a=void 0===i||i;babelHelpers.classCallCheck(this,e),this.board=t,this.coordsStyle=o,this.useSvg=a}return babelHelpers.createClass(e,[{key:"render",value:function(){this.removeCoordsFromBoard(),this.board.querySelector(".ct-board-inner-holder").insertAdjacentHTML("afterbegin",this.renderHTML()),this.board.querySelector(".ct-board-holder").classList.add("ct-board-coords-style-"+this.coordsStyle)}},{key:"destroy",value:function(){}},{key:"removeCoordsFromBoard",value:function(){var e=this.board.querySelectorAll(".ct-board-column-coords, .ct-board-row-coords");Array.prototype.forEach.call(e,(function(e){return e.parentNode.removeChild(e)}))}},{key:"_outputColumnRowText",value:function(e,t){if(e=Object(o.d)(e),this.useSvg){var n="50%",r="50%",i="middle",a=t?'preserveAspectRatio="xMidYMax meet"':'preserveAspectRatio="xMaxYMid meet"';"internal"==this.coordsStyle&&(i="left","100%;",a='preserveAspectRatio="xMinYMin meet"',t?(n="3",r="10",a='preserveAspectRatio="xMinYMin meet"'):(r="10",n="3"));return'<svg xmlns="http://www.w3.org/2000/svg" pointer-events="none" width="100%" height="100%" '+a+' viewBox="0 0 20 20"><text x="'+n+'" y="'+r+'" font-family="verdana;sans-serif" text-anchor="'+i+'" dy=".35em" font-size="16px">'+e+"</text></svg>"}return e}},{key:"renderHTML",value:function(){var e=["a","b","c","d","e","f","g","h"],t="",n=this.board.isFlipped(),r="ct-coord-column";"four-sides"==this.coordsStyle||"left-bottom"==this.coordsStyle?r+=" ct-flex-justify-grow-all":"internal"==this.coordsStyle&&(r+=" ct-flex-grow-start");for(var o=0;o<8;o++)t+='<span class="'+r+'">'+this._outputColumnRowText(e[n?7-o:o],!0)+"</span>";r="ct-board-column-coords","four-sides"==this.coordsStyle||"left-bottom"==this.coordsStyle?r+=" ct-flex-align-justify-row":"internal"==this.coordsStyle&&(r+=" ct-flex-row");var i='<div class="'+r+' ct-board-upper-coords">'+t+"</div>",a='<div class="'+r+' ct-board-lower-coords">'+t+"</div>";t="",r="ct-coord-row","four-sides"==this.coordsStyle||"left-bottom"==this.coordsStyle?r+=" ct-flex-align-grow-all":"internal"==this.coordsStyle&&(r+=" ct-flex-grow");for(var s=8;s>=1;s--)t+='<span class="'+r+'">'+this._outputColumnRowText(n?9-s:s)+"</span>";r="ct-board-row-coords","four-sides"==this.coordsStyle||"left-bottom"==this.coordsStyle?r+=" ct-flex-align-justify-column":"internal"==this.coordsStyle&&(r+=" ct-flex-column");var c='<div class="'+r+' ct-board-left-coords">'+t+"</div>",l='<div class="'+r+' ct-board-right-coords">'+t+"</div>",u="";return"four-sides"==this.coordsStyle?(u+=i,u+=a,u+=c,u+=l):"left-bottom"!=this.coordsStyle&&"internal"!=this.coordsStyle||(u+=c,u+=a),u}}]),e}(),co=new(function(){function e(){var t=this;babelHelpers.classCallCheck(this,e),this._keyListeners=[];var n=Object(o.d)("Move Navigation"),r=(Object(o.d)("Board"),Object(o.d)("Move List"));this._keyListeners.push(Ve.on("ArrowLeft",(function(e){return t.callBoardML(e,"backMove")}),this,{text:Object(o.d)("Move back/forward one move"),group:n})),this._keyListeners.push(Ve.on("ArrowRight",(function(e){return t.callBoardML(e,"forwardMove")}),this,{text:Object(o.d)("Move back/forward one move"),group:n})),this._keyListeners.push(Ve.on("ArrowUp",(function(e){e.preventOnTrue=!0,t.callBoardML(e,"variationUp")}),this,{text:Object(o.d)("Move down variation"),group:n})),this._keyListeners.push(Ve.on("ArrowDown",(function(e){e.preventOnTrue=!0,t.callBoardML(e,"variationDown")}),this,{text:Object(o.d)("Move up variation"),group:n})),this._keyListeners.push(Ve.on("Shift+ArrowLeft",(function(e){return t.callBoardML(e,"jumpToStart")}),this,{text:Object(o.d)("Jump to start/end"),group:n})),this._keyListeners.push(Ve.on("Shift+ArrowRight",(function(e){return t.callBoardML(e,"jumpToEnd")}),this,{text:Object(o.d)("Jump to start/end"),group:n})),this._keyListeners.push(Ve.on("a",(function(e){return t.callBoard("launchAnnotatePanel")}),this,{text:Object(o.d)("Annotate"),group:r})),this._keyListeners.push(Ve.on("r",(function(e){return t.callBoard("flipBoard")}),this,{text:Object(o.d)("Rotate board"),group:n})),this._keyListeners.push(Ve.on("E",(function(e){return t.callBoardML(e,"addUserEvalToMove")}),this,{text:Object(o.d)("Add evaluation score for move"),group:r})),this._keyListeners.push(Ve.on("f",(function(e){return t.callBoardML(e,"toggleVariationFolding")}),this,{text:Object(o.d)("Toggle folding on the current variation"),group:r})),this._keyListeners.push(Ve.on("F",(function(e){return t.callBoardML(e,"toggleGlobalFolding")}),this,{text:Object(o.d)("Toggle global variation folding"),group:r})),this._keyListeners.push(Ve.on("p",(function(e){return t.callBoardML(e,"promoteVariation")}),this,{text:Object(o.d)("Promote variation into parent"),group:r})),this._keyListeners.push(Ve.on("d",(function(e){return t.callBoardMLSuppressable("deleteLineToEnd")}),this,{text:Object(o.d)("Delete to end of line"),group:r})),this._keyListeners.push(Ve.on("s",(function(e){return t.callBoard("saveBoardAnnotations")}),this,{text:Object(o.d)("Save board annotations to move"),group:r})),this._keyListeners.push(Ve.on("N",(function(e){return t.callBoardML(e,"makeNullMove")}),this,{text:Object(o.d)("Insert null move"),group:r}))}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this._keyListeners.forEach((function(e){return e.detatch()}))}},{key:"callBoard",value:function(e){var t;if(this._board){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._board)[e].apply(t,r)}}},{key:"callBoardMLSuppressable",value:function(e){var t;if(this._board&&this._board.moveList&&(!this._board.moveList.suppress||!this._board.moveList.suppress[e])){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._board.moveList)[e].apply(t,r)}}},{key:"callBoardML",value:function(e,t){var n;if(this._board&&this._board.moveList){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var a=(n=this._board.moveList)[t].apply(n,o),s={forwardMove:!0,backMove:!0,launchAnnotatePanel:!0,promoteVariation:!0};!0===a&&e.preventOnTrue&&(e.e.preventDefault(),e.e.stopPropagation()),this._board&&s[t]&&this._board.preventMoveNav&&(e.e.preventDefault(),e.e.stopPropagation())}}},{key:"getActiveBoard",value:function(){return this._board}},{key:"setActiveBoard",value:function(e){this._board=e}}]),e}());n(529);function lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var uo=new a.a("resize"),ho=function(e){babelHelpers.inherits(n,e);var t=lo(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.margins,a=void 0===i?4:i,s=o.minimumWidth,c=void 0===s?10:s,l=o.minimumHeight,u=void 0===l?10:l,d=o.keepAspectRatio,h=void 0===d||d,p=o.useVmin,f=void 0!==p&&p,v=o.initialVmin,m=void 0===v?60:v,y=o.innerElement,_=void 0===y?null:y,b=o.handles,C=void 0===b?["t","tr","r","br","b","bl","l","tl"]:b;return babelHelpers.classCallCheck(this,n),(r=t.call(this))._elem=e,r._innerElem=_,r._o={margins:a,minimumWidth:c,minimumHeight:u,keepAspectRatio:h,handles:C,useVmin:f,initialVmin:m},r._dd=new g({container:e,childSelector:".ct-resize-handle",dontMove:!0}),r._elemCursor=e.style.cursor,r._resizeType=n.NONE,r._dd.on("dragStart",r._dragStart,babelHelpers.assertThisInitialized(r)),r._dd.on("dragEnd",r._dragEnd,babelHelpers.assertThisInitialized(r)),r._dd.on("dragMove",r._dragMove,babelHelpers.assertThisInitialized(r)),r.attachHandles(),uo.log("FINISHED RESIZE SETUP"),r}return babelHelpers.createClass(n,[{key:"destroy",value:function(){babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"destroy",this).call(this),this._dd.destroy(),this._elem.removeEventListener(Object(u.a)("pointerover"),this._pointerEnterBoundListener,!0),this._elem.removeEventListener(Object(u.a)("pointerout"),this._pointerLeaveBoundListener,!0)}},{key:"attachHandles",value:function(){var e=this;this._o.handles.forEach((function(t){e._elem.style.position="relative";var n=document.createElement("div");n.innerHTML='<div class="ct-resize-handle-img-'+t+'"></div>',n.classList.add("ct-resize-handle"),n.classList.add("ct-resize-handle-"+t),n.setAttribute("data-resize-type",t),e._elem.appendChild(n)}))}},{key:"_dragStart",value:function(e){if(this._moved=!1,this._startCursor=document.body.style.cursor,this._resizeType=n.charToType[e.currentTarget.getAttribute("data-resize-type")],uo.log({resizeType:this._resizeType},"resizeType"),this._resizeType!=n.NONE){document.body.style.cursor=n.cursors[this._resizeType],this._startEvent=e,this._startOffsets=this._elem.getBoundingClientRect();var t=this._o.minimumWidth,r=this._o.minimumHeight;this._o.useVmin&&(t=this._vminToPx(t),r=this._vminToPx(r)),this._currMinWidth=t,this._currMinHeight=r}}},{key:"_scale",value:function(e,t,n,r){var o=r/t,i=n/e,a=r*n,s=e*t;return Math.abs(o*s-a)<Math.abs(i*s-a)?o:i}},{key:"_pxToVh",value:function(e){var t=window,n=document,r=n.documentElement,o=n.getElementsByTagName("body")[0];t.innerWidth||r.clientWidth||o.clientWidth;return 100*e/(t.innerHeight||r.clientHeight||o.clientHeight)}},{key:"_vhToPx",value:function(e){var t=window,n=document,r=n.documentElement,o=n.getElementsByTagName("body")[0];t.innerWidth||r.clientWidth||o.clientWidth;return(t.innerHeight||r.clientHeight||o.clientHeight)*e/100}},{key:"_vminToPx",value:function(e){var t=window,n=document,r=n.documentElement,o=n.getElementsByTagName("body")[0],i=t.innerWidth||r.clientWidth||o.clientWidth,a=t.innerHeight||r.clientHeight||o.clientHeight;return i>a?a*e/100:i*e/100}},{key:"_pxToVmin",value:function(e){var t=window,n=document,r=n.documentElement,o=n.getElementsByTagName("body")[0],i=t.innerWidth||r.clientWidth||o.clientWidth,a=t.innerHeight||r.clientHeight||o.clientHeight;return i>a?100*e/a:100*e/i}},{key:"_dragMove",value:function(e){if(this._moved=!0,this._resizeType){var t=n.typeOffsets[this._resizeType],r=(e.moveX-this._startEvent.startX)*t[0],o=(e.moveY-this._startEvent.startY)*t[1],i=this._startOffsets.width,a=this._startOffsets.height,s=i+r,c=a+o;if(this._o.keepAspectRatio){var l=this._scale(i,a,s,c);s=parseInt(i*l*(r?r/r:1)),c=parseInt(a*l*(o?o/o:1))}this._lastWidth=Math.max(s,this._currMinWidth),this._lastHeight=Math.max(c,this._currMinHeight),this._elem.style.width=this._lastWidth+"px",this._elem.style.height=this._lastHeight+"px",this._innerElem&&(this._innerElem.style.width=this._lastWidth+"px",this._innerElem.style.height=this._lastHeight+"px")}}},{key:"_dragEnd",value:function(e){document.body.style.cursor="default",this._elem.style.cursor="default",this._resizing=n.NONE,this._moved&&(this._o.useVmin&&(this._lastWidth=this._pxToVmin(this._lastWidth),this._lastHeight=this._pxToVmin(this._lastHeight),this._elem.style.width=this._lastWidth+"vmin",this._elem.style.height=this._lastHeight+"vmin",this._innerElem&&(this._innerElem.style.width=this._lastWidth+"vmin",this._innerElem.style.height=this._lastHeight+"vmin")),this.fire("resized",{width:this._lastWidth,height:this._lastHeight}))}}]),n}(s.a);function po(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.forceNumber,i=void 0===o?0:o,a=null,s=null,c=null,l=0,u=function r(){var o=Date.now()-s;o<t?a=setTimeout(r,t-o):(a=null,l=0,e.apply(n,c))};return function(){s=Date.now(),c=arguments,l++,i&&l>=i&&(l=0,e.apply(this,c),a&&(clearTimeout(a),a=null)),a||(a=setTimeout(u,t))}}ho.NONE=0,ho.TL=1,ho.TR=2,ho.BL=3,ho.BR=4,ho.TOP=5,ho.BOTTOM=6,ho.LEFT=7,ho.RIGHT=8,ho.typeOffsets=(io={},babelHelpers.defineProperty(io,ho.NONE,[null,null]),babelHelpers.defineProperty(io,ho.TL,[-1,-1]),babelHelpers.defineProperty(io,ho.TR,[1,-1]),babelHelpers.defineProperty(io,ho.BL,[-1,1]),babelHelpers.defineProperty(io,ho.BR,[1,1]),babelHelpers.defineProperty(io,ho.BOTTOM,[0,1]),babelHelpers.defineProperty(io,ho.TOP,[0,-1]),babelHelpers.defineProperty(io,ho.LEFT,[-1,0]),babelHelpers.defineProperty(io,ho.RIGHT,[1,0]),io),ho.charToType={t:ho.TOP,tr:ho.TR,r:ho.RIGHT,br:ho.BR,b:ho.BOTTOM,bl:ho.BL,l:ho.LEFT,tl:ho.TL},ho.cursors=(ao={},babelHelpers.defineProperty(ao,ho.NONE,"auto"),babelHelpers.defineProperty(ao,ho.TL,"nwse-resize"),babelHelpers.defineProperty(ao,ho.TR,"nesw-resize"),babelHelpers.defineProperty(ao,ho.BL,"nesw-resize"),babelHelpers.defineProperty(ao,ho.BR,"nwse-resize"),babelHelpers.defineProperty(ao,ho.BOTTOM,"ns-resize"),babelHelpers.defineProperty(ao,ho.TOP,"ns-resize"),babelHelpers.defineProperty(ao,ho.LEFT,"ew-resize"),babelHelpers.defineProperty(ao,ho.RIGHT,"ew-resize"),ao);var fo=new a.a("pgn-parser"),vo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parseLalg,r=void 0!==n&&n,o=t.dontValidateLalg,i=void 0!==o&&o,a=t.startFen,s=void 0===a?C.INITIAL_FEN:a,c=t.trimSpaceOnComments,l=void 0!==c&&c,u=t.findHeader,d=void 0===u||u,h=t.hyphensNewline,p=void 0!==h&&h,f=t.ignoreIllegalMoves,v=void 0!==f&&f,m=t.yieldTime,g=void 0===m?15e3:m;babelHelpers.classCallCheck(this,e),this._o={trimSpaceOnComments:l,parseLalg:r,yieldTime:g,dontValidateLalg:i,hyphensNewline:p,startFen:s,findHeader:d,ignoreIllegalMoves:v}}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"setOption",value:function(e,t){this._o[e]=t}},{key:"_parseMove",value:function(t,n){return e.parseMove(t,n,{parseLalg:this._o.parseLalg,dontValidateLalg:this._o.dontValidateLalg})}},{key:"_parseTag",value:function(t,n){var r=null,i=null;if("["==t.charAt(n)){for(var a=n;++n<t.length&&" "!=t.charAt(n)&&'"'!=t.charAt(n)&&t.charAt("]"!=n););if(!(n<t.length&&" "==t.charAt(n)))return{error:Object(o.d)("Error parsing PGN Tag, could not find tag name"),offset:n};for(r=t.substr(a+1,n-a-1);n<t.length&&" "==t.charAt(n);)n++;if(n<t.length&&'"'==t.charAt(n)){for(var s=n;++n<t.length&&'"'!=t.charAt(n);)"\\"==t.charAt(n)&&n++;return n<t.length&&'"'==t.charAt(n)?(i=t.substr(s+1,n-s-1),++n<t.length&&"]"==t.charAt(n)?{tagName:r,tagValue:i=e.unquoteString(e.unquoteTagValue(i)),offset:n}:{error:Object(o.d)("Error parsing PGN Tag, could not find closing ]"),offset:n}):{error:Object(o.d)('Error parsing PGN Tag, could not find tag " at end of tag value')+" upto:"+t.substring(n,n+100),offset:n}}return{error:Object(o.d)('Error parsing PGN Tag, could not find tag " at start of tag value')+" upto:"+t.substring(n,n+100),offset:n}}return null}},{key:"parsePGNPromise",value:function(e){var t=this;return new Promise((function(n,r){t.parsePGN(e,(function(e,t){e?r(new Error(e)):n(t)}))}))}},{key:"parsePGN",value:function(e,t,n){if(e&&"CTML:"==e.substring(0,5)){var r=_o.fromCT(JSON.parse(e.substring(5)));return r?(t&&t(null,[r]),{parsedOk:!0,pgnGames:[r]}):(t("CTML problem"),{parsedOk:!1,errorString:"CTML problem",pgnGames:null})}this._counter=0;e=e.trim().replace(/^%.*?(\r?\n)/gm,"");var o=new Array,i=new Array;this.startParseTime=(new Date).getTime();var a=this._parsePGN_yieldcont(o,1,t,n,e,i,0,0,0,new Array,0,"",null,null,new Array,new Array,{},!0,[],[],new C,!1,!1,!0,-1,"*",null,null,!1),s=new Object;return a?(s.parsedOk=!1,s.errorString=a,s.pgnGames=null):(s.parsedOk=!0,s.pgnGames=i),s}},{key:"_parsePGN_yieldcont",value:function(e,t,n,r,i,a,s,c,l,u,d,h,p,f,v,m,g,y,_,S,k,E,T,O,x,M,I,L,N){for(var R=this._o.trimSpaceOnComments,D=i.length;c<D;){var P,F=this._o.startFen,H=l,B=u,j=d,q=h,V=p,z=f,G=v,W=m,U=g,K=y,$=_,Y=S;if(N)P=c;else{var X=!1;for(P=c;P<D;P++){var J=i.charAt(P);if(X&&"["==J){K=!1;break}if("1"==J||"0"==J){if("1-0"==i.substr(P,3)||"0-1"==i.substr(P,3))break;if("1/2-1/2"==i.substr(P,7))break}else if("*"==J)break;if(K){var Z=this._parseTag(i,P);if(Z&&!Z.error){U[Z.tagName]=Z.tagValue,P=Z.offset;continue}if(Z){if(Z.error)return n&&n(Z.error),Z.error}else if(!this._o.findHeader)break}if("("==J){K=!1;break}if("{"!=J){var Q=i.substr(P,1);if("."==Q){for(var ee=P-1;ee>=0&&i.charAt(ee)>="0"&&i.charAt(ee)<="9";)ee--;ee++,i.charAt(ee)>="0"&&i.charAt(ee)<="9"&&(t=parseInt(i.substring(ee,P))),K=!1;break}if("abcdefghNQRBKO".indexOf(Q)>=0){K=!1;break}}else{var te;if(!((fe=i.indexOf("}",P+1))>=0)){var ne=Object(o.d)("PgnViewer: Error parsing PGN. Found unclosed {");return n&&n(ne),ne}me=i.substring(P+1,fe),P=fe;var re=this._parseCommentString(me,R);(te=$).push.apply(te,babelHelpers.toConsumableArray(re)),X=!0}}}N=!0;var oe=k,ie=!1,ae=!1;U.FEN&&(F=U.FEN);var se=L;O&&(oe.initFromFen(F),se=new Wr(F));var ce=P;x>=0&&(ce=x);var le=M,ue=I;for(P=P;P<D;P++){var de=-1,he=-1,pe=i.charAt(P);if("1"==pe||"0"==pe?"1-0"==i.substr(P,3)||"0-1"==i.substr(P,3)?he=3:"1/2-1/2"==i.substr(P,7)&&(he=7):"*"==pe&&(he=1),he>0){le=i.substr(P,he),c=P+he;break}if("["==pe){c=P;break}if(" "!=pe&&"\t"!=pe&&"\n"!=pe&&"\r"!=pe){if(!(pe>="0"&&pe<="9")){if("."==pe){i.substring(ce,P).replace(/^\s+|\s+$/g,"");for(ce=P;P+1<D&&"."==i.charAt(P+1);)P++;oe.toMove=ce!=P?b.BLACK:b.WHITE,ce=P+1}else if("{"==pe){var fe;if((fe=i.indexOf("}",P+1))>=0){var ve,me=i.substring(P+1,fe);P=fe,(ve=$).push.apply(ve,babelHelpers.toConsumableArray(this._parseCommentString(me,R)))}ce=P+1}else if("}"==pe)console.error("ignoring bad closing comment character at position:",P),ce=P+1;else if(";"==pe){var ge=i.indexOf("\n",P+1);if(ge>=0){var ye,_e=i.substring(P+1,ge);P=ge,(ye=$).push.apply(ye,babelHelpers.toConsumableArray(this._parseCommentString(_e,R)))}ce=P+1}else if("("==pe){var be=oe.clone(),Ce=!0;if(ue||(Ce=!1,ue=se.getListStart()),G[H]=be,W[H]=ue,H++,ie=!0,se.setCurrentMove(ue),Ce&&!ue.atStart){$.length>0&&(ue.setPostCommentArray($),$=[]);var we=ue.clone(!1,!1,!0);oe.reverseMove(we)}ue=null,ce=P+1}else if(")"==pe){if(H--,$.length>0){if(!ue){var Se=Object(o.b)("PgnViewer: Error parsing PGN. Found variation close with comments to attach, but no last move (probably a variation with no moves in it?), variation level:{VAR_LEVEL}, upto:{UPTO} pgn:{PGN}",{subs:[["VAR_LEVEL",H],["UPTO",P],["PGN",i.substring(P,P+100)]]});return n&&n(Se),Se}ue.setPostCommentArray($),$=[]}if(oe=G[H],!(ue=W[H])){var ke=Object(o.b)("PgnViewer: Error parsing PGN. Found variation close, but no last move, variation level:{VAR_LEVEL}, upto:{UPTO} pgn:{PGN}",{subs:[["VAR_LEVEL",H],["UPTO",P],["PGN",i.substring(P,P+100)]]});return n&&n(ke),ke}se.setCurrentMove(ue.next),ae=!0,ce=P+1}else{if("$"==pe){for(ee=P+1;ee<D&&i.charAt(ee)>="0"&&i.charAt(ee)<="9";ee++);if(--ee>P){if(de=parseInt(i.substr(P+1,ee+1))){var Ae=w.nags[de];this._o.preNagBeforeMove&&Ae&&Ae.preNag?Y.push(de):ue&&(ue.nags||(ue.nags=[]),ue.nags.push(de))}P=ee}continue}var Ee=-1;for(ee=P+1;ee<D;ee++)if(")"==i.charAt(ee)||"("==i.charAt(ee)||"{"==i.charAt(ee)||"}"==i.charAt(ee)||" "==i.charAt(ee)||"\t"==i.charAt(ee)||"\n"==i.charAt(ee)||"\r"==i.charAt(ee)){Ee=ee;break}-1==Ee&&(Ee=D);var Te=ce,Oe=i.substring(ce,Ee).replace(/^\s+|\s+$/g,"");if(P=(ce=Ee)-1,Oe.length>=4&&"e.p."==Oe.substring(0,4))continue;if(0==Oe.length){ne=Object(o.b)("PgnViewer: Error: got empty move endMoveInd:{ENDMOVE_INDEX} upto:{UPTO} from:{FROM}",{subs:[["ENDMOVE_INDEX",Ee],["UPTO",Te],["FROM",i.substr(Te,100)]]});return n&&n(ne),ne}for(var xe=Oe.length-1,Me=[];xe>=0;)if("+"==Oe.charAt(xe)){if(!(--xe>0&&"-"==Oe.charAt(xe))){xe++;break}Me.push(19),xe--}else if("-"==Oe.charAt(xe)){if(!(--xe>=0&&"+"==Oe.charAt(xe))){xe++;break}Me.push(18),xe--}else if("?"==Oe.charAt(xe))--xe>=0&&"!"==Oe.charAt(xe)?(Me.push(5),xe--):xe>=0&&"?"==Oe.charAt(xe)?(Me.push(4),xe--):Me.push(2);else if("!"==Oe.charAt(xe))--xe>=0&&"?"==Oe.charAt(xe)?(Me.push(6),xe--):xe>=0&&"!"==Oe.charAt(xe)?(Me.push(3),xe--):Me.push(1);else{if(this._o.parseLalg||"N"!=Oe.charAt(xe)||!(xe>0)||"="==Oe.charAt(xe-1))break;xe--,Me.push(146)}var Ie=Oe.substring(0,xe+1),Le=this._parseMove(Ie,oe);if(Le.error){if(this._o.ignoreIllegalMoves)continue;if(!this._o.convertIllegalMovestoNullMoves){ne=Object(o.b)("PgnViewer: Error parsing:{MOVE}, {ERROR_REASON}",{subs:[["MOVE",Oe],["ERROR_REASON",Le.error]]})+" upto:"+i.substring(ce,ce+100);return n&&n(ne),ne}Le.move=new A,Le.move.emptyMove=!0}de=-1,Me.length&&(Le.move.nags||(Le.move.nags=[]),Le.move.nags=Le.move.nags.concat(Me)),oe.playMove(Le.move),j++,ie?(se.insertAsVariation(Le.move,{ignoreIfDuplicate:!1}),ie=!1,$.length>0&&(Le.move.setPreCommentArray($),$=[])):se.insertNewMove(Le.move),Y.length&&(Le.move.nags||(Le.move.nags=[]),Le.move.nags=Le.move.nags.concat(Y),Y=[]),$.length&&(ue&&!ae?ue.setPostCommentArray($):Le.move.setPreCommentArray($),$=[]),ae=!1,ue=Le.move}if(P+1<D&&n&&Date.now()-this.startParseTime>this._o.yieldTime)return fo.log("yield"),this.startParseTime=Date.now(),setTimeout(this._parsePGN_yieldcont.bind(this),0,e,t,n,r,i,a,s,P+1,H,B,j,q,V,z,G,W,U,K,$,Y,oe,ie,ae,!1,ce,le,ue,se,!0),!1}}else ce=P+1}c<P&&(c=P);var Ne=i.indexOf("{",c),Re=i.indexOf("[",c);if(Ne>=0&&(-1==Re||Ne<Re)){var De=i.indexOf("}",Ne+1);if(!(De>=0)){ne=Object(o.d)("PgnViewer: Error: Unclosed {");return n&&n(ne),ne}var Pe;me=i.substring(Ne+1,De);c=De+1,(Pe=$).push.apply(Pe,babelHelpers.toConsumableArray(this._parseCommentString(me,R)))}$.length>0&&(ae?se.addPreCommentsToCurrentMove($):ue?ue.setPostCommentArray($):se._listStart.setPreCommentArray($),$=[]),"*"==le&&U.Result&&(le=U.Result),a[s]=new _o({moveList:se,startFen:F,startMoveNum:t,result:le,tags:U,moveListHeaderRenderFunction:r}),s++,l=0,u=[],d=0,h="",p=null,f=null,v=[],m=[],g=[],y=!0,_=[],k=new C,!1,!1,O=!0,x=-1,M="*",I=null,L=null,N=!1}return n&&(fo.log("parsed "+a.length+" games"),n(null,a)),!1}},{key:"_parseCommentString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._o.hyphensNewline?(e=e.split("---")).map((function(e){return A.unescapeComment(e,t)})):[A.unescapeComment(e,t)]}}]),e}();vo.pgnToCTString=function(e){if(!e)return e;if(e&&"CTML:"==e.substring(0,5))return e;var t=(new vo).parsePGN(e);if(t.pgnGames&&t.pgnGames.length){var n=t.pgnGames[0].toCT();return n?"CTML:"+JSON.stringify(n):e}return e},vo.quoteString=function(e){return e&&(e=(""+e).replace(/"/g,'\\"')),e},vo.unquoteString=function(e){return e&&(e=e.replace(/\\"/g,'"')),e},vo.quoteTagValue=function(e){return e&&(e=(""+e).replace(/\n/g,"\\n")),e},vo.unquoteTagValue=function(e){return e&&(e=e.replace(/\\n/g,"\n")),e},vo.parseMove=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.parseLalg,a=void 0!==i&&i,s=r.dontValidateLalg,c=void 0!==s&&s,l=null,u=null;"#"==e.charAt(e.length-1)?(!0,!0,e=e.substr(0,e.length-1)):"+"==e.charAt(e.length-1)&&(!0,e.length>1&&"+"==e.charAt(e.length-2)?(!0,e=e.substr(0,e.length-2)):e=e.substr(0,e.length-1));var d=null;if("O-O-O"==e||"0-0-0"==e?d=t.toMove==b.WHITE?A.createFromLalg("e1c1"):A.createFromLalg("e8c8"):"O-O"!=e&&"0-0"!=e||(d=t.toMove==b.WHITE?A.createFromLalg("e1g1"):A.createFromLalg("e8g8")),d)return t.canMove(d)?{move:d}:{error:Object(o.b)("Illegal castling move for:{MOVE} with position:{FEN}",{subs:[["MOVE",e],["FEN",t.toFen()]]})};if("--"==e||"Z0"==e){var h=new A;return h.emptyMove=!0,{move:h}}var p,f=(e=e.replace("-","")).indexOf("=");f>=0&&(p=(l=e.substr(f+1,1)).charAt(0),n=b.createFromChar(p),e=e.substr(0,f));var v=e.charAt(e.length-1)+"";v=v.toUpperCase(),"QRNB".indexOf(v)>=0&&(l=v+"",n=b.createFromChar(l),e=e.substr(0,e.length-1));var m=e.substr(e.length-2,2),g=m.charCodeAt(0)-"a".charCodeAt(0),y=m.charCodeAt(1)-"1".charCodeAt(0);if(g>7||g<0||y>7||y<0||isNaN(g)||isNaN(y))return{error:Object(o.b)("Error processing to Square:{TO_SQUARE} on move:{MOVE}",{subs:[["TO_SQUARE",m],["MOVE",e]]})};e.length>2&&("x"==e.charAt(e.length-3)?(!0,u=e.substr(0,e.length-3)):u=e.substr(0,e.length-2));var _=new Array,C=0,w=null,S=t.toMove;switch(e.charAt(0)){case"K":case"k":w=b.KING;break;case"Q":case"q":w=b.QUEEN;break;case"R":case"r":w=b.ROOK;break;case"B":w=b.BISHOP;break;case"N":case"n":w=b.KNIGHT;break;case"P":case"p":w=b.PAWN;break;default:w=b.PAWN}var k=null,E=null,T=!1;if(u){var O=u.toLowerCase().charAt(0);if(O==u.charAt(0)&&O>="a"&&O<="h")E=O,2==u.length&&(k=u.charAt(1),T=!0);else if(u.length>1)if(2==u.length){var x=u.charAt(1);x>="1"&&x<="8"?k=x:E=x}else{if(3!=u.length)return{error:Object(o.b)("Error: unhandled fromChars:{FROM_CHARS}",{subs:[["FROM_CHARS",u]]})};if(E=u.charAt(1),k=u.charAt(2),E>="1"&&E<="9"){var M=E;E=k,k=M}}}if(a&&T){var I=u.charCodeAt(0)-"a".charCodeAt(0),L=u.charCodeAt(1)-"1".charCodeAt(0),N=new A(I,L,g,y,n);return c||t.canMove(N)?{move:N}:{error:Object(o.b)("no candidate pieces for:{MOVE} with position:{FEN}",{subs:[["MOVE",e],["FEN",t.toFen()]]})}}var R=t.getPieces(w,S);return w&&n&&w!=b.PAWN&&(n=null,console.error("got promotion from piece that was not a pawn! Ignoring.",e)),R.forEach((function(e){var r=e.column,o=e.row,i=new A(r,o,g,y,n);if(t.canMove(i)){var a=String.fromCharCode("a".charCodeAt(0)+r).charAt(0),s=String.fromCharCode("1".charCodeAt(0)+o).charAt(0);null!=E&&E!=a||null!=k&&k!=s||(_[C++]=i)}})),0==C?{error:Object(o.b)("no candidate pieces for:{MOVE} with position:{FEN}",{subs:[["MOVE",e],["FEN",t.toFen()]]})}:C>1?{error:Object(o.b)("Ambiguous:{MOVE} with fromChars:{FROM_CHARS} disambigRow:{DISAMBIG_ROW} disambigCol:{DISAMBIG_COL}, with position:{FEN}",{subs:[["MOVE",e],["FROM_CHARS",u],["DISAMBIG_ROW",k],["DISAMBIG_COL",E],["FEN",t.toFen()]]})}:{move:_[0]}};var mo=/[&<>"'\/`]/g,go={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"};function yo(e){return e&&"string"==typeof e?e.replace(mo,(function(e){return go[e]})):e}var _o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.moveList,r=void 0===n?null:n,i=t.startFen,a=void 0===i?C.INITIAL_FEN:i,s=t.startMoveNum,c=void 0===s?1:s,l=t.result,u=void 0===l?"*":l,d=t.tags,h=void 0===d?{}:d,p=t.defaultStringFormat,f=void 0===p?Object(o.d)("{White} vs {Black} {Result}",{comment:"Default game output string format"}):p,v=t.moveListHeaderRenderFunction,m=void 0===v?null:v;babelHelpers.classCallCheck(this,e),this._o={moveList:r,startFen:a,startMoveNum:c,result:u,tags:h,moveListHeaderRenderFunction:m},this.defaultStringFormat=f}return babelHelpers.createClass(e,[{key:"destroy",value:function(){}},{key:"get",value:function(e){return this._o[e]}},{key:"set",value:function(e,t){this._o[e]=t}},{key:"defaultMoveListHeaderRenderFunction",value:function(t){var n=t.get("tags");function r(e){var t=n[e];return t||(t="Result"==e?"*":"?"),t}var o=r("Black"),i=r("White"),a=r("WhiteElo");"?"==a&&(a=r("WhiteRating"));var s=r("BlackElo");"?"==s&&(s=r("BlackRating"));var c=r("Event"),l=r("Date"),u=r("Round"),d=r("Site"),h=r("Result"),p=r("ECO");return'<div><span class="ct-move-list-header-player-name">'+i+"</span>"+("?"!=a?" ("+a+")":"")+' - <span class="ct-move-list-header-player-name">'+o+"</span>"+("?"!=s?" ("+s+")":"")+("?"!=h&&"*"!=h?" "+h:"")+"</div><div>"+("?"!=c?c:"")+("?"!=d?" ("+d+")":"")+("?"!=u?" ["+u+"]":"")+("?"!=p?" "+p:"")+("?"!=l&&"????.??.??"!=l?" "+e.outputDate(l):"")+"</div>"}},{key:"renderMoveListHeader",value:function(){return this.get("moveListHeaderRenderFunction")?this.get("moveListHeaderRenderFunction")(this):this.defaultMoveListHeaderRenderFunction(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultStringFormat,t=this.get("tags"),n=Object.keys(t).map((function(e){return[e,t[e]]})),r=Object(o.f)(e,n);return yo(r)}},{key:"getPGNHeader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n",n=this.get("tags"),r="",o=!1,i=this._o.startFen;if(n)for(var a in n){var s=n[a];if("SetUp"!=a)if("FEN"!=a){if("Date"==a&&parseInt(s)==s){var c=new Date(1e3*parseInt(s));s=e.pgnDateFromJSDate(c)}r+="["+a+' "'+vo.quoteString(vo.quoteTagValue(s))+'"]'+t}else s!=C.INITIAL_FEN&&(o=!0,i=s)}return!o&&i&&i!=C.INITIAL_FEN&&(o=!0),o&&(r+='[SetUp "1"]'+t+'[FEN "'+i+'"]'+t),r}},{key:"getCTHeader",value:function(){var e=Object.assign({},this.get("tags"));return e.FEN||(e.FEN=this._o.startFen),e}},{key:"toCT",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.get("moveList").toCT(),t=this.getCTHeader();return{ml:e,h:t}}},{key:"toPGN",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("moveList"),n="*";t&&(n=t.toPGN(e));var r=this.getPGNHeader();return""!=r&&(r+="\n"),r+n+("*"!=n?" "+this.getTag("Result"):"")}},{key:"hasTag",value:function(e){return!!this.get("tags")[e]}},{key:"getTag",value:function(e){var t=this.get("tags")[e];return t||(t="Result"==e?"*":"?"),t}},{key:"setTag",value:function(e,t){this.get("tags")[e]=t}},{key:"setTagIfUnset",value:function(e,t){"?"==this.getTag(e)&&this.setTag(e,t)}},{key:"getFilename",value:function(){return"ct-".concat(this.getTag("White"),"-").concat(this.getTag("Black"),"-").concat(this.getTag("Event"),"-").concat(this.getTag("Round"),"-").concat(e.outputDate(this.getTag("Date")),".pgn")}}]),e}();function bo(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function Co(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function wo(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Co(n.overflowY,t)||Co(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function So(e,t,n,r,o,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0}_o.outputDate=function(e){var t=Object(o.d)("?");if(e){var n=e.split(/\./);3==n.length&&"????"!=n[0]&&(t=n[0],"??"!=n[1]&&(parseInt(n[1])<10&&(n[1]="0"+parseInt(n[1])),t+="-"+n[1],"??"!=n[2]&&(parseInt(n[2])<10&&(n[2]="0"+parseInt(n[2])),t+="-"+n[2])))}return t},_o.defaultTags={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},_o.makeDefaultTags=function(){return Object.assign({},_o.defaultTags)},_o.pgnDateFromJSDate=function(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"."+n+"."+t},_o.fromCT=function(e){var t=Wr.fromCT(e);return new _o({moveList:t,startFen:e.h.FEN,result:e.h.Result||"*",tags:e.h})};var ko=function(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,s=t.skipOverflowHiddenElements,c="function"==typeof a?a:function(e){return e!==a};if(!bo(e))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,u=[],d=e;bo(d)&&c(d);){if((d=d.parentNode)===l){u.push(d);break}d===document.body&&wo(d)&&!wo(document.documentElement)||wo(d,s)&&u.push(d)}for(var h=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),g=m.height,y=m.width,_=m.top,b=m.right,C=m.bottom,w=m.left,S="start"===o||"nearest"===o?_:"end"===o?C:_+g/2,k="center"===i?w+y/2:"end"===i?b:w,A=[],E=0;E<u.length;E++){var T=u[E],O=T.getBoundingClientRect(),x=O.height,M=O.width,I=O.top,L=O.right,N=O.bottom,R=O.left;if("if-needed"===r&&_>=0&&w>=0&&C<=p&&b<=h&&_>=I&&C<=N&&w>=R&&b<=L)return A;var D=getComputedStyle(T),P=parseInt(D.borderLeftWidth,10),F=parseInt(D.borderTopWidth,10),H=parseInt(D.borderRightWidth,10),B=parseInt(D.borderBottomWidth,10),j=0,q=0,V="offsetWidth"in T?T.offsetWidth-T.clientWidth-P-H:0,z="offsetHeight"in T?T.offsetHeight-T.clientHeight-F-B:0;if(l===T)j="start"===o?S:"end"===o?S-p:"nearest"===o?So(v,v+p,p,F,B,v+S,v+S+g,g):S-p/2,q="start"===i?k:"center"===i?k-h/2:"end"===i?k-h:So(f,f+h,h,P,H,f+k,f+k+y,y),j=Math.max(0,j+v),q=Math.max(0,q+f);else{j="start"===o?S-I-F:"end"===o?S-N+B+z:"nearest"===o?So(I,N,x,F,B+z,S,S+g,g):S-(I+x/2)+z/2,q="start"===i?k-R-P:"center"===i?k-(R+M/2)+V/2:"end"===i?k-L+H+V:So(R,L,M,P,H+V,k,k+y,y);var G=T.scrollLeft,W=T.scrollTop;S+=W-(j=Math.max(0,Math.min(W+j,T.scrollHeight-x+z))),k+=G-(q=Math.max(0,Math.min(G+q,T.scrollWidth-M+V)))}A.push({el:T,top:j,left:q})}return A};function Ao(e){return e===Object(e)&&0!==Object.keys(e).length}var Eo=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(Ao(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:ko(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:Ao(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(ko(e,r),r.behavior)}};function To(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Oo=new a.a("move-list-component"),xo=function(e){babelHelpers.inherits(n,e);var t=To(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"_init",value:function(){var e=this;if(!this._initialised){this._initialised=!0,this.initAggregator(),this.setupAttributeParent("move-list");try{this.persistId=this.getAttr("persistId"),this.persistId&&(this.prefStorage=new Le("move-list-"+this.persistId))}catch(e){Oo.error({e:e},"could not create prefs storage")}if(this._setupOptions(),this._scrollMode="anim","into-view"==this.getAttr("scroll-mode")&&(this._scrollMode="into-view"),"true"==this.getAttr("dont-debounce-scroll")&&(this._dontDebounceScroll=!0),this._autoPlaying=!1,this._commentBoards={},this._p="true"===this.getAttr("p"),this.moveList=new Wr,this.setFolding(this._o.folding),this.showVariations(this._o.showVariations),this.render(),this._del=new c.a,this._setupEventHandlers(),this._o.useFigurineNotation&&this.changeFigurineNotation(!0),this._movesNotAllowed="true"==this.getAttr("making-moves-not-allowed"),this._mutationEvents="true"==this.getAttr("mutation-events"),this.changeMoveListStyle(this._o.moveListStyle),this.getAttr("fontSize")?this.changeFontSize(this.getAttr("fontSize")):this.changeFontSize(this._o.fontSize),this.setAttribute("aria-live","polite"),"true"==this.getAttr("resizable")){var t=this.getAttr("resize-handles")||"b";this._resize=new ho(this,{handles:t.split(","),keepAspectRatio:!1,innerElement:this._container}),this._resize.on("resized",(function(t){e._o.moveListSize=t,e.style.width="auto",e._container.style.width="auto",e._saveOptionsToStorage()})),this._o.moveListSize&&(this.style.height=this._o.moveListSize.height+"px",this._container.style.height=this._o.moveListSize.height+"px")}this.hasAttribute("no-hover-active")||(this.makeActive=function(t){e.board&&!e.board.getAttr("never-active")&&co.setActiveBoard(e.board)},this.addEventListener(Bo.ACTIVE_EVENT_LISTENER,this.makeActive))}}},{key:"areMovesAllowed",value:function(){return!this._movesNotAllowed}},{key:"_setupOptions",value:function(){this._o={},this._o.useFigurineNotation=!!this.getAttr("useFigurineNotation")&&"true"==this.getAttr("useFigurineNotation"),this._o.moveListStyle=this.getAttr("moveListStyle")||"indented",this._o.notationStyle=this.getAttr("notationStyle")||"standard",this._o.autoplaySpeed=this.getAttr("autoplaySpeed")||1e3,this._o.fontSize=this.getAttr("fontSize")||16,this._o.lastFoldAll=!1,this._o.folding=this.getAttr("folding"),this._o.showVariations=!0,this._o.commentBoardColourOnBottom=this.getAttr("comment-board-colour-on-bottom")||"w",this._o.commentBoardPieceStyle=this.getAttr("commentBoardPieceStyle")||"merida-gradient",this._o.commentBoardStyle=this.getAttr("commentBoardStyle")||"blue-gradient",this._restoreOptionsFromStorage(),this._moveListRenderer.setOptions(this._o)}},{key:"_restoreOptionsFromStorage",value:function(){if(this.prefStorage){var e=this.prefStorage.getObject("options");e&&(n.nonPersistedOptions.forEach((function(t){delete e[t]})),Object.assign(this._o,e))}}},{key:"getOptions",value:function(){return this._o}},{key:"_saveOptionsToStorage",value:function(){if(this.prefStorage){var e=Object.assign({},this._o);n.nonPersistedOptions.forEach((function(t){delete e[t]})),this.prefStorage.setObject("options",e)}}},{key:"annotateGameFromEvals",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.moveList.getEvalNags();Oo.time("annotateGamefromEvals"),this.classList.add("ct-move-list-annotated");var r=!1;this._fireMutation();var i=function(n,r,o,i){e.setOption("startFen",n.getBoardState().toFen());var a=e.parsePGN(i?n.eval.pv.join(" "):n.eval.bestEval.pv.join(" ")).pgnGames[0].get("moveList").getFirstMove(),s=A.evalToString(n.eval.bestEval,n.toMove(),!0),c=A.evalToString(n.eval,n.toMove(),!0);if(r){var l=s!=c?" ".concat(s,"  ").concat(c):"";n.addPostComment("".concat(r.text).concat(l))}a.addPreComment(r&&r.betterText||o),t.insertMoveSequenceAtIndex(a,n.id,-1,!0)};if(r&&Oo.log({nags:n},"CALLED ANNOTATE GAME FROM EVALS"),!this._annotated){var a=[];this.moveList.foldMoves((function(e,t,s){var c=n[s],l=!1;(r&&Oo.log({idx:s,nag:c,mpgn:t.toPGN({forceMoveNumber:!0})},"ACTUAL ANNOTATE NAG idx"),c.nag&&c.text)&&(r&&Oo.log({nag:c},"ACTUAL ANNOTATE NAG"),t.nags=t.nags||[],t.nags=[c.nag],t.eval&&t.eval.bestEval&&!c.noLine?(i(t,c,c.lineLabel||Object(o.d)("Better is")),l=!0):t.addPostComment(c.text),a.push(t));l||!t.next||!t.next.atEnd||!t.eval||t.eval.isStalemate||t.eval.isMate&&1==t.eval.score||(Oo.log({eval:t.eval,m:t},"could have continued"),i(t,null,Object(o.d)("Game could have continued"),!0)),t&&!t.eval&&Oo.log({m:t},"got move with no eval")})),Oo.time("refreshMoves"),a.forEach((function(e){return t.refreshMoveNode(e,!1,!0)})),Oo.timeEnd("refreshMoves"),this._annotated=!0,Oo.timeEnd("annotateGamefromEvals"),this.fire("moveListChanged",{})}}},{key:"getPgnGame",value:function(){var e=this._pgnGame;if(!e){var t=this.moveList&&this.moveList.fen?this.moveList.fen:C.INITIAL_FEN;e=new _o({tags:_o.makeDefaultTags(),startFen:t})}return e}},{key:"toPGN",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startMv,n=void 0===t?this.moveList.getFirstMove():t,r=e.numMoves,o=void 0===r?0:r,i=e.matchIndexes,a=void 0===i?null:i,s=e.outputLalg,c=void 0!==s&&s,l=e.ignoreVariations,u=void 0!==l&&l,d=e.outputMoveTimes,h=void 0!==d&&d,p=e.outputBoardAnnotations,f=void 0===p||p,v=e.ignoreComments,m=void 0!==v&&v,g=(e.zeroMoveHack,this.getPgnGame()),y=this.moveList.toPGN({outputMoveTimes:h,ignoreComments:m,zeroMoveHack:!0,outputBoardAnnotations:f,startMv:n,numMoves:o,matchIndexes:a,outputLalg:c,ignoreVariations:u}),_=g.getPGNHeader(),b=g.getTag("Result")||"*";return _+"\n"+y+" "+b}},{key:"showPGN",value:function(){var e=this,t=this.moveList.hasMoveTimes(),n=this.moveList.hasComments({includeBoardAnnotations:!0}),r=!0,i=!1,a=this.getPgnGame(),s=function(){return e.toPGN({outputMoveTimes:r,ignoreComments:i,outputBoardAnnotations:!i})};this._p&&(s=function(){return""});var c={children:[{type:"TextField",fieldType:"textarea",name:"pgnField",classes:"ct-show-pgn-field",label:Object(o.d)("PGN"),rows:0,nameAsId:!0,value:s()},{type:"Toggle",name:"showComments",hide:!n,label:Object(o.d)("Comments"),nameAsId:!0,checked:n},{type:"Toggle",name:"showMoveTimes",hide:!t,label:Object(o.d)("Move times"),nameAsId:!0,checked:t}]},l=(Object(F.a)(),Object(o.d)("Download"));document.querySelector(".ct-app")&&(l=Object(o.d)("Share"));var u=U.create({title:Object(o.d)("Game PGN"),formJson:c,buttons:[{label:l,action:function(t){var n=t.dialog.getFormJSON();document.querySelector(".ct-app")?(l=Object(o.d)("Share"),Capacitor.Plugins.Share.share({title:a.getFilename(),text:n.pgnField,dialogTitle:Object(o.d)("Share PGN")}).then((function(e){Oo.log("shared ok")})).catch((function(e){Oo.error({error:e},"sharing failed")}))):(e._dirty=!1,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?null:t,r=e.contentType,o=void 0===r?"application/octet-stream":r,i=e.filename,a=void 0===i?"download":i,s=new Blob([n],{type:o});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(s,a);else{var c=window.document.createElement("a"),l=window.URL||window.webkitURL;c.href=l.createObjectURL(s,{type:o}),c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),l.revokeObjectURL(c.href)}}({data:n.pgnField,contentType:"application/x-chess-pgn",filename:a.getFilename()}))}},{label:Object(o.d)("Ok"),action:function(e){u.close()}}]});u.getForm().on("inputChange",(function(e){switch(Oo.log({e:e},"pgn input ch fired"),e.name){case"showMoveTimes":r=e.checked,u.querySelector(".ct-show-pgn-field textarea").value=s();break;case"showComments":i=!e.checked,u.querySelector(".ct-show-pgn-field textarea").value=s()}}))}},{key:"changeAutoplaySpeed",value:function(e){this._o.autoplaySpeed=e,this._saveOptionsToStorage()}},{key:"getautoplaySpeed",value:function(){return this._o.autoplaySpeed}},{key:"atEnd",value:function(){var e=this.moveList.getCurrentMove();return!e||e.atEnd}},{key:"atStart",value:function(){var e=this.moveList.getCurrentMove();return!e||!e.prev||e.prev.atStart}},{key:"_autoplayMove",value:function(){var e=this;this._autoPlaying&&(this.moveList.getCurrentMove().atEnd||(this.forwardMove(),this._lastAutoplayTimeout=setTimeout((function(){e._autoplayMove()}),this._o.autoplaySpeed)))}},{key:"toggleShowVariations",value:function(){this.showVariations(!this._o.showVariations)}},{key:"showVariations",value:function(e){this._o.showVariations=e,e?this.classList.remove("ct-move-list-hide-all-variations"):this.classList.add("ct-move-list-hide-all-variations"),this._saveOptionsToStorage(),this.scrollToMove()}},{key:"toggleAutoPlay",value:function(){this._autoPlaying=!this._autoPlaying,this._autoPlaying?this._autoplayMove():this._lastAutoplayTimeout&&(clearTimeout(this._lastAutoplayTimeout),this._lastAutoplayTimeout=null)}},{key:"changeFontSize",value:function(e){this._o.fontSize=e,this.style.fontSize=e+"px",this._saveOptionsToStorage()}},{key:"getMoveListFontSize",value:function(){return this._o.fontSize}},{key:"changeMoveListStyle",value:function(e){this.classList.remove("ct-move-list-style-".concat(this._o.moveListStyle)),this._o.moveListStyle=e,this.classList.add("ct-move-list-style-".concat(this._o.moveListStyle)),this._saveOptionsToStorage()}},{key:"getMoveListStyle",value:function(){return this._o.moveListStyle}},{key:"changeNotationStyle",value:function(e){this._o.notationStyle=e,this._moveListRenderer&&this._moveListRenderer.setOptions(this._o),this._saveOptionsToStorage()}},{key:"getNotationStyle",value:function(){return this._o.notationStyle}},{key:"changeFigurineNotation",value:function(e){this._o.useFigurineNotation=e,this._o.useFigurineNotation?this.classList.add("ct-move-list-figurine-enabled"):this.classList.remove("ct-move-list-figurine-enabled"),this._saveOptionsToStorage()}},{key:"getFigurineNotation",value:function(){return this._o.useFigurineNotation}},{key:"connectedCallback",value:function(){this._ignoreComments=this.getAttr("ignore-comments"),this._markCommentMoves=this.getAttr("mark-comment-moves"),this._moveListRenderer=new Yr({useFigurineNotation:!0,ignoreComments:this._ignoreComments,markCommentMoves:this._markCommentMoves}),this._init()}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}},{key:"destroy",value:function(){this._del.destroy(),this._resize&&this._resize.destroy(),this.makeActive&&this.removeEventListener(Bo.ACTIVE_EVENT_LISTENER,this.makeActive)}},{key:"_setupEventHandlers",value:function(){this._del.delegate(this,Object(u.a)("pointerover"),".ct-move-notation",this._moveHoverStart,this),this._del.delegate(this,Object(u.a)("pointerout"),".ct-move-notation",this._moveHoverEnd,this),this._del.delegate(this,"tap",".ct-move-notation",this._moveClicked,this),this._del.delegate(this,"tap",".ct-move-comment",this._commentClicked,this),this._del.delegate(this,"tap",".ct-variation-handle",this._variationHandleClicked,this)}},{key:"render",value:function(){var e=this;this.innerHTML='<div class="ct-move-list-container"></div>',this._container=this.querySelector(".ct-move-list-container"),this._p&&["","Moz","ms","Webkit"].forEach((function(t){return e._container.style[t+"userSelect"]="none"}))}},{key:"getContainer",value:function(){return this._container}},{key:"addResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._pgnGame&&this._pgnGame.setTag("Result",e||"*"),"1/2-1/2"==e&&(e="&frac12;-&frac12;"),this.querySelector(".ct-move-list-result-comment").innerHTML=t,"*"==e&&(e='<span class="ct-resultstring-unfinished">*</span>'),this.querySelector(".ct-move-list-result-resultstring").innerHTML=e}},{key:"_handleHover",value:function(e,t){var n=e.currentTarget.parentNode.getAttribute("data-move-id"),r=this.moveList.getMoveFromId(n);this.board.eventHub.fire(t,{move:r})}},{key:"_moveHoverStart",value:function(e){this._handleHover(e,"moveListMoveHoverStart")}},{key:"_moveHoverEnd",value:function(e){this._handleHover(e,"moveListMoveHoverEnd")}},{key:"_clickedMoveId",value:function(e){var t=this.moveList.getMoveFromId(e);Oo.log({id:e,move:t,san:t.toSAN()},"clicked on move"),t.obscure?Oo.log("not allowed to click on obscured move"):(this.fire("moveListMoveClicked",{move:t}),this.board.eventHub.fire("moveListMoveClicked",{move:t})&&this.gotoMoveId(e))}},{key:"_moveClicked",value:function(e){var t=e.currentTarget.parentNode.getAttribute("data-move-id");this._clickedMoveId(t)}},{key:"jumpToFen",value:function(e){var t=this.moveList.findFen({fen:e});t&&(t.atEnd||this.gotoMoveId(t.id))}},{key:"gotoPly",value:function(e){var t=this.moveList.getMoveForPly(e);Oo.log({ply:e,mv:t},"goto ply"),t.atEnd||this.gotoMoveId(t.id)}},{key:"_fireMutation",value:function(){this._mutationEvents&&this.board&&this.fire("moveListMutation",{ml:this})}},{key:"_fireMoveListNav",value:function(e){return this._fireMutation(),this.board.eventHub.fire("moveListNavigate",e)}},{key:"jumpToStart",value:function(){var e=this.moveList.getFirstMove();if(!e.atEnd){if(!this._fireMoveListNav({move:e}))return;this.gotoMoveId(e.id)}}},{key:"jumpToBeginning",value:function(){this.moveList.jumpToStart();var e=this.moveList.getCurrentMove().getPreMoveBoardState().clone();this.board.initFromBoardState(e),this._highlightCurrentMove()}},{key:"jumpToEnd",value:function(){var e=this.moveList.getLastMove();if(!e.atEnd){if(!this._fireMoveListNav({move:e}))return;this.gotoMoveId(e.id)}}},{key:"triggerChange",value:function(){var e=this.moveList.getCurrentMove(),t=e.getPreMoveBoardState().clone();this._fireMoveListNav({move:e})?(this.board.initFromBoardState(t),this._highlightCurrentMove()):this._highlightCurrentMove()}},{key:"gotoMoveId",value:function(e,t){this.moveList.gotoMoveId(e);var n=this.moveList.getCurrentMove(),r=n.getPreMoveBoardState().clone();this.board.initFromBoardState(r),n.atStart||n.atEnd||this.forwardMove(),this._highlightCurrentMove(),t&&this.toggleVariationFolding(n,!0,!0)}},{key:"_commentClicked",value:function(e){if(!this.getAttr("disable-comment-clicks")){var t=e.currentTarget;if(!t.classList.contains("ct-expand-handle-comment")){Oo.log({e:e},"comment clicked");var n=t.getAttribute("data-comment-id").split("-"),r=n[1],o=n[2],i="before"==n[0],a=this.moveList.getMoveFromId(r),s={comment:i?a.preCommentArray[o]:a.postCommentArray[o],move:a,beforeMove:i,commentInd:o,commentElem:t,e:e};Oo.log(s,"clicked on comment"),!1!==this.fire("commentClicked",s)&&this.board&&this.board.launchAnnotatePanel(a,i?0:1)}}}},{key:"_variationHandleClicked",value:function(e){Oo.log({e:e},"variationHandle clicked");var t=e.currentTarget;if(t.parentNode.classList.toggle("ct-unfolded-variation"),e.target.classList.contains("ct-variation-first-move")){var n=t.parentNode.querySelector(".ct-move");n&&this._clickedMoveId(n.getAttribute("data-move-id"))}}},{key:"playMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dontFireChangeEvent,r=void 0!==n&&n,o=t.addDuplicateAsVariation,i=void 0!==o&&o,a=t.updateCommentBoards,s=void 0===a||a,c=t.fromInteraction,l=void 0!==c&&c;this._fireMutation();var u=this.moveList.isCurrentMove(e),d=null!=this.moveList.getCurrentMove().findVariationHead(e),h=this.moveList.playMove(e,{addDuplicateAsVariation:i}),p=!1;return(!u&&!d||i)&&(this._insertIntoMoveDisplay(h,{updateCommentBoards:s,fromInteraction:l}),r||(p=!0)),this._highlightCurrentMove(),this.scrollToMove(),p&&this.fire("moveListChanged",{}),h}},{key:"_getNodeForMove",value:function(e){return e?this.querySelector(".ct-move[data-move-id='"+e.id+"']"):null}},{key:"_getContentBox",value:function(){return this.getElementsByClassName("ct-move-list-content-box")[0]}},{key:"_getNodeForVariation",value:function(e){return this._getNodeForMove(e).parentNode.parentNode}},{key:"deleteLineToEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.moveList.getCurrentMove().prev;if(e.atStart&&(e=e.next),!e.atEnd){var t=this._getNodeForMove(e),n=null;if(e.isVariationHead&&(n=this._getNodeForVariation(e)),this._fireMutation(),n){n.parentNode.removeChild(n);var r=e.variationParent.next;this.moveList.deleteLineToEnd(e),r&&!r.atEnd&&this._refreshMoveNumber(r)}else{do{var o=t.nextElementSibling;t.parentNode.removeChild(t),t=o}while(o&&o.classList.contains("ct-move"));this.moveList.deleteLineToEnd(e)}var i=this.moveList.getCurrentMove();i.prev&&!i.atEnd&&(i=i.prev),this.gotoMoveId(i.id),this.scrollToMove(),this.fire("moveListChanged",{})}}},{key:"_cleanupCommentBoards",value:function(e){var t=this,n=e.querySelectorAll(".ct-move-list-comment-board");Array.prototype.forEach.call(n,(function(e){var n=e.getAttribute("data-comment-board-id"),r=t._commentBoards[n];r&&(r.destroy(),t._commentBoards[n]=null)}))}},{key:"promoteVariation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.moveList.getCurrentMove();arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!=e.varLevel){this._fireMutation();this.moveList.getCurrentMove();var t=this.moveList.getHeadOfMove(e,!0),n=this._getNodeForMove(t),r=this._getNodeForMove(t.variationParent);if(t.variationParent&&t.variationParent.isVariationHead&&t.variationParent.variationParent&&r.parentNode){var o=r.parentNode.parentNode;if(o){var i=o.querySelector(".ct-varhandle-expand .ct-variation-first-move");if(i){var a=this._moveListRenderer.createHandleMove(t);i.innerHTML=a+" "}}}Oo.log({move:e,varHead:t,varHeadNode:n,varParentNode:r},"promoting variation from move"),this.moveList.promoteVariation(e);var s=this._getMoveAsNode(t),c=r.nextElementSibling;this._cleanupCommentBoards(r);r.parentNode.replaceChild(s,r);for(r=this._getNodeForMove(t);c&&c.classList.contains("ct-move");){var l=c.nextElementSibling;c.parentNode.removeChild(c),c=l}for(l=t.next;l&&!l.atEnd;)this._insertIntoMoveDisplay(l),l=l.next;this._highlightCurrentMove(),this.scrollToMove(),this.fire("moveListChanged",{})}}},{key:"variationDown",value:function(){var e=this.moveList.getCurrentMove();if(0==e.varLevel)return!(!(e=e.prev).variations||!e.variations.length)&&(this.gotoMoveId(e.variations[0].id,!0),!0);var t=this.moveList.getHeadOfMove(e,!0),n=t.variationParent;if(n){if(!n.variations)return!1;if((e=e.prev).variations&&e.variations.length)return this.gotoMoveId(e.variations[0].id,!0),!0;if(1==n.variations.length)return this.gotoMoveId(n.next.id,!0),!0;var r=n.findVariationIndex(t);if(r>=0){if(r==n.variations.length-1)return this.gotoMoveId(n.next.id,!0),console.log("goto to next move as end of var list"),!0;var o=n.variations[r+1];return this.gotoMoveId(o.id,!0),!0}}return!1}},{key:"variationUp",value:function(){var e=this.moveList.getCurrentMove();if(0==e.varLevel)return(e=e.prev).atStart||(e=e.prev),!(!e.variations||!e.variations.length)&&(this.gotoMoveId(e.variations[e.variations.length-1].id,!0),!0);var t=this.moveList.getHeadOfMove(e,!0),n=t.variationParent;if(n){if(!n.variations)return!1;if(1==n.variations.length)return this.gotoMoveId(n.id,!0),!0;var r=n.findVariationIndex(t);if(r>=0){if(0==r)return this.gotoMoveId(n.id,!0),!0;var o=n.variations[r-1];return this.gotoMoveId(o.id,!0),!0}}return!1}},{key:"forwardMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowObscure,n=void 0!==t&&t,r=this.moveList.getCurrentMove();if(!r.obscure||n){if(r.atEnd){var o=this.moveList.isMoveMainLineEnd(r);return this.board.eventHub.fire("forwardAtEnd",{isMainLine:o}),void this.fire("forwardAtEnd",{isMainLine:o})}this._fireMoveListNav({move:r,action:"FORWARD"})&&(this.moveList.forwardMove(),r.atStart||this.board.playMove(r,{updateMoveList:!1}),this._highlightCurrentMove(),this.scrollToMove())}}},{key:"backMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowObscure,n=void 0!==t&&t,r=this.moveList.getCurrentMove().prev;if(!r||r.atStart)return this.board.eventHub.fire("backwardAtStart"),void this.fire("backwardAtStart");r.obscure&&!n||this._fireMoveListNav({move:r})&&(this.moveList.backMove(),this.board.reverseMove(r,{updateMoveList:!1}),this._highlightCurrentMove(),this.scrollToMove())}},{key:"_highlightCurrentMove",value:function(){var e=this.moveList.getCurrentMove().prev;if(e){var t=this._getNodeForMove(e);t&&(t=t.getElementsByClassName("ct-move-notation")[0]),this._lastHighlightedMoveHtml!=t&&(this._lastHighlightedMoveHtml&&this._lastHighlightedMoveHtml.classList.remove("ct-current-move"),t&&t.classList.add("ct-current-move"),this._lastHighlightedMoveHtml=t)}}},{key:"insertMoveSequenceAtPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.moveList.findFen({fen:t});r&&r.next&&this.insertMoveSequenceAtMove(e,r.next,n)}},{key:"insertMoveSequenceAtIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0,o=this.moveList.getMoveFromId(t);o&&this.insertMoveSequenceAtMove(e,o,n,r)}},{key:"insertMoveSequenceAtMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.moveList.getCurrentMove(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0;this._fireMutation();var o=this.moveList.getCurrentMove();this.moveList.setCurrentMove(t);var i=0,a=null;if(o.atEnd)for(;null!=e&&!e.atEnd&&(-1==n||i<n);)this.playMove(e.clone(!0,!0),{addDuplicateAsVariation:!0,dontFireChangeEvent:!0}),e=e.next,i++;else{for(;null!=e&&!e.atEnd&&(-1==n||i<n);){var s=this.moveList.playMove(e.clone(!0,!0),{addDuplicateAsVariation:!0});e=e.next,i||(a=s),i++}a&&this._insertIntoMoveDisplay(a)}this.moveList.setCurrentMove(o),r||this.fire("moveListChanged",{})}},{key:"makeNullMove",value:function(){var e=new A;e.emptyMove=!0,this._fireMutation();var t=this.moveList.playMove(e,{addDuplicateAsVariation:!0});this._insertIntoMoveDisplay(t,{fromInteraction:!0}),this._highlightCurrentMove(),this.scrollToMove(),this.fire("moveListChanged",{})}},{key:"refreshMoveNode",value:function(e,t,n){if(this.dirty=!0,this._fireMutation(),e.atStart){if(!this._o.ignoreVariations){var r=this.querySelector(".ct-move-list-empty-list-comment");r&&(r.innerHTML=this._moveListRenderer.getEmptyMoveListCommentHtml(e))}}else{var o=this._getNodeForMove(e),i=this._getMoveAsNode(e);this._cleanupCommentBoards(o),o.parentNode.replaceChild(i,o),o=this._getNodeForMove(e);var a=this.moveList.getHeadOfMove(e,!0);if(a==e){var s=i.parentNode.parentNode;if(s){var c=s.querySelector(".ct-varhandle-expand .ct-variation-first-move");if(c){var l=this._moveListRenderer.createHandleMove(a);c.innerHTML=l+" "}}}var u=e.next;u&&!u.atEnd&&this._refreshMoveNumber(u),n||this.fire("moveListChanged",{})}}},{key:"_refreshMoveNumber",value:function(e){var t=this._getNodeForMove(e);if(t){var n=t.querySelector(".ct-move-number"),r=e.getBoardState(),o=this._moveListRenderer.getMoveNum(e,r);this._moveListRenderer.isMoveDotsRequired(e,r)?t.classList.add("ct-move-number-has-dots"):t.classList.remove("ct-move-number-has-dots"),n.innerHTML=o}}},{key:"_insertIntoMoveDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.updateCommentBoards,t.fromInteraction),r=void 0!==n&&n,o=null;if(this.dirty=!0,e.isVariationHead){var i=(o=this._getNodeForMove(e.variationParent)).querySelector(".ct-move-variations");if(i){var a=this._moveListRenderer.getVariationHTML(e),s=document.createElement("div");s.innerHTML=a,i.appendChild(s.firstChild)}else{var c=document.createElement("span");c.classList.add("ct-move-variations"),c.innerHTML=this._moveListRenderer.getVariationHTML(e),o.appendChild(c)}var l=e.variationParent.next;if(l&&!l.atEnd){var u=this._getNodeForMove(l);if(u){var d=u.querySelector(".ct-move-number"),h=l.getBoardState(),p=this._moveListRenderer.getMoveNum(l,h);this._moveListRenderer.isMoveDotsRequired(l,h)&&u.classList.add("ct-move-number-has-dots"),d.innerHTML=p}}}else{var f=this._getMoveAsNode(e);(o=this._getNodeForMove(e.prev))?(o.parentNode.insertBefore(f,o.nextSibling),f):this._container.insertBefore(f,this._container.firstChild)}r&&this._o.folding&&this.toggleVariationFolding(e,!0,!0)}},{key:"toggleGlobalFolding",value:function(){this._o.lastFoldAll?this.unfoldAll():this.foldAll()}},{key:"toggleFolding",value:function(){this.setFolding(!this._o.folding)}},{key:"setCommentBoardColourOnBottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"w";this._o.commentBoardColourOnBottom=e,this._moveListRenderer&&this._moveListRenderer.setOptions(this._o)}},{key:"setFolding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._fireMutation(),t||(this._o.folding=e),e?this.classList.add("ct-move-list-all-folded"):this.classList.remove("ct-move-list-all-folded"),t||this._saveOptionsToStorage(),this.scrollToMove()}},{key:"unfoldAll",value:function(){this._fireMutation(),this._o.lastFoldAll=!1,Array.prototype.forEach.call(this.querySelectorAll(".ct-variation"),(function(e){return e.classList.add("ct-unfolded-variation")})),this._saveOptionsToStorage(),this.scrollToMove()}},{key:"foldAll",value:function(){this._fireMutation(),this._o.lastFoldAll=!0,Array.prototype.forEach.call(this.querySelectorAll(".ct-unfolded-variation"),(function(e){return e.classList.remove("ct-unfolded-variation")})),this._saveOptionsToStorage(),this.scrollToMove()}},{key:"addUserEvalToMove",value:function(e){var t=this;if(e||(e=this.moveList.getCurrentMove())&&e.prev&&!e.prev.atStart&&(e=e.prev),!e.atStart&&!e.atEnd){var n={children:[{type:"TextField",name:"moveEvalScore",label:Object(o.d)("Eval score"),comment:Object(o.d)("Pawn based eval score from point of view of player to move, e.g. +2.3 is up 2.3 pawns, -2.3 is down 2.3 pawns. mate 3 for mate in 3 , mate -3 for getting mated in 3."),nameAsId:!0,value:""}]},r=function(n){var r=(n.dialog.getFormJSON().moveEvalScore||"").trim();if(!r)return Ae.showToast(Object(o.d)("Please enter an evaluation score"),ke.ERROR_TIMEOUT),!1;var i={};if((r=r.toLowerCase()).indexOf("mate")>=0){var a=r.split(" ");if(2!=a.length)return Ae.showToast(Object(o.d)("Wrong format for mate evaluation"),ke.ERROR_TIMEOUT),!1;parseInt(a[1])}else i={score:Math.round(100*parseFloat(r)),isMate:!1};return e.eval=i,t.board.eventHub.fire("userEvalAdded",{move:e}),n.dialog.close(),!1};U.create({title:Object(o.d)("Add evaluation to move"),formJson:n,submitCallback:r,buttons:[{label:Object(o.d)("Cancel"),action:function(e){e.dialog.close()}},{label:Object(o.d)("Add"),action:r}]})}}},{key:"toggleVariationFolding",value:function(e,t,n){if(e||(e=this.moveList.getCurrentMove())&&e.prev&&!e.prev.atStart&&(e=e.prev),!e.atStart&&!e.atEnd){n||this._fireMutation();var r=this.moveList.getHeadOfMove(e,!0);if(!r.atStart){var o=this._getNodeForMove(r).parentNode.parentNode.classList;t?o.add("ct-unfolded-variation"):o.toggle("ct-unfolded-variation"),this.scrollToMove()}}}},{key:"showMoveTooltip",value:function(e,t){var n=this._getNodeForMove(e);n&&(n.title=t)}},{key:"hideMoveTooltip",value:function(e){}},{key:"_scrollToMoveWork",value:function(e){var t=this,n=this._getNodeForMove(e);if(n){var r=n.querySelector(".ct-move-move");if(r&&r.offsetHeight){if(this._lastScrollAnim&&this._lastScrollAnim.complete(),n){if(n=n.querySelector(".ct-move-move"),"into-view"==this._scrollMode){var o=Object(F.a)();this._scrollId=o;var i=function(){Eo(n,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})};return i(),void(this._scrollId==o&&setTimeout((function(){t._scrollId==o&&i()}),50))}this._lastScrollAnim=new Kr({to:n.offsetTop-this.clientHeight/2,propName:"scrollTop",elemAtt:!0,element:this._resize?this._container:this,easingFunction:Kr.easing.easeOutQuad,duration:250}).start()}}else Oo.log("no offset height on move-move",r)}}},{key:"scrollToMove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.moveList.getCurrentMove().prev;this._dontDebounceScroll?this._scrollToMoveWork(t):(this._debouncedScrollToMove||(this._debouncedScrollToMove=po((function(t){e._scrollToMoveWork(t)}),300,{forceNumber:5})),this._debouncedScrollToMove(t))}},{key:"_getMoveAsNode",value:function(e,t){var n=this._moveListRenderer.getMoveHTML(e,t),r=document.createElement("div");return r.innerHTML=n,r.firstChild}},{key:"copyMovesFromHtml",value:function(e){for(var t,n=new RegExp('data-move-id="([0-9]+)"',"g"),r={},o=-1;t=n.exec(e);){var i=parseInt(t[1]);-1==o&&(o=i),r[i]=!0}if(-1==o)return{};var a=this.moveList.getMoveFromId(o);return this._copyMovesToPgnFromStartAndMoveIndexes(a,r)}},{key:"_copyMovesToPgnFromStartAndMoveIndexes",value:function(e,t){var n=e.toFen(),r=this.moveList.toPGN({startMv:e,matchIndexes:t,outputBoardAnnotations:!0}),o=this.moveList.getFirstMove(),i=!1,a="false";return(this.board.isFlipped()&&o.toMove()==b.WHITE||!this.board.isFlipped()&&o.toMove()==b.BLACK)&&(i=!0),o.toMove()!=e.toMove()&&(i=!i),i&&(a="true"),{moveListPGN:r,flip:a,fen:n}}},{key:"copyMovesToPGN",value:function(e,t){var n={};if(e.atEnd)return{};for(var r=e;r&&!r.atEnd&&r!=t;)n[r.id]=!0,r=r.next;return this._copyMovesToPgnFromStartAndMoveIndexes(e,n)}},{key:"getGame",value:function(){return this._pgnGame}},{key:"setPGNGame",value:function(e){this._pgnGame=e}},{key:"reset",value:function(){this.setFromMoveList(new Wr)}},{key:"setFromMoveList",value:function(e){var t=this._moveListRenderer.getMoveListAsHtml(e);this.moveList=e,this._container.innerHTML=t,this._annotated=!1,this.classList.remove("ct-move-list-annotated"),e.isEmpty()&&e._listStart.hasAnnotations()&&this.board.drawMoveAnnotations(e._listStart,!0)}},{key:"setFromGame",value:function(e){var t=e.get("moveList");this._pgnGame=e,this.setFromMoveList(t.clone()),this.addResult(e.getTag("Result"))}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));xo.nonPersistedOptions=["commentBoardColourOnBottom"],Object(Te.a)(xo,Ee),Object(Te.a)(xo,s.a),window.customElements.define("move-list",xo);var Mo=new a.a("svg-generator"),Io=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.viewBox,o=void 0===r?null:r,i=n.fill,a=void 0===i?null:i,s=n.strokeWidth,c=void 0===s?null:s,l=n.stroke,u=void 0===l?null:l;babelHelpers.classCallCheck(this,e),this._o={viewBox:o},this._node="string"==typeof t?document.querySelector(t):t,Mo.log("svg:"+t+" this._node:"+this._node),this._s="",t||(this._node=document.createElementNS(e.NS,"svg"),o&&this._node.setAttributeNS(null,"viewBox",o),a&&this._node.setAttributeNS(null,"fill",a),c&&this._node.setAttributeNS(null,"stroke-width",c),u&&this._node.setAttributeNS(null,"stroke",u))}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this._node.parentNode&&this._node.parentNode.removeChild(this._node)}},{key:"get",value:function(e){return this._o[e]}},{key:"set",value:function(e,t){this._o[e]=t}},{key:"startPath",value:function(e,t){return e||(this._s=""),this._onPath=!0,this}},{key:"append",value:function(){if(this._onPath){var t=document.createElementNS(e.NS,"path");t.setAttributeNS(null,"d",this._s),this._lastChild=t,this._node.appendChild(t)}return this}},{key:"lastElement",value:function(){return this._lastChild}},{key:"circle",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.fill,a=void 0===i?null:i,s=o.weight,c=void 0===s?null:s,l=o.stroke,u=void 0===l?null:l,d=o.className,h=void 0===d?null:d,p=(o.nonScaledStrokeWeight,document.createElementNS(e.NS,"circle"));return p.setAttributeNS(null,"cx",t),p.setAttributeNS(null,"cy",n),p.setAttributeNS(null,"r",r),a&&p.setAttributeNS(null,"fill",a),c&&p.setAttributeNS(null,"stroke-weight",c),u&&p.setAttributeNS(null,"stroke",u),h&&p.setAttributeNS(null,"class",h),this._lastChild=p,this._node.appendChild(p),this}},{key:"line",value:function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.fill,s=void 0===a?null:a,c=i.weight,l=void 0===c?null:c,u=i.stroke,d=void 0===u?null:u,h=i.className,p=void 0===h?null:h,f=document.createElementNS(e.NS,"line");return f.setAttributeNS(null,"x1",t),f.setAttributeNS(null,"y1",n),f.setAttributeNS(null,"x2",r),f.setAttributeNS(null,"y2",o),s&&f.setAttributeNS(null,"fill",s),l&&f.setAttributeNS(null,"stroke-weight",l),d&&f.setAttributeNS(null,"stroke",d),p&&f.setAttributeNS(null,"class",p),this._lastChild=f,this._node.appendChild(f),this}},{key:"rel",value:function(){return this._nextRel=!0,this}},{key:"getNode",value:function(){return this._node}},{key:"_out",value:function(e){this._nextRel&&(e.toLowerCase(),this._nextRel=!1);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._s+=e+n.join(" "),this}},{key:"toString",value:function(){return this._s}}]),e}();Io.commands={M:"moveTo",L:"lineTo",C:"cubicCurveTo",Q:"quadraticCurveTo",Z:"close"},Io.NS="http://www.w3.org/2000/svg",Object.keys(Io.commands).forEach((function(e){Mo.log("Adding function:"+Io.commands[e]+" for command:"+e),Io.prototype[Io.commands[e]]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this._out.apply(this,[e].concat(n))}}));var Lo=function(){function e(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=a.parentUnit,c=void 0===s?100:s,l=a.width,u=void 0===l?.15*c:l,d=a.baseWidth,h=void 0===d?1:d,p=a.arrowHeadHeight,f=void 0===p?.66*c:p,v=a.arrowHeadBackLength,m=void 0===v?.05*c:v,g=a.arrowHeadWidth,y=void 0===g?.5*c:g,_=a.outlineColour,b=void 0===_?"#4f4":_,C=a.outlineWeight,w=void 0===C?1:C,S=a.opacity,k=void 0===S?.7:S,A=a.fillColor,E=void 0===A?"#0f0":A,T=a.fillOpacity,O=void 0===T?.75:T,x=a.arrowHeadStyle,M=void 0===x?"bottomcurve":x,I=a.baseBias,L=void 0===I?.85:I,N=a.className,R=void 0===N?null:N;babelHelpers.classCallCheck(this,e),this._svg=t,this._o={parentUnit:c,width:u,baseWidth:h,arrowHeadHeight:f,arrowHeadWidth:y,arrowHeadBackLength:m,className:R,outlineColour:b,outlineWeight:w,opacity:k,fillColor:E,fillOpacity:O,arrowHeadStyle:M,baseBias:L},this._draw(n,r,o,i)}return babelHelpers.createClass(e,[{key:"destroy",value:function(){this._element.parentNode.removeChild(this._element)}},{key:"_draw",value:function(e,t,n,r){var o,i=this._o.width,a=this._o.baseWidth,s=[e,t],c=[n,r],l=c[0]-s[0],u=c[1]-s[1],d=u,h=l,p=Math.sqrt(d*d+h*h),f=p-this._o.arrowHeadHeight,v=f/p,m=[v*c[0]+(1-v)*s[0],v*c[1]+(1-v)*s[1]],g=i*(d=u=m[1]-s[1])/f/2,y=i*(h=l=m[0]-s[0])/f/2,_=a*d/f/2,b=a*h/f/2,C=s[0]+_,w=s[1]-b,S=s[0]-_,k=s[1]+b,A=m[0]-g,E=m[1]+y,T=m[0]+g,O=m[1]-y,x=this._o.arrowHeadBackLength,M=this._o.arrowHeadWidth,I=f-x,L=[(v=I/f)*m[0]+(1-v)*s[0],v*m[1]+(1-v)*s[1]],N=L[0]-(g=M*(d=u=L[1]-s[1])/I/2),R=L[1]+(y=M*(h=l=L[0]-s[0])/I/2),D=L[0]+g,P=L[1]-y,F=c[0],H=c[1];switch(this._svg.startPath(!1,(o={pointerEvents:"none",stroke:this._o.outlineColor},babelHelpers.defineProperty(o,"stroke-width",this._o.outlineWeight),babelHelpers.defineProperty(o,"stroke-opacity",this._o.opacity),babelHelpers.defineProperty(o,"fill",this._o.fillColor),babelHelpers.defineProperty(o,"fill-opacity",this._o.opacity),o)).moveTo(C,w).lineTo(S,k).lineTo(A,E),this._o.arrowHeadStyle){case"bottomcurve":var B=(N*(z=this._o.baseBias)+F*(G=1-z))/1,j=(R*z+H*G)/1,q=(D*z+F*G)/1,V=(P*z+H*G)/1;this._svg.quadraticCurveTo(B,j,N,R).lineTo(F,H).lineTo(D,P).quadraticCurveTo(q,V,T,O);break;case"sidecurve":var z,G;B=(N*(z=this._o.baseBias)+F*(G=1-z))/1,j=(R*z+H*G)/1,q=(D*z+F*G)/1,V=(P*z+H*G)/1;this._svg.lineTo(N,R).quadraticCurveTo(B,j,F,H).quadraticCurveTo(q,V,D,P).lineTo(T,O);break;case"line":default:this._svg.lineTo(N,R).lineTo(F,H).lineTo(D,P).lineTo(T,O)}this._svg.lineTo(C,w),this._svg.close(),this._svg.append(),this._element=this._svg.lastElement();var W="ct-svg-arrow";this._o.className&&(W+=" "+this._o.className),this.attr("class",W)}},{key:"setStyle",value:function(e,t){this._element.style[e]=t}},{key:"attr",value:function(e,t){this._element.setAttributeNS(null,e,t)}},{key:"getAttr",value:function(e){return this._element.getAttributeNS(null,e)}}]),e}(),No=new a.a("board-arrows"),Ro=function(){function e(t){babelHelpers.classCallCheck(this,e),this._board=t,this._svg=new Io(null,{viewBox:"0 0 "+e.SVG_VIEWBOX_SIZE+" "+e.SVG_VIEWBOX_SIZE}),this._arrowsByType=[],this._countUserArrows=0;var n=this._svg.getNode();if(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width="100%",n.style.height="100%",n.style.zIndex="3",n.setAttributeNS(null,"pointer-events","none"),this._board.getSquaresContainer().appendChild(n),this._board.getAllowDrawing()){var r=this._board.getSquaresContainer();this._bw=r,this._boundBoardTap=this._boardTap.bind(this),r.addEventListener("tap",this._boundBoardTap),this.dd=new g({container:r,rightOnly:!0,dontMove:!0,center:!1}),this.dd.on("dragStart",this._boardDragStart,this),this.dd.on("dragEnd",this._boardDragEnd,this),this.dd.on("dragMove",this._boardDragMove,this)}}return babelHelpers.createClass(e,[{key:"_boardDragStart",value:function(e){No.log({e:e},"board drag start"),this._board.isDrawingDisabled()||(this._startEvent=e,this._startDragLocation=this._pixelsToColumnRow(e.startX,e.startY),No.log({startDragLoc:this._startDragLocation}),this._lastColumn=null,this._lastRow=null,this._drawColour="green",e.shiftKey&&(this._drawColour="red"),e.ctrlKey&&(this._drawColour="yellow"),e.ctrlKey&&e.shiftKey&&(this._drawColour="blue"))}},{key:"_boardDragEnd",value:function(e){var t=this;if(No.log({e:e},"board drag end"),!this._board.isDrawingDisabled()){this.removeArrowsOfType("inProgressArrow");var n=this._pixelsToColumnRow(e.endX,e.endY),r=n.column,o=n.row;if(No.log({column:r,row:o,startDragLoc:this._startDragLocation},"drag arrow draw end"),r!=this._startDragLocation.column||o!=this._startDragLocation.row)if(this.getArrowsOfTypeAndLocation("userDrawnArrow-"+this._drawColour,this._startDragLocation.column,this._startDragLocation.row,r,o).length)this._countUserArrows-=this.removeArrowsOfTypeAndLocation("userDrawnArrow-"+this._drawColour,this._startDragLocation.column,this._startDragLocation.row,r,o);else this.getArrowsOfTypeAndLocation("moveAnnotation",this._startDragLocation.column,this._startDragLocation.row,r,o).length?this.removeArrowsOfTypeAndLocation("moveAnnotation",this._startDragLocation.column,this._startDragLocation.row,r,o):(["green","yellow","red","blue"].forEach((function(e){t._countUserArrows-=t.removeArrowsOfTypeAndLocation("userDrawnArrow-"+e,t._startDragLocation.column,t._startDragLocation.row,r,o)})),this.drawArrow(this._startDragLocation.column,this._startDragLocation.row,r,o,"userDrawnArrow-"+this._drawColour),this._countUserArrows++)}}},{key:"_boardDragMove",value:function(e){if(!this._board.isDrawingDisabled()){var t=this._pixelsToColumnRow(e.moveX,e.moveY),n=t.column,r=t.row;if(n!=this._lastColumn||r!=this._lastRow){if(this.removeArrowsOfType("inProgressArrow"),n==this._startDragLocation.column&&r==this._startDragLocation.row)return;this.drawArrow(this._startDragLocation.column,this._startDragLocation.row,n,r,"inProgressArrow")}}}},{key:"_pixelsToColumnRow",value:function(e,t){return this._board.pixelsToColumnRow(e,t)}},{key:"_boardTap",value:function(e){var t=this;this._countUserArrows>0&&(this._countUserArrows=0,["green","yellow","red","blue"].forEach((function(e){t.removeArrowsOfType("userDrawnArrow-"+e)})))}},{key:"destroy",value:function(){this.dd&&this.dd.destroy(),this._boundBoardTap&&this._bw.removeEventListener("tap",this._boundBoardTap),this._svg.destroy()}},{key:"removeAll",value:function(){var e=this;Object.keys(this._arrowsByType).forEach((function(t){e._arrowsByType[t]&&e.removeArrowsOfType(t)}))}},{key:"redrawAll",value:function(){var e=this;Object.keys(this._arrowsByType).forEach((function(t){var n=e._arrowsByType[t];n&&(e.removeArrowsOfType(t),n.forEach((function(n){return e.drawArrow(n.fromTo.fromColumn,n.fromTo.fromRow,n.fromTo.toColumn,n.fromTo.toRow,t,n.fill)})))}))}},{key:"drawMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.fromColumn,o=e.fromRow,i=e.toColumn,a=e.toRow;return this.drawArrow(r,o,i,a,t,n)}},{key:"getArrowsOfType",value:function(e){return this._arrowsByType[e]||[]}},{key:"getArrowsOfTypeAndLocation",value:function(e,t,n,r,o){var i=this._arrowsByType[e],a=[];return i&&i.forEach((function(e){e.fromTo.fromColumn==t&&e.fromTo.fromRow==n&&e.fromTo.toColumn==r&&e.fromTo.toRow==o&&a.push(e)})),a}},{key:"drawArrow",value:function(t,n,r,o){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return function(t,n,r,o){var c={fromColumn:t,fromRow:n,toColumn:r,toRow:o};if(i._board.isFlipped()){var l=Bo.flipFromTo(t,n,r,o);t=l.fromColumn,n=l.fromRow,r=l.toColumn,o=l.toRow}var u=e.SVG_VIEWBOX_SIZE/8,d="ct-board-arrow ct-board-arrow-type-".concat(a),h=new Lo(i._svg,u*t+u/2,u*(7-n)+u/2,u*r+u/2,u*(7-o)+u/2,{className:d});return h.fromTo=c,s&&(h.attr("fill",s),h.fill=s),i._arrowsByType[a]||(i._arrowsByType[a]=[]),i._arrowsByType[a].push(h),h.arrowType=a,h}(t,n,r,o)}},{key:"removeArrowsOfType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this._arrowsByType[e];t&&t.forEach((function(e){return e.destroy()})),this._arrowsByType[e]=[]}},{key:"removeArrowsOfTypeAndLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=this._arrowsByType[e],a=[],s=0;return i&&i.forEach((function(e){e.fromTo.fromColumn==t&&e.fromTo.fromRow==n&&e.fromTo.toColumn==r&&e.fromTo.toRow==o?(e.destroy(),s++):a.push(e)})),this._arrowsByType[e]=a,s}},{key:"saveBoardAnnotationsToMove",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.preArrows=[];var r=this.getArrowsOfType("moveAnnotation").map((function(e){return{colour:e.getAttr("fill"),arrow:e}})),o=["green","yellow","red","blue"].map((function(e){return t.getArrowsOfType("userDrawnArrow-"+e).map((function(t){return{colour:e,arrow:t}}))})),i=R([r,o]);No.log({arrows:i,deepFlatten:R,annotationArrows:r,userArrows:o});var a=i.map((function(e){var t=e.colour,n=e.arrow;return{arrowMove:new A(n.fromTo.fromColumn,n.fromTo.fromRow,n.fromTo.toColumn,n.fromTo.toRow),arrowColour:t}}));n?(e.postArrows=a,No.log({arrowMoves:a,pgnMove:e.toPGN()},"post arrows save")):(e.preArrows=a,No.log({arrowMoves:a,pgnMove:e.toPGN()},"pre arrows save"))}},{key:"removeMoveAnnotationArrows",value:function(){this.removeArrowsOfType("moveAnnotation")}},{key:"drawMoveAnnotationArrows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removeMoveAnnotationArrows();var n=this,r=function(e){for(var t=0;t<e.length;t++){var r=e[t];n.drawMove(r.arrowMove,"moveAnnotation",r.arrowColour)}};t&&e.preArrows&&r(e.preArrows),e.postArrows&&r(e.postArrows),!t&&e.next&&e.next.preArrows&&r(e.next.preArrows)}}]),e}();Ro.SVG_VIEWBOX_SIZE=800;var Do=new a.a("sound"),Po=function(){function e(){babelHelpers.classCallCheck(this,e),this._isApp=!!document.querySelector(".ct-app"),this._useWebAudio=this._isApp,this._useWebAudio=window.AudioContext||window.webkitAudioContext||!1,this._isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1;var t=window._ctSoundPath||"";if(this._soundPath=t+"/sounds",this._version=this._isApp?"":".vers1",this._enabled=!0,this._haveAudio=!1,this._sounds=[],this._useWebAudio)try{this._context=new(window.AudioContext||window.webkitAudioContext),this._haveAudio=!0}catch(e){return Do.error("Web Audio API not supported"),void(this._enabled=!1)}if(this._isApp||(this._boundRemoveBehaviours=this._removeBehaviorsRestrictions.bind(this),this._interactionEvents=["keydown","keyup","pointerdown","mousedown","pointerup","mouseup","touchend","click"]),this._useWebAudio)this._canPlayMp3=!0;else{var n=null;"undefined"!=typeof Audio&&(n=new Audio("")),this._haveAudio=n&&!!n.canPlayType,this._haveAudio&&(this._canPlayOgg=!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),this._canPlayMp3=!!n.canPlayType("audio/mpeg;").replace(/no/,""),this._canPlayWav=!!n.canPlayType('audio/wav; codecs="1"').replace(/no/,""),this._canPlayAac=!!n.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,""))}}return babelHelpers.createClass(e,[{key:"_removeBehaviorsRestrictions",value:function(){var e=this;this._useWebAudio?this._context&&"running"!==this._context.state&&this._context.resume&&this._context.resume():Object.keys(this._sounds).forEach((function(t){e._sounds[t].load()})),this._pendingInteraction=!1,this._removeInteractionListeners()}},{key:"_removeInteractionListeners",value:function(){var e=this;this._isApp||this._interactionEvents.forEach((function(t){window.removeEventListener(t,e._boundRemoveBehaviours)}))}},{key:"_setupInteractionGrab",value:function(){var e=this;this._pendingInteraction||this._isApp||(this._pendingInteraction=!0,this._interactionEvents.forEach((function(t){window.addEventListener(t,e._boundRemoveBehaviours)})))}},{key:"destroy",value:function(){this._isApp||this._removeInteractionListeners()}},{key:"createSound",value:function(e,t){var n=this;if(this._haveAudio){var r=null,o="";e+=this._version,this._isApp&&this._canPlayMp3?o=this._soundPath+"/"+e+".mp3":this._canPlayOgg?o=this._soundPath+"/"+e+".ogg":this._canPlayAac?o=this._soundPath+"/"+e+".m4a":this._canPlayMp3?o=this._soundPath+"/"+e+".mp3":this._canPlayWav&&(o=this._soundPath+"/"+e+".wav"),this._useWebAudio?(fetch(o).then((function(e){return e.arrayBuffer()})).then((function(r){n._context.decodeAudioData(r,(function(r){n._sounds[e]=r,t&&(n._sounds[t]=r)}),(function(e){Do.error({error:e,path:o},"Error deocde audio sound")}))})).catch((function(e){Do.error({path:o,error:e},"Error loading sound")})),this._setupInteractionGrab()):(o&&(r=new Audio(o)),r&&(r.id=t+"-"+e,r.preload="auto",r.load(),this._sounds[e]=r,t&&(this._sounds[t]=r),this._setupInteractionGrab()))}}},{key:"setEnabled",value:function(e){this._enabled=e}},{key:"getEnabled",value:function(){return this._enabled}},{key:"playSound",value:function(e){this._haveAudio&&this._enabled&&(this._useWebAudio?this._playWebAudio(e):this._playHTML5Audio(e))}},{key:"_playWebAudio",value:function(e){var t=this._sounds[e];if(t)try{"suspended"==this._context.state&&this._context.resume();var n=this._context.createBufferSource();n.buffer=t,n.connect(this._context.destination),n.start(0)}catch(t){Do.error({soundName:e,e:t},"Error playing sound")}else Do.error({soundName:e},"had no sound for soundname")}},{key:"_playHTML5Audio",value:function(e){var t=this._sounds[e];if(t){this._isSafari&&this._isApp;try{var n=t.play();void 0!==n&&n.then((function(e){})).catch((function(n){Do.error({soundName:e,snd:t,error:n},"Auto play prevented")}))}catch(n){Do.error({e:n,soundName:e,snd:t},"got error playing sound")}}}}]),e}();n(530),n(190),n(531),n(188),n(187);function Fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Ho=new a.a("chess-board-component"),Bo=function(e){babelHelpers.inherits(r,e);var t=Fo(r);function r(e){var n;return babelHelpers.classCallCheck(this,r),e=n=t.call(this),babelHelpers.possibleConstructorReturn(n,e)}return babelHelpers.createClass(r,[{key:"initialise",value:function(){this._init()}},{key:"_init",value:function(){var e=this;if(!this._initialised){this._isApp=V.a.isNativeApp(),this.style.touchAction="none",this._temporaryConfirmMoves=!1,this._drawingDisabled=!1,this._del=new c.a,this._del.delegate(this,"tap",".ct-board-to-move-marker",this.flipBoard,this),this._initialised=!0,this._disabledAnims=!1,this.setupAttributeParent("board"),this.persistId=this.getAttr("persistId"),this._p="true"===this.getAttr("p"),this._autoHeight="true"==this.getAttr("auto-height"),this._autoWidth="true"==this.getAttr("auto-width"),this._preMoveEnabled="true"==this.getAttr("pre-moving"),this._setupMode="true"==this.getAttr("setup-mode"),(this._autoHeight||this._autoWidth)&&(this._boundAutoSize=this.autoSize.bind(this),window.addEventListener("resize",this._boundAutoSize),this.autoSize()),this.persistId&&(this.prefStorage=new Le("board-"+this.persistId)),this._setupOptions(),E.IMAGE_PATH=this.getAttr("imagePath")||"/images",this._o.allowDrawing="true"==this.getAttr("allowdrawing"),this._boardState=new C,this._coordsStyle=this._o["coords-style"];new I(this);this.pieceStyle=this._o.pieceStyle,this._pieceMovementSpeed=this._o.pieceMovementSpeed,this.changePieceStyle(this.pieceStyle);var t=this._o.boardStyle;this.changeBoardStyle(t),this._o["disable-sound"]||this.changeBoardSounds(!0),this._isApp&&"none"!=this._o.coordsStyle&&"internal"!=this._o.coordsStyle&&(this._o.coordsStyle="internal",this._saveOptionsToStorage()),"none"!=this._o.coordsStyle&&(this.coords=new so(this,{coordsStyle:this._o.coordsStyle})),this.render(),this._accessDescription=this._accessDescription||this.querySelector(".ct-board-accessibility-description"),this._debounceAccessibilityUpdate=po((function(){requestAnimationFrame((function(){var t="fide";e.moveList&&e.moveList.getNotationStyle&&(t=e.moveList.getNotationStyle()),e._accessDescription.innerHTML=e._boardState.getAccessibleDescription(t)}))}),1e3),this.changeCoordsSize(this._o.coordsSize);var n=!1;if("true"==this.getAttr("resizable")){var o={handles:["r"]},i=this.getAttr("resize-handles");if(i&&(o.handles=i.split(",")),this.getAttr("use-vmin-resize")){o.useVmin=!0,n=!0,this.getAttr("initial-vmin")&&(o.initialVmin=parseInt(this.getAttr("initial-vmin")));var a=this.getAttr("minimum-vmin")||15;o.minimumWidth=o.minimumHeight=a}this.resize=new ho(this,o),this.resize.on("resized",(function(t){e._o.boardSize=t,e._saveOptionsToStorage(),e.eventHub.fire("resized",t)})),this._o.boardSize&&(n?(this.style.height=this._o.boardSize.height+"vmin",this.style.width=this._o.boardSize.width+"vmin"):(this.style.height=this._o.boardSize.height+"px",this.style.width=this._o.boardSize.width+"px"))}if(this.getAttr("disablePieceMovement"))this._pieceMovementDisabled=!0;else{var s=this._o.dragAndDrop,l=this._o.clickAndClick;this.pieceMovement=new x(this,s,l)}if(this.squareHighlighter=new P(this),this.boardId=this.getAttribute("data-id"),this.moveList=document.querySelector("move-list[data-id='"+this.boardId+"']"),this.moveList&&(this.moveList.board=this),this.controls=document.querySelector("board-controls[data-id='"+this.boardId+"']"),this.controls){!function t(){e.controls.setBoard?e.controls.setBoard(e):setTimeout((function(){t()}),0)}()}this._o.disablePieceMovement||this._setupMode||(this.legalMoveHandler=new Y(this,this.moveList)),this.getAttr("fen")&&this.initFromFen(this.getAttr("fen")),(this._o.enableMarkers||this.getAttr("marks")||this._o.allowDrawing||this._preMoveEnabled&&this.getPreMoveHighlighting().arrow||this.getMoveHighlighting().arrow)&&(this._boardArrows=new Ro(this)),this._setupKeyBindings();var u=this.getAttr("marks");u&&this._setupMarks(u),this.getAttr("never-active")||(this._makeActive=function(t){co.setActiveBoard(e)},this.addEventListener(r.ACTIVE_EVENT_LISTENER,this._makeActive),this.getAttr("dont-start-active")||this._makeActive())}}},{key:"doWithSoundsAndAnimsOff",value:function(e){this.setAnimsEnabled(!1);var t=this.getBoardSounds();t&&this.changeBoardSounds(!1,{persist:!1}),e(),t&&this.changeBoardSounds(!0,{persist:!1}),this.setAnimsEnabled(!0)}},{key:"autoSize",value:function(){var e=this;setTimeout((function(){e._autoHeight&&(Ho.log("setting auto height to client width:"+e.clientWidth+"px"),e.style.height=e.clientWidth+"px"),e._autoWidth&&(Ho.log("auto size width set to :"+e.clientHeight+"px"),e.style.width=e.clientHeight+"px")}),(this._isApp,0))}},{key:"_setupOptions",value:function(){this._o={},this._o.boardSize=null,this._o.enableMarkers=this.getAttr("enable-markers"),this._o.disablePieceMovement=this.getAttr("disablePieceMovement"),this._o["highlight-move-arrow"]=this.getAttr("highlight-move-arrow"),this._o["highlight-move-square-colour"]=this.getAttr("highlight-move-square-colour"),this._o["highlight-pre-move-arrow"]=this.getAttr("highlight-pre-move-arrow"),this._o["highlight-pre-move-square-colour"]=this.getAttr("highlight-pre-move-square-colour"),this._o.coordsStyle=this.getAttr("coords-style")||(this._isApp?"internal":"four-sides"),this._o.pieceStyle=this.getAttr("pieceStyle")||"merida-gradient",this._o.pieceMovementSpeed=this.getAttr("pieceMovementSpeed")||150,this._o.boardStyle=this.getAttr("boardStyle")||"blue-gradient",this._o["disable-sound"]=this.getAttr("disable-sound"),this._o.coordsSize=this.getAttr("coordsSize")||"medium",this._o.confirmMoves=this.getAttr("confirmMoves"),this._o.dragAndDrop="false"!=this.getAttr("dragAndDrop"),this._o.clickAndClick="false"!=this.getAttr("clickAndClick"),this._restoreOptionsFromStorage()}},{key:"_restoreOptionsFromStorage",value:function(){if(this.prefStorage){var e=this.prefStorage.getObject("options");e&&Object.assign(this._o,e)}}},{key:"_saveOptionsToStorage",value:function(){this.prefStorage&&this.prefStorage.setObject("options",this._o)}},{key:"getCommentHolder",value:function(){return this._commentHolder}},{key:"setCommentHolder",value:function(e){this._commentHolder=e}},{key:"saveBoardAnnotations",value:function(){var e=this.getCurrentMove(),t=null;this._boardArrows&&(e.prev&&e.prev.atStart?(t=e,this._boardArrows.saveBoardAnnotationsToMove(e,!1)):e.prev&&!e.prev.atEnd&&(t=e.prev,this._boardArrows.saveBoardAnnotationsToMove(e.prev,!0))),this.squareHighlighter&&(e.prev&&e.prev.atStart?(t=e,this.squareHighlighter.saveBoardAnnotationsToMove(e,!1)):e.prev&&!e.prev.atEnd&&(t=e.prev,this.squareHighlighter.saveBoardAnnotationsToMove(e.prev,!0))),t&&this.eventHub.fire("savedBoardAnnotations",{move:t}),this.moveList&&this.moveList.fire("moveListChanged",{})}},{key:"launchAnnotatePanel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentMove(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getAttribute("data-id"),i=document.querySelector("#anno-board-"+r);if(this._annoDialog||!i){var a=this.hasAttribute("no-annotation-comments")?'no-comments="true"':"";this._annoDialog&&this._annoDialog.close(),this._annoDialog=U.create({dimming:!1,modal:!1,closeCallback:function(t){t.querySelector("annotation-panel").destroy(),e._annoDialog=null},dialogClass:"ct-annotation-dialog",title:Object(o.d)("Annotations"),content:'<annotation-panel id="anno-board-'.concat(r,'" data-board-id="').concat(r,'" ').concat(a,"></annotation-panel>"),buttons:[{label:Object(o.d)("Ok"),action:function(e){e.dialog.close()}}]}),this._annoDialog.querySelector("annotation-panel").setCurrentMove(t,n)}else i.setCurrentMove(t,n)}},{key:"_setupMarks",value:function(e){var t=A.parseCommentArrows(e),n=A.parseCommentSquares(e),r=new A;r.postArrows=t,r.postSquares=n,this._boardArrows&&this._boardArrows.drawMoveAnnotationArrows(r),this.squareHighlighter&&this.squareHighlighter.highlightMoveSquares(r)}},{key:"drawMoveAnnotations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._boardArrows&&this._boardArrows.drawMoveAnnotationArrows(e,t),this.squareHighlighter&&this.squareHighlighter.highlightMoveSquares(e,t)}},{key:"_setupKeyBindings",value:function(){Ve.boardAdded||(Ve.boardAdded=!0)}},{key:"_foo",value:function(e){Ho.log({keyEvent:e},"got sequence")}},{key:"connectedCallback",value:function(){this._init()}},{key:"attributeChangedCallback",value:function(e,t,n){}},{key:"getPieceMovement",value:function(){return this.pieceMovement}},{key:"changeClickAndClick",value:function(e){this._o.clickAndClick=e,this.pieceMovement&&this.pieceMovement.changeClickAndClick(e),this._saveOptionsToStorage()}},{key:"changeDragAndDrop",value:function(e){this._o.dragAndDrop=e,this.pieceMovement&&this.pieceMovement.changeDragAndDrop(e),this._saveOptionsToStorage()}},{key:"getDragAndDrop",value:function(){return this._o.dragAndDrop}},{key:"getClickAndClick",value:function(){return this._o.clickAndClick}},{key:"getBoardSounds",value:function(){return this._boardSounds&&this._boardSounds.getEnabled()}},{key:"getBoardSoundsObject",value:function(){return this._boardSounds}},{key:"changeBoardSounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.persist,r=void 0===n||n;this._o["disable-sound"]=!e,r&&this._saveOptionsToStorage(),e?(this._boardSounds||(this._boardSounds=new Po,this._boardSounds.createSound("takesounds/78263__SuGu14__Metall01","takePiece"),this._boardSounds.createSound("movesounds/77971__SuGu14__Fusta_0_05","moveWhitePiece"),this._boardSounds.createSound("movesounds/10537__batchku__Hit_knuckle_15_004","moveBlackPiece"),this._boardSounds.createSound("analysis/76426__spazzo_1493__Finished","finished")),this._boardSounds.setEnabled(!0)):this._boardSounds&&this._boardSounds.setEnabled(!1)}},{key:"changePieceMovementSpeed",value:function(e){this._o.pieceMovementSpeed=e,this._pieceMovementSpeed=e,this._saveOptionsToStorage()}},{key:"getPieceMovementSpeed",value:function(){return this._o.pieceMovementSpeed}},{key:"getAllowDrawing",value:function(){return this._o.allowDrawing}},{key:"isDrawingDisabled",value:function(){return this._drawingDisabled}},{key:"setDrawingDisabled",value:function(e){this._drawingDisabled=e}},{key:"getAutoPromote",value:function(){return this._o.autoPromote||"disabled"}},{key:"changeAutoPromote",value:function(e){this._o.autoPromote=e,this._saveOptionsToStorage()}},{key:"changePieceStyle",value:function(e){this.classList.remove("ct-piece-style-".concat(this._o.pieceStyle)),this._o.pieceStyle=e,this.classList.add("ct-piece-style-".concat(this._o.pieceStyle)),"merida-gradient"!=this._o.pieceStyle&&n(189)("./".concat(this._o.pieceStyle,"/pieces.css")).then((function(e){})),this._saveOptionsToStorage()}},{key:"getPieceStyle",value:function(){return this._o.pieceStyle}},{key:"getConfirmMoves",value:function(){return this._o.confirmMoves}},{key:"getTemporaryConfirmMoves",value:function(){return this._temporaryConfirmMoves}},{key:"setTemporaryConfirmMoves",value:function(e){return this._temporaryConfirmMoves=e}},{key:"changeConfirmMoves",value:function(e){this._o.confirmMoves=e,this._saveOptionsToStorage()}},{key:"changeBoardStyle",value:function(e){var t=this;this._o.boardStyle=e;var o=r.styles.find((function(t){return t.name==e}));if(!o)throw new Error("ChessBoard: unknown board style:"+e);if(this.boardStyle&&(this.classList.remove("ct-board-style-".concat(this.boardStyle.name)),this.classList.remove(this.boardStyle.type)),this.boardStyle=o,this.classList.add("ct-board-style-".concat(this.boardStyle.name)),this.classList.add(this.boardStyle.type),this._o.boardStyle!=r.DEFAULT_BOARD_STYLE){this._isApp;"",n(186)("./".concat(this._o.boardStyle,".scss")).then((function(e){})).catch((function(e){Ho.error("Error loading board style:",t._o.boardStyle,e)}))}this._saveOptionsToStorage()}},{key:"getBoardStyle",value:function(){return this.boardStyle.name}},{key:"setColourToBottom",value:function(e){e==b.COLOUR_UNSET&&(e=b.WHITE),(this.isFlipped()?b.BLACK:b.WHITE)!=e&&this.flipBoard()}},{key:"flipBoard",value:function(){this.isFlipped()?this.setAttribute("flipped","false"):this.setAttribute("flipped","true"),this._supressingToMoveUpdates=!0,this._handleFlippedBoard(),this._supressingToMoveUpdates=!1}},{key:"changeCoordsSize",value:function(e){var t=this.querySelector(".ct-board-holder");t.classList.remove("ct-board-coords-"+this._o.coordsSize),this._o.coordsSize=e,"medium"!=e&&t.classList.add("ct-board-coords-"+e),this._saveOptionsToStorage()}},{key:"getCoordsSize",value:function(){return this._o.coordsSize}},{key:"changeCoordsStyle",value:function(e){var t=this.querySelector(".ct-board-holder");this._isApp&&"internal"!=e&&"none"!=e&&(e="internal"),this._o.coordsStyle&&"none"!=this._o.coordsStyle&&t.classList.remove("ct-board-coords-style-"+this._o.coordsStyle),this._o.coordsStyle=e,"none"!=this._o.coordsStyle?(this.coords?this.coords.coordsStyle=this._o.coordsStyle:this.coords=new so(this,{coordsStyle:this._o.coordsStyle}),this.coords.render()):this.coords&&(this.coords.removeCoordsFromBoard(),this.coords=null),this._saveOptionsToStorage()}},{key:"getCoordsStyle",value:function(){return this._o.coordsStyle}},{key:"getMoveList",value:function(){return this.moveList?this.moveList.moveList:null}},{key:"getMoveListDisplay",value:function(){return this.moveList?this.moveList:null}},{key:"getCurrentMove",value:function(){return this.moveList?this.moveList.moveList.getCurrentMove():null}},{key:"isPreMoveEnabled",value:function(){return this._preMoveEnabled}},{key:"isSetupMode",value:function(){return this._setupMode}},{key:"drawArrowForMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";this._boardArrows&&this._boardArrows.drawMove(e,t)}},{key:"addPreMove",value:function(e){var t=e.move,n=e.colour;this._preMoveEnabled&&(this._preMove={move:t,colour:n},this._boardArrows?this.getPreMoveHighlighting().arrow&&(Ho.log("adding pre move arrow"),this.removeArrowsOfType("preMove"),this._boardArrows.drawMove(t,"preMove")):Ho.log("arrows not initialised"),this.squareHighlighter&&this.getPreMoveHighlighting()["square-colour"]&&this.squareHighlighter.highlightPreMove(t),Ho.log({preMove:this._preMove},"added pre move"))}},{key:"resetPreMove",value:function(){this._preMove&&(this._preMove=null,this.removeArrowsOfType("preMove"),this.squareHighlighter&&this.squareHighlighter.removeHighlightPreMove())}},{key:"drawMoveArrow",value:function(e,t){this._boardArrows||(this._boardArrows=new Ro(this)),this._boardArrows.drawMove(e,t)}},{key:"removeArrowsOfType",value:function(e){this._boardArrows&&this._boardArrows.removeArrowsOfType(e)}},{key:"changeMoveHighlighting",value:function(e,t){var n=this.getCurrentMove();"arrow"==e?(this.removeArrowsOfType("play"),t&&(this._boardArrows||(this._boardArrows=new Ro(this)),n&&n.prev&&!n.prev.atStart&&this._boardArrows.drawMove(n.prev,"play"))):"square-colour"==e&&(this.squareHighlighter.removeHighlightFromTo(),t&&n&&n.prev&&!n.prev.atStart&&this.squareHighlighter.highlightFromTo(n.prev)),this._o["highlight-move-"+e]=t?"true":"false",this._saveOptionsToStorage()}},{key:"getMoveHighlighting",value:function(){return{arrow:"true"==this._o["highlight-move-arrow"],"square-colour":"false"!=this._o["highlight-move-square-colour"]}}},{key:"changePreMoveHighlighting",value:function(e,t){this.getCurrentMove();"arrow"==e?(this.removeArrowsOfType("preMove"),t&&(this._boardArrows||(this._boardArrows=new Ro(this)),this._preMove&&this._boardArrows.drawMove(this._preMove.move,"preMove"))):"square-colour"==e&&(this.squareHighlighter.removeHighlightPreMove(),t&&this._preMove&&this.squareHighlighter.highlightPreMove(this._preMove.move)),this._o["highlight-pre-move-"+e]=t?"true":"false",this._saveOptionsToStorage()}},{key:"getPreMoveHighlighting",value:function(){return{arrow:"false"!=this._o["highlight-pre-move-arrow"],"square-colour":"true"==this._o["highlight-pre-move-square-colour"]}}},{key:"viewInDb",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isFlipped(),n=this.moveList.toPGN(),r=this.querySelector(".ct-view-in-db-pgn-form"),o=r.querySelector(".ct-view-in-db-pgn-field"),i=r.querySelector(".ct-view-in-db-ae"),a=r.querySelector(".ct-view-in-db-flip");o.value=n,(e||this.isPlaying)&&i&&(i.value="0"),t&&a&&(a.value="1"),r.submit()}},{key:"render",value:function(){var e=["a","b","c","d","e","f","g","h"],t=["light","dark"],n="ct-board-holder";"none"!=this._o.coordsStyle&&(n+=" ct-board-coords-style-"+this._o.coordsStyle),this._moveEntryId=Object(F.a)(),this._moveEntryErrorId=Object(F.a)();var r='<div class="DISABLEDct-accessible-content ct-board-accessibility">\n             <div aria-live="polite" role="status" tabindex="0" class="ct-accessible-content ct-board-accessibility-description"></div>\n             <div class="ct-accessible-content ct-board-accessibility-move-input">\n              <form action="#" class="ct-board-make-move-form">\n               <input class="" id="'.concat(this._moveEntryId,'" aria-label="').concat(Object(o.d)("Enter move , e.g. e2e4, e1g1 to castle, e7e8q to promote"),'" type="text" aria-invalid="false" \n                 aria-describedby="').concat(this._moveEntryErrorId,'" name="moveEntryField">\n               <button class="ct-board-make-move-button">').concat(Object(o.d)("Make move"),'</button>\n               <div class="" id="').concat(this._moveEntryErrorId,'" role="alert"></div>\n              </form>\n             </div>\n            </div>');r+='<form method="POST" style="display:none;" class="ct-view-in-db-pgn-form" action="'.concat("https://old.chesstempo.com/game-database.html",'" \n             target="_blank"><textarea class="ct-view-in-db-pgn-field" name="postpgn"></textarea>\n            <input type="hidden" value="1" name="ae" class="ct-view-in-db-ae"></input>\n            <input type="hidden" value="0" name="flip" class="ct-view-in-db-flip"></input>\n            </form>'),r+='<div aria-hidden="true" class="'+n+'" >             <div class="ct-board-inner-holder">',this.coords&&(r+=this.coords.renderHTML());var i=Object(F.a)();r+='<div class="ct-board-to-move-marker">\n<svg style="float:left" viewBox="0 0 120 120" width="100%" height="100%"\n xmlns="http://www.w3.org/2000/svg" version="1.1" \n xmlns:xlink="http://www.w3.org/1999/xlink">\n\n  <filter id="dropShadow-'.concat(i,'">\n    <feGaussianBlur in="SourceAlpha" stdDeviation="3" />\n    <feOffset dx="2" dy="4" />\n    <feMerge>\n        <feMergeNode />\n        <feMergeNode in="SourceGraphic" />\n    </feMerge>\n  </filter>\n\n  <circle cx="60"  cy="60" r="50"\n          filter="url(#dropShadow-').concat(i,')" />\n</svg></div>'),r+='<div class="ct-board-squares">';for(var a=0,s=8;s>0;s--){a++,r+='<div class="ct-board-row">';for(var c=0;c<8;c++)a++,r+='<div data-square-id="'+e[c]+s+'" class="ct-square ct-square-'+t[a%2]+'"></div>';r+="</div>"}r+="</div></div></div>",this.innerHTML=r}},{key:"getMoveTextEntryField",value:function(){return this.querySelector("#".concat(this._moveEntryId))}},{key:"getMoveEntryErrorField",value:function(){return this.querySelector("#".concat(this._moveEntryErrorId))}},{key:"showMoveEntryError",value:function(e){this.getMoveEntryErrorField().innerHTML=e,this.getMoveTextEntryField().setAttribute("aria-invalid","true"),this.getMoveTextEntryField().focus()}},{key:"clearMoveEntryError",value:function(e){""==this.getMoveEntryErrorField().innerHTML&&"true"!=this.getMoveTextEntryField().getAttribute("aria-invalid")||(this.getMoveEntryErrorField().innerHTML="",this.getMoveTextEntryField().setAttribute("aria-invalid","false"))}},{key:"clearMoveEntry",value:function(){this.getMoveTextEntryField().value=""}},{key:"getMoveTextMakeMoveButton",value:function(){return this.querySelector(".ct-board-make-move-button")}},{key:"getMoveTextMakeMoveForm",value:function(){return this.querySelector(".ct-board-make-move-form")}},{key:"toMove",value:function(){return this._boardState.toMove}},{key:"_updateToMove",value:function(){var e=this.querySelector(".ct-board-to-move-marker"),t=!0;if(e){var n="ct-board-to-move-marker";this._boardState.toMove==b.WHITE?n+=" ct-board-to-move-marker-white":(n+=" ct-board-to-move-marker-black",t=!1),this.isFlipped()&&(t=!t),n+=t?" ct-board-to-move-marker-bottom":" ct-board-to-move-marker-top",e.setAttribute("class",n)}this._supressingToMoveUpdates||this.eventHub.fire("toMoveUpdated",{boardState:this._boardState}),this._debounceAccessibilityUpdate()}},{key:"getSquaresContainer",value:function(){return this.getElementsByClassName("ct-board-squares")[0]}},{key:"isFlipped",value:function(){var e=this.getAttribute("flipped");return!!e&&"false"!=e}},{key:"getBoardState",value:function(){return this._boardState}},{key:"getSquareAt",value:function(e,t){var n=".ct-board-squares .ct-square[data-square-id='"+(String.fromCharCode("a".charCodeAt(0)+e)+(t+1))+"']";return this.querySelector(n)}},{key:"setAnimsEnabled",value:function(e){this._disabledAnims=!e}},{key:"reverseMove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.animateMove,o=void 0===r||r;n.updateMoveList;if(this._finishLastAnim(),!e.emptyMove){var i=e.fromColumn,a=e.fromRow,s=e.toColumn,c=e.toRow,l=this.getDisplayPieceAt(s,c),u=l.piece;this.clearDisplayPieceAt(s,c);var d=this._boardState.clone(),h=function(){if(t.setDisplayPieceAt(l,i,a),l.setVisualPosition(i,a),u.pieceType==b.KING&&Math.abs(s-i)>1){var n,r,c=a,h=a;d.isCastleKingSide(e,!0)?(n=5,r=7):d.isCastleQueenSide(e,!0)&&(n=3,r=0);var p=function(){t.moveDisplayPiece(n,c,r,h)};if(!t._disabledAnims&&o){var f=t._getPercentageFromColumnRow(r,h),v=f.perX,m=f.perY,g=t.getDisplayPieceAt(n,c);t._lastAnim=new Kr({to:[{propName:"left",value:v},{propName:"top",value:m}],units:"%",element:g.getNode(),easingFunction:Kr.easing.easeOutQuad,completedFunction:p,duration:t._pieceMovementSpeed}),t._lastAnim.start()}else p()}};if(!this._disabledAnims&&o){var p=this._getPercentageFromColumnRow(i,a),f=p.perX,v=p.perY;this._lastAnim=new Kr({to:[{propName:"left",value:f},{propName:"top",value:v}],element:l.getNode(),units:"%",easingFunction:Kr.easing.easeOutQuad,completedFunction:h,duration:this._pieceMovementSpeed})}else h();e.takenPiece&&(u.pieceType==b.PAWN&&Math.abs(s-i)>0&&!e.getBoardState().get(s,c)?(e.takenPiece.column=s,u.colour==b.WHITE?e.takenPiece.row=4:e.takenPiece.row=3):(e.takenPiece.column=s,e.takenPiece.row=c),this.addPieceToBoard(e.takenPiece)),e.promotionPiece&&(e.promotionPiece.colour=C.flipToMove(d.toMove),l.changePiece(new b(b.PAWN,e.promotionPiece.colour,i,a))),this._boardState.reverseMove(e),this._lastAnim&&this._lastAnim.start(),e.prev&&(this._boardArrows&&(e.prev.atStart||this.getMoveHighlighting().arrow&&(this.removeArrowsOfType("play"),this._boardArrows.drawMove(e.prev,"play")),this._boardArrows.drawMoveAnnotationArrows(e.prev)),this.squareHighlighter&&(e.prev.atStart||!e.prev.emptyMove&&this.getMoveHighlighting()["square-colour"]&&this.squareHighlighter.highlightFromTo(e.prev),e.prev.emptyMove||this.squareHighlighter.highlightMoveSquares(e.prev)))}this._updateToMove()}},{key:"_finishLastAnim",value:function(){if(this._lastAnim){for(;this._lastAnim.isRunning();)this._lastAnim.complete();this._lastAnim=null}}},{key:"doAfterLastAnim",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r*n>3e3||!this._lastAnim?e():this._lastAnim.isRunning()?setTimeout((function(){t.doAfterLastAnim(e,n,r+1)}),n):e()}},{key:"_getPercentageFromColumnRow",value:function(e,t){return{perX:(e=this.isFlipped()?7-e:e)/8*100,perY:(7-(t=this.isFlipped()?7-t:t))/8*100}}},{key:"pixelsToColumnRow",value:function(e,t){var n=this.getSquaresContainer(),r=Math.floor(e/n.clientWidth*8),o=7-Math.floor(t/n.clientHeight*8);return this.isFlipped()&&(r=7-r,o=7-o),{column:r,row:o}}},{key:"cancelMovesAndAnims",value:function(){this._finishLastAnim(),this.pieceMovement&&this.pieceMovement.cancelMovement()}},{key:"playMoveWithEventFiring",value:function(e,t,n){if(e.setBoardState(this._boardState.clone()),!this.eventHub.fire("beforeLegalMoveMade",{move:e}))return Ho.log({move:e},"move veteod by before legal move"),!1;var r={fromInteraction:t};return n&&n.shiftKey&&(r.addDuplicateAsVariation=!0),this.playMove(e,r),this.eventHub.fire("afterLegalMoveMade",{move:e}),!0}},{key:"playMove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.supressSounds,o=void 0!==r&&r,i=n.animateMove,a=void 0===i||i,s=n.animSpeed,c=void 0===s?this._pieceMovementSpeed:s,l=n.updateMoveList,u=void 0===l||l,d=n.fromInteraction,h=void 0!==d&&d,p=n.addDuplicateAsVariation,f=void 0!==p&&p;this._finishLastAnim();var v=e.fromColumn,m=e.fromRow,g=e.toColumn,y=e.toRow;if(!e.emptyMove){var _=this.getDisplayPieceAt(g,y),C=this.getDisplayPieceAt(v,m),w=this._getPercentageFromColumnRow(g,y),S=w.perX,k=w.perY,A=this._boardState.clone(),E=A.toMove,T=!o&&this.getBoardSounds(),O=function(){_?T&&t._boardSounds&&t._boardSounds.playSound("takePiece"):T&&t._boardSounds&&(C.piece.colour==b.WHITE?t._boardSounds.playSound("moveWhitePiece"):t._boardSounds.playSound("moveBlackPiece"))},x=function(){T&&t._boardSounds&&(C.piece.colour!=b.WHITE?t._boardSounds.playSound("moveWhitePiece"):t._boardSounds.playSound("moveBlackPiece"))},M=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1,I=!M;document.hidden&&(I=!1);var L=function(){if(t.moveDisplayPiece(v,m,g,y),e.promotionPiece&&(e.promotionPiece.colour=E,C.changePiece(new b(e.promotionPiece.pieceType,e.promotionPiece.colour,g,y))),I&&O(),_&&_.destroy(),C.piece.pieceType==b.KING&&Math.abs(g-v)>1){var n,r,o=m,i=y;A.isCastleKingSide(e)?(n=7,r=5):A.isCastleQueenSide(e)&&(n=0,r=3);var s=function(){t.moveDisplayPiece(n,o,r,i),I&&x()};if(!t._disabledAnims&&a){var l=t._getPercentageFromColumnRow(r,i),u=l.perX,d=l.perY,h=t.getDisplayPieceAt(n,o);t._lastAnim=new Kr({to:[{propName:"left",value:u},{propName:"top",value:d}],units:"%",element:h.getNode(),easingFunction:Kr.easing.easeOutQuad,completedFunction:s,duration:c}),t._lastAnim.start()}else s()}if(C.piece.pieceType==b.PAWN&&e.toColumn!=e.fromColumn&&!_&&(C.piece.colour==b.WHITE&&5==y||C.piece.colour==b.BLACK&&2==y)){var p=t.getDisplayPieceAt(g,m);p&&p.piece.pieceType==b.PAWN&&(t.clearDisplayPieceAt(g,m),p.destroy())}};!this._disabledAnims&&a?(this._lastAnim=new Kr({to:[{propName:"left",value:S,units:"%"},{propName:"top",value:k,units:"%"}],element:C.getNode(),units:"%",easingFunction:Kr.easing.easeOutQuad,completedFunction:L,duration:c}),this._lastAnim.start()):L(),I||(O(),C.piece.pieceType==b.KING&&Math.abs(g-v)>1&&x())}this._boardState.playMove(e);var N=e;return u&&this.moveList&&(N=this.moveList.playMove(e,{fromInteraction:h,addDuplicateAsVariation:f})),this._boardArrows&&(!e.emptyMove&&this.getMoveHighlighting().arrow&&(this.removeArrowsOfType("play"),this._boardArrows.drawMove(e,"play")),this._boardArrows.drawMoveAnnotationArrows(e)),!e.emptyMove&&this.squareHighlighter&&(this.getMoveHighlighting()["square-colour"]&&this.squareHighlighter.highlightFromTo(e),this.squareHighlighter.highlightMoveSquares(e)),this._updateToMove(),this._preMove&&this._playPreMove(),N}},{key:"_playPreMove",value:function(){if(Ho.log({preMove:this._preMove},"attempting to replay pre-move"),this._preMove){if(this._boardState.toMove!=this._preMove.colour)return Ho.error({preMove:this._preMove,boardColour:this._boardState.toMove},"playPreMove called, but for wrong colour"),void this.resetPreMove();if(this._boardState.canMove(this._preMove.move)){var e=this._preMove.move;this.resetPreMove(),this.playMoveWithEventFiring(e)}else this.resetPreMove()}else Ho.error("playPreMove called, but no pre move available")}},{key:"canMove",value:function(e){return this._boardState&&e&&this._boardState.canMove(e)}},{key:"addPieceToBoard",value:function(e){var t=new E(this,e,{svg:!0});this.setDisplayPieceAt(t,e.column,e.row),t.createNode()}},{key:"getDisplayPieceAt",value:function(e,t){return this._displayPieces?this._displayPieces[e][t]:null}},{key:"setDisplayPieceAt",value:function(e,t,n){this._displayPieces[t][n]=e,e&&(e.piece.column=t,e.piece.row=n)}},{key:"clearDisplayPieceAt",value:function(e,t){this.setDisplayPieceAt(null,e,t),this._displayPieces[e][t]=null}},{key:"moveDisplayPiece",value:function(e,t,n,r){var o=this.getDisplayPieceAt(e,t);this.clearDisplayPieceAt(e,t),this.setDisplayPieceAt(o,n,r),o.setVisualPosition(n,r)}},{key:"_handleFlippedBoard",value:function(){var e=this.getElementsByClassName("ct-square");Array.prototype.forEach.call(e,(function(e){var t=e.getAttribute("data-square-id"),n=t[0],r=9-parseInt(t[1]);e.setAttribute("data-square-id",A.columnToChar(7-A.charToColumn(n))+""+r)}));for(var t=0;t<8;t++)for(var n=0;n<8;n++){var r=this.getDisplayPieceAt(t,n);r&&r.setVisualPosition(t,n)}this.coords&&this.coords.render(),this._boardArrows&&this._boardArrows.redrawAll(),this.squareHighlighter&&this.squareHighlighter.redrawAll(),this._updateToMove(),this.eventHub.fire("boardFlipped")}},{key:"_cleanDisplayPieces",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++){var n=this.getDisplayPieceAt(e,t);n&&n.destroy()}}},{key:"_setupDisplayPiecesFromBoardState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._boardState;this._displayPieces=new Array(8);for(var t=0;t<8;t++){this._displayPieces[t]=new Array(8);for(var n=0;n<8;n++){var r=e.get(t,n);if(r){var o=new E(this,r,{svg:!0});this._displayPieces[t][n]=o,o.createNode()}}}}},{key:"_resetDisplay",value:function(){if(this._updateToMove(),this._boardArrows&&this._boardArrows.removeAll(),this.resetPreMove(),this.squareHighlighter&&this.squareHighlighter.removeAll(),!this._pieceMovementDisabled){var e=this.getPieceMovement();e?e.reset():(Ho.error("Got null piece movement"),Ho.trace())}}},{key:"setToCurrentMove",value:function(){var e=this.getCurrentMove().getPreMoveBoardState().clone();this.initFromBoardState(e)}},{key:"initFromBoardState",value:function(e){this._finishLastAnim(),this._cleanDisplayPieces(),this._boardState=e,this._setupDisplayPiecesFromBoardState(),this._resetDisplay()}},{key:"supressToMoveUpdates",value:function(){this._supressingToMoveUpdates=!0}},{key:"unsupressToMoveUpdates",value:function(){this._supressingToMoveUpdates=!1}},{key:"toFen",value:function(){return this._boardState.toFen()}},{key:"setFromGame",value:function(e){this.initFromFen(e.get("startFen")),this.moveList.setFromGame(e)}},{key:"initFromFen",value:function(e,t){var n=this._supressingToMoveUpdates;this._supressingToMoveUpdates=t,this._initialised||this._init(),this._finishLastAnim(),this._cleanDisplayPieces(),this._boardState.initFromFen(e),this._setupDisplayPiecesFromBoardState(),this._resetDisplay(),this.moveList&&(this.moveList._init&&this.moveList._init(),this.moveList.reset(),this.moveList.moveList.initFromFen(e)),this._supressingToMoveUpdates=n}},{key:"destroy",value:function(){this._finishLastAnim(),this.legalMoveHandler&&this.legalMoveHandler.destroy(),this.pieceMovement&&this.pieceMovement.destroy(),this.squareHighlighter&&this.squareHighlighter.destroy(),this.eventHub.destroy(),this.resize&&this.resize.destroy(),this._makeActive&&this.removeEventListener(r.ACTIVE_EVENT_LISTENER,this._makeActive),this._boundAutoSize&&window.removeEventListener("resize",this._boundAutoSize),this._del.destroy()}},{key:"makeInactive",value:function(){co.getActiveBoard()==this&&co.setActiveBoard(null)}},{key:"makeActive",value:function(){this._makeActive&&this._makeActive()}}]),r}(babelHelpers.wrapNativeSuper(HTMLElement));function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}Object(Te.a)(Bo,Ee),Bo.flipColumnRow=function(e,t){return{column:7-e,row:7-t}},Bo.flipFromTo=function(e,t,n,r){var o=Bo.flipColumnRow(e,t),i=(e=o.column,t=o.row,Bo.flipColumnRow(n,r));return{fromColumn:e,fromRow:t,toColumn:n=i.column,toRow:r=i.row}},Bo.DEFAULT_BOARD_STYLE="merida-gradient",Bo.styles=[{name:"blue-gradient",label:Object(o.d)("Blue - gradient"),type:"ct-board-style-gradient"},{name:"blue",label:Object(o.d)("Blue"),type:"ct-board-style-colour"},{name:"brown-cream",label:Object(o.d)("Brown and cream"),type:"ct-board-style-colour"},{name:"brown",label:Object(o.d)("Brown"),type:"ct-board-style-colour"},{name:"cadet-grey-gradient",label:Object(o.d)("Cadet grey - gradient"),type:"ct-board-style-gradient"},{name:"camouflage",label:Object(o.d)("Camouflage"),type:"ct-board-style-tiled"},{name:"cracked-stone",label:Object(o.d)("Cracked stone"),type:"ct-board-style-tiled"},{name:"fabric",label:Object(o.d)("Fabric"),type:"ct-board-style-tiled"},{name:"gold-silver",label:Object(o.d)("Gold and silver"),type:"ct-board-style-tiled"},{name:"granite",label:Object(o.d)("Granite"),type:"ct-board-style-tiled"},{name:"grass",label:Object(o.d)("Grass"),type:"ct-board-style-tiled"},{name:"green-plasma",label:Object(o.d)("Green plasma"),type:"ct-board-style-full-image"},{name:"green-white",label:Object(o.d)("White and green"),type:"ct-board-style-colour"},{name:"green",label:Object(o.d)("Green"),type:"ct-board-style-colour"},{name:"grey-diagonals",label:Object(o.d)("Book"),type:"ct-board-style-pattern"},{name:"grey-gradient",label:Object(o.d)("Grey - gradient"),type:"ct-board-style-gradient"},{name:"grey",label:Object(o.d)("Grey"),type:"ct-board-style-colour"},{name:"leather",label:Object(o.d)("Leather"),type:"ct-board-style-tiled"},{name:"light-grey",label:Object(o.d)("Light grey"),type:"ct-board-style-colour"},{name:"marble-brown",label:Object(o.d)("Marble - brown"),type:"ct-board-style-tiled"},{name:"marble-green",label:Object(o.d)("Marble - green"),type:"ct-board-style-tiled"},{name:"metal",label:Object(o.d)("Metal"),type:"ct-board-style-tiled"},{name:"sand-snow",label:Object(o.d)("Sand and snow"),type:"ct-board-style-tiled"},{name:"stucco",label:Object(o.d)("Stucco"),type:"ct-board-style-tiled"},{name:"teal-gradient",label:Object(o.d)("Teal - gradient"),type:"ct-board-style-gradient"},{name:"white-grey",label:Object(o.d)("White and grey"),type:"ct-board-style-shadow-gradient"},{name:"wood-dark",label:Object(o.d)("Wood - dark"),type:"ct-board-style-tiled"},{name:"wood-dark2",label:Object(o.d)("Wood - dark 2"),type:"ct-board-style-gradient"},{name:"wood-light",label:Object(o.d)("Wood - light"),type:"ct-board-style-tiled"},{name:"wood-medium",label:Object(o.d)("Wood - medium"),type:"ct-board-style-tiled"},{name:"wood-pine",label:Object(o.d)("Wood - pine"),type:"ct-board-style-full-image"}],Bo.ACTIVE_EVENT_LISTENER=Object(u.a)("pointerover"),window.customElements.define("chess-board",Bo);var qo=function(e){babelHelpers.inherits(n,e);var t=jo(n);function n(e){var r;return babelHelpers.classCallCheck(this,n),e=r=t.call(this),babelHelpers.possibleConstructorReturn(r,e)}return babelHelpers.createClass(n,[{key:"connectedCallback",value:function(){this._headerRenderFunction=this._defaultHeaderRenderFunction}},{key:"disconnectedCallback",value:function(){console.log("chess board detached")}},{key:"attributeChangedCallback",value:function(e,t,n){console.log("attr:"+e+" oldval:"+t+" newVal:"+n)}},{key:"destroy",value:function(){}},{key:"setHeaderRenderFunction",value:function(e){this._headerRenderFunction=e}},{key:"render",value:function(){this.innerHTML=this._headerRenderFunction(this.game)}},{key:"_defaultHeaderRenderFunction",value:function(e){var t=e.getTag("Black"),n=e.getTag("White"),r=e.getTag("WhiteElo");"?"==r&&(r=e.getTag("WhiteRating"));var o=e.getTag("BlackElo");"?"==o&&(o=e.getTag("BlackRating"));var i=e.getTag("Event"),a=e.getTag("Date"),s=e.getTag("Round"),c=e.getTag("Site"),l=e.getTag("Result"),u=e.getTag("ECO"),d={whitePlayer:n,blackPlayer:t,whiteElo:"?"!=r&&r,blackElo:"?"!=o&&o,event:"?"!=i&&i,round:"?"!=s&&s,site:"?"!=c&&c,result:"?"!=l&&l,eco:"?"!=u&&u,date:"????.??.??"!=a&&a};return'\n        <div class="ct-game-header-players-and-result"><span class="ct-game-header-players"> '.concat(d.whitePlayer," ").concat(d.whiteElo?"(".concat(d.whiteElo,")"):""," - ").concat(d.blackPlayer," ").concat(d.blackElo?"(".concat(d.blackElo,")"):"","</span>\n ").concat(d.result?d.result:"",'\n</div>\n<div class="ct-game-header-event-site-round-eco-year"> ').concat(d.event?d.event:""," ").concat(d.site?"(".concat(d.site,")"):"","\n ").concat(d.round?"[".concat(d.round,"]"):"","\n").concat(d.eco?d.eco:"","\n").concat(d.date?d.date:"","\n</div>")}}]),n}(babelHelpers.wrapNativeSuper(HTMLElement));window.customElements.define("game-header",qo);var Vo;n(532),n(533),n(534);function zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}var Go=function(e){babelHelpers.inherits(r,e);var t,n=zo(r);function r(){return babelHelpers.classCallCheck(this,r),n.call(this)}return babelHelpers.createClass(r,null,[{key:"properties",get:function(){return{}}}]),babelHelpers.createClass(r,[{key:"getAttachmentProxies",value:function(){return this._attachmentProxies||(this._attachmentProxies=[]),this._attachmentProxies}},{key:"addAttachmentProxy",value:function(e){this.getAttachmentProxies().push(e)}},{key:"firstUpdated",value:function(){var e=this,t=this.getElementsByClassName("ct-pgn-viewer-multi-game-select")[0];if(this._gameSelectorListener=function(e){this.showGame(e.target.value)}.bind(this),t.addEventListener("change",this._gameSelectorListener),this.board=this.querySelector("chess-board[data-id='"+this.viewerId+"']"),this.moveList=this.querySelector("move-list[data-id='"+this.viewerId+"']"),this.controls=this.querySelector("board-controls[data-id='"+this.viewerId+"']"),this.gameHeader=this.querySelector("game-header[data-id='"+this.viewerId+"']"),this.analysisPanel=this.querySelector("analysis-panel[data-id='"+this.viewerId+"']"),this.evalGraph=this.querySelector("eval-graph[data-id='"+this.viewerId+"']"),this.board.autoSize(),this.analysisPanel&&(this.analysisPanel.setParentBoard(this.board),this.analysisPanel.on("gameAnalysisComplete",this._gameAnalysisComplete,this)),this.evalGraph&&this.evalGraph.setParentBoard(this.board),this.viewerBodyText&&("true"==this.getAttribute("has-url")?this.setupFromURL(this.viewerBodyText):C.isStringFEN(this.viewerBodyText)||this.setupFromPGN(this.viewerBodyText)),"true"==this.getAttribute("flip")&&this.board.flipBoard(),this._isMobile){var n=[{icon:"info",title:Object(o.d)("Display game details"),name:"info",action:function(t){if(console.log("game info clicked"),e._currentGame){var n='<game-header attribute-parent-id="'+e.viewerId+'" data-id="'+e.viewerId+'"></game-header>',r=U.create({title:Object(o.d)("Game details"),content:n,buttons:[{label:Object(o.d)("Ok"),action:function(e){e.dialog.close()}}],closeCallback:function(e){e.querySelector("game-header").destroy()}}).querySelector("game-header");r.game=e._currentGame,r.render()}else console.log("no game to get info for")}}];this.controls&&this.controls.addButtons({buttons:n,after:"analyse",menu:!1})}}},{key:"isExternal",value:function(){return!1}},{key:"render",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._isMobile=!!document.querySelector(".ct-mobile"),this._tr=parseInt(this.getAttribute("tr")||0),this._o={useGameHeader:!0,analysisPanel:!1,buttonsAboveMoves:!1},(this._isMobile||"false"==this.getAttribute("use-game-header"))&&(this._o.useGameHeader=!1),"true"==this.getAttribute("buttons-above-moves")&&(this._o.buttonsAboveMoves=!0),"guest"!=this.getAttribute("analysis-panel-username")&&this.getAttribute("analysis-panel")&&(this._o.analysisPanel=!0),this.getAttribute("eval-graph")&&(this._o.evalGraph=!0),this.getAttribute("m")&&(this._m=!0),this.viewerId=this.getAttribute("data-id")||"viewer"+Object(F.a)(),this.viewerBodyText=this.textContent.trim(),this.innerHTML="",this.setAttribute("attribute-controller-id",this.viewerId),n='<div class="ct-pgn-viewer-board-and-move-list">',n+='<div class="ct-pgn-viewer-move-list-and-controls mdc-card ct-elev--z8">',n+='<div class="ct-hidden ct-pgn-viewer-multi-game-selector-panel"><select class="ct-pgn-viewer-multi-game-select"></select></div>',o="up","down"==this.getAttribute("board-actions-menu-direction")&&(o="down"),i=this.isExternal()?'external="true"':"",r="<board-controls ".concat(i,' menu-direction="').concat(o,'" attribute-parent-id="').concat(this.viewerId,'" data-id="').concat(this.viewerId,'"></board-controls>'),this._o.buttonsAboveMoves&&(n+=r),this._o.useGameHeader&&(n+='<game-header attribute-parent-id="'+this.viewerId+'" data-id="'+this.viewerId+'"></game-header>'),n+='<move-list attribute-parent-id="'+this.viewerId+'" data-id="'+this.viewerId+'"></move-list>',this._o.buttonsAboveMoves||(n+=r),this._o.analysisPanel&&(n+='<analysis-panel data-id="'.concat(this.viewerId,'" attribute-parent-id="').concat(this.viewerId,'" tr="').concat(this._tr,'"></analysis-panel>')),n+="</div>",n+="</div>",this._o.evalGraph&&(n+='<div><eval-graph data-id="'.concat(this.viewerId,'" attribute-parent-id="').concat(this.viewerId,'"></eval-graph></div>')),this.innerHTML=n,a=document.createElement("div"),s=this.getAttribute("board-size")||"400px",c="","auto"!=s&&(c=this.getAttribute("board-auto-height")?"width:".concat(s,";"):"width:".concat(s,";height:").concat(s,";")),a.innerHTML='<div class="ct-pgn-viewer-board-holder">\n                  <chess-board  attribute-parent-id="'.concat(this.viewerId,'" class="ct-elev--z8 ct-pgn-viewer-board" touch-action="auto" style="').concat(c,'" data-id="').concat(this.viewerId,'"></chess-board>\n                 </div>'),(l=this.querySelector(".ct-pgn-viewer-board-and-move-list")).insertBefore(a.firstChild,l.firstChild),this.classList.add("ct-pgn-viewer"),this.classList.remove("ct-hidden"),"under"==this.getAttribute("move-list-position")&&this.classList.add("ct-pgn-viewer-move-position-under");case 40:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){console.log("pgn viewer detached"),this.hasAttribute("dont-destroy")||this.destroy()}},{key:"destroy",value:function(){console.log("DESTROYING PGN VIEWER"),this.getElementsByClassName("ct-pgn-viewer-multi-game-select")[0].removeEventListener("change",this._gameSelectorListener),this.moveList?this.moveList.destroy():console.error("Error got pgn viewer destroy with no move list"),this.board?this.board.destroy():console.error("Error got pgn viewer destroy with no board"),this.gameHeader&&this.gameHeader.destroy()}},{key:"setGameAnalysis",value:function(e,t,n){console.timeEnd("pgnViewerRequestFullGameAnalysis"),this._analysisGame&&(this._analysisGame.analysis=e),this._currentGame==this._analysisGame&&(console.time("pgnViewerShowEvalGraphFromAnalysis"),this.evalGraph.showEvalGraphFromAnalysis(e,t,n),console.timeEnd("pgnViewerShowEvalGraphFromAnalysis"))}},{key:"_gameAnalysisComplete",value:function(e){if(this.setGameAnalysis(e.analysis,e.difficulty),this._pendingAnIdx)if(this._pendingAnIdx<this.games.length){this.showGame(this._pendingAnIdx);var t=this.games[this._pendingAnIdx++];this._analysisGame=t,this.analysisPanel&&this.analysisPanel.requestFullGameAnalysis(this.moveList.moveList.getLalgArray(),t.get("startFen"))}else;}},{key:"setupFromURL",value:function(e){var t=this,n=(new Date).getTime()+"-"+parseInt(99999*Math.random());new i({target:e,type:"GET",withCredentials:!1,isJson:!1,handleError:function(e,t){console.log("error getting pgn:",e,t)},handleSuccess:function(e){console.log("PGN resp:",e),t.setupFromPGN(e)}}).send({rs:n})}},{key:"setupFromPGN",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=new vo;if(this._pendingAnIdx=0,C.resetStats(),s){var l=c.parsePGN(e);this._handleParseResult(l.errorString,l.pgnGames,n,r,o,i,a)}else c.parsePGN(e,(function(e,s){t._handleParseResult(e,s,n,r,o,i,a)}))}},{key:"_handleParseResult",value:function(e,t,n,r,o,i,a){if(e)this.moveList.getContainer().innerHTML=e;else{this.games=t;var s=!1;if(this.games.length){if(this.showGame(0),this.games.length>1){s=!0;var c=this.getAttribute("gameSelectFormatString")||void 0,l=this.games.map((function(e,t){return'<option value="'+t+'">'+(t+1)+". "+e.toString(c)+"</option>"})).join(""),u=this.getElementsByClassName("ct-pgn-viewer-multi-game-select")[0];u.innerHTML=l,u.setAttribute("selectedIndex",0)}if(o&&this.moveList.moveList.setThinkTimes(o),this.evalGraph&&n){var d=this.games[0];this._analysisGame=d,this.games.length>0&&this._m&&(this._pendingAnIdx=1),console.time("pgnViewerRequestFullGameAnalysis"),this.analysisPanel&&this.analysisPanel.requestFullGameAnalysis(this.moveList.moveList.getLalgArray(),d.get("startFen"))}if(this.evalGraph&&r){var h=this.games[0];this._analysisGame=h,this.setGameAnalysis(r,i,a)}}var p=this.getElementsByClassName("ct-pgn-viewer-multi-game-selector-panel")[0];s?p.classList.remove("ct-hidden"):p.classList.add("ct-hidden")}}},{key:"getStartPosition",value:function(){return this._currentGame?this._currentGameget("startFen"):C.INITIAL_FEN}},{key:"toPGN",value:function(){return this._currentGame?this._currentGame.toPGN():""}},{key:"showGame",value:function(e,t){this.board.initialise(),this._o.useGameHeader&&(this.gameHeader.game=this.games[e],this.gameHeader.render());var n=this.games[e];this._currentGame=n,this.board.setAnimsEnabled(!1);var r=this.board.getBoardSounds();r&&this.board.changeBoardSounds(!1,{persist:!1}),this.board.initFromFen(n.get("startFen")),this.moveList.setFromGame(n),this.hasAttribute("dont-jump-start")?(this.moveList.jumpToStart(),this.moveList.backMove()):this.moveList.jumpToStart(),r&&this.board.changeBoardSounds(!0,{persist:!1}),this.board.setAnimsEnabled(!0),this.hasAttribute("color-on-bottom")&&("black"==this.getAttribute("color-on-bottom")?this.board.setColourToBottom(b.BLACK):this.board.setColourToBottom(b.WHITE))}}]),r}(z.a);Go.tiledStyles=(Vo={metal:!0},babelHelpers.defineProperty(Vo,"wood-light",!0),babelHelpers.defineProperty(Vo,"wood-dark",!0),babelHelpers.defineProperty(Vo,"wood-medium",!0),babelHelpers.defineProperty(Vo,"marble-green",!0),babelHelpers.defineProperty(Vo,"marble-brown",!0),babelHelpers.defineProperty(Vo,"stucco",!0),babelHelpers.defineProperty(Vo,"camouflage",!0),babelHelpers.defineProperty(Vo,"cracked-stone",!0),babelHelpers.defineProperty(Vo,"fabric",!0),babelHelpers.defineProperty(Vo,"gold-silver",!0),babelHelpers.defineProperty(Vo,"granite",!0),babelHelpers.defineProperty(Vo,"grass",!0),babelHelpers.defineProperty(Vo,"leather",!0),babelHelpers.defineProperty(Vo,"sand-snow",!0),babelHelpers.defineProperty(Vo,"metal",!0),Vo),Go.componentName="pgn-viewer",r.a.define(Go);n(535),n(536);function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=babelHelpers.getPrototypeOf(e);if(t){var o=babelHelpers.getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,n)}}n.d(t,"CTPGNViewer",(function(){return Uo}));var Uo=function(e){babelHelpers.inherits(n,e);var t=Wo(n);function n(){return babelHelpers.classCallCheck(this,n),t.call(this)}return babelHelpers.createClass(n,[{key:"isExternal",value:function(){return!0}}]),n}(Go);window._ctDev||(window._ctLogLevel=2,window._ctSoundPath="https://c2a.chesstempo.com",window._ctImgPath="https://c2a.chesstempo.com",window._ctMomentLocale="en-ca"),Uo.componentName="ct-pgn-viewer",r.a.define(Uo)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n(10),i=n(8),a={ROOT:"mdc-form-field"},s={LABEL_SELECTOR:".mdc-form-field > label"},c=function(e){function t(n){var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.clickHandler_=function(){return o.handleClick_()},o}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_)},t.prototype.handleClick_=function(){var e=this;this.adapter_.activateInputRipple(),requestAnimationFrame((function(){return e.adapter_.deactivateInputRipple()}))},t}(i.a);n.d(t,"a",(function(){return l}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"input",{get:function(){return this.input_},set:function(e){this.input_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label_",{get:function(){var e=c.strings.LABEL_SELECTOR;return this.root_.querySelector(e)},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new c({activateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.activate()},deactivateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.deactivate()},deregisterInteractionHandler:function(t,n){e.label_&&e.label_.removeEventListener(t,n)},registerInteractionHandler:function(t,n){e.label_&&e.label_.addEventListener(t,n)}})},t}(o.a)}]);
//# sourceMappingURL=http://localhost:3002/maps/pgnviewerext.bundle.js.map